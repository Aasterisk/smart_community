!function(t){function e(i){if(n[i])return n[i].exports;var o=n[i]={i:i,l:!1,exports:{}};return t[i].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var n={};e.m=t,e.c=n,e.i=function(t){return t},e.d=function(t,n,i){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:i})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=180)}([function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={Help:{},Event:{},Overlay:{}};e.default=i},function(t,e,n){"use strict";(function(t){var i,o,r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(a,s,l){var u={version:"1.0.3+ed36a04"};"object"===r(t)&&"object"===r(t.exports)?t.exports=u:(i=u,void 0!==(o="function"==typeof i?i.call(e,n,e,t):i)&&(t.exports=o)),void 0!==a&&function(){var t=a.L;u.noConflict=function(){return a.L=t,this},a.L=u}(),u.Util={extend:function(t){var e,n,i,o;for(n=1,i=arguments.length;n<i;n++){o=arguments[n];for(e in o)t[e]=o[e]}return t},create:Object.create||function(){function t(){}return function(e){return t.prototype=e,new t}}(),bind:function(t,e){var n=Array.prototype.slice;if(t.bind)return t.bind.apply(t,n.call(arguments,1));var i=n.call(arguments,2);return function(){return t.apply(e,i.length?i.concat(n.call(arguments)):arguments)}},stamp:function(t){return t._leaflet_id=t._leaflet_id||++u.Util.lastId,t._leaflet_id},lastId:0,throttle:function(t,e,n){var i,o,r,a;return a=function(){i=!1,o&&(r.apply(n,o),o=!1)},r=function(){i?o=arguments:(t.apply(n,arguments),setTimeout(a,e),i=!0)}},wrapNum:function(t,e,n){var i=e[1],o=e[0],r=i-o;return t===i&&n?t:((t-o)%r+r)%r+o},falseFn:function(){return!1},formatNum:function(t,e){var n=Math.pow(10,e||5);return Math.round(t*n)/n},trim:function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")},splitWords:function(t){return u.Util.trim(t).split(/\s+/)},setOptions:function(t,e){t.hasOwnProperty("options")||(t.options=t.options?u.Util.create(t.options):{});for(var n in e)t.options[n]=e[n];return t.options},getParamString:function(t,e,n){var i=[];for(var o in t)i.push(encodeURIComponent(n?o.toUpperCase():o)+"="+encodeURIComponent(t[o]));return(e&&-1!==e.indexOf("?")?"&":"?")+i.join("&")},template:function(t,e){return t.replace(u.Util.templateRe,function(t,n){var i=e[n];if(void 0===i)throw new Error("No value provided for variable "+t);return"function"==typeof i&&(i=i(e)),i})},templateRe:/\{ *([\w_\-]+) *\}/g,isArray:Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},indexOf:function(t,e){for(var n=0;n<t.length;n++)if(t[n]===e)return n;return-1},emptyImageUrl:"data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs="},function(){function t(t){return a["webkit"+t]||a["moz"+t]||a["ms"+t]}function e(t){var e=+new Date,i=Math.max(0,16-(e-n));return n=e+i,a.setTimeout(t,i)}var n=0,i=a.requestAnimationFrame||t("RequestAnimationFrame")||e,o=a.cancelAnimationFrame||t("CancelAnimationFrame")||t("CancelRequestAnimationFrame")||function(t){a.clearTimeout(t)};u.Util.requestAnimFrame=function(t,n,o){if(!o||i!==e)return i.call(a,u.bind(t,n));t.call(n)},u.Util.cancelAnimFrame=function(t){t&&o.call(a,t)}}(),u.extend=u.Util.extend,u.bind=u.Util.bind,u.stamp=u.Util.stamp,u.setOptions=u.Util.setOptions,u.Class=function(){},u.Class.extend=function(t){var e=function(){this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},n=e.__super__=this.prototype,i=u.Util.create(n);i.constructor=e,e.prototype=i;for(var o in this)this.hasOwnProperty(o)&&"prototype"!==o&&(e[o]=this[o]);return t.statics&&(u.extend(e,t.statics),delete t.statics),t.includes&&(u.Util.extend.apply(null,[i].concat(t.includes)),delete t.includes),i.options&&(t.options=u.Util.extend(u.Util.create(i.options),t.options)),u.extend(i,t),i._initHooks=[],i.callInitHooks=function(){if(!this._initHooksCalled){n.callInitHooks&&n.callInitHooks.call(this),this._initHooksCalled=!0;for(var t=0,e=i._initHooks.length;t<e;t++)i._initHooks[t].call(this)}},e},u.Class.include=function(t){return u.extend(this.prototype,t),this},u.Class.mergeOptions=function(t){return u.extend(this.prototype.options,t),this},u.Class.addInitHook=function(t){var e=Array.prototype.slice.call(arguments,1),n="function"==typeof t?t:function(){this[t].apply(this,e)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(n),this},u.Evented=u.Class.extend({on:function(t,e,n){if("object"===(void 0===t?"undefined":r(t)))for(var i in t)this._on(i,t[i],e);else{t=u.Util.splitWords(t);for(var o=0,a=t.length;o<a;o++)this._on(t[o],e,n)}return this},off:function(t,e,n){if(t)if("object"===(void 0===t?"undefined":r(t)))for(var i in t)this._off(i,t[i],e);else{t=u.Util.splitWords(t);for(var o=0,a=t.length;o<a;o++)this._off(t[o],e,n)}else delete this._events;return this},_on:function(t,e,n){this._events=this._events||{};var i=this._events[t];i||(i=[],this._events[t]=i),n===this&&(n=void 0);for(var o={fn:e,ctx:n},r=i,a=0,s=r.length;a<s;a++)if(r[a].fn===e&&r[a].ctx===n)return;r.push(o)},_off:function(t,e,n){var i,o,r;if(this._events&&(i=this._events[t])){if(!e){for(o=0,r=i.length;o<r;o++)i[o].fn=u.Util.falseFn;return void delete this._events[t]}if(n===this&&(n=void 0),i)for(o=0,r=i.length;o<r;o++){var a=i[o];if(a.ctx===n&&a.fn===e)return a.fn=u.Util.falseFn,this._firingCount&&(this._events[t]=i=i.slice()),void i.splice(o,1)}}},fire:function(t,e,n){if(!this.listens(t,n))return this;var i=u.Util.extend({},e,{type:t,target:this});if(this._events){var o=this._events[t];if(o){this._firingCount=this._firingCount+1||1;for(var r=0,a=o.length;r<a;r++){var s=o[r];s.fn.call(s.ctx||this,i)}this._firingCount--}}return n&&this._propagateEvent(i),this},listens:function(t,e){var n=this._events&&this._events[t];if(n&&n.length)return!0;if(e)for(var i in this._eventParents)if(this._eventParents[i].listens(t,e))return!0;return!1},once:function(t,e,n){if("object"===(void 0===t?"undefined":r(t))){for(var i in t)this.once(i,t[i],e);return this}var o=u.bind(function(){this.off(t,e,n).off(t,o,n)},this);return this.on(t,e,n).on(t,o,n)},addEventParent:function(t){return this._eventParents=this._eventParents||{},this._eventParents[u.stamp(t)]=t,this},removeEventParent:function(t){return this._eventParents&&delete this._eventParents[u.stamp(t)],this},_propagateEvent:function(t){for(var e in this._eventParents)this._eventParents[e].fire(t.type,u.extend({layer:t.target},t),!0)}});var h=u.Evented.prototype;h.addEventListener=h.on,h.removeEventListener=h.clearAllEventListeners=h.off,h.addOneTimeEventListener=h.once,h.fireEvent=h.fire,h.hasEventListeners=h.listens,u.Mixin={Events:h},function(){var t=navigator.userAgent.toLowerCase(),e=s.documentElement,n="ActiveXObject"in a,i=-1!==t.indexOf("webkit"),o=-1!==t.indexOf("phantom"),r=-1!==t.search("android [23]"),l=-1!==t.indexOf("chrome"),h=-1!==t.indexOf("gecko")&&!i&&!a.opera&&!n,c=0===navigator.platform.indexOf("Win"),f="undefined"!=typeof orientation||-1!==t.indexOf("mobile"),p=!a.PointerEvent&&a.MSPointerEvent,d=a.PointerEvent||p,_=n&&"transition"in e.style,y="WebKitCSSMatrix"in a&&"m11"in new a.WebKitCSSMatrix&&!r,g="MozPerspective"in e.style,m="OTransition"in e.style,v=!a.L_NO_TOUCH&&(d||"ontouchstart"in a||a.DocumentTouch&&s instanceof a.DocumentTouch);u.Browser={ie:n,ielt9:n&&!s.addEventListener,edge:"msLaunchUri"in navigator&&!("documentMode"in s),webkit:i,gecko:h,android:-1!==t.indexOf("android"),android23:r,chrome:l,safari:!l&&-1!==t.indexOf("safari"),win:c,ie3d:_,webkit3d:y,gecko3d:g,opera12:m,any3d:!a.L_DISABLE_3D&&(_||y||g)&&!m&&!o,mobile:f,mobileWebkit:f&&i,mobileWebkit3d:f&&y,mobileOpera:f&&a.opera,mobileGecko:f&&h,touch:!!v,msPointer:!!p,pointer:!!d,retina:(a.devicePixelRatio||a.screen.deviceXDPI/a.screen.logicalXDPI)>1}}(),u.Point=function(t,e,n){this.x=n?Math.round(t):t,this.y=n?Math.round(e):e},u.Point.prototype={clone:function(){return new u.Point(this.x,this.y)},add:function(t){return this.clone()._add(u.point(t))},_add:function(t){return this.x+=t.x,this.y+=t.y,this},subtract:function(t){return this.clone()._subtract(u.point(t))},_subtract:function(t){return this.x-=t.x,this.y-=t.y,this},divideBy:function(t){return this.clone()._divideBy(t)},_divideBy:function(t){return this.x/=t,this.y/=t,this},multiplyBy:function(t){return this.clone()._multiplyBy(t)},_multiplyBy:function(t){return this.x*=t,this.y*=t,this},scaleBy:function(t){return new u.Point(this.x*t.x,this.y*t.y)},unscaleBy:function(t){return new u.Point(this.x/t.x,this.y/t.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},distanceTo:function(t){t=u.point(t);var e=t.x-this.x,n=t.y-this.y;return Math.sqrt(e*e+n*n)},equals:function(t){return t=u.point(t),t.x===this.x&&t.y===this.y},contains:function(t){return t=u.point(t),Math.abs(t.x)<=Math.abs(this.x)&&Math.abs(t.y)<=Math.abs(this.y)},toString:function(){return"Point("+u.Util.formatNum(this.x)+", "+u.Util.formatNum(this.y)+")"}},u.point=function(t,e,n){return t instanceof u.Point?t:u.Util.isArray(t)?new u.Point(t[0],t[1]):void 0===t||null===t?t:"object"===(void 0===t?"undefined":r(t))&&"x"in t&&"y"in t?new u.Point(t.x,t.y):new u.Point(t,e,n)},u.Bounds=function(t,e){if(t)for(var n=e?[t,e]:t,i=0,o=n.length;i<o;i++)this.extend(n[i])},u.Bounds.prototype={extend:function(t){return t=u.point(t),this.min||this.max?(this.min.x=Math.min(t.x,this.min.x),this.max.x=Math.max(t.x,this.max.x),this.min.y=Math.min(t.y,this.min.y),this.max.y=Math.max(t.y,this.max.y)):(this.min=t.clone(),this.max=t.clone()),this},getCenter:function(t){return new u.Point((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,t)},getBottomLeft:function(){return new u.Point(this.min.x,this.max.y)},getTopRight:function(){return new u.Point(this.max.x,this.min.y)},getSize:function(){return this.max.subtract(this.min)},contains:function(t){var e,n;return t="number"==typeof t[0]||t instanceof u.Point?u.point(t):u.bounds(t),t instanceof u.Bounds?(e=t.min,n=t.max):e=n=t,e.x>=this.min.x&&n.x<=this.max.x&&e.y>=this.min.y&&n.y<=this.max.y},intersects:function(t){t=u.bounds(t);var e=this.min,n=this.max,i=t.min,o=t.max,r=o.x>=e.x&&i.x<=n.x,a=o.y>=e.y&&i.y<=n.y;return r&&a},overlaps:function(t){t=u.bounds(t);var e=this.min,n=this.max,i=t.min,o=t.max,r=o.x>e.x&&i.x<n.x,a=o.y>e.y&&i.y<n.y;return r&&a},isValid:function(){return!(!this.min||!this.max)}},u.bounds=function(t,e){return!t||t instanceof u.Bounds?t:new u.Bounds(t,e)},u.Transformation=function(t,e,n,i){this._a=t,this._b=e,this._c=n,this._d=i},u.Transformation.prototype={transform:function(t,e){return this._transform(t.clone(),e)},_transform:function(t,e){return e=e||1,t.x=e*(this._a*t.x+this._b),t.y=e*(this._c*t.y+this._d),t},untransform:function(t,e){return e=e||1,new u.Point((t.x/e-this._b)/this._a,(t.y/e-this._d)/this._c)}},u.DomUtil={get:function(t){return"string"==typeof t?s.getElementById(t):t},getStyle:function(t,e){var n=t.style[e]||t.currentStyle&&t.currentStyle[e];if((!n||"auto"===n)&&s.defaultView){var i=s.defaultView.getComputedStyle(t,null);n=i?i[e]:null}return"auto"===n?null:n},create:function(t,e,n){var i=s.createElement(t);return i.className=e||"",n&&n.appendChild(i),i},remove:function(t){var e=t.parentNode;e&&e.removeChild(t)},empty:function(t){for(;t.firstChild;)t.removeChild(t.firstChild)},toFront:function(t){t.parentNode.appendChild(t)},toBack:function(t){var e=t.parentNode;e.insertBefore(t,e.firstChild)},hasClass:function(t,e){if(void 0!==t.classList)return t.classList.contains(e);var n=u.DomUtil.getClass(t);return n.length>0&&new RegExp("(^|\\s)"+e+"(\\s|$)").test(n)},addClass:function(t,e){if(void 0!==t.classList)for(var n=u.Util.splitWords(e),i=0,o=n.length;i<o;i++)t.classList.add(n[i]);else if(!u.DomUtil.hasClass(t,e)){var r=u.DomUtil.getClass(t);u.DomUtil.setClass(t,(r?r+" ":"")+e)}},removeClass:function(t,e){void 0!==t.classList?t.classList.remove(e):u.DomUtil.setClass(t,u.Util.trim((" "+u.DomUtil.getClass(t)+" ").replace(" "+e+" "," ")))},setClass:function(t,e){void 0===t.className.baseVal?t.className=e:t.className.baseVal=e},getClass:function(t){return void 0===t.className.baseVal?t.className:t.className.baseVal},setOpacity:function(t,e){"opacity"in t.style?t.style.opacity=e:"filter"in t.style&&u.DomUtil._setOpacityIE(t,e)},_setOpacityIE:function(t,e){var n=!1,i="DXImageTransform.Microsoft.Alpha";try{n=t.filters.item(i)}catch(t){if(1===e)return}e=Math.round(100*e),n?(n.Enabled=100!==e,n.Opacity=e):t.style.filter+=" progid:"+i+"(opacity="+e+")"},testProp:function(t){for(var e=s.documentElement.style,n=0;n<t.length;n++)if(t[n]in e)return t[n];return!1},setTransform:function(t,e,n){var i=e||new u.Point(0,0);t.style[u.DomUtil.TRANSFORM]=(u.Browser.ie3d?"translate("+i.x+"px,"+i.y+"px)":"translate3d("+i.x+"px,"+i.y+"px,0)")+(n?" scale("+n+")":"")},setPosition:function(t,e){t._leaflet_pos=e,u.Browser.any3d?u.DomUtil.setTransform(t,e):(t.style.left=e.x+"px",t.style.top=e.y+"px")},getPosition:function(t){return t._leaflet_pos||new u.Point(0,0)}},function(){u.DomUtil.TRANSFORM=u.DomUtil.testProp(["transform","WebkitTransform","OTransform","MozTransform","msTransform"]);var t=u.DomUtil.TRANSITION=u.DomUtil.testProp(["webkitTransition","transition","OTransition","MozTransition","msTransition"]);if(u.DomUtil.TRANSITION_END="webkitTransition"===t||"OTransition"===t?t+"End":"transitionend","onselectstart"in s)u.DomUtil.disableTextSelection=function(){u.DomEvent.on(a,"selectstart",u.DomEvent.preventDefault)},u.DomUtil.enableTextSelection=function(){u.DomEvent.off(a,"selectstart",u.DomEvent.preventDefault)};else{var e=u.DomUtil.testProp(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);u.DomUtil.disableTextSelection=function(){if(e){var t=s.documentElement.style;this._userSelect=t[e],t[e]="none"}},u.DomUtil.enableTextSelection=function(){e&&(s.documentElement.style[e]=this._userSelect,delete this._userSelect)}}u.DomUtil.disableImageDrag=function(){u.DomEvent.on(a,"dragstart",u.DomEvent.preventDefault)},u.DomUtil.enableImageDrag=function(){u.DomEvent.off(a,"dragstart",u.DomEvent.preventDefault)},u.DomUtil.preventOutline=function(t){for(;-1===t.tabIndex;)t=t.parentNode;t&&t.style&&(u.DomUtil.restoreOutline(),this._outlineElement=t,this._outlineStyle=t.style.outline,t.style.outline="none",u.DomEvent.on(a,"keydown",u.DomUtil.restoreOutline,this))},u.DomUtil.restoreOutline=function(){this._outlineElement&&(this._outlineElement.style.outline=this._outlineStyle,delete this._outlineElement,delete this._outlineStyle,u.DomEvent.off(a,"keydown",u.DomUtil.restoreOutline,this))}}(),u.LatLng=function(t,e,n){if(isNaN(t)||isNaN(e))throw new Error("Invalid LatLng object: ("+t+", "+e+")");this.lat=+t,this.lng=+e,void 0!==n&&(this.alt=+n)},u.LatLng.prototype={equals:function(t,e){return!!t&&(t=u.latLng(t),Math.max(Math.abs(this.lat-t.lat),Math.abs(this.lng-t.lng))<=(void 0===e?1e-9:e))},toString:function(t){return"LatLng("+u.Util.formatNum(this.lat,t)+", "+u.Util.formatNum(this.lng,t)+")"},distanceTo:function(t){return u.CRS.Earth.distance(this,u.latLng(t))},wrap:function(){return u.CRS.Earth.wrapLatLng(this)},toBounds:function(t){var e=180*t/40075017,n=e/Math.cos(Math.PI/180*this.lat);return u.latLngBounds([this.lat-e,this.lng-n],[this.lat+e,this.lng+n])},clone:function(){return new u.LatLng(this.lat,this.lng,this.alt)}},u.latLng=function(t,e,n){return t instanceof u.LatLng?t:u.Util.isArray(t)&&"object"!==r(t[0])?3===t.length?new u.LatLng(t[0],t[1],t[2]):2===t.length?new u.LatLng(t[0],t[1]):null:void 0===t||null===t?t:"object"===(void 0===t?"undefined":r(t))&&"lat"in t?new u.LatLng(t.lat,"lng"in t?t.lng:t.lon,t.alt):void 0===e?null:new u.LatLng(t,e,n)},u.LatLngBounds=function(t,e){if(t)for(var n=e?[t,e]:t,i=0,o=n.length;i<o;i++)this.extend(n[i])},u.LatLngBounds.prototype={extend:function(t){var e,n,i=this._southWest,o=this._northEast;if(t instanceof u.LatLng)e=t,n=t;else{if(!(t instanceof u.LatLngBounds))return t?this.extend(u.latLng(t)||u.latLngBounds(t)):this;if(e=t._southWest,n=t._northEast,!e||!n)return this}return i||o?(i.lat=Math.min(e.lat,i.lat),i.lng=Math.min(e.lng,i.lng),o.lat=Math.max(n.lat,o.lat),o.lng=Math.max(n.lng,o.lng)):(this._southWest=new u.LatLng(e.lat,e.lng),this._northEast=new u.LatLng(n.lat,n.lng)),this},pad:function(t){var e=this._southWest,n=this._northEast,i=Math.abs(e.lat-n.lat)*t,o=Math.abs(e.lng-n.lng)*t;return new u.LatLngBounds(new u.LatLng(e.lat-i,e.lng-o),new u.LatLng(n.lat+i,n.lng+o))},getCenter:function(){return new u.LatLng((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new u.LatLng(this.getNorth(),this.getWest())},getSouthEast:function(){return new u.LatLng(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(t){t="number"==typeof t[0]||t instanceof u.LatLng||"lat"in t?u.latLng(t):u.latLngBounds(t);var e,n,i=this._southWest,o=this._northEast;return t instanceof u.LatLngBounds?(e=t.getSouthWest(),n=t.getNorthEast()):e=n=t,e.lat>=i.lat&&n.lat<=o.lat&&e.lng>=i.lng&&n.lng<=o.lng},intersects:function(t){t=u.latLngBounds(t);var e=this._southWest,n=this._northEast,i=t.getSouthWest(),o=t.getNorthEast(),r=o.lat>=e.lat&&i.lat<=n.lat,a=o.lng>=e.lng&&i.lng<=n.lng;return r&&a},overlaps:function(t){t=u.latLngBounds(t);var e=this._southWest,n=this._northEast,i=t.getSouthWest(),o=t.getNorthEast(),r=o.lat>e.lat&&i.lat<n.lat,a=o.lng>e.lng&&i.lng<n.lng;return r&&a},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(t){return!!t&&(t=u.latLngBounds(t),this._southWest.equals(t.getSouthWest())&&this._northEast.equals(t.getNorthEast()))},isValid:function(){return!(!this._southWest||!this._northEast)}},u.latLngBounds=function(t,e){return t instanceof u.LatLngBounds?t:new u.LatLngBounds(t,e)},u.Projection={},u.Projection.LonLat={project:function(t){return new u.Point(t.lng,t.lat)},unproject:function(t){return new u.LatLng(t.y,t.x)},bounds:u.bounds([-180,-90],[180,90])},u.Projection.SphericalMercator={R:6378137,MAX_LATITUDE:85.0511287798,project:function(t){var e=Math.PI/180,n=this.MAX_LATITUDE,i=Math.max(Math.min(n,t.lat),-n),o=Math.sin(i*e);return new u.Point(this.R*t.lng*e,this.R*Math.log((1+o)/(1-o))/2)},unproject:function(t){var e=180/Math.PI;return new u.LatLng((2*Math.atan(Math.exp(t.y/this.R))-Math.PI/2)*e,t.x*e/this.R)},bounds:function(){var t=6378137*Math.PI;return u.bounds([-t,-t],[t,t])}()},u.CRS={latLngToPoint:function(t,e){var n=this.projection.project(t),i=this.scale(e);return this.transformation._transform(n,i)},pointToLatLng:function(t,e){var n=this.scale(e),i=this.transformation.untransform(t,n);return this.projection.unproject(i)},project:function(t){return this.projection.project(t)},unproject:function(t){return this.projection.unproject(t)},scale:function(t){return 256*Math.pow(2,t)},zoom:function(t){return Math.log(t/256)/Math.LN2},getProjectedBounds:function(t){if(this.infinite)return null;var e=this.projection.bounds,n=this.scale(t),i=this.transformation.transform(e.min,n),o=this.transformation.transform(e.max,n);return u.bounds(i,o)},infinite:!1,wrapLatLng:function(t){var e=this.wrapLng?u.Util.wrapNum(t.lng,this.wrapLng,!0):t.lng,n=this.wrapLat?u.Util.wrapNum(t.lat,this.wrapLat,!0):t.lat,i=t.alt;return u.latLng(n,e,i)},wrapLatLngBounds:function(t){var e=t.getCenter(),n=this.wrapLatLng(e),i=e.lat-n.lat,o=e.lng-n.lng;if(0===i&&0===o)return t;var r=t.getSouthWest(),a=t.getNorthEast(),s=u.latLng({lat:r.lat-i,lng:r.lng-o}),l=u.latLng({lat:a.lat-i,lng:a.lng-o});return new u.LatLngBounds(s,l)}},u.CRS.Simple=u.extend({},u.CRS,{projection:u.Projection.LonLat,transformation:new u.Transformation(1,0,-1,0),scale:function(t){return Math.pow(2,t)},zoom:function(t){return Math.log(t)/Math.LN2},distance:function(t,e){var n=e.lng-t.lng,i=e.lat-t.lat;return Math.sqrt(n*n+i*i)},infinite:!0}),u.CRS.Earth=u.extend({},u.CRS,{wrapLng:[-180,180],R:6371e3,distance:function(t,e){var n=Math.PI/180,i=t.lat*n,o=e.lat*n,r=Math.sin(i)*Math.sin(o)+Math.cos(i)*Math.cos(o)*Math.cos((e.lng-t.lng)*n);return this.R*Math.acos(Math.min(r,1))}}),u.CRS.EPSG3857=u.extend({},u.CRS.Earth,{code:"EPSG:3857",projection:u.Projection.SphericalMercator,transformation:function(){var t=.5/(Math.PI*u.Projection.SphericalMercator.R);return new u.Transformation(t,.5,-t,.5)}()}),u.CRS.EPSG900913=u.extend({},u.CRS.EPSG3857,{code:"EPSG:900913"}),u.CRS.EPSG4326=u.extend({},u.CRS.Earth,{code:"EPSG:4326",projection:u.Projection.LonLat,transformation:new u.Transformation(1/180,1,-1/180,.5)}),u.Map=u.Evented.extend({options:{crs:u.CRS.EPSG3857,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(t,e){e=u.setOptions(this,e),this._initContainer(t),this._initLayout(),this._onResize=u.bind(this._onResize,this),this._initEvents(),e.maxBounds&&this.setMaxBounds(e.maxBounds),void 0!==e.zoom&&(this._zoom=this._limitZoom(e.zoom)),e.center&&void 0!==e.zoom&&this.setView(u.latLng(e.center),e.zoom,{reset:!0}),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this.callInitHooks(),this._zoomAnimated=u.DomUtil.TRANSITION&&u.Browser.any3d&&!u.Browser.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),u.DomEvent.on(this._proxy,u.DomUtil.TRANSITION_END,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(t,e,n){if(e=void 0===e?this._zoom:this._limitZoom(e),t=this._limitCenter(u.latLng(t),e,this.options.maxBounds),n=n||{},this._stop(),this._loaded&&!n.reset&&!0!==n){void 0!==n.animate&&(n.zoom=u.extend({animate:n.animate},n.zoom),n.pan=u.extend({animate:n.animate,duration:n.duration},n.pan));if(this._zoom!==e?this._tryAnimatedZoom&&this._tryAnimatedZoom(t,e,n.zoom):this._tryAnimatedPan(t,n.pan))return clearTimeout(this._sizeTimer),this}return this._resetView(t,e),this},setZoom:function(t,e){return this._loaded?this.setView(this.getCenter(),t,{zoom:e}):(this._zoom=t,this)},zoomIn:function(t,e){return t=t||(u.Browser.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+t,e)},zoomOut:function(t,e){return t=t||(u.Browser.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-t,e)},setZoomAround:function(t,e,n){var i=this.getZoomScale(e),o=this.getSize().divideBy(2),r=t instanceof u.Point?t:this.latLngToContainerPoint(t),a=r.subtract(o).multiplyBy(1-1/i),s=this.containerPointToLatLng(o.add(a));return this.setView(s,e,{zoom:n})},_getBoundsCenterZoom:function(t,e){e=e||{},t=t.getBounds?t.getBounds():u.latLngBounds(t);var n=u.point(e.paddingTopLeft||e.padding||[0,0]),i=u.point(e.paddingBottomRight||e.padding||[0,0]),o=this.getBoundsZoom(t,!1,n.add(i));o="number"==typeof e.maxZoom?Math.min(e.maxZoom,o):o;var r=i.subtract(n).divideBy(2),a=this.project(t.getSouthWest(),o),s=this.project(t.getNorthEast(),o);return{center:this.unproject(a.add(s).divideBy(2).add(r),o),zoom:o}},fitBounds:function(t,e){if(t=u.latLngBounds(t),!t.isValid())throw new Error("Bounds are not valid.");var n=this._getBoundsCenterZoom(t,e);return this.setView(n.center,n.zoom,e)},fitWorld:function(t){return this.fitBounds([[-90,-180],[90,180]],t)},panTo:function(t,e){return this.setView(t,this._zoom,{pan:e})},panBy:function(t,e){if(t=u.point(t).round(),e=e||{},!t.x&&!t.y)return this.fire("moveend");if(!0!==e.animate&&!this.getSize().contains(t))return this._resetView(this.unproject(this.project(this.getCenter()).add(t)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new u.PosAnimation,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),e.noMoveStart||this.fire("movestart"),!1!==e.animate){u.DomUtil.addClass(this._mapPane,"leaflet-pan-anim");var n=this._getMapPanePos().subtract(t).round();this._panAnim.run(this._mapPane,n,e.duration||.25,e.easeLinearity)}else this._rawPanBy(t),this.fire("move").fire("moveend");return this},flyTo:function(t,e,n){function i(t){var e=t?-1:1,n=t?g:y,i=g*g-y*y+e*b*b*m*m,o=2*n*b*m,r=i/o,a=Math.sqrt(r*r+1)-r;return a<1e-9?-18:Math.log(a)}function o(t){return(Math.exp(t)-Math.exp(-t))/2}function r(t){return(Math.exp(t)+Math.exp(-t))/2}function a(t){return o(t)/r(t)}function s(t){return y*(r(L)/r(L+v*t))}function l(t){return y*(r(L)*a(L+v*t)-o(L))/b}function h(t){return 1-Math.pow(1-t,1.5)}function c(){var n=(Date.now()-w)/x,i=h(n)*k;n<=1?(this._flyToFrame=u.Util.requestAnimFrame(c,this),this._move(this.unproject(f.add(p.subtract(f).multiplyBy(l(i)/m)),_),this.getScaleZoom(y/s(i),_),{flyTo:!0})):this._move(t,e)._moveEnd(!0)}if(n=n||{},!1===n.animate||!u.Browser.any3d)return this.setView(t,e,n);this._stop();var f=this.project(this.getCenter()),p=this.project(t),d=this.getSize(),_=this._zoom;t=u.latLng(t),e=void 0===e?_:e;var y=Math.max(d.x,d.y),g=y*this.getZoomScale(_,e),m=p.distanceTo(f)||1,v=1.42,b=v*v,L=i(0),w=Date.now(),k=(i(1)-L)/v,x=n.duration?1e3*n.duration:1e3*k*.8;return this._moveStart(!0),c.call(this),this},flyToBounds:function(t,e){var n=this._getBoundsCenterZoom(t,e);return this.flyTo(n.center,n.zoom,e)},setMaxBounds:function(t){return t=u.latLngBounds(t),t.isValid()?(this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this.options.maxBounds=t,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this.off("moveend",this._panInsideMaxBounds))},setMinZoom:function(t){return this.options.minZoom=t,this._loaded&&this.getZoom()<this.options.minZoom?this.setZoom(t):this},setMaxZoom:function(t){return this.options.maxZoom=t,this._loaded&&this.getZoom()>this.options.maxZoom?this.setZoom(t):this},panInsideBounds:function(t,e){this._enforcingBounds=!0;var n=this.getCenter(),i=this._limitCenter(n,this._zoom,u.latLngBounds(t));return n.equals(i)||this.panTo(i,e),this._enforcingBounds=!1,this},invalidateSize:function(t){if(!this._loaded)return this;t=u.extend({animate:!1,pan:!0},!0===t?{animate:!0}:t);var e=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var n=this.getSize(),i=e.divideBy(2).round(),o=n.divideBy(2).round(),r=i.subtract(o);return r.x||r.y?(t.animate&&t.pan?this.panBy(r):(t.pan&&this._rawPanBy(r),this.fire("move"),t.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(u.bind(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:e,newSize:n})):this},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(t){if(t=this._locateOptions=u.extend({timeout:1e4,watch:!1},t),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var e=u.bind(this._handleGeolocationResponse,this),n=u.bind(this._handleGeolocationError,this);return t.watch?this._locationWatchId=navigator.geolocation.watchPosition(e,n,t):navigator.geolocation.getCurrentPosition(e,n,t),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(t){var e=t.code,n=t.message||(1===e?"permission denied":2===e?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:e,message:"Geolocation error: "+n+"."})},_handleGeolocationResponse:function(t){var e=t.coords.latitude,n=t.coords.longitude,i=new u.LatLng(e,n),o=i.toBounds(t.coords.accuracy),r=this._locateOptions;if(r.setView){var a=this.getBoundsZoom(o);this.setView(i,r.maxZoom?Math.min(a,r.maxZoom):a)}var s={latlng:i,bounds:o,timestamp:t.timestamp};for(var l in t.coords)"number"==typeof t.coords[l]&&(s[l]=t.coords[l]);this.fire("locationfound",s)},addHandler:function(t,e){if(!e)return this;var n=this[t]=new e(this);return this._handlers.push(n),this.options[t]&&n.enable(),this},remove:function(){if(this._initEvents(!0),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch(t){this._container._leaflet_id=void 0,this._containerId=void 0}u.DomUtil.remove(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._clearHandlers(),this._loaded&&this.fire("unload");for(var t in this._layers)this._layers[t].remove();return this},createPane:function(t,e){var n="leaflet-pane"+(t?" leaflet-"+t.replace("Pane","")+"-pane":""),i=u.DomUtil.create("div",n,e||this._mapPane);return t&&(this._panes[t]=i),i},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter:this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var t=this.getPixelBounds(),e=this.unproject(t.getBottomLeft()),n=this.unproject(t.getTopRight());return new u.LatLngBounds(e,n)},getMinZoom:function(){return void 0===this.options.minZoom?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return void 0===this.options.maxZoom?void 0===this._layersMaxZoom?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(t,e,n){t=u.latLngBounds(t),n=u.point(n||[0,0]);var i=this.getZoom()||0,o=this.getMinZoom(),r=this.getMaxZoom(),a=t.getNorthWest(),s=t.getSouthEast(),l=this.getSize().subtract(n),h=u.bounds(this.project(s,i),this.project(a,i)).getSize(),c=u.Browser.any3d?this.options.zoomSnap:1,f=Math.min(l.x/h.x,l.y/h.y);return i=this.getScaleZoom(f,i),c&&(i=Math.round(i/(c/100))*(c/100),i=e?Math.ceil(i/c)*c:Math.floor(i/c)*c),Math.max(o,Math.min(r,i))},getSize:function(){return this._size&&!this._sizeChanged||(this._size=new u.Point(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(t,e){var n=this._getTopLeftPoint(t,e);return new u.Bounds(n,n.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(t){return this.options.crs.getProjectedBounds(void 0===t?this.getZoom():t)},getPane:function(t){return"string"==typeof t?this._panes[t]:t},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(t,e){var n=this.options.crs;return e=void 0===e?this._zoom:e,n.scale(t)/n.scale(e)},getScaleZoom:function(t,e){var n=this.options.crs;e=void 0===e?this._zoom:e;var i=n.zoom(t*n.scale(e));return isNaN(i)?1/0:i},project:function(t,e){return e=void 0===e?this._zoom:e,this.options.crs.latLngToPoint(u.latLng(t),e)},unproject:function(t,e){return e=void 0===e?this._zoom:e,this.options.crs.pointToLatLng(u.point(t),e)},layerPointToLatLng:function(t){var e=u.point(t).add(this.getPixelOrigin());return this.unproject(e)},latLngToLayerPoint:function(t){return this.project(u.latLng(t))._round()._subtract(this.getPixelOrigin())},wrapLatLng:function(t){return this.options.crs.wrapLatLng(u.latLng(t))},wrapLatLngBounds:function(t){return this.options.crs.wrapLatLngBounds(u.latLngBounds(t))},distance:function(t,e){return this.options.crs.distance(u.latLng(t),u.latLng(e))},containerPointToLayerPoint:function(t){return u.point(t).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(t){return u.point(t).add(this._getMapPanePos())},containerPointToLatLng:function(t){var e=this.containerPointToLayerPoint(u.point(t));return this.layerPointToLatLng(e)},latLngToContainerPoint:function(t){return this.layerPointToContainerPoint(this.latLngToLayerPoint(u.latLng(t)))},mouseEventToContainerPoint:function(t){return u.DomEvent.getMousePosition(t,this._container)},mouseEventToLayerPoint:function(t){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(t))},mouseEventToLatLng:function(t){return this.layerPointToLatLng(this.mouseEventToLayerPoint(t))},_initContainer:function(t){var e=this._container=u.DomUtil.get(t);if(!e)throw new Error("Map container not found.");if(e._leaflet_id)throw new Error("Map container is already initialized.");u.DomEvent.addListener(e,"scroll",this._onScroll,this),this._containerId=u.Util.stamp(e)},_initLayout:function(){var t=this._container;this._fadeAnimated=this.options.fadeAnimation&&u.Browser.any3d,u.DomUtil.addClass(t,"leaflet-container"+(u.Browser.touch?" leaflet-touch":"")+(u.Browser.retina?" leaflet-retina":"")+(u.Browser.ielt9?" leaflet-oldie":"")+(u.Browser.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var e=u.DomUtil.getStyle(t,"position");"absolute"!==e&&"relative"!==e&&"fixed"!==e&&(t.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var t=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),u.DomUtil.setPosition(this._mapPane,new u.Point(0,0)),this.createPane("tilePane"),this.createPane("shadowPane"),this.createPane("overlayPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(u.DomUtil.addClass(t.markerPane,"leaflet-zoom-hide"),u.DomUtil.addClass(t.shadowPane,"leaflet-zoom-hide"))},_resetView:function(t,e){u.DomUtil.setPosition(this._mapPane,new u.Point(0,0));var n=!this._loaded;this._loaded=!0,e=this._limitZoom(e),this.fire("viewprereset");var i=this._zoom!==e;this._moveStart(i)._move(t,e)._moveEnd(i),this.fire("viewreset"),n&&this.fire("load")},_moveStart:function(t){return t&&this.fire("zoomstart"),this.fire("movestart")},_move:function(t,e,n){void 0===e&&(e=this._zoom);var i=this._zoom!==e;return this._zoom=e,this._lastCenter=t,this._pixelOrigin=this._getNewPixelOrigin(t),(i||n&&n.pinch)&&this.fire("zoom",n),this.fire("move",n)},_moveEnd:function(t){return t&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return u.Util.cancelAnimFrame(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(t){u.DomUtil.setPosition(this._mapPane,this._getMapPanePos().subtract(t))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(t){if(u.DomEvent){this._targets={},this._targets[u.stamp(this._container)]=this;var e=t?"off":"on";u.DomEvent[e](this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress",this._handleDOMEvent,this),this.options.trackResize&&u.DomEvent[e](a,"resize",this._onResize,this),u.Browser.any3d&&this.options.transform3DLimit&&this[e]("moveend",this._onMoveEnd)}},_onResize:function(){u.Util.cancelAnimFrame(this._resizeRequest),this._resizeRequest=u.Util.requestAnimFrame(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var t=this._getMapPanePos();Math.max(Math.abs(t.x),Math.abs(t.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(t,e){for(var n,i=[],o="mouseout"===e||"mouseover"===e,r=t.target||t.srcElement,a=!1;r;){if((n=this._targets[u.stamp(r)])&&("click"===e||"preclick"===e)&&!t._simulated&&this._draggableMoved(n)){a=!0;break}if(n&&n.listens(e,!0)){if(o&&!u.DomEvent._isExternalTarget(r,t))break;if(i.push(n),o)break}if(r===this._container)break;r=r.parentNode}return i.length||a||o||!u.DomEvent._isExternalTarget(r,t)||(i=[this]),i},_handleDOMEvent:function(t){if(this._loaded&&!u.DomEvent._skipped(t)){var e="keypress"===t.type&&13===t.keyCode?"click":t.type;"mousedown"===e&&u.DomUtil.preventOutline(t.target||t.srcElement),this._fireDOMEvent(t,e)}},_fireDOMEvent:function(t,e,n){if("click"===t.type){var i=u.Util.extend({},t);i.type="preclick",this._fireDOMEvent(i,i.type,n)}if(!t._stopped&&(n=(n||[]).concat(this._findEventTargets(t,e)),n.length)){var o=n[0];"contextmenu"===e&&o.listens(e,!0)&&u.DomEvent.preventDefault(t);var r={originalEvent:t};if("keypress"!==t.type){var a=o instanceof u.Marker;r.containerPoint=a?this.latLngToContainerPoint(o.getLatLng()):this.mouseEventToContainerPoint(t),r.layerPoint=this.containerPointToLayerPoint(r.containerPoint),r.latlng=a?o.getLatLng():this.layerPointToLatLng(r.layerPoint)}for(var s=0;s<n.length;s++)if(n[s].fire(e,r,!0),r.originalEvent._stopped||n[s].options.nonBubblingEvents&&-1!==u.Util.indexOf(n[s].options.nonBubblingEvents,e))return}},_draggableMoved:function(t){return t=t.dragging&&t.dragging.enabled()?t:this,t.dragging&&t.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var t=0,e=this._handlers.length;t<e;t++)this._handlers[t].disable()},whenReady:function(t,e){return this._loaded?t.call(e||this,{target:this}):this.on("load",t,e),this},_getMapPanePos:function(){return u.DomUtil.getPosition(this._mapPane)||new u.Point(0,0)},_moved:function(){var t=this._getMapPanePos();return t&&!t.equals([0,0])},_getTopLeftPoint:function(t,e){return(t&&void 0!==e?this._getNewPixelOrigin(t,e):this.getPixelOrigin()).subtract(this._getMapPanePos())},_getNewPixelOrigin:function(t,e){var n=this.getSize()._divideBy(2);return this.project(t,e)._subtract(n)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(t,e,n){var i=this._getNewPixelOrigin(n,e);return this.project(t,e)._subtract(i)},_latLngBoundsToNewLayerBounds:function(t,e,n){var i=this._getNewPixelOrigin(n,e);return u.bounds([this.project(t.getSouthWest(),e)._subtract(i),this.project(t.getNorthWest(),e)._subtract(i),this.project(t.getSouthEast(),e)._subtract(i),this.project(t.getNorthEast(),e)._subtract(i)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(t){return this.latLngToLayerPoint(t).subtract(this._getCenterLayerPoint())},_limitCenter:function(t,e,n){if(!n)return t;var i=this.project(t,e),o=this.getSize().divideBy(2),r=new u.Bounds(i.subtract(o),i.add(o)),a=this._getBoundsOffset(r,n,e);return a.round().equals([0,0])?t:this.unproject(i.add(a),e)},_limitOffset:function(t,e){if(!e)return t;var n=this.getPixelBounds(),i=new u.Bounds(n.min.add(t),n.max.add(t));return t.add(this._getBoundsOffset(i,e))},_getBoundsOffset:function(t,e,n){var i=u.bounds(this.project(e.getNorthEast(),n),this.project(e.getSouthWest(),n)),o=i.min.subtract(t.min),r=i.max.subtract(t.max),a=this._rebound(o.x,-r.x),s=this._rebound(o.y,-r.y);return new u.Point(a,s)},_rebound:function(t,e){return t+e>0?Math.round(t-e)/2:Math.max(0,Math.ceil(t))-Math.max(0,Math.floor(e))},_limitZoom:function(t){var e=this.getMinZoom(),n=this.getMaxZoom(),i=u.Browser.any3d?this.options.zoomSnap:1;return i&&(t=Math.round(t/i)*i),Math.max(e,Math.min(n,t))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){u.DomUtil.removeClass(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(t,e){var n=this._getCenterOffset(t)._floor();return!(!0!==(e&&e.animate)&&!this.getSize().contains(n))&&(this.panBy(n,e),!0)},_createAnimProxy:function(){var t=this._proxy=u.DomUtil.create("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(t),this.on("zoomanim",function(e){var n=u.DomUtil.TRANSFORM,i=t.style[n];u.DomUtil.setTransform(t,this.project(e.center,e.zoom),this.getZoomScale(e.zoom,1)),i===t.style[n]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",function(){var e=this.getCenter(),n=this.getZoom();u.DomUtil.setTransform(t,this.project(e,n),this.getZoomScale(n,1))},this)},_catchTransitionEnd:function(t){this._animatingZoom&&t.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(t,e,n){if(this._animatingZoom)return!0;if(n=n||{},!this._zoomAnimated||!1===n.animate||this._nothingToAnimate()||Math.abs(e-this._zoom)>this.options.zoomAnimationThreshold)return!1;var i=this.getZoomScale(e),o=this._getCenterOffset(t)._divideBy(1-1/i);return!(!0!==n.animate&&!this.getSize().contains(o))&&(u.Util.requestAnimFrame(function(){this._moveStart(!0)._animateZoom(t,e,!0)},this),!0)},_animateZoom:function(t,e,n,i){n&&(this._animatingZoom=!0,this._animateToCenter=t,this._animateToZoom=e,u.DomUtil.addClass(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:t,zoom:e,noUpdate:i}),setTimeout(u.bind(this._onZoomTransitionEnd,this),250)},_onZoomTransitionEnd:function(){this._animatingZoom&&(u.DomUtil.removeClass(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom),u.Util.requestAnimFrame(function(){this._moveEnd(!0)},this))}}),u.map=function(t,e){return new u.Map(t,e)},u.Layer=u.Evented.extend({options:{pane:"overlayPane",nonBubblingEvents:[],attribution:null},addTo:function(t){return t.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(t){return t&&t.removeLayer(this),this},getPane:function(t){return this._map.getPane(t?this.options[t]||t:this.options.pane)},addInteractiveTarget:function(t){return this._map._targets[u.stamp(t)]=this,this},removeInteractiveTarget:function(t){return delete this._map._targets[u.stamp(t)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(t){var e=t.target;if(e.hasLayer(this)){if(this._map=e,this._zoomAnimated=e._zoomAnimated,this.getEvents){var n=this.getEvents();e.on(n,this),this.once("remove",function(){e.off(n,this)},this)}this.onAdd(e),this.getAttribution&&e.attributionControl&&e.attributionControl.addAttribution(this.getAttribution()),this.fire("add"),e.fire("layeradd",{layer:this})}}}),u.Map.include({addLayer:function(t){var e=u.stamp(t);return this._layers[e]?this:(this._layers[e]=t,t._mapToAdd=this,t.beforeAdd&&t.beforeAdd(this),this.whenReady(t._layerAdd,t),this)},removeLayer:function(t){var e=u.stamp(t);return this._layers[e]?(this._loaded&&t.onRemove(this),t.getAttribution&&this.attributionControl&&this.attributionControl.removeAttribution(t.getAttribution()),delete this._layers[e],this._loaded&&(this.fire("layerremove",{layer:t}),t.fire("remove")),t._map=t._mapToAdd=null,this):this},hasLayer:function(t){return!!t&&u.stamp(t)in this._layers},eachLayer:function(t,e){for(var n in this._layers)t.call(e,this._layers[n]);return this},_addLayers:function(t){t=t?u.Util.isArray(t)?t:[t]:[];for(var e=0,n=t.length;e<n;e++)this.addLayer(t[e])},_addZoomLimit:function(t){!isNaN(t.options.maxZoom)&&isNaN(t.options.minZoom)||(this._zoomBoundLayers[u.stamp(t)]=t,this._updateZoomLevels())},_removeZoomLimit:function(t){var e=u.stamp(t);this._zoomBoundLayers[e]&&(delete this._zoomBoundLayers[e],this._updateZoomLevels())},_updateZoomLevels:function(){var t=1/0,e=-1/0,n=this._getZoomSpan();for(var i in this._zoomBoundLayers){var o=this._zoomBoundLayers[i].options;t=void 0===o.minZoom?t:Math.min(t,o.minZoom),e=void 0===o.maxZoom?e:Math.max(e,o.maxZoom)}this._layersMaxZoom=e===-1/0?void 0:e,this._layersMinZoom=t===1/0?void 0:t,n!==this._getZoomSpan()&&this.fire("zoomlevelschange"),void 0===this.options.maxZoom&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),void 0===this.options.minZoom&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var c="_leaflet_events";u.DomEvent={on:function(t,e,n,i){if("object"===(void 0===e?"undefined":r(e)))for(var o in e)this._on(t,o,e[o],n);else{e=u.Util.splitWords(e);for(var a=0,s=e.length;a<s;a++)this._on(t,e[a],n,i)}return this},off:function(t,e,n,i){if("object"===(void 0===e?"undefined":r(e)))for(var o in e)this._off(t,o,e[o],n);else{e=u.Util.splitWords(e);for(var a=0,s=e.length;a<s;a++)this._off(t,e[a],n,i)}return this},_on:function(t,e,n,i){var o=e+u.stamp(n)+(i?"_"+u.stamp(i):"");if(t[c]&&t[c][o])return this;var r=function(e){return n.call(i||t,e||a.event)},s=r;return u.Browser.pointer&&0===e.indexOf("touch")?this.addPointerListener(t,e,r,o):!u.Browser.touch||"dblclick"!==e||!this.addDoubleTapListener||u.Browser.pointer&&u.Browser.chrome?"addEventListener"in t?"mousewheel"===e?t.addEventListener("onwheel"in t?"wheel":"mousewheel",r,!1):"mouseenter"===e||"mouseleave"===e?(r=function(e){e=e||a.event,u.DomEvent._isExternalTarget(t,e)&&s(e)},t.addEventListener("mouseenter"===e?"mouseover":"mouseout",r,!1)):("click"===e&&u.Browser.android&&(r=function(t){return u.DomEvent._filterClick(t,s)}),t.addEventListener(e,r,!1)):"attachEvent"in t&&t.attachEvent("on"+e,r):this.addDoubleTapListener(t,r,o),t[c]=t[c]||{},t[c][o]=r,this},_off:function(t,e,n,i){var o=e+u.stamp(n)+(i?"_"+u.stamp(i):""),r=t[c]&&t[c][o];return r?(u.Browser.pointer&&0===e.indexOf("touch")?this.removePointerListener(t,e,o):u.Browser.touch&&"dblclick"===e&&this.removeDoubleTapListener?this.removeDoubleTapListener(t,o):"removeEventListener"in t?"mousewheel"===e?t.removeEventListener("onwheel"in t?"wheel":"mousewheel",r,!1):t.removeEventListener("mouseenter"===e?"mouseover":"mouseleave"===e?"mouseout":e,r,!1):"detachEvent"in t&&t.detachEvent("on"+e,r),t[c][o]=null,this):this},stopPropagation:function(t){return t.stopPropagation?t.stopPropagation():t.originalEvent?t.originalEvent._stopped=!0:t.cancelBubble=!0,u.DomEvent._skipped(t),this},disableScrollPropagation:function(t){return u.DomEvent.on(t,"mousewheel",u.DomEvent.stopPropagation)},disableClickPropagation:function(t){var e=u.DomEvent.stopPropagation;return u.DomEvent.on(t,u.Draggable.START.join(" "),e),u.DomEvent.on(t,{click:u.DomEvent._fakeStop,dblclick:e})},preventDefault:function(t){return t.preventDefault?t.preventDefault():t.returnValue=!1,this},stop:function(t){return u.DomEvent.preventDefault(t).stopPropagation(t)},getMousePosition:function(t,e){if(!e)return new u.Point(t.clientX,t.clientY);var n=e.getBoundingClientRect();return new u.Point(t.clientX-n.left-e.clientLeft,t.clientY-n.top-e.clientTop)},_wheelPxFactor:u.Browser.win&&u.Browser.chrome?2:u.Browser.gecko?a.devicePixelRatio:1,getWheelDelta:function(t){return u.Browser.edge?t.wheelDeltaY/2:t.deltaY&&0===t.deltaMode?-t.deltaY/u.DomEvent._wheelPxFactor:t.deltaY&&1===t.deltaMode?20*-t.deltaY:t.deltaY&&2===t.deltaMode?60*-t.deltaY:t.deltaX||t.deltaZ?0:t.wheelDelta?(t.wheelDeltaY||t.wheelDelta)/2:t.detail&&Math.abs(t.detail)<32765?20*-t.detail:t.detail?t.detail/-32765*60:0},_skipEvents:{},_fakeStop:function(t){u.DomEvent._skipEvents[t.type]=!0},_skipped:function(t){var e=this._skipEvents[t.type];return this._skipEvents[t.type]=!1,e},_isExternalTarget:function(t,e){var n=e.relatedTarget;if(!n)return!0;try{for(;n&&n!==t;)n=n.parentNode}catch(t){return!1}return n!==t},_filterClick:function(t,e){var n=t.timeStamp||t.originalEvent&&t.originalEvent.timeStamp,i=u.DomEvent._lastClick&&n-u.DomEvent._lastClick;if(i&&i>100&&i<500||t.target._simulatedClick&&!t._simulated)return void u.DomEvent.stop(t);u.DomEvent._lastClick=n,e(t)}},u.DomEvent.addListener=u.DomEvent.on,u.DomEvent.removeListener=u.DomEvent.off,u.PosAnimation=u.Evented.extend({run:function(t,e,n,i){this.stop(),this._el=t,this._inProgress=!0,this._duration=n||.25,this._easeOutPower=1/Math.max(i||.5,.2),this._startPos=u.DomUtil.getPosition(t),this._offset=e.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=u.Util.requestAnimFrame(this._animate,this),this._step()},_step:function(t){var e=+new Date-this._startTime,n=1e3*this._duration;e<n?this._runFrame(this._easeOut(e/n),t):(this._runFrame(1),this._complete())},_runFrame:function(t,e){var n=this._startPos.add(this._offset.multiplyBy(t));e&&n._round(),u.DomUtil.setPosition(this._el,n),this.fire("step")},_complete:function(){u.Util.cancelAnimFrame(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(t){return 1-Math.pow(1-t,this._easeOutPower)}}),u.Projection.Mercator={R:6378137,R_MINOR:6356752.314245179,bounds:u.bounds([-20037508.34279,-15496570.73972],[20037508.34279,18764656.23138]),project:function(t){var e=Math.PI/180,n=this.R,i=t.lat*e,o=this.R_MINOR/n,r=Math.sqrt(1-o*o),a=r*Math.sin(i),s=Math.tan(Math.PI/4-i/2)/Math.pow((1-a)/(1+a),r/2);return i=-n*Math.log(Math.max(s,1e-10)),new u.Point(t.lng*e*n,i)},unproject:function(t){for(var e,n=180/Math.PI,i=this.R,o=this.R_MINOR/i,r=Math.sqrt(1-o*o),a=Math.exp(-t.y/i),s=Math.PI/2-2*Math.atan(a),l=0,h=.1;l<15&&Math.abs(h)>1e-7;l++)e=r*Math.sin(s),e=Math.pow((1-e)/(1+e),r/2),h=Math.PI/2-2*Math.atan(a*e)-s,s+=h;return new u.LatLng(s*n,t.x*n/i)}},u.CRS.EPSG3395=u.extend({},u.CRS.Earth,{code:"EPSG:3395",projection:u.Projection.Mercator,transformation:function(){var t=.5/(Math.PI*u.Projection.Mercator.R);return new u.Transformation(t,.5,-t,.5)}()}),u.GridLayer=u.Layer.extend({options:{tileSize:256,opacity:1,updateWhenIdle:u.Browser.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(t){u.setOptions(this,t)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView(),this._update()},beforeAdd:function(t){t._addZoomLimit(this)},onRemove:function(t){this._removeAllTiles(),u.DomUtil.remove(this._container),t._removeZoomLimit(this),this._container=null,this._tileZoom=null},bringToFront:function(){return this._map&&(u.DomUtil.toFront(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(u.DomUtil.toBack(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(t){return this.options.opacity=t,this._updateOpacity(),this},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){return this._map&&(this._removeAllTiles(),this._update()),this},getEvents:function(){var t={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=u.Util.throttle(this._onMoveEnd,this.options.updateInterval,this)),t.move=this._onMove),this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},createTile:function(){return s.createElement("div")},getTileSize:function(){var t=this.options.tileSize;return t instanceof u.Point?t:new u.Point(t,t)},_updateZIndex:function(){this._container&&void 0!==this.options.zIndex&&null!==this.options.zIndex&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(t){for(var e,n=this.getPane().children,i=-t(-1/0,1/0),o=0,r=n.length;o<r;o++)e=n[o].style.zIndex,n[o]!==this._container&&e&&(i=t(i,+e));isFinite(i)&&(this.options.zIndex=i+t(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!u.Browser.ielt9){u.DomUtil.setOpacity(this._container,this.options.opacity);var t=+new Date,e=!1,n=!1;for(var i in this._tiles){var o=this._tiles[i];if(o.current&&o.loaded){var r=Math.min(1,(t-o.loaded)/200);u.DomUtil.setOpacity(o.el,r),r<1?e=!0:(o.active&&(n=!0),o.active=!0)}}n&&!this._noPrune&&this._pruneTiles(),e&&(u.Util.cancelAnimFrame(this._fadeFrame),this._fadeFrame=u.Util.requestAnimFrame(this._updateOpacity,this))}},_initContainer:function(){this._container||(this._container=u.DomUtil.create("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var t=this._tileZoom,e=this.options.maxZoom;if(void 0!==t){for(var n in this._levels)this._levels[n].el.children.length||n===t?this._levels[n].el.style.zIndex=e-Math.abs(t-n):(u.DomUtil.remove(this._levels[n].el),this._removeTilesAtZoom(n),delete this._levels[n]);var i=this._levels[t],o=this._map;return i||(i=this._levels[t]={},i.el=u.DomUtil.create("div","leaflet-tile-container leaflet-zoom-animated",this._container),i.el.style.zIndex=e,i.origin=o.project(o.unproject(o.getPixelOrigin()),t).round(),i.zoom=t,this._setZoomTransform(i,o.getCenter(),o.getZoom()),u.Util.falseFn(i.el.offsetWidth)),this._level=i,i}},_pruneTiles:function(){if(this._map){var t,e,n=this._map.getZoom();if(n>this.options.maxZoom||n<this.options.minZoom)return void this._removeAllTiles();for(t in this._tiles)e=this._tiles[t],e.retain=e.current;for(t in this._tiles)if(e=this._tiles[t],e.current&&!e.active){var i=e.coords;this._retainParent(i.x,i.y,i.z,i.z-5)||this._retainChildren(i.x,i.y,i.z,i.z+2)}for(t in this._tiles)this._tiles[t].retain||this._removeTile(t)}},_removeTilesAtZoom:function(t){for(var e in this._tiles)this._tiles[e].coords.z===t&&this._removeTile(e)},_removeAllTiles:function(){for(var t in this._tiles)this._removeTile(t)},_invalidateAll:function(){for(var t in this._levels)u.DomUtil.remove(this._levels[t].el),delete this._levels[t];this._removeAllTiles(),this._tileZoom=null},_retainParent:function(t,e,n,i){var o=Math.floor(t/2),r=Math.floor(e/2),a=n-1,s=new u.Point(+o,+r);s.z=+a;var l=this._tileCoordsToKey(s),h=this._tiles[l];return h&&h.active?(h.retain=!0,!0):(h&&h.loaded&&(h.retain=!0),a>i&&this._retainParent(o,r,a,i))},_retainChildren:function(t,e,n,i){for(var o=2*t;o<2*t+2;o++)for(var r=2*e;r<2*e+2;r++){var a=new u.Point(o,r);a.z=n+1;var s=this._tileCoordsToKey(a),l=this._tiles[s];l&&l.active?l.retain=!0:(l&&l.loaded&&(l.retain=!0),n+1<i&&this._retainChildren(o,r,n+1,i))}},_resetView:function(t){var e=t&&(t.pinch||t.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),e,e)},_animateZoom:function(t){this._setView(t.center,t.zoom,!0,t.noUpdate)},_setView:function(t,e,n,i){var o=Math.round(e);(void 0!==this.options.maxZoom&&o>this.options.maxZoom||void 0!==this.options.minZoom&&o<this.options.minZoom)&&(o=void 0);var r=this.options.updateWhenZooming&&o!==this._tileZoom;i&&!r||(this._tileZoom=o,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),void 0!==o&&this._update(t),n||this._pruneTiles(),this._noPrune=!!n),this._setZoomTransforms(t,e)},_setZoomTransforms:function(t,e){for(var n in this._levels)this._setZoomTransform(this._levels[n],t,e)},_setZoomTransform:function(t,e,n){var i=this._map.getZoomScale(n,t.zoom),o=t.origin.multiplyBy(i).subtract(this._map._getNewPixelOrigin(e,n)).round();u.Browser.any3d?u.DomUtil.setTransform(t.el,o,i):u.DomUtil.setPosition(t.el,o)},_resetGrid:function(){var t=this._map,e=t.options.crs,n=this._tileSize=this.getTileSize(),i=this._tileZoom,o=this._map.getPixelWorldBounds(this._tileZoom);o&&(this._globalTileRange=this._pxBoundsToTileRange(o)),this._wrapX=e.wrapLng&&!this.options.noWrap&&[Math.floor(t.project([0,e.wrapLng[0]],i).x/n.x),Math.ceil(t.project([0,e.wrapLng[1]],i).x/n.y)],this._wrapY=e.wrapLat&&!this.options.noWrap&&[Math.floor(t.project([e.wrapLat[0],0],i).y/n.x),Math.ceil(t.project([e.wrapLat[1],0],i).y/n.y)]},_onMoveEnd:function(){this._map&&!this._map._animatingZoom&&this._update()},_getTiledPixelBounds:function(t){var e=this._map,n=e._animatingZoom?Math.max(e._animateToZoom,e.getZoom()):e.getZoom(),i=e.getZoomScale(n,this._tileZoom),o=e.project(t,this._tileZoom).floor(),r=e.getSize().divideBy(2*i);return new u.Bounds(o.subtract(r),o.add(r))},_update:function(t){var e=this._map;if(e){var n=e.getZoom();if(void 0===t&&(t=e.getCenter()),void 0!==this._tileZoom){var i=this._getTiledPixelBounds(t),o=this._pxBoundsToTileRange(i),r=o.getCenter(),a=[],l=this.options.keepBuffer,h=new u.Bounds(o.getBottomLeft().subtract([l,-l]),o.getTopRight().add([l,-l]));for(var c in this._tiles){var f=this._tiles[c].coords;f.z===this._tileZoom&&h.contains(u.point(f.x,f.y))||(this._tiles[c].current=!1)}if(Math.abs(n-this._tileZoom)>1)return void this._setView(t,n);for(var p=o.min.y;p<=o.max.y;p++)for(var d=o.min.x;d<=o.max.x;d++){var _=new u.Point(d,p);if(_.z=this._tileZoom,this._isValidTile(_)){var y=this._tiles[this._tileCoordsToKey(_)];y?y.current=!0:a.push(_)}}if(a.sort(function(t,e){return t.distanceTo(r)-e.distanceTo(r)}),0!==a.length){this._loading||(this._loading=!0,this.fire("loading"));var g=s.createDocumentFragment();for(d=0;d<a.length;d++)this._addTile(a[d],g);this._level.el.appendChild(g)}}}},_isValidTile:function(t){var e=this._map.options.crs;if(!e.infinite){var n=this._globalTileRange;if(!e.wrapLng&&(t.x<n.min.x||t.x>n.max.x)||!e.wrapLat&&(t.y<n.min.y||t.y>n.max.y))return!1}if(!this.options.bounds)return!0;var i=this._tileCoordsToBounds(t);return u.latLngBounds(this.options.bounds).overlaps(i)},_keyToBounds:function(t){return this._tileCoordsToBounds(this._keyToTileCoords(t))},_tileCoordsToBounds:function(t){var e=this._map,n=this.getTileSize(),i=t.scaleBy(n),o=i.add(n),r=e.unproject(i,t.z),a=e.unproject(o,t.z),s=new u.LatLngBounds(r,a);return this.options.noWrap||e.wrapLatLngBounds(s),s},_tileCoordsToKey:function(t){return t.x+":"+t.y+":"+t.z},_keyToTileCoords:function(t){var e=t.split(":"),n=new u.Point(+e[0],+e[1]);return n.z=+e[2],n},_removeTile:function(t){var e=this._tiles[t];e&&(u.DomUtil.remove(e.el),delete this._tiles[t],this.fire("tileunload",{tile:e.el,coords:this._keyToTileCoords(t)}))},_initTile:function(t){u.DomUtil.addClass(t,"leaflet-tile");var e=this.getTileSize();t.style.width=e.x+"px",t.style.height=e.y+"px",t.onselectstart=u.Util.falseFn,t.onmousemove=u.Util.falseFn,u.Browser.ielt9&&this.options.opacity<1&&u.DomUtil.setOpacity(t,this.options.opacity),u.Browser.android&&!u.Browser.android23&&(t.style.WebkitBackfaceVisibility="hidden")},_addTile:function(t,e){var n=this._getTilePos(t),i=this._tileCoordsToKey(t),o=this.createTile(this._wrapCoords(t),u.bind(this._tileReady,this,t));this._initTile(o),this.createTile.length<2&&u.Util.requestAnimFrame(u.bind(this._tileReady,this,t,null,o)),u.DomUtil.setPosition(o,n),this._tiles[i]={el:o,coords:t,current:!0},e.appendChild(o),this.fire("tileloadstart",{tile:o,coords:t})},_tileReady:function(t,e,n){if(this._map){e&&this.fire("tileerror",{error:e,tile:n,coords:t});var i=this._tileCoordsToKey(t);n=this._tiles[i],n&&(n.loaded=+new Date,this._map._fadeAnimated?(u.DomUtil.setOpacity(n.el,0),u.Util.cancelAnimFrame(this._fadeFrame),this._fadeFrame=u.Util.requestAnimFrame(this._updateOpacity,this)):(n.active=!0,this._pruneTiles()),e||(u.DomUtil.addClass(n.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:n.el,coords:t})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),u.Browser.ielt9||!this._map._fadeAnimated?u.Util.requestAnimFrame(this._pruneTiles,this):setTimeout(u.bind(this._pruneTiles,this),250)))}},_getTilePos:function(t){return t.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(t){var e=new u.Point(this._wrapX?u.Util.wrapNum(t.x,this._wrapX):t.x,this._wrapY?u.Util.wrapNum(t.y,this._wrapY):t.y);return e.z=t.z,e},_pxBoundsToTileRange:function(t){var e=this.getTileSize();return new u.Bounds(t.min.unscaleBy(e).floor(),t.max.unscaleBy(e).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var t in this._tiles)if(!this._tiles[t].loaded)return!1;return!0}}),u.gridLayer=function(t){return new u.GridLayer(t)},u.TileLayer=u.GridLayer.extend({options:{minZoom:0,maxZoom:18,maxNativeZoom:null,minNativeZoom:null,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1},initialize:function(t,e){this._url=t,e=u.setOptions(this,e),e.detectRetina&&u.Browser.retina&&e.maxZoom>0&&(e.tileSize=Math.floor(e.tileSize/2),e.zoomReverse?(e.zoomOffset--,e.minZoom++):(e.zoomOffset++,e.maxZoom--),e.minZoom=Math.max(0,e.minZoom)),"string"==typeof e.subdomains&&(e.subdomains=e.subdomains.split("")),u.Browser.android||this.on("tileunload",this._onTileRemove)},setUrl:function(t,e){return this._url=t,e||this.redraw(),this},createTile:function(t,e){var n=s.createElement("img");return u.DomEvent.on(n,"load",u.bind(this._tileOnLoad,this,e,n)),u.DomEvent.on(n,"error",u.bind(this._tileOnError,this,e,n)),this.options.crossOrigin&&(n.crossOrigin=""),n.alt="",n.setAttribute("role","presentation"),n.src=this.getTileUrl(t),n},getTileUrl:function(t){var e={r:u.Browser.retina?"@2x":"",s:this._getSubdomain(t),x:t.x,y:t.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var n=this._globalTileRange.max.y-t.y;this.options.tms&&(e.y=n),e["-y"]=n}return u.Util.template(this._url,u.extend(e,this.options))},_tileOnLoad:function(t,e){u.Browser.ielt9?setTimeout(u.bind(t,this,null,e),0):t(null,e)},_tileOnError:function(t,e,n){var i=this.options.errorTileUrl;i&&e.src!==i&&(e.src=i),t(n,e)},getTileSize:function(){var t=this._map,e=u.GridLayer.prototype.getTileSize.call(this),n=this._tileZoom+this.options.zoomOffset,i=this.options.minNativeZoom,o=this.options.maxNativeZoom;return null!==i&&n<i?e.divideBy(t.getZoomScale(i,n)).round():null!==o&&n>o?e.divideBy(t.getZoomScale(o,n)).round():e},_onTileRemove:function(t){t.tile.onload=null},_getZoomForUrl:function(){var t=this._tileZoom,e=this.options.maxZoom,n=this.options.zoomReverse,i=this.options.zoomOffset,o=this.options.minNativeZoom,r=this.options.maxNativeZoom;return n&&(t=e-t),t+=i,null!==o&&t<o?o:null!==r&&t>r?r:t},_getSubdomain:function(t){var e=Math.abs(t.x+t.y)%this.options.subdomains.length;return this.options.subdomains[e]},_abortLoading:function(){var t,e;for(t in this._tiles)this._tiles[t].coords.z!==this._tileZoom&&(e=this._tiles[t].el,e.onload=u.Util.falseFn,e.onerror=u.Util.falseFn,e.complete||(e.src=u.Util.emptyImageUrl,u.DomUtil.remove(e)))}}),u.tileLayer=function(t,e){return new u.TileLayer(t,e)},u.TileLayer.WMS=u.TileLayer.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(t,e){this._url=t;var n=u.extend({},this.defaultWmsParams);for(var i in e)i in this.options||(n[i]=e[i]);e=u.setOptions(this,e),n.width=n.height=e.tileSize*(e.detectRetina&&u.Browser.retina?2:1),this.wmsParams=n},onAdd:function(t){this._crs=this.options.crs||t.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var e=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[e]=this._crs.code,u.TileLayer.prototype.onAdd.call(this,t)},getTileUrl:function(t){var e=this._tileCoordsToBounds(t),n=this._crs.project(e.getNorthWest()),i=this._crs.project(e.getSouthEast()),o=(this._wmsVersion>=1.3&&this._crs===u.CRS.EPSG4326?[i.y,n.x,n.y,i.x]:[n.x,i.y,i.x,n.y]).join(","),r=u.TileLayer.prototype.getTileUrl.call(this,t);return r+u.Util.getParamString(this.wmsParams,r,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+o},setParams:function(t,e){return u.extend(this.wmsParams,t),e||this.redraw(),this}}),u.tileLayer.wms=function(t,e){return new u.TileLayer.WMS(t,e)},u.ImageOverlay=u.Layer.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1},initialize:function(t,e,n){this._url=t,this._bounds=u.latLngBounds(e),u.setOptions(this,n)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(u.DomUtil.addClass(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){u.DomUtil.remove(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(t){return this.options.opacity=t,this._image&&this._updateOpacity(),this},setStyle:function(t){return t.opacity&&this.setOpacity(t.opacity),this},bringToFront:function(){return this._map&&u.DomUtil.toFront(this._image),this},bringToBack:function(){return this._map&&u.DomUtil.toBack(this._image),this},setUrl:function(t){return this._url=t,this._image&&(this._image.src=t),this},setBounds:function(t){return this._bounds=t,this._map&&this._reset(),this},getEvents:function(){var t={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var t=this._image=u.DomUtil.create("img","leaflet-image-layer "+(this._zoomAnimated?"leaflet-zoom-animated":""));t.onselectstart=u.Util.falseFn,t.onmousemove=u.Util.falseFn,t.onload=u.bind(this.fire,this,"load"),this.options.crossOrigin&&(t.crossOrigin=""),t.src=this._url,t.alt=this.options.alt},_animateZoom:function(t){var e=this._map.getZoomScale(t.zoom),n=this._map._latLngBoundsToNewLayerBounds(this._bounds,t.zoom,t.center).min;u.DomUtil.setTransform(this._image,n,e)},_reset:function(){var t=this._image,e=new u.Bounds(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),n=e.getSize();u.DomUtil.setPosition(t,e.min),t.style.width=n.x+"px",t.style.height=n.y+"px"},_updateOpacity:function(){u.DomUtil.setOpacity(this._image,this.options.opacity)}}),u.imageOverlay=function(t,e,n){return new u.ImageOverlay(t,e,n)},u.Icon=u.Class.extend({initialize:function(t){u.setOptions(this,t)},createIcon:function(t){return this._createIcon("icon",t)},createShadow:function(t){return this._createIcon("shadow",t)},_createIcon:function(t,e){var n=this._getIconUrl(t);if(!n){if("icon"===t)throw new Error("iconUrl not set in Icon options (see the docs).");return null}var i=this._createImg(n,e&&"IMG"===e.tagName?e:null);return this._setIconStyles(i,t),i},_setIconStyles:function(t,e){var n=this.options,i=n[e+"Size"];"number"==typeof i&&(i=[i,i]);var o=u.point(i),r=u.point("shadow"===e&&n.shadowAnchor||n.iconAnchor||o&&o.divideBy(2,!0));t.className="leaflet-marker-"+e+" "+(n.className||""),r&&(t.style.marginLeft=-r.x+"px",t.style.marginTop=-r.y+"px"),o&&(t.style.width=o.x+"px",t.style.height=o.y+"px")},_createImg:function(t,e){return e=e||s.createElement("img"),e.src=t,e},_getIconUrl:function(t){return u.Browser.retina&&this.options[t+"RetinaUrl"]||this.options[t+"Url"]}}),u.icon=function(t){return new u.Icon(t)},u.Icon.Default=u.Icon.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(t){return u.Icon.Default.imagePath||(u.Icon.Default.imagePath=this._detectIconPath()),(this.options.imagePath||u.Icon.Default.imagePath)+u.Icon.prototype._getIconUrl.call(this,t)},_detectIconPath:function(){var t=u.DomUtil.create("div","leaflet-default-icon-path",s.body),e=u.DomUtil.getStyle(t,"background-image")||u.DomUtil.getStyle(t,"backgroundImage");return s.body.removeChild(t),0===e.indexOf("url")?e.replace(/^url\([\"\']?/,"").replace(/marker-icon\.png[\"\']?\)$/,""):""}}),u.Marker=u.Layer.extend({options:{icon:new u.Icon.Default,interactive:!0,draggable:!1,keyboard:!0,title:"",alt:"",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",nonBubblingEvents:["click","dblclick","mouseover","mouseout","contextmenu"]},initialize:function(t,e){u.setOptions(this,e),this._latlng=u.latLng(t)},onAdd:function(t){this._zoomAnimated=this._zoomAnimated&&t.options.markerZoomAnimation,this._zoomAnimated&&t.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(t){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),this._zoomAnimated&&t.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(t){var e=this._latlng;return this._latlng=u.latLng(t),this.update(),this.fire("move",{oldLatLng:e,latlng:this._latlng})},setZIndexOffset:function(t){return this.options.zIndexOffset=t,this.update()},setIcon:function(t){return this.options.icon=t,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon){var t=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(t)}return this},_initIcon:function(){var t=this.options,e="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),n=t.icon.createIcon(this._icon),i=!1;n!==this._icon&&(this._icon&&this._removeIcon(),i=!0,t.title&&(n.title=t.title),t.alt&&(n.alt=t.alt)),u.DomUtil.addClass(n,e),t.keyboard&&(n.tabIndex="0"),this._icon=n,t.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex});var o=t.icon.createShadow(this._shadow),r=!1;o!==this._shadow&&(this._removeShadow(),r=!0),o&&(u.DomUtil.addClass(o,e),o.alt=""),this._shadow=o,t.opacity<1&&this._updateOpacity(),i&&this.getPane().appendChild(this._icon),this._initInteraction(),o&&r&&this.getPane("shadowPane").appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),u.DomUtil.remove(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&u.DomUtil.remove(this._shadow),this._shadow=null},_setPos:function(t){u.DomUtil.setPosition(this._icon,t),this._shadow&&u.DomUtil.setPosition(this._shadow,t),this._zIndex=t.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(t){this._icon.style.zIndex=this._zIndex+t},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center).round();this._setPos(e)},_initInteraction:function(){if(this.options.interactive&&(u.DomUtil.addClass(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),u.Handler.MarkerDrag)){var t=this.options.draggable;this.dragging&&(t=this.dragging.enabled(),this.dragging.disable()),this.dragging=new u.Handler.MarkerDrag(this),t&&this.dragging.enable()}},setOpacity:function(t){return this.options.opacity=t,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var t=this.options.opacity;u.DomUtil.setOpacity(this._icon,t),this._shadow&&u.DomUtil.setOpacity(this._shadow,t)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor||[0,0]},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor||[0,0]}}),u.marker=function(t,e){return new u.Marker(t,e)},u.DivIcon=u.Icon.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(t){var e=t&&"DIV"===t.tagName?t:s.createElement("div"),n=this.options;if(e.innerHTML=!1!==n.html?n.html:"",n.bgPos){var i=u.point(n.bgPos);e.style.backgroundPosition=-i.x+"px "+-i.y+"px"}return this._setIconStyles(e,"icon"),e},createShadow:function(){return null}}),u.divIcon=function(t){return new u.DivIcon(t)},u.DivOverlay=u.Layer.extend({options:{offset:[0,7],className:"",pane:"popupPane"},initialize:function(t,e){u.setOptions(this,t),this._source=e},onAdd:function(t){this._zoomAnimated=t._zoomAnimated,this._container||this._initLayout(),t._fadeAnimated&&u.DomUtil.setOpacity(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),t._fadeAnimated&&u.DomUtil.setOpacity(this._container,1),this.bringToFront()},onRemove:function(t){t._fadeAnimated?(u.DomUtil.setOpacity(this._container,0),this._removeTimeout=setTimeout(u.bind(u.DomUtil.remove,u.DomUtil,this._container),200)):u.DomUtil.remove(this._container)},getLatLng:function(){return this._latlng},setLatLng:function(t){return this._latlng=u.latLng(t),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(t){return this._content=t,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var t={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&u.DomUtil.toFront(this._container),this},bringToBack:function(){return this._map&&u.DomUtil.toBack(this._container),this},_updateContent:function(){if(this._content){var t=this._contentNode,e="function"==typeof this._content?this._content(this._source||this):this._content;if("string"==typeof e)t.innerHTML=e;else{for(;t.hasChildNodes();)t.removeChild(t.firstChild);t.appendChild(e)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var t=this._map.latLngToLayerPoint(this._latlng),e=u.point(this.options.offset),n=this._getAnchor();this._zoomAnimated?u.DomUtil.setPosition(this._container,t.add(n)):e=e.add(t).add(n);var i=this._containerBottom=-e.y,o=this._containerLeft=-Math.round(this._containerWidth/2)+e.x;this._container.style.bottom=i+"px",this._container.style.left=o+"px"}},_getAnchor:function(){return[0,0]}}),u.Popup=u.DivOverlay.extend({options:{maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,className:""},openOn:function(t){return t.openPopup(this),this},onAdd:function(t){u.DivOverlay.prototype.onAdd.call(this,t),t.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof u.Path||this._source.on("preclick",u.DomEvent.stopPropagation))},onRemove:function(t){u.DivOverlay.prototype.onRemove.call(this,t),t.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof u.Path||this._source.off("preclick",u.DomEvent.stopPropagation))},getEvents:function(){var t=u.DivOverlay.prototype.getEvents.call(this);return("closeOnClick"in this.options?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(t.preclick=this._close),this.options.keepInView&&(t.moveend=this._adjustPan),t},_close:function(){this._map&&this._map.closePopup(this)},_initLayout:function(){var t="leaflet-popup",e=this._container=u.DomUtil.create("div",t+" "+(this.options.className||"")+" leaflet-zoom-animated");if(this.options.closeButton){var n=this._closeButton=u.DomUtil.create("a",t+"-close-button",e);n.href="#close",n.innerHTML="&#215;",u.DomEvent.on(n,"click",this._onCloseButtonClick,this)}var i=this._wrapper=u.DomUtil.create("div",t+"-content-wrapper",e);this._contentNode=u.DomUtil.create("div",t+"-content",i),u.DomEvent.disableClickPropagation(i).disableScrollPropagation(this._contentNode).on(i,"contextmenu",u.DomEvent.stopPropagation),this._tipContainer=u.DomUtil.create("div",t+"-tip-container",e),this._tip=u.DomUtil.create("div",t+"-tip",this._tipContainer)},_updateLayout:function(){var t=this._contentNode,e=t.style;e.width="",e.whiteSpace="nowrap";var n=t.offsetWidth;n=Math.min(n,this.options.maxWidth),n=Math.max(n,this.options.minWidth),e.width=n+1+"px",e.whiteSpace="",e.height="";var i=t.offsetHeight,o=this.options.maxHeight;o&&i>o?(e.height=o+"px",u.DomUtil.addClass(t,"leaflet-popup-scrolled")):u.DomUtil.removeClass(t,"leaflet-popup-scrolled"),this._containerWidth=this._container.offsetWidth},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center),n=this._getAnchor();u.DomUtil.setPosition(this._container,e.add(n))},_adjustPan:function(){if(!(!this.options.autoPan||this._map._panAnim&&this._map._panAnim._inProgress)){var t=this._map,e=parseInt(u.DomUtil.getStyle(this._container,"marginBottom"),10)||0,n=this._container.offsetHeight+e,i=this._containerWidth,o=new u.Point(this._containerLeft,-n-this._containerBottom);o._add(u.DomUtil.getPosition(this._container));var r=t.layerPointToContainerPoint(o),a=u.point(this.options.autoPanPadding),s=u.point(this.options.autoPanPaddingTopLeft||a),l=u.point(this.options.autoPanPaddingBottomRight||a),h=t.getSize(),c=0,f=0;r.x+i+l.x>h.x&&(c=r.x+i-h.x+l.x),r.x-c-s.x<0&&(c=r.x-s.x),r.y+n+l.y>h.y&&(f=r.y+n-h.y+l.y),r.y-f-s.y<0&&(f=r.y-s.y),(c||f)&&t.fire("autopanstart").panBy([c,f])}},_onCloseButtonClick:function(t){this._close(),u.DomEvent.stop(t)},_getAnchor:function(){return u.point(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),u.popup=function(t,e){return new u.Popup(t,e)},u.Map.mergeOptions({closePopupOnClick:!0}),u.Map.include({openPopup:function(t,e,n){return t instanceof u.Popup||(t=new u.Popup(n).setContent(t)),e&&t.setLatLng(e),this.hasLayer(t)?this:(this._popup&&this._popup.options.autoClose&&this.closePopup(),this._popup=t,this.addLayer(t))},closePopup:function(t){return t&&t!==this._popup||(t=this._popup,this._popup=null),t&&this.removeLayer(t),this}}),u.Layer.include({bindPopup:function(t,e){return t instanceof u.Popup?(u.setOptions(t,e),this._popup=t,t._source=this):(this._popup&&!e||(this._popup=new u.Popup(e,this)),this._popup.setContent(t)),this._popupHandlersAdded||(this.on({click:this._openPopup,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(t,e){if(t instanceof u.Layer||(e=t,t=this),t instanceof u.FeatureGroup)for(var n in this._layers){t=this._layers[n];break}return e||(e=t.getCenter?t.getCenter():t.getLatLng()),this._popup&&this._map&&(this._popup._source=t,this._popup.update(),this._map.openPopup(this._popup,e)),this},closePopup:function(){return this._popup&&this._popup._close(),this},togglePopup:function(t){return this._popup&&(this._popup._map?this.closePopup():this.openPopup(t)),this},isPopupOpen:function(){return!!this._popup&&this._popup.isOpen()},setPopupContent:function(t){return this._popup&&this._popup.setContent(t),this},getPopup:function(){return this._popup},_openPopup:function(t){var e=t.layer||t.target;if(this._popup&&this._map){if(u.DomEvent.stop(t),e instanceof u.Path)return void this.openPopup(t.layer||t.target,t.latlng);this._map.hasLayer(this._popup)&&this._popup._source===e?this.closePopup():this.openPopup(e,t.latlng)}},_movePopup:function(t){this._popup.setLatLng(t.latlng)}}),u.Tooltip=u.DivOverlay.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,interactive:!1,opacity:.9},onAdd:function(t){u.DivOverlay.prototype.onAdd.call(this,t),this.setOpacity(this.options.opacity),t.fire("tooltipopen",{tooltip:this}),this._source&&this._source.fire("tooltipopen",{tooltip:this},!0)},onRemove:function(t){u.DivOverlay.prototype.onRemove.call(this,t),t.fire("tooltipclose",{tooltip:this}),this._source&&this._source.fire("tooltipclose",{tooltip:this},!0)},getEvents:function(){var t=u.DivOverlay.prototype.getEvents.call(this);return u.Browser.touch&&!this.options.permanent&&(t.preclick=this._close),t},_close:function(){this._map&&this._map.closeTooltip(this)},_initLayout:function(){var t="leaflet-tooltip "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=u.DomUtil.create("div",t)},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(t){var e=this._map,n=this._container,i=e.latLngToContainerPoint(e.getCenter()),o=e.layerPointToContainerPoint(t),r=this.options.direction,a=n.offsetWidth,s=n.offsetHeight,l=u.point(this.options.offset),h=this._getAnchor();"top"===r?t=t.add(u.point(-a/2+l.x,-s+l.y+h.y,!0)):"bottom"===r?t=t.subtract(u.point(a/2-l.x,-l.y,!0)):"center"===r?t=t.subtract(u.point(a/2+l.x,s/2-h.y+l.y,!0)):"right"===r||"auto"===r&&o.x<i.x?(r="right",t=t.add(u.point(l.x+h.x,h.y-s/2+l.y,!0))):(r="left",t=t.subtract(u.point(a+h.x-l.x,s/2-h.y-l.y,!0))),u.DomUtil.removeClass(n,"leaflet-tooltip-right"),u.DomUtil.removeClass(n,"leaflet-tooltip-left"),u.DomUtil.removeClass(n,"leaflet-tooltip-top"),u.DomUtil.removeClass(n,"leaflet-tooltip-bottom"),u.DomUtil.addClass(n,"leaflet-tooltip-"+r),u.DomUtil.setPosition(n,t)},_updatePosition:function(){var t=this._map.latLngToLayerPoint(this._latlng);this._setPosition(t)},setOpacity:function(t){this.options.opacity=t,this._container&&u.DomUtil.setOpacity(this._container,t)},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center);this._setPosition(e)},_getAnchor:function(){return u.point(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),u.tooltip=function(t,e){return new u.Tooltip(t,e)},u.Map.include({openTooltip:function(t,e,n){return t instanceof u.Tooltip||(t=new u.Tooltip(n).setContent(t)),e&&t.setLatLng(e),this.hasLayer(t)?this:this.addLayer(t)},closeTooltip:function(t){return t&&this.removeLayer(t),this}}),u.Layer.include({bindTooltip:function(t,e){return t instanceof u.Tooltip?(u.setOptions(t,e),this._tooltip=t,t._source=this):(this._tooltip&&!e||(this._tooltip=u.tooltip(e,this)),this._tooltip.setContent(t)),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(t){if(t||!this._tooltipHandlersAdded){var e=t?"off":"on",n={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?n.add=this._openTooltip:(n.mouseover=this._openTooltip,n.mouseout=this.closeTooltip,this._tooltip.options.sticky&&(n.mousemove=this._moveTooltip),u.Browser.touch&&(n.click=this._openTooltip)),this[e](n),this._tooltipHandlersAdded=!t}},openTooltip:function(t,e){if(t instanceof u.Layer||(e=t,t=this),t instanceof u.FeatureGroup)for(var n in this._layers){t=this._layers[n];break}return e||(e=t.getCenter?t.getCenter():t.getLatLng()),this._tooltip&&this._map&&(this._tooltip._source=t,this._tooltip.update(),this._map.openTooltip(this._tooltip,e),this._tooltip.options.interactive&&this._tooltip._container&&(u.DomUtil.addClass(this._tooltip._container,"leaflet-clickable"),this.addInteractiveTarget(this._tooltip._container))),this},closeTooltip:function(){return this._tooltip&&(this._tooltip._close(),this._tooltip.options.interactive&&this._tooltip._container&&(u.DomUtil.removeClass(this._tooltip._container,"leaflet-clickable"),this.removeInteractiveTarget(this._tooltip._container))),this},toggleTooltip:function(t){return this._tooltip&&(this._tooltip._map?this.closeTooltip():this.openTooltip(t)),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(t){return this._tooltip&&this._tooltip.setContent(t),this},getTooltip:function(){return this._tooltip},_openTooltip:function(t){var e=t.layer||t.target;this._tooltip&&this._map&&this.openTooltip(e,this._tooltip.options.sticky?t.latlng:void 0)},_moveTooltip:function(t){var e,n,i=t.latlng;this._tooltip.options.sticky&&t.originalEvent&&(e=this._map.mouseEventToContainerPoint(t.originalEvent),n=this._map.containerPointToLayerPoint(e),i=this._map.layerPointToLatLng(n)),this._tooltip.setLatLng(i)}}),u.LayerGroup=u.Layer.extend({initialize:function(t){this._layers={};var e,n;if(t)for(e=0,n=t.length;e<n;e++)this.addLayer(t[e])},addLayer:function(t){var e=this.getLayerId(t);return this._layers[e]=t,this._map&&this._map.addLayer(t),this},removeLayer:function(t){var e=t in this._layers?t:this.getLayerId(t);return this._map&&this._layers[e]&&this._map.removeLayer(this._layers[e]),delete this._layers[e],this},hasLayer:function(t){return!!t&&(t in this._layers||this.getLayerId(t)in this._layers)},clearLayers:function(){for(var t in this._layers)this.removeLayer(this._layers[t]);return this},invoke:function(t){var e,n,i=Array.prototype.slice.call(arguments,1);for(e in this._layers)n=this._layers[e],n[t]&&n[t].apply(n,i);return this},onAdd:function(t){for(var e in this._layers)t.addLayer(this._layers[e])},onRemove:function(t){for(var e in this._layers)t.removeLayer(this._layers[e])},eachLayer:function(t,e){for(var n in this._layers)t.call(e,this._layers[n]);return this},getLayer:function(t){return this._layers[t]},getLayers:function(){var t=[];for(var e in this._layers)t.push(this._layers[e]);return t},setZIndex:function(t){return this.invoke("setZIndex",t)},getLayerId:function(t){return u.stamp(t)}}),u.layerGroup=function(t){return new u.LayerGroup(t)},u.FeatureGroup=u.LayerGroup.extend({addLayer:function(t){return this.hasLayer(t)?this:(t.addEventParent(this),u.LayerGroup.prototype.addLayer.call(this,t),this.fire("layeradd",{layer:t}))},removeLayer:function(t){return this.hasLayer(t)?(t in this._layers&&(t=this._layers[t]),t.removeEventParent(this),u.LayerGroup.prototype.removeLayer.call(this,t),this.fire("layerremove",{layer:t})):this},setStyle:function(t){return this.invoke("setStyle",t)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var t=new u.LatLngBounds;for(var e in this._layers){var n=this._layers[e];t.extend(n.getBounds?n.getBounds():n.getLatLng())}return t}}),u.featureGroup=function(t){return new u.FeatureGroup(t)},u.Renderer=u.Layer.extend({options:{padding:.1},initialize:function(t){u.setOptions(this,t),u.stamp(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),this._zoomAnimated&&u.DomUtil.addClass(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){u.DomUtil.remove(this._container),this.off("update",this._updatePaths,this)},getEvents:function(){var t={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(t.zoomanim=this._onAnimZoom),t},_onAnimZoom:function(t){this._updateTransform(t.center,t.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(t,e){var n=this._map.getZoomScale(e,this._zoom),i=u.DomUtil.getPosition(this._container),o=this._map.getSize().multiplyBy(.5+this.options.padding),r=this._map.project(this._center,e),a=this._map.project(t,e),s=a.subtract(r),l=o.multiplyBy(-n).add(i).add(o).subtract(s);u.Browser.any3d?u.DomUtil.setTransform(this._container,l,n):u.DomUtil.setPosition(this._container,l)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var t in this._layers)this._layers[t]._reset()},_onZoomEnd:function(){for(var t in this._layers)this._layers[t]._project()},_updatePaths:function(){for(var t in this._layers)this._layers[t]._update()},_update:function(){var t=this.options.padding,e=this._map.getSize(),n=this._map.containerPointToLayerPoint(e.multiplyBy(-t)).round();this._bounds=new u.Bounds(n,n.add(e.multiplyBy(1+2*t)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),u.Map.include({getRenderer:function(t){var e=t.options.renderer||this._getPaneRenderer(t.options.pane)||this.options.renderer||this._renderer;return e||(e=this._renderer=this.options.preferCanvas&&u.canvas()||u.svg()),this.hasLayer(e)||this.addLayer(e),e},_getPaneRenderer:function(t){if("overlayPane"===t||void 0===t)return!1;var e=this._paneRenderers[t];return void 0===e&&(e=u.SVG&&u.svg({pane:t})||u.Canvas&&u.canvas({pane:t}),this._paneRenderers[t]=e),e}}),u.Path=u.Layer.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0},beforeAdd:function(t){this._renderer=t.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(t){return u.setOptions(this,t),this._renderer&&this._renderer._updateStyle(this),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(u.Browser.touch?10:0)}}),u.LineUtil={simplify:function(t,e){if(!e||!t.length)return t.slice();var n=e*e;return t=this._reducePoints(t,n),t=this._simplifyDP(t,n)},pointToSegmentDistance:function(t,e,n){return Math.sqrt(this._sqClosestPointOnSegment(t,e,n,!0))},closestPointOnSegment:function(t,e,n){return this._sqClosestPointOnSegment(t,e,n)},_simplifyDP:function(t,e){var n=t.length,i=("undefined"==typeof Uint8Array?"undefined":r(Uint8Array))!==void 0+""?Uint8Array:Array,o=new i(n);o[0]=o[n-1]=1,this._simplifyDPStep(t,o,e,0,n-1);var a,s=[];for(a=0;a<n;a++)o[a]&&s.push(t[a]);return s},_simplifyDPStep:function(t,e,n,i,o){var r,a,s,l=0;for(a=i+1;a<=o-1;a++)(s=this._sqClosestPointOnSegment(t[a],t[i],t[o],!0))>l&&(r=a,l=s);l>n&&(e[r]=1,this._simplifyDPStep(t,e,n,i,r),this._simplifyDPStep(t,e,n,r,o))},_reducePoints:function(t,e){for(var n=[t[0]],i=1,o=0,r=t.length;i<r;i++)this._sqDist(t[i],t[o])>e&&(n.push(t[i]),o=i);return o<r-1&&n.push(t[r-1]),n},clipSegment:function(t,e,n,i,o){var r,a,s,l=i?this._lastCode:this._getBitCode(t,n),u=this._getBitCode(e,n);for(this._lastCode=u;;){if(!(l|u))return[t,e];if(l&u)return!1;r=l||u,a=this._getEdgeIntersection(t,e,r,n,o),s=this._getBitCode(a,n),r===l?(t=a,l=s):(e=a,u=s)}},_getEdgeIntersection:function(t,e,n,i,o){var r,a,s=e.x-t.x,l=e.y-t.y,h=i.min,c=i.max;return 8&n?(r=t.x+s*(c.y-t.y)/l,a=c.y):4&n?(r=t.x+s*(h.y-t.y)/l,a=h.y):2&n?(r=c.x,a=t.y+l*(c.x-t.x)/s):1&n&&(r=h.x,a=t.y+l*(h.x-t.x)/s),new u.Point(r,a,o)},_getBitCode:function(t,e){var n=0;return t.x<e.min.x?n|=1:t.x>e.max.x&&(n|=2),t.y<e.min.y?n|=4:t.y>e.max.y&&(n|=8),n},_sqDist:function(t,e){var n=e.x-t.x,i=e.y-t.y;return n*n+i*i},_sqClosestPointOnSegment:function(t,e,n,i){var o,r=e.x,a=e.y,s=n.x-r,l=n.y-a,h=s*s+l*l;return h>0&&(o=((t.x-r)*s+(t.y-a)*l)/h,o>1?(r=n.x,a=n.y):o>0&&(r+=s*o,a+=l*o)),s=t.x-r,l=t.y-a,i?s*s+l*l:new u.Point(r,a)}},u.Polyline=u.Path.extend({options:{smoothFactor:1,noClip:!1},initialize:function(t,e){u.setOptions(this,e),this._setLatLngs(t)},getLatLngs:function(){return this._latlngs},setLatLngs:function(t){return this._setLatLngs(t),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(t){for(var e,n,i=1/0,o=null,r=u.LineUtil._sqClosestPointOnSegment,a=0,s=this._parts.length;a<s;a++)for(var l=this._parts[a],h=1,c=l.length;h<c;h++){e=l[h-1],n=l[h];var f=r(t,e,n,!0);f<i&&(i=f,o=r(t,e,n))}return o&&(o.distance=Math.sqrt(i)),o},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");var t,e,n,i,o,r,a,s=this._rings[0],l=s.length;if(!l)return null;for(t=0,e=0;t<l-1;t++)e+=s[t].distanceTo(s[t+1])/2;if(0===e)return this._map.layerPointToLatLng(s[0]);for(t=0,i=0;t<l-1;t++)if(o=s[t],r=s[t+1],n=o.distanceTo(r),(i+=n)>e)return a=(i-e)/n,this._map.layerPointToLatLng([r.x-a*(r.x-o.x),r.y-a*(r.y-o.y)])},getBounds:function(){return this._bounds},addLatLng:function(t,e){return e=e||this._defaultShape(),t=u.latLng(t),e.push(t),this._bounds.extend(t),this.redraw()},_setLatLngs:function(t){this._bounds=new u.LatLngBounds,this._latlngs=this._convertLatLngs(t)},_defaultShape:function(){return u.Polyline._flat(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(t){for(var e=[],n=u.Polyline._flat(t),i=0,o=t.length;i<o;i++)n?(e[i]=u.latLng(t[i]),this._bounds.extend(e[i])):e[i]=this._convertLatLngs(t[i]);return e},_project:function(){var t=new u.Bounds;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,t);var e=this._clickTolerance(),n=new u.Point(e,e);this._bounds.isValid()&&t.isValid()&&(t.min._subtract(n),t.max._add(n),this._pxBounds=t)},_projectLatlngs:function(t,e,n){var i,o,r=t[0]instanceof u.LatLng,a=t.length;if(r){for(o=[],i=0;i<a;i++)o[i]=this._map.latLngToLayerPoint(t[i]),n.extend(o[i]);e.push(o)}else for(i=0;i<a;i++)this._projectLatlngs(t[i],e,n)},_clipPoints:function(){var t=this._renderer._bounds;if(this._parts=[],this._pxBounds&&this._pxBounds.intersects(t)){if(this.options.noClip)return void(this._parts=this._rings);var e,n,i,o,r,a,s,l=this._parts;for(e=0,i=0,o=this._rings.length;e<o;e++)for(s=this._rings[e],n=0,r=s.length;n<r-1;n++)(a=u.LineUtil.clipSegment(s[n],s[n+1],t,n,!0))&&(l[i]=l[i]||[],l[i].push(a[0]),a[1]===s[n+1]&&n!==r-2||(l[i].push(a[1]),i++))}},_simplifyPoints:function(){for(var t=this._parts,e=this.options.smoothFactor,n=0,i=t.length;n<i;n++)t[n]=u.LineUtil.simplify(t[n],e)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)}}),u.polyline=function(t,e){return new u.Polyline(t,e)},u.Polyline._flat=function(t){return!u.Util.isArray(t[0])||"object"!==r(t[0][0])&&void 0!==t[0][0]},u.PolyUtil={},u.PolyUtil.clipPolygon=function(t,e,n){var i,o,r,a,s,l,h,c,f,p=[1,4,2,8],d=u.LineUtil;for(o=0,h=t.length;o<h;o++)t[o]._code=d._getBitCode(t[o],e);for(a=0;a<4;a++){for(c=p[a],i=[],o=0,h=t.length,r=h-1;o<h;r=o++)s=t[o],l=t[r],s._code&c?l._code&c||(f=d._getEdgeIntersection(l,s,c,e,n),f._code=d._getBitCode(f,e),i.push(f)):(l._code&c&&(f=d._getEdgeIntersection(l,s,c,e,n),f._code=d._getBitCode(f,e),i.push(f)),i.push(s));t=i}return t},u.Polygon=u.Polyline.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");var t,e,n,i,o,r,a,s,l,u=this._rings[0],h=u.length;if(!h)return null;for(r=a=s=0,t=0,e=h-1;t<h;e=t++)n=u[t],i=u[e],o=n.y*i.x-i.y*n.x,a+=(n.x+i.x)*o,s+=(n.y+i.y)*o,r+=3*o;return l=0===r?u[0]:[a/r,s/r],this._map.layerPointToLatLng(l)},_convertLatLngs:function(t){var e=u.Polyline.prototype._convertLatLngs.call(this,t),n=e.length;return n>=2&&e[0]instanceof u.LatLng&&e[0].equals(e[n-1])&&e.pop(),e},_setLatLngs:function(t){u.Polyline.prototype._setLatLngs.call(this,t),u.Polyline._flat(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return u.Polyline._flat(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var t=this._renderer._bounds,e=this.options.weight,n=new u.Point(e,e);if(t=new u.Bounds(t.min.subtract(n),t.max.add(n)),this._parts=[],this._pxBounds&&this._pxBounds.intersects(t)){if(this.options.noClip)return void(this._parts=this._rings);for(var i,o=0,r=this._rings.length;o<r;o++)i=u.PolyUtil.clipPolygon(this._rings[o],t,!0),i.length&&this._parts.push(i)}},_updatePath:function(){this._renderer._updatePoly(this,!0)}}),u.polygon=function(t,e){return new u.Polygon(t,e)},u.Rectangle=u.Polygon.extend({initialize:function(t,e){u.Polygon.prototype.initialize.call(this,this._boundsToLatLngs(t),e)},setBounds:function(t){return this.setLatLngs(this._boundsToLatLngs(t))},_boundsToLatLngs:function(t){return t=u.latLngBounds(t),[t.getSouthWest(),t.getNorthWest(),t.getNorthEast(),t.getSouthEast()]}}),u.rectangle=function(t,e){return new u.Rectangle(t,e)},u.CircleMarker=u.Path.extend({options:{fill:!0,radius:10},initialize:function(t,e){u.setOptions(this,e),this._latlng=u.latLng(t),this._radius=this.options.radius},setLatLng:function(t){return this._latlng=u.latLng(t),this.redraw(),this.fire("move",{latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(t){return this.options.radius=this._radius=t,this.redraw()},getRadius:function(){return this._radius},setStyle:function(t){var e=t&&t.radius||this._radius;return u.Path.prototype.setStyle.call(this,t),this.setRadius(e),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var t=this._radius,e=this._radiusY||t,n=this._clickTolerance(),i=[t+n,e+n];this._pxBounds=new u.Bounds(this._point.subtract(i),this._point.add(i))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)}}),u.circleMarker=function(t,e){return new u.CircleMarker(t,e)},u.Circle=u.CircleMarker.extend({initialize:function(t,e,n){if("number"==typeof e&&(e=u.extend({},n,{radius:e})),u.setOptions(this,e),this._latlng=u.latLng(t),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(t){return this._mRadius=t,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var t=[this._radius,this._radiusY||this._radius];return new u.LatLngBounds(this._map.layerPointToLatLng(this._point.subtract(t)),this._map.layerPointToLatLng(this._point.add(t)))},setStyle:u.Path.prototype.setStyle,_project:function(){var t=this._latlng.lng,e=this._latlng.lat,n=this._map,i=n.options.crs;if(i.distance===u.CRS.Earth.distance){var o=Math.PI/180,r=this._mRadius/u.CRS.Earth.R/o,a=n.project([e+r,t]),s=n.project([e-r,t]),l=a.add(s).divideBy(2),h=n.unproject(l).lat,c=Math.acos((Math.cos(r*o)-Math.sin(e*o)*Math.sin(h*o))/(Math.cos(e*o)*Math.cos(h*o)))/o;(isNaN(c)||0===c)&&(c=r/Math.cos(Math.PI/180*e)),this._point=l.subtract(n.getPixelOrigin()),this._radius=isNaN(c)?0:Math.max(Math.round(l.x-n.project([h,t-c]).x),1),this._radiusY=Math.max(Math.round(l.y-a.y),1)}else{var f=i.unproject(i.project(this._latlng).subtract([this._mRadius,0]));this._point=n.latLngToLayerPoint(this._latlng),this._radius=this._point.x-n.latLngToLayerPoint(f).x}this._updateBounds()}}),u.circle=function(t,e,n){return new u.Circle(t,e,n)},u.SVG=u.Renderer.extend({getEvents:function(){var t=u.Renderer.prototype.getEvents.call(this);return t.zoomstart=this._onZoomStart,t},_initContainer:function(){this._container=u.SVG.create("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=u.SVG.create("g"),this._container.appendChild(this._rootGroup)},_onZoomStart:function(){this._update()},_update:function(){if(!this._map._animatingZoom||!this._bounds){u.Renderer.prototype._update.call(this);var t=this._bounds,e=t.getSize(),n=this._container;this._svgSize&&this._svgSize.equals(e)||(this._svgSize=e,n.setAttribute("width",e.x),n.setAttribute("height",e.y)),u.DomUtil.setPosition(n,t.min),n.setAttribute("viewBox",[t.min.x,t.min.y,e.x,e.y].join(" ")),this.fire("update")}},_initPath:function(t){var e=t._path=u.SVG.create("path");t.options.className&&u.DomUtil.addClass(e,t.options.className),t.options.interactive&&u.DomUtil.addClass(e,"leaflet-interactive"),this._updateStyle(t),this._layers[u.stamp(t)]=t},_addPath:function(t){this._rootGroup.appendChild(t._path),t.addInteractiveTarget(t._path)},_removePath:function(t){u.DomUtil.remove(t._path),t.removeInteractiveTarget(t._path),delete this._layers[u.stamp(t)]},_updatePath:function(t){t._project(),t._update()},_updateStyle:function(t){var e=t._path,n=t.options;e&&(n.stroke?(e.setAttribute("stroke",n.color),e.setAttribute("stroke-opacity",n.opacity),e.setAttribute("stroke-width",n.weight),e.setAttribute("stroke-linecap",n.lineCap),e.setAttribute("stroke-linejoin",n.lineJoin),n.dashArray?e.setAttribute("stroke-dasharray",n.dashArray):e.removeAttribute("stroke-dasharray"),n.dashOffset?e.setAttribute("stroke-dashoffset",n.dashOffset):e.removeAttribute("stroke-dashoffset")):e.setAttribute("stroke","none"),n.fill?(e.setAttribute("fill",n.fillColor||n.color),e.setAttribute("fill-opacity",n.fillOpacity),e.setAttribute("fill-rule",n.fillRule||"evenodd")):e.setAttribute("fill","none"))},_updatePoly:function(t,e){this._setPath(t,u.SVG.pointsToPath(t._parts,e))},_updateCircle:function(t){var e=t._point,n=t._radius,i=t._radiusY||n,o="a"+n+","+i+" 0 1,0 ",r=t._empty()?"M0 0":"M"+(e.x-n)+","+e.y+o+2*n+",0 "+o+2*-n+",0 ";this._setPath(t,r)},_setPath:function(t,e){t._path.setAttribute("d",e)},_bringToFront:function(t){u.DomUtil.toFront(t._path)},_bringToBack:function(t){u.DomUtil.toBack(t._path)}}),u.extend(u.SVG,{create:function(t){return s.createElementNS("http://www.w3.org/2000/svg",t)},pointsToPath:function(t,e){var n,i,o,r,a,s,l="";for(n=0,o=t.length;n<o;n++){for(a=t[n],i=0,r=a.length;i<r;i++)s=a[i],l+=(i?"L":"M")+s.x+" "+s.y;l+=e?u.Browser.svg?"z":"x":""}return l||"M0 0"}}),u.Browser.svg=!(!s.createElementNS||!u.SVG.create("svg").createSVGRect),u.svg=function(t){return u.Browser.svg||u.Browser.vml?new u.SVG(t):null},u.Browser.vml=!u.Browser.svg&&function(){try{var t=s.createElement("div");t.innerHTML='<v:shape adj="1"/>';var e=t.firstChild;return e.style.behavior="url(#default#VML)",e&&"object"===r(e.adj)}catch(t){return!1}}(),u.SVG.include(u.Browser.vml?{_initContainer:function(){this._container=u.DomUtil.create("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(u.Renderer.prototype._update.call(this),this.fire("update"))},_initPath:function(t){var e=t._container=u.SVG.create("shape");u.DomUtil.addClass(e,"leaflet-vml-shape "+(this.options.className||"")),e.coordsize="1 1",t._path=u.SVG.create("path"),e.appendChild(t._path),this._updateStyle(t),this._layers[u.stamp(t)]=t},_addPath:function(t){var e=t._container;this._container.appendChild(e),t.options.interactive&&t.addInteractiveTarget(e)},_removePath:function(t){var e=t._container;u.DomUtil.remove(e),t.removeInteractiveTarget(e),delete this._layers[u.stamp(t)]},_updateStyle:function(t){var e=t._stroke,n=t._fill,i=t.options,o=t._container;o.stroked=!!i.stroke,o.filled=!!i.fill,i.stroke?(e||(e=t._stroke=u.SVG.create("stroke")),o.appendChild(e),e.weight=i.weight+"px",e.color=i.color,e.opacity=i.opacity,i.dashArray?e.dashStyle=u.Util.isArray(i.dashArray)?i.dashArray.join(" "):i.dashArray.replace(/( *, *)/g," "):e.dashStyle="",e.endcap=i.lineCap.replace("butt","flat"),e.joinstyle=i.lineJoin):e&&(o.removeChild(e),t._stroke=null),i.fill?(n||(n=t._fill=u.SVG.create("fill")),o.appendChild(n),n.color=i.fillColor||i.color,n.opacity=i.fillOpacity):n&&(o.removeChild(n),t._fill=null)},_updateCircle:function(t){var e=t._point.round(),n=Math.round(t._radius),i=Math.round(t._radiusY||n);this._setPath(t,t._empty()?"M0 0":"AL "+e.x+","+e.y+" "+n+","+i+" 0,23592600")},_setPath:function(t,e){t._path.v=e},_bringToFront:function(t){u.DomUtil.toFront(t._container)},_bringToBack:function(t){u.DomUtil.toBack(t._container)}}:{}),u.Browser.vml&&(u.SVG.create=function(){try{return s.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(t){return s.createElement("<lvml:"+t+' class="lvml">')}}catch(t){return function(t){return s.createElement("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}}()),u.Canvas=u.Renderer.extend({getEvents:function(){var t=u.Renderer.prototype.getEvents.call(this);return t.viewprereset=this._onViewPreReset,t},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){u.Renderer.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var t=this._container=s.createElement("canvas");u.DomEvent.on(t,"mousemove",u.Util.throttle(this._onMouseMove,32,this),this).on(t,"click dblclick mousedown mouseup contextmenu",this._onClick,this).on(t,"mouseout",this._handleMouseOut,this),this._ctx=t.getContext("2d")},_updatePaths:function(){if(!this._postponeUpdatePaths){var t;this._redrawBounds=null;for(var e in this._layers)t=this._layers[e],t._update();this._redraw()}},_update:function(){if(!this._map._animatingZoom||!this._bounds){this._drawnLayers={},u.Renderer.prototype._update.call(this);var t=this._bounds,e=this._container,n=t.getSize(),i=u.Browser.retina?2:1;u.DomUtil.setPosition(e,t.min),e.width=i*n.x,e.height=i*n.y,e.style.width=n.x+"px",e.style.height=n.y+"px",u.Browser.retina&&this._ctx.scale(2,2),this._ctx.translate(-t.min.x,-t.min.y),this.fire("update")}},_reset:function(){u.Renderer.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(t){this._updateDashArray(t),this._layers[u.stamp(t)]=t;var e=t._order={layer:t,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=e),this._drawLast=e,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(t){this._requestRedraw(t)},_removePath:function(t){var e=t._order,n=e.next,i=e.prev;n?n.prev=i:this._drawLast=i,i?i.next=n:this._drawFirst=n,delete t._order,delete this._layers[u.stamp(t)],this._requestRedraw(t)},_updatePath:function(t){this._extendRedrawBounds(t),t._project(),t._update(),this._requestRedraw(t)},_updateStyle:function(t){this._updateDashArray(t),this._requestRedraw(t)},_updateDashArray:function(t){if(t.options.dashArray){var e,n=t.options.dashArray.split(","),i=[];for(e=0;e<n.length;e++)i.push(Number(n[e]));t.options._dashArray=i}},_requestRedraw:function(t){this._map&&(this._extendRedrawBounds(t),this._redrawRequest=this._redrawRequest||u.Util.requestAnimFrame(this._redraw,this))},_extendRedrawBounds:function(t){var e=(t.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new u.Bounds,this._redrawBounds.extend(t._pxBounds.min.subtract([e,e])),this._redrawBounds.extend(t._pxBounds.max.add([e,e]))},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var t=this._redrawBounds;if(t){var e=t.getSize();this._ctx.clearRect(t.min.x,t.min.y,e.x,e.y)}else this._ctx.clearRect(0,0,this._container.width,this._container.height)},_draw:function(){var t,e=this._redrawBounds;if(this._ctx.save(),e){var n=e.getSize();this._ctx.beginPath(),this._ctx.rect(e.min.x,e.min.y,n.x,n.y),this._ctx.clip()}this._drawing=!0;for(var i=this._drawFirst;i;i=i.next)t=i.layer,(!e||t._pxBounds&&t._pxBounds.intersects(e))&&t._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(t,e){if(this._drawing){var n,i,o,r,a=t._parts,s=a.length,l=this._ctx;if(s){for(this._drawnLayers[t._leaflet_id]=t,l.beginPath(),l.setLineDash&&l.setLineDash(t.options&&t.options._dashArray||[]),n=0;n<s;n++){for(i=0,o=a[n].length;i<o;i++)r=a[n][i],l[i?"lineTo":"moveTo"](r.x,r.y);e&&l.closePath()}this._fillStroke(l,t)}}},_updateCircle:function(t){if(this._drawing&&!t._empty()){var e=t._point,n=this._ctx,i=t._radius,o=(t._radiusY||i)/i;this._drawnLayers[t._leaflet_id]=t,1!==o&&(n.save(),n.scale(1,o)),n.beginPath(),n.arc(e.x,e.y/o,i,0,2*Math.PI,!1),1!==o&&n.restore(),this._fillStroke(n,t)}},_fillStroke:function(t,e){var n=e.options;n.fill&&(t.globalAlpha=n.fillOpacity,t.fillStyle=n.fillColor||n.color,t.fill(n.fillRule||"evenodd")),n.stroke&&0!==n.weight&&(t.globalAlpha=n.opacity,t.lineWidth=n.weight,t.strokeStyle=n.color,t.lineCap=n.lineCap,t.lineJoin=n.lineJoin,t.stroke())},_onClick:function(t){for(var e,n,i=this._map.mouseEventToLayerPoint(t),o=this._drawFirst;o;o=o.next)e=o.layer,e.options.interactive&&e._containsPoint(i)&&!this._map._draggableMoved(e)&&(n=e);n&&(u.DomEvent._fakeStop(t),this._fireEvent([n],t))},_onMouseMove:function(t){if(this._map&&!this._map.dragging.moving()&&!this._map._animatingZoom){var e=this._map.mouseEventToLayerPoint(t);this._handleMouseHover(t,e)}},_handleMouseOut:function(t){var e=this._hoveredLayer;e&&(u.DomUtil.removeClass(this._container,"leaflet-interactive"),this._fireEvent([e],t,"mouseout"),this._hoveredLayer=null)},_handleMouseHover:function(t,e){for(var n,i,o=this._drawFirst;o;o=o.next)n=o.layer,n.options.interactive&&n._containsPoint(e)&&(i=n);i!==this._hoveredLayer&&(this._handleMouseOut(t),i&&(u.DomUtil.addClass(this._container,"leaflet-interactive"),this._fireEvent([i],t,"mouseover"),this._hoveredLayer=i)),this._hoveredLayer&&this._fireEvent([this._hoveredLayer],t)},_fireEvent:function(t,e,n){this._map._fireDOMEvent(e,n||e.type,t)},_bringToFront:function(t){var e=t._order,n=e.next,i=e.prev;n&&(n.prev=i,i?i.next=n:n&&(this._drawFirst=n),e.prev=this._drawLast,this._drawLast.next=e,e.next=null,this._drawLast=e,this._requestRedraw(t))},_bringToBack:function(t){var e=t._order,n=e.next,i=e.prev;i&&(i.next=n,n?n.prev=i:i&&(this._drawLast=i),e.prev=null,e.next=this._drawFirst,this._drawFirst.prev=e,this._drawFirst=e,this._requestRedraw(t))}}),u.Browser.canvas=function(){return!!s.createElement("canvas").getContext}(),u.canvas=function(t){return u.Browser.canvas?new u.Canvas(t):null},u.Polyline.prototype._containsPoint=function(t,e){var n,i,o,r,a,s,l=this._clickTolerance();if(!this._pxBounds.contains(t))return!1;for(n=0,r=this._parts.length;n<r;n++)for(s=this._parts[n],i=0,a=s.length,o=a-1;i<a;o=i++)if((e||0!==i)&&u.LineUtil.pointToSegmentDistance(t,s[o],s[i])<=l)return!0;return!1},u.Polygon.prototype._containsPoint=function(t){var e,n,i,o,r,a,s,l,h=!1;if(!this._pxBounds.contains(t))return!1;for(o=0,s=this._parts.length;o<s;o++)for(e=this._parts[o],r=0,l=e.length,a=l-1;r<l;a=r++)n=e[r],i=e[a],n.y>t.y!=i.y>t.y&&t.x<(i.x-n.x)*(t.y-n.y)/(i.y-n.y)+n.x&&(h=!h);return h||u.Polyline.prototype._containsPoint.call(this,t,!0)},u.CircleMarker.prototype._containsPoint=function(t){return t.distanceTo(this._point)<=this._radius+this._clickTolerance()},u.GeoJSON=u.FeatureGroup.extend({initialize:function(t,e){u.setOptions(this,e),this._layers={},t&&this.addData(t)},addData:function(t){var e,n,i,o=u.Util.isArray(t)?t:t.features;if(o){for(e=0,n=o.length;e<n;e++)i=o[e],(i.geometries||i.geometry||i.features||i.coordinates)&&this.addData(i);return this}var r=this.options;if(r.filter&&!r.filter(t))return this;var a=u.GeoJSON.geometryToLayer(t,r);return a?(a.feature=u.GeoJSON.asFeature(t),a.defaultOptions=a.options,this.resetStyle(a),r.onEachFeature&&r.onEachFeature(t,a),this.addLayer(a)):this},resetStyle:function(t){return t.options=u.Util.extend({},t.defaultOptions),this._setLayerStyle(t,this.options.style),this},setStyle:function(t){return this.eachLayer(function(e){this._setLayerStyle(e,t)},this)},_setLayerStyle:function(t,e){"function"==typeof e&&(e=e(t.feature)),t.setStyle&&t.setStyle(e)}}),u.extend(u.GeoJSON,{geometryToLayer:function(t,e){var n,i,o,r,a="Feature"===t.type?t.geometry:t,s=a?a.coordinates:null,l=[],h=e&&e.pointToLayer,c=e&&e.coordsToLatLng||this.coordsToLatLng;if(!s&&!a)return null;switch(a.type){case"Point":return n=c(s),h?h(t,n):new u.Marker(n);case"MultiPoint":for(o=0,r=s.length;o<r;o++)n=c(s[o]),l.push(h?h(t,n):new u.Marker(n));return new u.FeatureGroup(l);case"LineString":case"MultiLineString":return i=this.coordsToLatLngs(s,"LineString"===a.type?0:1,c),new u.Polyline(i,e);case"Polygon":case"MultiPolygon":return i=this.coordsToLatLngs(s,"Polygon"===a.type?1:2,c),new u.Polygon(i,e);case"GeometryCollection":for(o=0,r=a.geometries.length;o<r;o++){var f=this.geometryToLayer({geometry:a.geometries[o],type:"Feature",properties:t.properties},e);f&&l.push(f)}return new u.FeatureGroup(l);default:throw new Error("Invalid GeoJSON object.")}},coordsToLatLng:function(t){return new u.LatLng(t[1],t[0],t[2])},coordsToLatLngs:function(t,e,n){for(var i,o=[],r=0,a=t.length;r<a;r++)i=e?this.coordsToLatLngs(t[r],e-1,n):(n||this.coordsToLatLng)(t[r]),o.push(i);return o},latLngToCoords:function(t){return void 0!==t.alt?[t.lng,t.lat,t.alt]:[t.lng,t.lat]},latLngsToCoords:function(t,e,n){for(var i=[],o=0,r=t.length;o<r;o++)i.push(e?u.GeoJSON.latLngsToCoords(t[o],e-1,n):u.GeoJSON.latLngToCoords(t[o]));return!e&&n&&i.push(i[0]),i},getFeature:function(t,e){return t.feature?u.extend({},t.feature,{geometry:e}):u.GeoJSON.asFeature(e)},asFeature:function(t){return"Feature"===t.type||"FeatureCollection"===t.type?t:{type:"Feature",properties:{},geometry:t}}});var f={toGeoJSON:function(){return u.GeoJSON.getFeature(this,{type:"Point",coordinates:u.GeoJSON.latLngToCoords(this.getLatLng())})}};u.Marker.include(f),u.Circle.include(f),u.CircleMarker.include(f),u.Polyline.prototype.toGeoJSON=function(){var t=!u.Polyline._flat(this._latlngs),e=u.GeoJSON.latLngsToCoords(this._latlngs,t?1:0);return u.GeoJSON.getFeature(this,{type:(t?"Multi":"")+"LineString",coordinates:e})},u.Polygon.prototype.toGeoJSON=function(){var t=!u.Polyline._flat(this._latlngs),e=t&&!u.Polyline._flat(this._latlngs[0]),n=u.GeoJSON.latLngsToCoords(this._latlngs,e?2:t?1:0,!0);return t||(n=[n]),u.GeoJSON.getFeature(this,{type:(e?"Multi":"")+"Polygon",coordinates:n})},u.LayerGroup.include({toMultiPoint:function(){var t=[];return this.eachLayer(function(e){t.push(e.toGeoJSON().geometry.coordinates)}),u.GeoJSON.getFeature(this,{type:"MultiPoint",coordinates:t})},toGeoJSON:function(){var t=this.feature&&this.feature.geometry&&this.feature.geometry.type;if("MultiPoint"===t)return this.toMultiPoint();var e="GeometryCollection"===t,n=[];return this.eachLayer(function(t){if(t.toGeoJSON){var i=t.toGeoJSON();n.push(e?i.geometry:u.GeoJSON.asFeature(i))}}),e?u.GeoJSON.getFeature(this,{geometries:n,type:"GeometryCollection"}):{type:"FeatureCollection",features:n}}}),u.geoJSON=function(t,e){return new u.GeoJSON(t,e)},u.geoJson=u.geoJSON,u.Draggable=u.Evented.extend({options:{clickTolerance:3},statics:{START:u.Browser.touch?["touchstart","mousedown"]:["mousedown"],END:{mousedown:"mouseup",touchstart:"touchend",pointerdown:"touchend",MSPointerDown:"touchend"},MOVE:{mousedown:"mousemove",touchstart:"touchmove",pointerdown:"touchmove",MSPointerDown:"touchmove"}},initialize:function(t,e,n){this._element=t,this._dragStartTarget=e||t,this._preventOutline=n},enable:function(){this._enabled||(u.DomEvent.on(this._dragStartTarget,u.Draggable.START.join(" "),this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(u.Draggable._dragging===this&&this.finishDrag(),u.DomEvent.off(this._dragStartTarget,u.Draggable.START.join(" "),this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(t){if(!t._simulated&&this._enabled&&(this._moved=!1,!u.DomUtil.hasClass(this._element,"leaflet-zoom-anim")&&!(u.Draggable._dragging||t.shiftKey||1!==t.which&&1!==t.button&&!t.touches||(u.Draggable._dragging=this,this._preventOutline&&u.DomUtil.preventOutline(this._element),u.DomUtil.disableImageDrag(),u.DomUtil.disableTextSelection(),this._moving)))){this.fire("down");var e=t.touches?t.touches[0]:t;this._startPoint=new u.Point(e.clientX,e.clientY),u.DomEvent.on(s,u.Draggable.MOVE[t.type],this._onMove,this).on(s,u.Draggable.END[t.type],this._onUp,this)}},_onMove:function(t){if(!t._simulated&&this._enabled){if(t.touches&&t.touches.length>1)return void(this._moved=!0);var e=t.touches&&1===t.touches.length?t.touches[0]:t,n=new u.Point(e.clientX,e.clientY),i=n.subtract(this._startPoint);(i.x||i.y)&&(Math.abs(i.x)+Math.abs(i.y)<this.options.clickTolerance||(u.DomEvent.preventDefault(t),this._moved||(this.fire("dragstart"),this._moved=!0,this._startPos=u.DomUtil.getPosition(this._element).subtract(i),u.DomUtil.addClass(s.body,"leaflet-dragging"),this._lastTarget=t.target||t.srcElement,a.SVGElementInstance&&this._lastTarget instanceof SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),u.DomUtil.addClass(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(i),this._moving=!0,u.Util.cancelAnimFrame(this._animRequest),this._lastEvent=t,this._animRequest=u.Util.requestAnimFrame(this._updatePosition,this,!0)))}},_updatePosition:function(){var t={originalEvent:this._lastEvent};this.fire("predrag",t),u.DomUtil.setPosition(this._element,this._newPos),this.fire("drag",t)},_onUp:function(t){!t._simulated&&this._enabled&&this.finishDrag()},finishDrag:function(){u.DomUtil.removeClass(s.body,"leaflet-dragging"),this._lastTarget&&(u.DomUtil.removeClass(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null);for(var t in u.Draggable.MOVE)u.DomEvent.off(s,u.Draggable.MOVE[t],this._onMove,this).off(s,u.Draggable.END[t],this._onUp,this);u.DomUtil.enableImageDrag(),u.DomUtil.enableTextSelection(),this._moved&&this._moving&&(u.Util.cancelAnimFrame(this._animRequest),this.fire("dragend",{distance:this._newPos.distanceTo(this._startPos)})),this._moving=!1,u.Draggable._dragging=!1}}),u.Handler=u.Class.extend({initialize:function(t){this._map=t},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}}),u.Map.mergeOptions({dragging:!0,inertia:!u.Browser.android23,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0}),u.Map.Drag=u.Handler.extend({addHooks:function(){if(!this._draggable){var t=this._map;this._draggable=new u.Draggable(t._mapPane,t._container),this._draggable.on({down:this._onDown,dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),t.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),t.on("zoomend",this._onZoomEnd,this),t.whenReady(this._onZoomEnd,this))}u.DomUtil.addClass(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){u.DomUtil.removeClass(this._map._container,"leaflet-grab"),u.DomUtil.removeClass(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDown:function(){this._map._stop()},_onDragStart:function(){var t=this._map;if(this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var e=u.latLngBounds(this._map.options.maxBounds);this._offsetLimit=u.bounds(this._map.latLngToContainerPoint(e.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(e.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;t.fire("movestart").fire("dragstart"),t.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(t){if(this._map.options.inertia){var e=this._lastTime=+new Date,n=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(n),this._times.push(e),e-this._times[0]>50&&(this._positions.shift(),this._times.shift())}this._map.fire("move",t).fire("drag",t)},_onZoomEnd:function(){var t=this._map.getSize().divideBy(2),e=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=e.subtract(t).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(t,e){return t-(t-e)*this._viscosity},_onPreDragLimit:function(){if(this._viscosity&&this._offsetLimit){var t=this._draggable._newPos.subtract(this._draggable._startPos),e=this._offsetLimit;t.x<e.min.x&&(t.x=this._viscousLimit(t.x,e.min.x)),t.y<e.min.y&&(t.y=this._viscousLimit(t.y,e.min.y)),t.x>e.max.x&&(t.x=this._viscousLimit(t.x,e.max.x)),t.y>e.max.y&&(t.y=this._viscousLimit(t.y,e.max.y)),this._draggable._newPos=this._draggable._startPos.add(t)}},_onPreDragWrap:function(){var t=this._worldWidth,e=Math.round(t/2),n=this._initialWorldOffset,i=this._draggable._newPos.x,o=(i-e+n)%t+e-n,r=(i+e+n)%t-e-n,a=Math.abs(o+n)<Math.abs(r+n)?o:r;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=a},_onDragEnd:function(t){var e=this._map,n=e.options,i=!n.inertia||this._times.length<2;if(e.fire("dragend",t),i)e.fire("moveend");else{var o=this._lastPos.subtract(this._positions[0]),r=(this._lastTime-this._times[0])/1e3,a=n.easeLinearity,s=o.multiplyBy(a/r),l=s.distanceTo([0,0]),h=Math.min(n.inertiaMaxSpeed,l),c=s.multiplyBy(h/l),f=h/(n.inertiaDeceleration*a),p=c.multiplyBy(-f/2).round();p.x||p.y?(p=e._limitOffset(p,e.options.maxBounds),u.Util.requestAnimFrame(function(){e.panBy(p,{duration:f,easeLinearity:a,noMoveStart:!0,animate:!0})})):e.fire("moveend")}}}),u.Map.addInitHook("addHandler","dragging",u.Map.Drag),u.Map.mergeOptions({doubleClickZoom:!0}),u.Map.DoubleClickZoom=u.Handler.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(t){var e=this._map,n=e.getZoom(),i=e.options.zoomDelta,o=t.originalEvent.shiftKey?n-i:n+i;"center"===e.options.doubleClickZoom?e.setZoom(o):e.setZoomAround(t.containerPoint,o)}}),u.Map.addInitHook("addHandler","doubleClickZoom",u.Map.DoubleClickZoom),u.Map.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60}),u.Map.ScrollWheelZoom=u.Handler.extend({addHooks:function(){u.DomEvent.on(this._map._container,"mousewheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){u.DomEvent.off(this._map._container,"mousewheel",this._onWheelScroll,this)},_onWheelScroll:function(t){var e=u.DomEvent.getWheelDelta(t),n=this._map.options.wheelDebounceTime;this._delta+=e,this._lastMousePos=this._map.mouseEventToContainerPoint(t),this._startTime||(this._startTime=+new Date);var i=Math.max(n-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(u.bind(this._performZoom,this),i),u.DomEvent.stop(t)},_performZoom:function(){var t=this._map,e=t.getZoom(),n=this._map.options.zoomSnap||0;t._stop();var i=this._delta/(4*this._map.options.wheelPxPerZoomLevel),o=4*Math.log(2/(1+Math.exp(-Math.abs(i))))/Math.LN2,r=n?Math.ceil(o/n)*n:o,a=t._limitZoom(e+(this._delta>0?r:-r))-e;this._delta=0,this._startTime=null,a&&("center"===t.options.scrollWheelZoom?t.setZoom(e+a):t.setZoomAround(this._lastMousePos,e+a))}}),u.Map.addInitHook("addHandler","scrollWheelZoom",u.Map.ScrollWheelZoom),u.extend(u.DomEvent,{_touchstart:u.Browser.msPointer?"MSPointerDown":u.Browser.pointer?"pointerdown":"touchstart",_touchend:u.Browser.msPointer?"MSPointerUp":u.Browser.pointer?"pointerup":"touchend",addDoubleTapListener:function(t,e,n){function i(t){var e;if(u.Browser.pointer){if(!u.Browser.edge||"mouse"===t.pointerType)return;e=u.DomEvent._pointersCount}else e=t.touches.length;if(!(e>1)){var n=Date.now(),i=n-(r||n);a=t.touches?t.touches[0]:t,s=i>0&&i<=l,r=n}}function o(t){if(s&&!a.cancelBubble){if(u.Browser.pointer){if(!u.Browser.edge||"mouse"===t.pointerType)return;var n,i,o={};for(i in a)n=a[i],o[i]=n&&n.bind?n.bind(a):n;a=o}a.type="dblclick",e(a),r=null}}var r,a,s=!1,l=250,h="_leaflet_",c=this._touchstart,f=this._touchend;return t[h+c+n]=i,t[h+f+n]=o,t[h+"dblclick"+n]=e,t.addEventListener(c,i,!1),t.addEventListener(f,o,!1),t.addEventListener("dblclick",e,!1),this},removeDoubleTapListener:function(t,e){var n="_leaflet_",i=t[n+this._touchstart+e],o=t[n+this._touchend+e],r=t[n+"dblclick"+e];return t.removeEventListener(this._touchstart,i,!1),t.removeEventListener(this._touchend,o,!1),u.Browser.edge||t.removeEventListener("dblclick",r,!1),this}}),u.extend(u.DomEvent,{POINTER_DOWN:u.Browser.msPointer?"MSPointerDown":"pointerdown",POINTER_MOVE:u.Browser.msPointer?"MSPointerMove":"pointermove",POINTER_UP:u.Browser.msPointer?"MSPointerUp":"pointerup",POINTER_CANCEL:u.Browser.msPointer?"MSPointerCancel":"pointercancel",TAG_WHITE_LIST:["INPUT","SELECT","OPTION"],_pointers:{},_pointersCount:0,addPointerListener:function(t,e,n,i){return"touchstart"===e?this._addPointerStart(t,n,i):"touchmove"===e?this._addPointerMove(t,n,i):"touchend"===e&&this._addPointerEnd(t,n,i),this},removePointerListener:function(t,e,n){var i=t["_leaflet_"+e+n];return"touchstart"===e?t.removeEventListener(this.POINTER_DOWN,i,!1):"touchmove"===e?t.removeEventListener(this.POINTER_MOVE,i,!1):"touchend"===e&&(t.removeEventListener(this.POINTER_UP,i,!1),t.removeEventListener(this.POINTER_CANCEL,i,!1)),this},_addPointerStart:function(t,e,n){var i=u.bind(function(t){if("mouse"!==t.pointerType&&t.MSPOINTER_TYPE_MOUSE&&t.pointerType!==t.MSPOINTER_TYPE_MOUSE){if(!(this.TAG_WHITE_LIST.indexOf(t.target.tagName)<0))return;u.DomEvent.preventDefault(t)}this._handlePointer(t,e)},this);if(t["_leaflet_touchstart"+n]=i,t.addEventListener(this.POINTER_DOWN,i,!1),!this._pointerDocListener){var o=u.bind(this._globalPointerUp,this);s.documentElement.addEventListener(this.POINTER_DOWN,u.bind(this._globalPointerDown,this),!0),s.documentElement.addEventListener(this.POINTER_MOVE,u.bind(this._globalPointerMove,this),!0),s.documentElement.addEventListener(this.POINTER_UP,o,!0),s.documentElement.addEventListener(this.POINTER_CANCEL,o,!0),this._pointerDocListener=!0}},_globalPointerDown:function(t){this._pointers[t.pointerId]=t,this._pointersCount++},_globalPointerMove:function(t){this._pointers[t.pointerId]&&(this._pointers[t.pointerId]=t)},_globalPointerUp:function(t){delete this._pointers[t.pointerId],this._pointersCount--},_handlePointer:function(t,e){t.touches=[];for(var n in this._pointers)t.touches.push(this._pointers[n]);t.changedTouches=[t],e(t)},_addPointerMove:function(t,e,n){var i=u.bind(function(t){(t.pointerType!==t.MSPOINTER_TYPE_MOUSE&&"mouse"!==t.pointerType||0!==t.buttons)&&this._handlePointer(t,e)},this);t["_leaflet_touchmove"+n]=i,t.addEventListener(this.POINTER_MOVE,i,!1)},_addPointerEnd:function(t,e,n){var i=u.bind(function(t){this._handlePointer(t,e)},this);t["_leaflet_touchend"+n]=i,t.addEventListener(this.POINTER_UP,i,!1),t.addEventListener(this.POINTER_CANCEL,i,!1)}}),u.Map.mergeOptions({touchZoom:u.Browser.touch&&!u.Browser.android23,bounceAtZoomLimits:!0}),u.Map.TouchZoom=u.Handler.extend({addHooks:function(){u.DomUtil.addClass(this._map._container,"leaflet-touch-zoom"),u.DomEvent.on(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){u.DomUtil.removeClass(this._map._container,"leaflet-touch-zoom"),u.DomEvent.off(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(t){var e=this._map;if(t.touches&&2===t.touches.length&&!e._animatingZoom&&!this._zooming){var n=e.mouseEventToContainerPoint(t.touches[0]),i=e.mouseEventToContainerPoint(t.touches[1]);this._centerPoint=e.getSize()._divideBy(2),this._startLatLng=e.containerPointToLatLng(this._centerPoint),"center"!==e.options.touchZoom&&(this._pinchStartLatLng=e.containerPointToLatLng(n.add(i)._divideBy(2))),this._startDist=n.distanceTo(i),this._startZoom=e.getZoom(),this._moved=!1,this._zooming=!0,e._stop(),u.DomEvent.on(s,"touchmove",this._onTouchMove,this).on(s,"touchend",this._onTouchEnd,this),u.DomEvent.preventDefault(t)}},_onTouchMove:function(t){if(t.touches&&2===t.touches.length&&this._zooming){var e=this._map,n=e.mouseEventToContainerPoint(t.touches[0]),i=e.mouseEventToContainerPoint(t.touches[1]),o=n.distanceTo(i)/this._startDist;if(this._zoom=e.getScaleZoom(o,this._startZoom),!e.options.bounceAtZoomLimits&&(this._zoom<e.getMinZoom()&&o<1||this._zoom>e.getMaxZoom()&&o>1)&&(this._zoom=e._limitZoom(this._zoom)),"center"===e.options.touchZoom){if(this._center=this._startLatLng,1===o)return}else{var r=n._add(i)._divideBy(2)._subtract(this._centerPoint);if(1===o&&0===r.x&&0===r.y)return;this._center=e.unproject(e.project(this._pinchStartLatLng,this._zoom).subtract(r),this._zoom)}this._moved||(e._moveStart(!0),this._moved=!0),u.Util.cancelAnimFrame(this._animRequest);var a=u.bind(e._move,e,this._center,this._zoom,{pinch:!0,round:!1});this._animRequest=u.Util.requestAnimFrame(a,this,!0),u.DomEvent.preventDefault(t)}},_onTouchEnd:function(){if(!this._moved||!this._zooming)return void(this._zooming=!1);this._zooming=!1,u.Util.cancelAnimFrame(this._animRequest),u.DomEvent.off(s,"touchmove",this._onTouchMove).off(s,"touchend",this._onTouchEnd),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}}),u.Map.addInitHook("addHandler","touchZoom",u.Map.TouchZoom),u.Map.mergeOptions({tap:!0,tapTolerance:15}),u.Map.Tap=u.Handler.extend({addHooks:function(){u.DomEvent.on(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){u.DomEvent.off(this._map._container,"touchstart",this._onDown,this)},_onDown:function(t){if(t.touches){if(u.DomEvent.preventDefault(t),this._fireClick=!0,t.touches.length>1)return this._fireClick=!1,void clearTimeout(this._holdTimeout);var e=t.touches[0],n=e.target;this._startPos=this._newPos=new u.Point(e.clientX,e.clientY),n.tagName&&"a"===n.tagName.toLowerCase()&&u.DomUtil.addClass(n,"leaflet-active"),this._holdTimeout=setTimeout(u.bind(function(){this._isTapValid()&&(this._fireClick=!1,this._onUp(),this._simulateEvent("contextmenu",e))},this),1e3),this._simulateEvent("mousedown",e),u.DomEvent.on(s,{touchmove:this._onMove,touchend:this._onUp},this)}},_onUp:function(t){if(clearTimeout(this._holdTimeout),u.DomEvent.off(s,{touchmove:this._onMove,touchend:this._onUp},this),this._fireClick&&t&&t.changedTouches){var e=t.changedTouches[0],n=e.target;n&&n.tagName&&"a"===n.tagName.toLowerCase()&&u.DomUtil.removeClass(n,"leaflet-active"),this._simulateEvent("mouseup",e),this._isTapValid()&&this._simulateEvent("click",e)}},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_onMove:function(t){var e=t.touches[0];this._newPos=new u.Point(e.clientX,e.clientY),this._simulateEvent("mousemove",e)},_simulateEvent:function(t,e){var n=s.createEvent("MouseEvents");n._simulated=!0,e.target._simulatedClick=!0,n.initMouseEvent(t,!0,!0,a,1,e.screenX,e.screenY,e.clientX,e.clientY,!1,!1,!1,!1,0,null),e.target.dispatchEvent(n)}}),u.Browser.touch&&!u.Browser.pointer&&u.Map.addInitHook("addHandler","tap",u.Map.Tap),u.Map.mergeOptions({boxZoom:!0}),u.Map.BoxZoom=u.Handler.extend({initialize:function(t){this._map=t,this._container=t._container,this._pane=t._panes.overlayPane},addHooks:function(){u.DomEvent.on(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){u.DomEvent.off(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_resetState:function(){this._moved=!1},_onMouseDown:function(t){if(!t.shiftKey||1!==t.which&&1!==t.button)return!1;this._resetState(),u.DomUtil.disableTextSelection(),u.DomUtil.disableImageDrag(),this._startPoint=this._map.mouseEventToContainerPoint(t),u.DomEvent.on(s,{contextmenu:u.DomEvent.stop,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(t){this._moved||(this._moved=!0,this._box=u.DomUtil.create("div","leaflet-zoom-box",this._container),u.DomUtil.addClass(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(t);var e=new u.Bounds(this._point,this._startPoint),n=e.getSize();u.DomUtil.setPosition(this._box,e.min),this._box.style.width=n.x+"px",this._box.style.height=n.y+"px"},_finish:function(){this._moved&&(u.DomUtil.remove(this._box),u.DomUtil.removeClass(this._container,"leaflet-crosshair")),u.DomUtil.enableTextSelection(),u.DomUtil.enableImageDrag(),u.DomEvent.off(s,{contextmenu:u.DomEvent.stop,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(t){if((1===t.which||1===t.button)&&(this._finish(),this._moved)){setTimeout(u.bind(this._resetState,this),0);var e=new u.LatLngBounds(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(e).fire("boxzoomend",{boxZoomBounds:e})}},_onKeyDown:function(t){27===t.keyCode&&this._finish()}}),u.Map.addInitHook("addHandler","boxZoom",u.Map.BoxZoom),u.Map.mergeOptions({keyboard:!0,keyboardPanDelta:80}),u.Map.Keyboard=u.Handler.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(t){this._map=t,this._setPanDelta(t.options.keyboardPanDelta),this._setZoomDelta(t.options.zoomDelta)},addHooks:function(){var t=this._map._container;t.tabIndex<=0&&(t.tabIndex="0"),u.DomEvent.on(t,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),u.DomEvent.off(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var t=s.body,e=s.documentElement,n=t.scrollTop||e.scrollTop,i=t.scrollLeft||e.scrollLeft;this._map._container.focus(),a.scrollTo(i,n)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(t){var e,n,i=this._panKeys={},o=this.keyCodes;for(e=0,n=o.left.length;e<n;e++)i[o.left[e]]=[-1*t,0];for(e=0,n=o.right.length;e<n;e++)i[o.right[e]]=[t,0];for(e=0,n=o.down.length;e<n;e++)i[o.down[e]]=[0,t];for(e=0,n=o.up.length;e<n;e++)i[o.up[e]]=[0,-1*t]},_setZoomDelta:function(t){var e,n,i=this._zoomKeys={},o=this.keyCodes;for(e=0,n=o.zoomIn.length;e<n;e++)i[o.zoomIn[e]]=t;for(e=0,n=o.zoomOut.length;e<n;e++)i[o.zoomOut[e]]=-t},_addHooks:function(){u.DomEvent.on(s,"keydown",this._onKeyDown,this)},_removeHooks:function(){u.DomEvent.off(s,"keydown",this._onKeyDown,this)},_onKeyDown:function(t){if(!(t.altKey||t.ctrlKey||t.metaKey)){var e,n=t.keyCode,i=this._map;if(n in this._panKeys){if(i._panAnim&&i._panAnim._inProgress)return;e=this._panKeys[n],t.shiftKey&&(e=u.point(e).multiplyBy(3)),i.panBy(e),i.options.maxBounds&&i.panInsideBounds(i.options.maxBounds)}else if(n in this._zoomKeys)i.setZoom(i.getZoom()+(t.shiftKey?3:1)*this._zoomKeys[n]);else{if(27!==n)return;i.closePopup()}u.DomEvent.stop(t)}}}),u.Map.addInitHook("addHandler","keyboard",u.Map.Keyboard),u.Handler.MarkerDrag=u.Handler.extend({initialize:function(t){this._marker=t},addHooks:function(){var t=this._marker._icon;this._draggable||(this._draggable=new u.Draggable(t,t,!0)),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),u.DomUtil.addClass(t,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&u.DomUtil.removeClass(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup().fire("movestart").fire("dragstart")},_onDrag:function(t){var e=this._marker,n=e._shadow,i=u.DomUtil.getPosition(e._icon),o=e._map.layerPointToLatLng(i);n&&u.DomUtil.setPosition(n,i),e._latlng=o,t.latlng=o,t.oldLatLng=this._oldLatLng,e.fire("move",t).fire("drag",t)},_onDragEnd:function(t){delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",t)}}),u.Control=u.Class.extend({options:{position:"topright"},initialize:function(t){u.setOptions(this,t)},getPosition:function(){return this.options.position},setPosition:function(t){var e=this._map;return e&&e.removeControl(this),this.options.position=t,e&&e.addControl(this),this},getContainer:function(){return this._container},addTo:function(t){this.remove(),this._map=t;var e=this._container=this.onAdd(t),n=this.getPosition(),i=t._controlCorners[n];return u.DomUtil.addClass(e,"leaflet-control"),-1!==n.indexOf("bottom")?i.insertBefore(e,i.firstChild):i.appendChild(e),this},remove:function(){return this._map?(u.DomUtil.remove(this._container),this.onRemove&&this.onRemove(this._map),this._map=null,this):this},_refocusOnMap:function(t){this._map&&t&&t.screenX>0&&t.screenY>0&&this._map.getContainer().focus()}}),u.control=function(t){return new u.Control(t)},u.Map.include({addControl:function(t){return t.addTo(this),this},removeControl:function(t){return t.remove(),this},_initControlPos:function(){function t(t,o){var r=n+t+" "+n+o;e[t+o]=u.DomUtil.create("div",r,i)}var e=this._controlCorners={},n="leaflet-",i=this._controlContainer=u.DomUtil.create("div",n+"control-container",this._container);t("top","left"),t("top","right"),t("bottom","left"),t("bottom","right")},_clearControlPos:function(){u.DomUtil.remove(this._controlContainer)}}),u.Control.Zoom=u.Control.extend({options:{position:"topleft",zoomInText:"+",zoomInTitle:"Zoom in",zoomOutText:"-",zoomOutTitle:"Zoom out"},onAdd:function(t){var e="leaflet-control-zoom",n=u.DomUtil.create("div",e+" leaflet-bar"),i=this.options;return this._zoomInButton=this._createButton(i.zoomInText,i.zoomInTitle,e+"-in",n,this._zoomIn),this._zoomOutButton=this._createButton(i.zoomOutText,i.zoomOutTitle,e+"-out",n,this._zoomOut),this._updateDisabled(),t.on("zoomend zoomlevelschange",this._updateDisabled,this),n},onRemove:function(t){t.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(t){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(t.shiftKey?3:1))},_zoomOut:function(t){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(t.shiftKey?3:1))},_createButton:function(t,e,n,i,o){var r=u.DomUtil.create("a",n,i);return r.innerHTML=t,r.href="#",r.title=e,r.setAttribute("role","button"),r.setAttribute("aria-label",e),u.DomEvent.on(r,"mousedown dblclick",u.DomEvent.stopPropagation).on(r,"click",u.DomEvent.stop).on(r,"click",o,this).on(r,"click",this._refocusOnMap,this),r},_updateDisabled:function(){var t=this._map,e="leaflet-disabled";u.DomUtil.removeClass(this._zoomInButton,e),u.DomUtil.removeClass(this._zoomOutButton,e),(this._disabled||t._zoom===t.getMinZoom())&&u.DomUtil.addClass(this._zoomOutButton,e),(this._disabled||t._zoom===t.getMaxZoom())&&u.DomUtil.addClass(this._zoomInButton,e)}}),u.Map.mergeOptions({zoomControl:!0}),u.Map.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new u.Control.Zoom,this.addControl(this.zoomControl))}),u.control.zoom=function(t){return new u.Control.Zoom(t)},u.Control.Attribution=u.Control.extend({options:{position:"bottomright",prefix:'<a href="http://leafletjs.com" title="A JS library for interactive maps">Leaflet</a>'},initialize:function(t){u.setOptions(this,t),this._attributions={}},onAdd:function(t){t.attributionControl=this,this._container=u.DomUtil.create("div","leaflet-control-attribution"),u.DomEvent&&u.DomEvent.disableClickPropagation(this._container);for(var e in t._layers)t._layers[e].getAttribution&&this.addAttribution(t._layers[e].getAttribution());return this._update(),this._container},setPrefix:function(t){return this.options.prefix=t,this._update(),this},addAttribution:function(t){return t?(this._attributions[t]||(this._attributions[t]=0),this._attributions[t]++,this._update(),this):this},removeAttribution:function(t){return t?(this._attributions[t]&&(this._attributions[t]--,this._update()),this):this},_update:function(){if(this._map){var t=[];for(var e in this._attributions)this._attributions[e]&&t.push(e);var n=[];this.options.prefix&&n.push(this.options.prefix),t.length&&n.push(t.join(", ")),this._container.innerHTML=n.join(" | ")}}}),u.Map.mergeOptions({attributionControl:!0}),u.Map.addInitHook(function(){this.options.attributionControl&&(new u.Control.Attribution).addTo(this)}),u.control.attribution=function(t){return new u.Control.Attribution(t)},u.Control.Scale=u.Control.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(t){var e=u.DomUtil.create("div","leaflet-control-scale"),n=this.options;return this._addScales(n,"leaflet-control-scale-line",e),t.on(n.updateWhenIdle?"moveend":"move",this._update,this),t.whenReady(this._update,this),e},onRemove:function(t){t.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(t,e,n){t.metric&&(this._mScale=u.DomUtil.create("div",e,n)),t.imperial&&(this._iScale=u.DomUtil.create("div",e,n))},_update:function(){var t=this._map,e=t.getSize().y/2,n=t.distance(t.containerPointToLatLng([0,e]),t.containerPointToLatLng([this.options.maxWidth,e]));this._updateScales(n)},_updateScales:function(t){this.options.metric&&t&&this._updateMetric(t),this.options.imperial&&t&&this._updateImperial(t)},_updateMetric:function(t){var e=this._getRoundNum(t),n=e<1e3?e+" m":e/1e3+" km";this._updateScale(this._mScale,n,e/t)},_updateImperial:function(t){var e,n,i,o=3.2808399*t;o>5280?(e=o/5280,n=this._getRoundNum(e),this._updateScale(this._iScale,n+" mi",n/e)):(i=this._getRoundNum(o),this._updateScale(this._iScale,i+" ft",i/o))},_updateScale:function(t,e,n){t.style.width=Math.round(this.options.maxWidth*n)+"px",t.innerHTML=e},_getRoundNum:function(t){var e=Math.pow(10,(Math.floor(t)+"").length-1),n=t/e;return n=n>=10?10:n>=5?5:n>=3?3:n>=2?2:1,e*n}}),u.control.scale=function(t){return new u.Control.Scale(t)},u.Control.Layers=u.Control.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(t,e,n,i){return n<i?-1:i<n?1:0}},initialize:function(t,e,n){u.setOptions(this,n),this._layers=[],this._lastZIndex=0,this._handlingClick=!1;for(var i in t)this._addLayer(t[i],i);for(i in e)this._addLayer(e[i],i,!0)},onAdd:function(t){return this._initLayout(),this._update(),this._map=t,t.on("zoomend",this._checkDisabledLayers,this),this._container},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var t=0;t<this._layers.length;t++)this._layers[t].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(t,e){return this._addLayer(t,e),this._map?this._update():this},addOverlay:function(t,e){return this._addLayer(t,e,!0),this._map?this._update():this},removeLayer:function(t){t.off("add remove",this._onLayerChange,this);var e=this._getLayer(u.stamp(t));return e&&this._layers.splice(this._layers.indexOf(e),1),this._map?this._update():this},expand:function(){u.DomUtil.addClass(this._container,"leaflet-control-layers-expanded"),this._form.style.height=null;var t=this._map.getSize().y-(this._container.offsetTop+50);return t<this._form.clientHeight?(u.DomUtil.addClass(this._form,"leaflet-control-layers-scrollbar"),this._form.style.height=t+"px"):u.DomUtil.removeClass(this._form,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return u.DomUtil.removeClass(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var t="leaflet-control-layers",e=this._container=u.DomUtil.create("div",t),n=this.options.collapsed;e.setAttribute("aria-haspopup",!0),u.DomEvent.disableClickPropagation(e),u.Browser.touch||u.DomEvent.disableScrollPropagation(e);var i=this._form=u.DomUtil.create("form",t+"-list");n&&(this._map.on("click",this.collapse,this),u.Browser.android||u.DomEvent.on(e,{mouseenter:this.expand,mouseleave:this.collapse},this));var o=this._layersLink=u.DomUtil.create("a",t+"-toggle",e);o.href="#",o.title="Layers",u.Browser.touch?u.DomEvent.on(o,"click",u.DomEvent.stop).on(o,"click",this.expand,this):u.DomEvent.on(o,"focus",this.expand,this),u.DomEvent.on(i,"click",function(){setTimeout(u.bind(this._onInputClick,this),0)},this),n||this.expand(),this._baseLayersList=u.DomUtil.create("div",t+"-base",i),this._separator=u.DomUtil.create("div",t+"-separator",i),this._overlaysList=u.DomUtil.create("div",t+"-overlays",i),e.appendChild(i)},_getLayer:function(t){for(var e=0;e<this._layers.length;e++)if(this._layers[e]&&u.stamp(this._layers[e].layer)===t)return this._layers[e]},_addLayer:function(t,e,n){t.on("add remove",this._onLayerChange,this),this._layers.push({layer:t,name:e,overlay:n}),this.options.sortLayers&&this._layers.sort(u.bind(function(t,e){return this.options.sortFunction(t.layer,e.layer,t.name,e.name)},this)),this.options.autoZIndex&&t.setZIndex&&(this._lastZIndex++,t.setZIndex(this._lastZIndex))},_update:function(){if(!this._container)return this;u.DomUtil.empty(this._baseLayersList),u.DomUtil.empty(this._overlaysList);var t,e,n,i,o=0;for(n=0;n<this._layers.length;n++)i=this._layers[n],this._addItem(i),e=e||i.overlay,t=t||!i.overlay,o+=i.overlay?0:1;return this.options.hideSingleBase&&(t=t&&o>1,this._baseLayersList.style.display=t?"":"none"),this._separator.style.display=e&&t?"":"none",this},_onLayerChange:function(t){this._handlingClick||this._update();var e=this._getLayer(u.stamp(t.target)),n=e.overlay?"add"===t.type?"overlayadd":"overlayremove":"add"===t.type?"baselayerchange":null;n&&this._map.fire(n,e)},_createRadioElement:function(t,e){var n='<input type="radio" class="leaflet-control-layers-selector" name="'+t+'"'+(e?' checked="checked"':"")+"/>",i=s.createElement("div");return i.innerHTML=n,i.firstChild},_addItem:function(t){var e,n=s.createElement("label"),i=this._map.hasLayer(t.layer);t.overlay?(e=s.createElement("input"),e.type="checkbox",e.className="leaflet-control-layers-selector",e.defaultChecked=i):e=this._createRadioElement("leaflet-base-layers",i),e.layerId=u.stamp(t.layer),u.DomEvent.on(e,"click",this._onInputClick,this);var o=s.createElement("span");o.innerHTML=" "+t.name;var r=s.createElement("div");return n.appendChild(r),r.appendChild(e),r.appendChild(o),(t.overlay?this._overlaysList:this._baseLayersList).appendChild(n),this._checkDisabledLayers(),n},_onInputClick:function(){var t,e,n,i=this._form.getElementsByTagName("input"),o=[],r=[];this._handlingClick=!0;for(var a=i.length-1;a>=0;a--)t=i[a],e=this._getLayer(t.layerId).layer,n=this._map.hasLayer(e),t.checked&&!n?o.push(e):!t.checked&&n&&r.push(e);for(a=0;a<r.length;a++)this._map.removeLayer(r[a]);for(a=0;a<o.length;a++)this._map.addLayer(o[a]);this._handlingClick=!1,this._refocusOnMap()},_checkDisabledLayers:function(){for(var t,e,n=this._form.getElementsByTagName("input"),i=this._map.getZoom(),o=n.length-1;o>=0;o--)t=n[o],e=this._getLayer(t.layerId).layer,t.disabled=void 0!==e.options.minZoom&&i<e.options.minZoom||void 0!==e.options.maxZoom&&i>e.options.maxZoom},_expand:function(){return this.expand()},_collapse:function(){return this.collapse()}}),u.control.layers=function(t,e,n){return new u.Control.Layers(t,e,n)}}(window,document)}).call(e,n(7)(t))},function(t,e){t.exports={gaea:{type:"gaea",rootURL:"http://img2.sz-map.com/Layers20160414/Layers/_alllayers",options:{name:"Gaea-Vector",format:"png",maxBounds:"119.89,30.75;121.406,32.08"},crs:{origin:"-400,400",resolutions:[.000761427507662348,.000380713753831174,.000190356876915587,951784384577936e-19,475892192288968e-19,237946096144484e-19,118973048072242e-19,59486524036121e-19,29743262572878492e-22]}},tdt:{type:"tdt",rootURL:"http://t0.tianditu.com",options:{zoomOffset:2,minZoom:3,maxBounds:"-180,-90;180,90"},crs:{origin:"-180,90",resolutions:[.35156249999999994,.17578124999999997,.08789062500000014,.04394531250000007,.021972656250000007,.01098632812500002,.00549316406250001,.0027465820312500017,.0013732910156250009,.000686645507812499,.0003433227539062495,.00017166137695312503,8583068847656251e-20,42915344238281406e-21,21457672119140645e-21,10728836059570307e-21,5364418029785169e-21]}},pgis:{type:"pgis",rootURL:["http://10.35.162.68:7001/PGIS_S_TileMapServer/Maps/default","http://10.35.162.68:7001/PGIS_S_TileMapServer/Maps/PGISYX","http://10.35.162.68:7001/PGIS_S_TileMapServer/Maps/PGISSY"],options:{zoomOffset:0,version:.3,maxBounds:"0,0;180,90"},crs:{origin:"90,0",resolutions:[2,1,.5,.25,.125,.0625,.03125,.015625,.0078125,.00390625,.001953125,.0009765625,.00048828125,.000244140625,.0001220703125,6103515625e-14,30517578125e-15,152587890625e-16,762939453125e-17,3814697265625e-18,19073486328125e-19,9.5367431640625e-7,4.76837158203125e-7]}},esri:{type:"esri"},baidu2:{type:"baidu",rootURL:"http://api1.map.bdimg.com/customimage/tile?&x={x}&y={y}&z={z}&scale=1&customid={style}",maxBounds:[[-179.70452921607554,-84.51083754056644],[179.70452921607554,84.51083754056644]],maxZoom:18,minZoom:5,bounds:[[20037508.342789244,-20037508.342789244],[-20037508.342789244,20037508.342789244]],origin:[0,0]},baidu:{type:"baidu",rootURL:"http://api1.map.bdimg.com/customimage/tile?&x={x}&y={y}&z={z}&scale=1&customid={style}",imageRootURL:"http://shangetu0.map.bdimg.com/it/u=x={x};y={y};z={z};v=009;type=sate&fm=46&udt=20180418",maxBounds:[[.4415399284504272,.1481717277484394],[179.70452921607554,84.51083754056644]],maxZoom:18,minZoom:5,bounds:[[20037508.342789244,-20037508.342789244],[-20037508.342789244,20037508.342789244]],origin:[0,0]}}},function(t,e,n){"use strict";(function(t){function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=function t(e,n,i){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,n);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,n,i)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(i)},l=n(0),u=function(t){return t&&t.__esModule?t:{default:t}}(l),h=function(e){function n(e,r,a,s){i(this,n);var l=o(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return l._map=e&&e._delegate||e,l._container=l._map.getContainer(),t.setOptions(l,s),l._callback=r,l._callbackContext=a,l}return r(n,e),a(n,[{key:"enable",value:function(){if(this._enabled)return this;if(s(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"enable",this).call(this),this._callback&&"function"==typeof this._callback){var t={status:"start",featureType:this.type};this._callback.call(this._callbackContext||this,t)}}},{key:"disable",value:function(){if(!this._enabled)return this;if(s(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"disable",this).call(this),this._callback&&"function"==typeof this._callback){var t={status:"stop",featureType:this.type};this._callback.call(this._callbackContext||this,t)}}},{key:"addHooks",value:function(){var e=this._map;e&&(t.DomUtil.disableTextSelection(),e.getContainer().focus(),this._tooltip=new u.default.DrawTooltip(e),this._layer=new u.default.VectorLayer,e.addLayer(this._layer))}},{key:"removeHooks",value:function(){this._map&&(this._layer.clear(),this._map.removeLayer(this._layer),delete this._layer,t.DomUtil.enableTextSelection(),this._tooltip.dispose(),this._tooltip=null)}},{key:"setOptions",value:function(e){t.setOptions(this,e)}},{key:"_fireCreatedEvent",value:function(t){if("function"==typeof t.toDelegate&&(t=t.toDelegate()),this._callback&&"function"==typeof this._callback){var e={feature:t,featureType:this.type,status:"created"};this._callback.call(this._callbackContext||this,e)}}}]),n}(u.default.Handler);e.default=h}).call(e,n(1))},function(t,e,n){"use strict";(function(t){function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=n(0),l=function(t){return t&&t.__esModule?t:{default:t}}(s),u=function(e){function n(e,r){i(this,n);var a=e._map,s=o(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,a));return t.setOptions(s,r),s._map=a&&a._delegate||a,s._shape=e&&e._delegate||e,s._originText=l.default.Edit.Local[s._shape.type]&&l.default.Edit.Local[s._shape.type].text||"",r&&void 0!==r.text&&(s._originText=r&&r.text),s}return r(n,e),a(n,[{key:"addHooks",value:function(){var t=this._map=this._shape._map;t&&(t.getContainer().focus(),this._shape.on("mousemove",this._onMouseMove,this).on("touchmove",this._onMouseMove,this).on("MSPointerMove",this._onMouseMove,this),this.options.disabledTooltip||(this._tooltip=new l.default.DrawTooltip(this._map,this._shape),this._tooltip.updateContent({text:this._originText,subtext:l.default.Edit.Local.subtext}),t._editTooltip=this._tooltip,this._updateTooltip(),this._map.on("editvertex",this._updateTooltip,this)))}},{key:"removeHooks",value:function(){this._map&&(this._uneditedLayerProps={},this._tooltip&&(this._tooltip.dispose(),this._tooltip=null,this._map.off("editvertex",this._updateTooltip,this)),this._shape.off("mousemove",this._onMouseMove,this).off("touchmove",this._onMouseMove,this).off("MSPointerMove",this._onMouseMove,this))}},{key:"_getTooltipText",value:function(){return{text:this._originText,subtext:l.default.Edit.Local.subtext}}},{key:"_updateTooltipContent",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";this._tooltip&&this._tooltip.updateContent({text:t,subtext:e})}},{key:"_updateTooltip",value:function(){this._tooltip&&this._tooltip.updateContent(this._getTooltipText())}},{key:"_onMouseMove",value:function(t){this._tooltip&&this._tooltip.updatePosition(t.latlng)}}]),n}(l.default.Handler);e.default=u}).call(e,n(1))},function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});e.PolyBase={_makeFeatureParts:function(e,n){var i,o=e.geometry;this._parts=[];for(var r=0;r<o.length;r++){for(var a=o[r],s=[],l=0;l<a.length;l++)i=a[l],s.push(t.point(i).scaleBy(n));this._parts.push(s)}},makeInteractive:function(){this._pxBounds=this._getPixelBounds()}}}).call(e,n(1))},function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});e.Symbolizer=t.Class.extend({render:function(t,e){this._renderer=t,this.options=e,t._initPath(this),t._updateStyle(this)},updateStyle:function(t,e){this.options=e,t._updateStyle(this)},_getPixelBounds:function(){for(var e=this._parts,n=t.bounds([]),i=0;i<e.length;i++)for(var o=e[i],r=0;r<o.length;r++)n.extend(o[r]);var a=this._clickTolerance(),s=new t.Point(a,a);return n.min._subtract(s),n.max._add(s),n},_clickTolerance:t.Path.prototype._clickTolerance})}).call(e,n(1))},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e,n){"use strict";(function(t,i,o){function r(){a(),delete window.L,delete window.Http,delete window.CE}function a(){GL.CRS=l.default.CRS,GL.LayerLookup=l.default.LayerLookup,GL.H.Geometry=l.default.Help.Geometry,GL.H.Transform=l.default.Help.Transform,GL.DrawTool=l.default.DrawTool,GL.EditTool=l.default.EditTool,GL.DrawTooltip=l.default.DrawTooltip,GL.Measure=l.default.Measure,GL.LngLat.encryption=t.encryption,GL.DomUtil=i.DomUtil,GL.DomEvent=i.DomEvent,GL.Handler=l.default.Handler,GL.Handler.PointDrag=l.default.Handler.PointDrag,GL.Control=l.default.Control,GL.Control.Scale=l.default.Control.Scale,GL.E=l.default.Event,GL.Http=o,GL.CanvasLabelLayer=l.default.CanvasLabelLayer}Object.defineProperty(e,"__esModule",{value:!0}),e.preload=r;var s=n(0),l=function(t){return t&&t.__esModule?t:{default:t}}(s);n(156),n(63),n(157),n(90),n(64),n(88),n(25),n(24),n(69),n(26)}).call(e,n(21),n(1),n(20))},function(t,e,n){"use strict";(function(t){function i(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),l=function t(e,n,i){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,n);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,n,i)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(i)},u=n(3),h=i(u),c=n(0),f=i(c),p={allowIntersection:!0,repeatMode:!1,drawError:{color:"#b00b00",timeout:2500},icon:new f.default.Icon.Div("","gaea-draw-vertex-icon",null,{iconSize:new f.default.Pixel(12,12)}),style:new f.default.Style({color:"#3388ff",weight:4,opacity:.5}),showLength:!0,zIndexOffset:2e3},d=function(e){function n(e,i,a,s){o(this,n),(s=t.extend({},p,s))&&s.drawError&&(s.drawError=t.Util.extend({},p.drawError,s.drawError));var l=r(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e,i,a,s));return l.options.drawError.message=f.default.Draw.Local.polyline.error,l.type=f.default.Overlay.Polyline.type,l.Poly=f.default.Overlay.Polyline,l}return a(n,e),s(n,[{key:"addHooks",value:function(){if(l(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"addHooks",this).call(this),this._map){if(this._markers=[],this._vectorLayer=new f.default.VectorLayer,this._map.addLayer(this._vectorLayer),this._poly=new f.default.Overlay.Polyline([],this.options.style),this._tooltip.updateContent(this._getTooltipText()),!this._mouseMarker){var t=new f.default.Icon.Div("","gaea-mouse-marker",[40,40],{iconAnchor:[20,20]});this._mouseMarker=new f.default.Overlay.Point(this._map.getCenter(),t,{opacity:0,zIndexOffset:this.options.zIndexOffset})}this._layer.addOverlay(this._mouseMarker),this._mouseMarker.on("mouseout",this._onMouseOut,this).on("mousemove",this._onMouseMove,this).on("mousedown",this._onMouseDown,this).on("mouseup",this._onMouseUp,this),this._map.on("mouseup",this._onMouseUp,this).on("mousemove",this._onMouseMove,this).on("zoomlevelschange",this._onZoomEnd,this).on("touchstart",this._onTouch,this).on("zoomend",this._onZoomEnd,this)}}},{key:"removeHooks",value:function(){l(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"removeHooks",this).call(this),this._clearHideErrorTimeout(),this._cleanUpShape(),this._map.removeLayer(this._vectorLayer),delete this._vectorLayer,delete this._markers,delete this._poly,this._mouseMarker.off("mousedown",this._onMouseDown,this).off("mouseout",this._onMouseOut,this).off("mouseup",this._onMouseUp,this).off("mousemove",this._onMouseMove,this),delete this._mouseMarker,this._map.off("mouseup",this._onMouseUp,this).off("mousemove",this._onMouseMove,this).off("zoomlevelschange",this._onZoomEnd,this).off("zoomend",this._onZoomEnd,this).off("touchstart",this._onTouch,this).off("click",this._onTouch,this)}},{key:"deleteLastVertex",value:function(){if(!(this._markers.length<=1)){var t=this._markers.pop(),e=this._poly,n=e.getLngLats(),i=n.splice(-1,1)[0];this._poly.setLngLats(n),this._vectorLayer.removeOverlay(t),e.getLngLats().length<2&&this._layer.removeOverlay(e),this._vertexChanged(i,!1)}}},{key:"addVertex",value:function(t){if(this._markers.length>=2&&!this.options.allowIntersection&&this._poly.newLatLngIntersects(t,!1,!0))return void this._showErrorTooltip();this._errorShown&&this._hideErrorTooltip(),this._markers.push(this._createMarker(t)),1===this._markers.length?(this._poly.addLngLat(t),this._poly.addLngLat(t)):this._poly.addLngLat(t,this._poly.getLngLats().length-1),2===this._poly.getLngLats().length&&this._layer.addOverlay(this._poly),this._vertexChanged(t,!0)}},{key:"completeShape",value:function(){this._markers.length<=1||(this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable())}},{key:"_finishShape",value:function(){this._poly.removeLngLat();var t=this._poly._defaultShape?this._poly._defaultShape():this._poly.getLngLats(),e=this._poly.newLatLngIntersects(t[t.length-1]);if(!this.options.allowIntersection&&e||!this._shapeIsValid())return void this._showErrorTooltip();this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable()}},{key:"_shapeIsValid",value:function(){return!0}},{key:"_onZoomEnd",value:function(){null!==this._markers&&this._poly.redraw()}},{key:"_onMouseMove",value:function(e){var n=this._map.mouseEventToLayerPoint(e.originalEvent),i=this._map.layerPointToLatLng(n);this._currentLatLng=i,this._updateTooltip(i),this._markers.length>0&&(this._poly.removeLngLat(),this._poly.addLngLat(i)),this._mouseMarker.setLngLat(i),t.DomEvent.preventDefault(e.originalEvent)}},{key:"_vertexChanged",value:function(t,e){if(this._callback&&"function"==typeof this._callback){var n={featureType:this.type,vertexs:this._markers,added:e,status:"vertex"};this._callback.call(this._callbackContext||this,n)}this._updateFinishHandler(),this._updateRunningMeasure(t,e),this._updateTooltip()}},{key:"_onMouseDown",value:function(t){if(!this._clickHandled&&!this._touchHandled&&!this._disableMarkers){this._onMouseMove(t),this._clickHandled=!0,this._disableNewMarkers();var e=t.originalEvent,n=e.clientX,i=e.clientY;this._startPoint(n,i)}}},{key:"_startPoint",value:function(t,e){this._mouseDownOrigin=new f.default.Pixel(t,e)}},{key:"_onMouseUp",value:function(t){var e=t.originalEvent,n=e.clientX,i=e.clientY;this._endPoint(n,i,t),this._clickHandled=null}},{key:"_endPoint",value:function(t,e,n){if(this._mouseDownOrigin){var i=new f.default.Pixel(t,e).distanceTo(this._mouseDownOrigin);this._calculateFinishDistance(n.latlng)<10?this._finishShape():Math.abs(i)<9*(window.devicePixelRatio||1)&&this.addVertex(n.latlng),this._enableNewMarkers()}this._mouseDownOrigin=null}},{key:"_onTouch",value:function(t){var e=t.originalEvent,n=void 0,i=void 0;!e.touches||!e.touches[0]||this._clickHandled||this._touchHandled||this._disableMarkers||(n=e.touches[0].clientX,i=e.touches[0].clientY,this._disableNewMarkers(),this._touchHandled=!0,this._startPoint(n,i),this._endPoint(n,i,t),this._touchHandled=null),this._clickHandled=null}},{key:"_onMouseOut",value:function(){this._tooltip&&this._tooltip._onMouseOut.call(this._tooltip)}},{key:"_calculateFinishDistance",value:function(t){var e=void 0;if(this._markers.length>0){var n=void 0;if(this.type===f.default.Overlay.Polyline.type)n=this._markers[this._markers.length-1];else{if(this.type!==f.default.Overlay.Polygon.type)return 1/0;n=this._markers[0]}var i=this._map.latLngToContainerPoint(n.getLatLng()),o=new f.default.Overlay.Point(t,this.options.icon,{zIndexOffset:2*this.options.zIndexOffset}),r=this._map.latLngToContainerPoint(o.getLatLng());e=i.distanceTo(r)}else e=1/0;return e}},{key:"_updateFinishHandler",value:function(){var t=this._markers.length;t>1&&this._markers[t-1].on("click",this._finishShape,this),t>2&&this._markers[t-2].off("click",this._finishShape,this)}},{key:"_createMarker",value:function(t){var e=new f.default.Overlay.Point(t,this.options.icon,{zIndexOffset:2*this.options.zIndexOffset});return this._vectorLayer.addOverlay(e),e}},{key:"_updateTooltip",value:function(t){var e=this._getTooltipText();t&&this._tooltip.updatePosition(t),this._errorShown||this._tooltip.updateContent(e)}},{key:"_getTooltipText",value:function(){var t=this.options.showLength,e=void 0,n=void 0;return 0===this._markers.length?e={text:f.default.Draw.Local.polyline.tooltip.start}:(n=t?this._getMeasurementString():"",e=1===this._markers.length?{text:f.default.Draw.Local.polyline.tooltip.cont,subtext:n}:{text:f.default.Draw.Local.polyline.tooltip.end,subtext:n}),e}},{key:"_updateRunningMeasure",value:function(t,e){var n=this._markers.length,i=void 0,o=void 0;1===this._markers.length?this._measurementRunningTotal=0:(i=n-(e?2:1),o=t.distanceTo(this._markers[i].getLatLng()),this._measurementRunningTotal+=o*(e?1:-1))}},{key:"_getMeasurementString",value:function(){var t=this._currentLatLng,e=this._markers[this._markers.length-1].getLatLng(),n=void 0;return n=this._measurementRunningTotal+t.distanceTo(e),f.default.Help.Geometry.readableDistance(n)}},{key:"_showErrorTooltip",value:function(){this._errorShown=!0,this._tooltip.showAsError().updateContent({text:this.options.drawError.message}),this._poly.setStyle(new f.default.Style(t.extend({},this.options.style.options,this.options.drawError))),this._clearHideErrorTimeout(),this._hideErrorTimeout=setTimeout(t.Util.bind(this._hideErrorTooltip,this),this.options.drawError.timeout)}},{key:"_hideErrorTooltip",value:function(){this._errorShown=!1,this._clearHideErrorTimeout(),this._tooltip.removeError().updateContent(this._getTooltipText()),this._poly.setStyle(this.options.style)}},{key:"_clearHideErrorTimeout",value:function(){this._hideErrorTimeout&&(clearTimeout(this._hideErrorTimeout),this._hideErrorTimeout=null)}},{key:"_disableNewMarkers",value:function(){this._disableMarkers=!0}},{key:"_enableNewMarkers",value:function(){setTimeout(function(){this._disableMarkers=!1}.bind(this),50)}},{key:"_cleanUpShape",value:function(){this._markers.length>1&&this._markers[this._markers.length-1].off("click",this._finishShape,this)}},{key:"_fireCreatedEvent",value:function(t){t=t||new this.Poly(this._poly.getLngLats(),new f.default.Style(this.options.shapeOptions)),l(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"_fireCreatedEvent",this).call(this,t)}}]),n}(h.default);e.default=d}).call(e,n(1))},function(t,e,n){"use strict";(function(t){function i(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),l=function t(e,n,i){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,n);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,n,i)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(i)},u=n(3),h=i(u),c=n(0),f=i(c),p={repeatMode:!1},d=function(e){function n(e,i,a,s){o(this,n),s=t.extend({},p,s);var l=r(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e,i,a,s));return l._endLabelText=f.default.Draw.Local.simpleshape.tooltip.end,l}return a(n,e),s(n,[{key:"addHooks",value:function(){l(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"addHooks",this).call(this),this._map&&(this._mapDraggable=this._map.dragging.enabled(),this._mapDraggable&&this._map.dragging.disable(),this._container.style.cursor="crosshair",this._tooltip.updateContent({text:this._initialLabelText}),this._map.on("mousedown",this._onMouseDown,this).on("mousemove",this._onMouseMove,this).on("touchstart",this._onMouseDown,this).on("touchmove",this._onMouseMove,this))}},{key:"removeHooks",value:function(){l(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"removeHooks",this).call(this),this._map&&(this._mapDraggable&&this._map.dragging.enable(),this._container.style.cursor="",this._map.off("mousedown",this._onMouseDown,this).off("mousemove",this._onMouseMove,this).off("touchstart",this._onMouseDown,this).off("touchmove",this._onMouseMove,this),t.DomEvent.off(document,"mouseup",this._onMouseUp,this),t.DomEvent.off(document,"touchend",this._onMouseUp,this),this._shape&&delete this._shape),this._isDrawing=!1}},{key:"_getTooltipText",value:function(){return{text:this._endLabelText}}},{key:"_onMouseDown",value:function(e){this._isDrawing=!0,this._startLngLat=e.latlng,t.DomEvent.on(document,"mouseup",this._onMouseUp,this).on(document,"touchend",this._onMouseUp,this).preventDefault(e.originalEvent)}},{key:"_onMouseMove",value:function(t){var e=t.latlng;this._tooltip.updatePosition(e),this._isDrawing&&(this._tooltip.updateContent(this._getTooltipText()),this._drawShape(e))}},{key:"_onMouseUp",value:function(){this._shape&&this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable()}}]),n}(h.default);e.default=d}).call(e,n(1))},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),l=function t(e,n,i){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,n);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,n,i)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(i)},u=n(4),h=i(u),c=n(0),f=i(c),p=function(t){function e(t,n){return o(this,e),r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n))}return a(e,t),s(e,[{key:"addHooks",value:function(){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"addHooks",this).call(this);var t=this._shape;t._map&&(this._map=t._map,t.setStyle(new f.default.Style.Fill(t.options.editing)),this._vectorLayer||this._initMarkers(),this._map.addLayer(this._vectorLayer))}},{key:"removeHooks",value:function(){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"removeHooks",this).call(this);var t=this._shape;if(t.setStyle(new f.default.Style.Fill(t.options.original)),t._map){this._unbindMarker(this._moveMarker);for(var n=0,i=this._resizeMarkers.length;n<i;n++)this._unbindMarker(this._resizeMarkers[n]);this._resizeMarkers=[],this._vectorLayer.clear(),this._map.removeLayer(this._vectorLayer),delete this._vectorLayer}this._map=null}},{key:"updateMarkers",value:function(){this._vectorLayer.clear(),this._initMarkers()}},{key:"_initMarkers",value:function(){this._vectorLayer||(this._vectorLayer=new f.default.VectorLayer),this._createMoveMarker(),this._createResizeMarker()}},{key:"_createMoveMarker",value:function(){}},{key:"_createResizeMarker",value:function(){}},{key:"_createMarker",value:function(t,e){t=t&&t._delegate||t;var n=new f.default.Overlay.Point(t,e,{draggable:!0,zIndexOffset:10});return this._bindMarker(n),this._vectorLayer.addOverlay(n),n}},{key:"_bindMarker",value:function(t){t.on("dragstart",this._onMarkerDragStart,this).on("drag",this._onMarkerDrag,this).on("dragend",this._onMarkerDragEnd,this).on("touchstart",this._onTouchStart,this).on("touchmove",this._onTouchMove,this).on("MSPointerMove",this._onTouchMove,this).on("touchend",this._onTouchEnd,this).on("MSPointerUp",this._onTouchEnd,this)}},{key:"_unbindMarker",value:function(t){t.off("dragstart",this._onMarkerDragStart,this).off("drag",this._onMarkerDrag,this).off("dragend",this._onMarkerDragEnd,this).off("touchstart",this._onTouchStart,this).off("touchmove",this._onTouchMove,this).off("MSPointerMove",this._onTouchMove,this).off("touchend",this._onTouchEnd,this).off("MSPointerUp",this._onTouchEnd,this)}},{key:"_onMarkerDragStart",value:function(t){t.target.setOpacity(0),this._shape.fire("editstart")}},{key:"_fireEdit",value:function(){this._shape.edited=!0,this._shape.fire("editend"),this._updateTooltipContent(this._originText,f.default.Edit.Local.subtext)}},{key:"_onMarkerDrag",value:function(t){var e=t.target,n=e.getLngLat();n=n&&n._delegate||n,e===this._moveMarker?this._move(n):this._resize(n),this._shape.redraw(),this._shape.fire("editdrag")}},{key:"_onMarkerDragEnd",value:function(t){t.target.setOpacity(1),this._fireEdit()}},{key:"_onTouchStart",value:function(t){if(this._onMarkerDragStart(t),"function"==typeof this._getCorners){var e=this._getCorners(),n=t.target,i=n._cornerIndex;n.setOpacity(0),this._oppositeCorner=e[(i+2)%4],this._toggleCornerMarkers(0,i)}this._shape.fire("editstart")}},{key:"_onTouchMove",value:function(t){var e=this._map.mouseEventToLayerPoint(t.originalEvent.touches[0]),n=this._map.layerPointToLatLng(e);return t.target===this._moveMarker?this._move(n):this._resize(n),this._shape.redraw(),!1}},{key:"_onTouchEnd",value:function(t){t.target.setOpacity(1),this.updateMarkers(),this._fireEdit()}},{key:"_move",value:function(){}},{key:"_resize",value:function(){}}]),e}(h.default);e.default=p},function(t,e,n){"use strict";(function(t){t.SVG.Tile=t.SVG.extend({initialize:function(e,n,i){t.SVG.prototype.initialize.call(this,i),this._tileCoord=e,this._size=n,this._initContainer(),this._container.setAttribute("width",this._size.x),this._container.setAttribute("height",this._size.y),this._container.setAttribute("viewBox",[0,0,this._size.x,this._size.y].join(" ")),this._layers={}},getCoord:function(){return this._tileCoord},getContainer:function(){return this._container},onAdd:t.Util.falseFn,addTo:function(e){if(this._map=e,this.options.interactive)for(var n in this._layers){var i=this._layers[n];i._path.style.pointerEvents="auto",this._map._targets[t.stamp(i._path)]=i}},removeFrom:function(e){if(this.options.interactive)for(var n in this._layers){var i=this._layers[n];delete this._map._targets[t.stamp(i._path)]}delete this._map},_initContainer:function(){t.SVG.prototype._initContainer.call(this);t.SVG.create("rect")},_addPath:function(e){this._rootGroup.appendChild(e._path),this._layers[t.stamp(e)]=e},_updateIcon:function(e){var n=e._path=t.SVG.create("image"),i=e.options.icon,o=i.options,r=t.point(o.iconSize),a=o.iconAnchor||r&&r.divideBy(2,!0),s=e._point.subtract(a);n.setAttribute("x",s.x),n.setAttribute("y",s.y),n.setAttribute("width",r.x+"px"),n.setAttribute("height",r.y+"px"),n.setAttribute("href",o.iconUrl)}}),t.svg.tile=function(e,n,i){return new t.SVG.Tile(e,n,i)}}).call(e,n(1))},function(t,e){function n(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function o(t){if(h===setTimeout)return setTimeout(t,0);if((h===n||!h)&&setTimeout)return h=setTimeout,setTimeout(t,0);try{return h(t,0)}catch(e){try{return h.call(null,t,0)}catch(e){return h.call(this,t,0)}}}function r(t){if(c===clearTimeout)return clearTimeout(t);if((c===i||!c)&&clearTimeout)return c=clearTimeout,clearTimeout(t);try{return c(t)}catch(e){try{return c.call(null,t)}catch(e){return c.call(this,t)}}}function a(){_&&p&&(_=!1,p.length?d=p.concat(d):y=-1,d.length&&s())}function s(){if(!_){var t=o(a);_=!0;for(var e=d.length;e;){for(p=d,d=[];++y<e;)p&&p[y].run();y=-1,e=d.length}p=null,_=!1,r(t)}}function l(t,e){this.fun=t,this.array=e}function u(){}var h,c,f=t.exports={};!function(){try{h="function"==typeof setTimeout?setTimeout:n}catch(t){h=n}try{c="function"==typeof clearTimeout?clearTimeout:i}catch(t){c=i}}();var p,d=[],_=!1,y=-1;f.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];d.push(new l(t,e)),1!==d.length||_||o(s)},l.prototype.run=function(){this.fun.apply(null,this.array)},f.title="browser",f.browser=!0,f.env={},f.argv=[],f.version="",f.versions={},f.on=u,f.addListener=u,f.once=u,f.off=u,f.removeListener=u,f.removeAllListeners=u,f.emit=u,f.prependListener=u,f.prependOnceListener=u,f.listeners=function(t){return[]},f.binding=function(t){throw new Error("process.binding is not supported")},f.cwd=function(){return"/"},f.chdir=function(t){throw new Error("process.chdir is not supported")},f.umask=function(){return 0}},function(t,e,n){"use strict";function i(t,e,n,i,r){this.properties={},this.extent=n,this.type=0,this._pbf=t,this._geometry=-1,this._keys=i,this._values=r,t.readFields(o,this,e)}function o(t,e,n){1==t?e.id=n.readVarint():2==t?r(n,e):3==t?e.type=n.readVarint():4==t&&(e._geometry=n.pos)}function r(t,e){for(var n=t.readVarint()+t.pos;t.pos<n;){var i=e._keys[t.readVarint()],o=e._values[t.readVarint()];e.properties[i]=o}}function a(t){var e=t.length;if(e<=1)return[t];for(var n,i,o=[],r=0;r<e;r++){var a=s(t[r]);0!==a&&(void 0===i&&(i=a<0),i===a<0?(n&&o.push(n),n=[t[r]]):n.push(t[r]))}return n&&o.push(n),o}function s(t){for(var e,n,i=0,o=0,r=t.length,a=r-1;o<r;a=o++)e=t[o],n=t[a],i+=(n.x-e.x)*(e.y+n.y);return i}var l=n(172);t.exports=i,i.types=["Unknown","Point","LineString","Polygon"],i.prototype.loadGeometry=function(){var t=this._pbf;t.pos=this._geometry;for(var e,n=t.readVarint()+t.pos,i=1,o=0,r=0,a=0,s=[];t.pos<n;){if(!o){var u=t.readVarint();i=7&u,o=u>>3}if(o--,1===i||2===i)r+=t.readSVarint(),a+=t.readSVarint(),1===i&&(e&&s.push(e),e=[]),e.push(new l(r,a));else{if(7!==i)throw new Error("unknown command "+i);e&&e.push(e[0].clone())}}return e&&s.push(e),s},i.prototype.bbox=function(){var t=this._pbf;t.pos=this._geometry;for(var e=t.readVarint()+t.pos,n=1,i=0,o=0,r=0,a=1/0,s=-1/0,l=1/0,u=-1/0;t.pos<e;){if(!i){var h=t.readVarint();n=7&h,i=h>>3}if(i--,1===n||2===n)o+=t.readSVarint(),r+=t.readSVarint(),o<a&&(a=o),o>s&&(s=o),r<l&&(l=r),r>u&&(u=r);else if(7!==n)throw new Error("unknown command "+n)}return[a,l,s,u]},i.prototype.toGeoJSON=function(t,e,n){function o(t){for(var e=0;e<t.length;e++){var n=t[e],i=180-360*(n.y+h)/l;t[e]=[360*(n.x+u)/l-180,360/Math.PI*Math.atan(Math.exp(i*Math.PI/180))-90]}}var r,s,l=this.extent*Math.pow(2,n),u=this.extent*t,h=this.extent*e,c=this.loadGeometry(),f=i.types[this.type];switch(this.type){case 1:var p=[];for(r=0;r<c.length;r++)p[r]=c[r][0];c=p,o(c);break;case 2:for(r=0;r<c.length;r++)o(c[r]);break;case 3:for(c=a(c),r=0;r<c.length;r++)for(s=0;s<c[r].length;s++)o(c[r][s])}1===c.length?c=c[0]:f="Multi"+f;var d={type:"Feature",geometry:{type:f,coordinates:c},properties:this.properties};return"id"in this&&(d.id=this.id),d}},function(t,e,n){"use strict";function i(t,e){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=t,this._keys=[],this._values=[],this._features=[],t.readFields(o,this,e),this.length=this._features.length}function o(t,e,n){15===t?e.version=n.readVarint():1===t?e.name=n.readString():5===t?e.extent=n.readVarint():2===t?e._features.push(n.pos):3===t?e._keys.push(n.readString()):4===t&&e._values.push(r(n))}function r(t){for(var e=null,n=t.readVarint()+t.pos;t.pos<n;){var i=t.readVarint()>>3;e=1===i?t.readString():2===i?t.readFloat():3===i?t.readDouble():4===i?t.readVarint64():5===i?t.readVarint():6===i?t.readSVarint():7===i?t.readBoolean():null}return e}var a=n(14);t.exports=i,i.prototype.feature=function(t){if(t<0||t>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[t];var e=this._pbf.readVarint()+this._pbf.pos;return new a(this._pbf,e,this.extent,this._keys,this._values)}},function(t,e){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o=n(179),r=function(t){return t&&t.__esModule?t:{default:t}}(o),a=(n(19),"GaeaMap: "+r.default.version+"\nBuilt by blue, @gaeainfo ["+r.default.date+"]"),s=r.default.authorization||{},l=["localhost","127.0.0.1"],u=[/[\s\S].sz-map.com$/],h=function(){if("file:"===document.location.protocol)return!0;if(l.indexOf(document.domain)>-1)return!0;for(var t=0;t<u.length;t++){if(u[t].test(document.domain))return!0}return!1},c=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:" key  key",n=document.createElement("div");n.style.cssText="\n    position: absolute;\n    left: 40%;\n    top: 30%;\n    z-index: 1000;\n    width: 300px;\n    height: 200px;\n    background-color: rgba(255, 255, 255, 0.8);\n    box-shadow: rgb(51, 51, 51) 2px 2px 4px;\n    border-radius: 4px;\n    text-align: center;\n    ";var i=document.createElement("div");i.innerHTML="X",i.style.cssText="\n    position: absolute;\n    top: 5px;\n    right: 5px;\n    width: 20px;\n    height: 20px;\n    border-radius: 50%;\n    background: rgba(0,0,0,0.8);\n    text-align: center;\n    color: #fff;\n    font-size: 12px;\n    line-height: 20px;\n    cursor: pointer;",i.onclick=function(){n.style.visibility="hidden"};var o=document.createElement("p");o.innerHTML=e,o.style.cssText="\n    margin-top: 80px;\n    font-size: 20px;\n    color: #f00;\n    font-weight: bold;",n.appendChild(i),n.appendChild(o),document.body.appendChild(n),t&&t(!1)};!function(){function e(t,e,n){if(!t||!t.key)throw delete window.GL,c(e),new Error("No license");var i=t.key,r=document.domain,a=window.location.port,l=s.servers,u=l[s.server];if(!u)throw new Error(res.data.message||"License Server does not exist");var h=u+"/rest/license/checkLicense?license="+i+"&domain="+r+"&port="+a;"internet"===s.server&&(a=a||80,h=u+"/rest/license/verify?engineType=GAEA-GMAP-LICENSE&license="+i+"&domain="+r+"&port="+a),o.Http.get(h).then(function(i){if(!i.data)throw delete window.GL,c(e,i.data.msg),new Error("License verification failed");if(!i.data.success)throw delete window.GL,c(e,i.data.msg),new Error(i.data.message||"License verification failed");o.Cache.init(t,e,n)}).catch(function(t){throw delete window.GL,t.config&&c(e),t})}var o={Env:{},H:{},Http:{},initialized:!1},r=window.GL;o.noConflict=function(){return window.GL=r,this},o.ready=function(t,e){o.init(t,e)},o.config=function(t,e,n){if(!this.initialized)throw new Error("before use it,gl must be initialized!");return e?0===Object.keys(e).length?this:(o.Hub.fire(o.E.ModuleConfigSignal,t,e,n),this):this},o.enable=function(t,e,n){if(!this.initialized)throw new Error("before use it,gl must be initialized!");return o.Hub.fire(o.E.ModuleEnableSignal,t,e,n),this},o.getModule=function(t,e){if(!this.initialized)throw new Error("before use it,gl must be initialized!");return o.ModuleManager.getModule(t,e)},o.init=function(t,i){if(!this.initialized){if(n(8).preload(),this.initialized=!0,i=i||"conf.json"){var r=i.replace("conf.json","");o.Http.get(i).then(function(n){s.enable?h()?o.Cache.init(n.data,t,r):e(n.data,t,r):o.Cache.init(n.data,t,r)}).catch(function(e){if(e.config&&e.config.url===i)return s.enable&&delete window.GL,void t(!1);throw e})}else if(s.enable)throw new Error("must")}},o.getNamespace=function(){return{L:t}},o.toString=function(){return a},window.GL=o,n(8).preload(),o.Map.addInitHook(function(){if(!o.initialized&&!h())throw new Error("Please call GL.init or GL.ready to initialize the map engine.")}),o.Http.load=function(t,e,n,r){var a="get";"function"==typeof e?(r=n,n=e,e=void 0):e&&"object"===(void 0===e?"undefined":i(e))&&(a="post"),o.Http({url:t,method:a,params:e,responseType:"text"}).then(function(t){n.call(r,t.data,t.status)}).catch(function(e){e.config&&e.config.url===t&&n.call(r,e.response.data,e.response.status)})}}(),e.default=GL}).call(e,n(1))},function(t,e,n){"use strict";n(158),n(166),n(168),n(167)},function(t,e,n){"use strict";(function(e){/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */
function i(t,e){if(t===e)return 0;for(var n=t.length,i=e.length,o=0,r=Math.min(n,i);o<r;++o)if(t[o]!==e[o]){n=t[o],i=e[o];break}return n<i?-1:i<n?1:0}function o(t){return e.Buffer&&"function"==typeof e.Buffer.isBuffer?e.Buffer.isBuffer(t):!(null==t||!t._isBuffer)}function r(t){return Object.prototype.toString.call(t)}function a(t){return!o(t)&&("function"==typeof e.ArrayBuffer&&("function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(t):!!t&&(t instanceof DataView||!!(t.buffer&&t.buffer instanceof ArrayBuffer))))}function s(t){if(b.isFunction(t)){if(k)return t.name;var e=t.toString(),n=e.match(M);return n&&n[1]}}function l(t,e){return"string"==typeof t?t.length<e?t:t.slice(0,e):t}function u(t){if(k||!b.isFunction(t))return b.inspect(t);var e=s(t);return"[Function"+(e?": "+e:"")+"]"}function h(t){return l(u(t.actual),128)+" "+t.operator+" "+l(u(t.expected),128)}function c(t,e,n,i,o){throw new x.AssertionError({message:n,actual:t,expected:e,operator:i,stackStartFunction:o})}function f(t,e){t||c(t,!0,e,"==",x.ok)}function p(t,e,n,s){if(t===e)return!0;if(o(t)&&o(e))return 0===i(t,e);if(b.isDate(t)&&b.isDate(e))return t.getTime()===e.getTime();if(b.isRegExp(t)&&b.isRegExp(e))return t.source===e.source&&t.global===e.global&&t.multiline===e.multiline&&t.lastIndex===e.lastIndex&&t.ignoreCase===e.ignoreCase;if(null!==t&&"object"==typeof t||null!==e&&"object"==typeof e){if(a(t)&&a(e)&&r(t)===r(e)&&!(t instanceof Float32Array||t instanceof Float64Array))return 0===i(new Uint8Array(t.buffer),new Uint8Array(e.buffer));if(o(t)!==o(e))return!1;s=s||{actual:[],expected:[]};var l=s.actual.indexOf(t);return-1!==l&&l===s.expected.indexOf(e)||(s.actual.push(t),s.expected.push(e),_(t,e,n,s))}return n?t===e:t==e}function d(t){return"[object Arguments]"==Object.prototype.toString.call(t)}function _(t,e,n,i){if(null===t||void 0===t||null===e||void 0===e)return!1;if(b.isPrimitive(t)||b.isPrimitive(e))return t===e;if(n&&Object.getPrototypeOf(t)!==Object.getPrototypeOf(e))return!1;var o=d(t),r=d(e);if(o&&!r||!o&&r)return!1;if(o)return t=w.call(t),e=w.call(e),p(t,e,n);var a,s,l=P(t),u=P(e);if(l.length!==u.length)return!1;for(l.sort(),u.sort(),s=l.length-1;s>=0;s--)if(l[s]!==u[s])return!1;for(s=l.length-1;s>=0;s--)if(a=l[s],!p(t[a],e[a],n,i))return!1;return!0}function y(t,e,n){p(t,e,!0)&&c(t,e,n,"notDeepStrictEqual",y)}function g(t,e){if(!t||!e)return!1;if("[object RegExp]"==Object.prototype.toString.call(e))return e.test(t);try{if(t instanceof e)return!0}catch(t){}return!Error.isPrototypeOf(e)&&!0===e.call({},t)}function m(t){var e;try{t()}catch(t){e=t}return e}function v(t,e,n,i){var o;if("function"!=typeof e)throw new TypeError('"block" argument must be a function');"string"==typeof n&&(i=n,n=null),o=m(e),i=(n&&n.name?" ("+n.name+").":".")+(i?" "+i:"."),t&&!o&&c(o,n,"Missing expected exception"+i);var r="string"==typeof i,a=!t&&b.isError(o),s=!t&&o&&!n;if((a&&r&&g(o,n)||s)&&c(o,n,"Got unwanted exception"+i),t&&o&&n&&!g(o,n)||!t&&o)throw o}var b=n(176),L=Object.prototype.hasOwnProperty,w=Array.prototype.slice,k=function(){return"foo"===function(){}.name}(),x=t.exports=f,M=/\s*function\s+([^\(\s]*)\s*/;x.AssertionError=function(t){this.name="AssertionError",this.actual=t.actual,this.expected=t.expected,this.operator=t.operator,t.message?(this.message=t.message,this.generatedMessage=!1):(this.message=h(this),this.generatedMessage=!0);var e=t.stackStartFunction||c;if(Error.captureStackTrace)Error.captureStackTrace(this,e);else{var n=new Error;if(n.stack){var i=n.stack,o=s(e),r=i.indexOf("\n"+o);if(r>=0){var a=i.indexOf("\n",r+1);i=i.substring(a+1)}this.stack=i}}},b.inherits(x.AssertionError,Error),x.fail=c,x.ok=f,x.equal=function(t,e,n){t!=e&&c(t,e,n,"==",x.equal)},x.notEqual=function(t,e,n){t==e&&c(t,e,n,"!=",x.notEqual)},x.deepEqual=function(t,e,n){p(t,e,!1)||c(t,e,n,"deepEqual",x.deepEqual)},x.deepStrictEqual=function(t,e,n){p(t,e,!0)||c(t,e,n,"deepStrictEqual",x.deepStrictEqual)},x.notDeepEqual=function(t,e,n){p(t,e,!1)&&c(t,e,n,"notDeepEqual",x.notDeepEqual)},x.notDeepStrictEqual=y,x.strictEqual=function(t,e,n){t!==e&&c(t,e,n,"===",x.strictEqual)},x.notStrictEqual=function(t,e,n){t===e&&c(t,e,n,"!==",x.notStrictEqual)},x.throws=function(t,e,n){v(!0,t,e,n)},x.doesNotThrow=function(t,e,n){v(!1,t,e,n)},x.ifError=function(t){if(t)throw t};var P=Object.keys||function(t){var e=[];for(var n in t)L.call(t,n)&&e.push(n);return e}}).call(e,n(16))},function(t,e,n){"use strict";(function(t,n){var i,o,r,a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(t,s){"object"==a(e)&&"object"==a(n)?n.exports=s():(o=[],i=s,void 0!==(r="function"==typeof i?i.apply(e,o):i)&&(n.exports=r))}(0,function(){return function(t){function e(i){if(n[i])return n[i].exports;var o=n[i]={exports:{},id:i,loaded:!1};return t[i].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){t.exports=n(1)},function(t,e,n){function i(t){var e=new a(t),n=r(a.prototype.request,e);return o.extend(n,a.prototype,e),o.extend(n,e),n}var o=n(2),r=n(3),a=n(4),s=n(5),l=i(s);l.Axios=a,l.create=function(t){return i(o.merge(s,t))},l.Cancel=n(22),l.CancelToken=n(23),l.isCancel=n(19),l.all=function(t){return Promise.all(t)},l.spread=n(24),t.exports=l,t.exports.default=l},function(t,e,n){function i(t){return"[object Array]"===x.call(t)}function o(t){return"[object ArrayBuffer]"===x.call(t)}function r(t){return"undefined"!=typeof FormData&&t instanceof FormData}function s(t){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(t):t&&t.buffer&&t.buffer instanceof ArrayBuffer}function l(t){return"string"==typeof t}function u(t){return"number"==typeof t}function h(t){return void 0===t}function c(t){return null!==t&&"object"==(void 0===t?"undefined":a(t))}function f(t){return"[object Date]"===x.call(t)}function p(t){return"[object File]"===x.call(t)}function d(t){return"[object Blob]"===x.call(t)}function _(t){return"[object Function]"===x.call(t)}function y(t){return c(t)&&_(t.pipe)}function g(t){return"undefined"!=typeof URLSearchParams&&t instanceof URLSearchParams}function m(t){return t.replace(/^\s*/,"").replace(/\s*$/,"")}function v(){return"undefined"!=typeof window&&"undefined"!=typeof document&&"function"==typeof document.createElement}function b(t,e){if(null!==t&&void 0!==t)if("object"==(void 0===t?"undefined":a(t))||i(t)||(t=[t]),i(t))for(var n=0,o=t.length;n<o;n++)e.call(null,t[n],n,t);else for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.call(null,t[r],r,t)}function L(){function t(t,n){"object"==a(e[n])&&"object"==(void 0===t?"undefined":a(t))?e[n]=L(e[n],t):e[n]=t}for(var e={},n=0,i=arguments.length;n<i;n++)b(arguments[n],t);return e}function w(t,e,n){return b(e,function(e,i){t[i]=n&&"function"==typeof e?k(e,n):e}),t}var k=n(3),x=Object.prototype.toString;t.exports={isArray:i,isArrayBuffer:o,isFormData:r,isArrayBufferView:s,isString:l,isNumber:u,isObject:c,isUndefined:h,isDate:f,isFile:p,isBlob:d,isFunction:_,isStream:y,isURLSearchParams:g,isStandardBrowserEnv:v,forEach:b,merge:L,extend:w,trim:m}},function(t,e){t.exports=function(t,e){return function(){for(var n=new Array(arguments.length),i=0;i<n.length;i++)n[i]=arguments[i];return t.apply(e,n)}}},function(t,e,n){function i(t){this.defaults=t,this.interceptors={request:new a,response:new a}}var o=n(5),r=n(2),a=n(16),s=n(17),l=n(20),u=n(21);i.prototype.request=function(t){"string"==typeof t&&(t=r.merge({url:arguments[0]},arguments[1])),t=r.merge(o,this.defaults,{method:"get"},t),t.baseURL&&!l(t.url)&&(t.url=u(t.baseURL,t.url));var e=[s,void 0],n=Promise.resolve(t);for(this.interceptors.request.forEach(function(t){e.unshift(t.fulfilled,t.rejected)}),this.interceptors.response.forEach(function(t){e.push(t.fulfilled,t.rejected)});e.length;)n=n.then(e.shift(),e.shift());return n},r.forEach(["delete","get","head"],function(t){i.prototype[t]=function(e,n){return this.request(r.merge(n||{},{method:t,url:e}))}}),r.forEach(["post","put","patch"],function(t){i.prototype[t]=function(e,n,i){return this.request(r.merge(i||{},{method:t,url:e,data:n}))}}),t.exports=i},function(e,n,i){function o(t,e){!r.isUndefined(t)&&r.isUndefined(t["Content-Type"])&&(t["Content-Type"]=e)}var r=i(2),a=i(6),s=/^\)\]\}',?\n/,l={"Content-Type":"application/x-www-form-urlencoded"},u={adapter:function(){var e;return"undefined"!=typeof XMLHttpRequest?e=i(7):void 0!==t&&(e=i(7)),e}(),transformRequest:[function(t,e){return a(e,"Content-Type"),r.isFormData(t)||r.isArrayBuffer(t)||r.isStream(t)||r.isFile(t)||r.isBlob(t)?t:r.isArrayBufferView(t)?t.buffer:r.isURLSearchParams(t)?(o(e,"application/x-www-form-urlencoded;charset=utf-8"),t.toString()):r.isObject(t)?(o(e,"application/json;charset=utf-8"),JSON.stringify(t)):t}],transformResponse:[function(t){if("string"==typeof t){t=t.replace(s,"");try{t=JSON.parse(t)}catch(t){}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(t){return t>=200&&t<300}};u.headers={common:{Accept:"application/json, text/plain, */*"}},r.forEach(["delete","get","head"],function(t){u.headers[t]={}}),r.forEach(["post","put","patch"],function(t){u.headers[t]=r.merge(l)}),e.exports=u},function(t,e,n){var i=n(2);t.exports=function(t,e){i.forEach(t,function(n,i){i!==e&&i.toUpperCase()===e.toUpperCase()&&(t[e]=n,delete t[i])})}},function(t,e,n){var i=n(2),o=n(8),r=n(11),a=n(12),s=n(13),l=n(9),u="undefined"!=typeof window&&window.btoa&&window.btoa.bind(window)||n(14);t.exports=function(t){return new Promise(function(e,h){var c=t.data,f=t.headers;i.isFormData(c)&&delete f["Content-Type"];var p=new XMLHttpRequest,d="onreadystatechange",_=!1;if("undefined"==typeof window||!window.XDomainRequest||"withCredentials"in p||s(t.url)||(p=new window.XDomainRequest,d="onload",_=!0,p.onprogress=function(){},p.ontimeout=function(){}),t.auth){var y=t.auth.username||"",g=t.auth.password||"";f.Authorization="Basic "+u(y+":"+g)}if(p.open(t.method.toUpperCase(),r(t.url,t.params,t.paramsSerializer),!0),p.timeout=t.timeout,p[d]=function(){if(p&&(4===p.readyState||_)&&(0!==p.status||p.responseURL&&0===p.responseURL.indexOf("file:"))){var n="getAllResponseHeaders"in p?a(p.getAllResponseHeaders()):null,i=t.responseType&&"text"!==t.responseType?p.response:p.responseText,r={data:i,status:1223===p.status?204:p.status,statusText:1223===p.status?"No Content":p.statusText,headers:n,config:t,request:p};o(e,h,r),p=null}},p.onerror=function(){h(l("Network Error",t)),p=null},p.ontimeout=function(){h(l("timeout of "+t.timeout+"ms exceeded",t,"ECONNABORTED")),p=null},i.isStandardBrowserEnv()){var m=n(15),v=(t.withCredentials||s(t.url))&&t.xsrfCookieName?m.read(t.xsrfCookieName):void 0;v&&(f[t.xsrfHeaderName]=v)}if("setRequestHeader"in p&&i.forEach(f,function(t,e){void 0===c&&"content-type"===e.toLowerCase()?delete f[e]:p.setRequestHeader(e,t)}),t.withCredentials&&(p.withCredentials=!0),t.responseType)try{p.responseType=t.responseType}catch(t){if("json"!==p.responseType)throw t}"function"==typeof t.onDownloadProgress&&p.addEventListener("progress",t.onDownloadProgress),"function"==typeof t.onUploadProgress&&p.upload&&p.upload.addEventListener("progress",t.onUploadProgress),t.cancelToken&&t.cancelToken.promise.then(function(t){p&&(p.abort(),h(t),p=null)}),void 0===c&&(c=null),p.send(c)})}},function(t,e,n){var i=n(9);t.exports=function(t,e,n){var o=n.config.validateStatus;n.status&&o&&!o(n.status)?e(i("Request failed with status code "+n.status,n.config,null,n)):t(n)}},function(t,e,n){var i=n(10);t.exports=function(t,e,n,o){var r=new Error(t);return i(r,e,n,o)}},function(t,e){t.exports=function(t,e,n,i){return t.config=e,n&&(t.code=n),t.response=i,t}},function(t,e,n){function i(t){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var o=n(2);t.exports=function(t,e,n){if(!e)return t;var r;if(n)r=n(e);else if(o.isURLSearchParams(e))r=e.toString();else{var a=[];o.forEach(e,function(t,e){null!==t&&void 0!==t&&(o.isArray(t)&&(e+="[]"),o.isArray(t)||(t=[t]),o.forEach(t,function(t){o.isDate(t)?t=t.toISOString():o.isObject(t)&&(t=JSON.stringify(t)),a.push(i(e)+"="+i(t))}))}),r=a.join("&")}return r&&(t+=(-1===t.indexOf("?")?"?":"&")+r),t}},function(t,e,n){var i=n(2);t.exports=function(t){var e,n,o,r={};return t?(i.forEach(t.split("\n"),function(t){o=t.indexOf(":"),e=i.trim(t.substr(0,o)).toLowerCase(),n=i.trim(t.substr(o+1)),e&&(r[e]=r[e]?r[e]+", "+n:n)}),r):r}},function(t,e,n){var i=n(2);t.exports=i.isStandardBrowserEnv()?function(){function t(t){var e=t;return n&&(o.setAttribute("href",e),e=o.href),o.setAttribute("href",e),{href:o.href,protocol:o.protocol?o.protocol.replace(/:$/,""):"",host:o.host,search:o.search?o.search.replace(/^\?/,""):"",hash:o.hash?o.hash.replace(/^#/,""):"",hostname:o.hostname,port:o.port,pathname:"/"===o.pathname.charAt(0)?o.pathname:"/"+o.pathname}}var e,n=/(msie|trident)/i.test(navigator.userAgent),o=document.createElement("a");return e=t(window.location.href),function(n){var o=i.isString(n)?t(n):n;return o.protocol===e.protocol&&o.host===e.host}}():function(){return function(){return!0}}()},function(t,e){function n(){this.message="String contains an invalid character"}function i(t){for(var e,i,r=String(t),a="",s=0,l=o;r.charAt(0|s)||(l="=",s%1);a+=l.charAt(63&e>>8-s%1*8)){if((i=r.charCodeAt(s+=.75))>255)throw new n;e=e<<8|i}return a}var o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";n.prototype=new Error,n.prototype.code=5,n.prototype.name="InvalidCharacterError",t.exports=i},function(t,e,n){var i=n(2);t.exports=i.isStandardBrowserEnv()?function(){return{write:function(t,e,n,o,r,a){var s=[];s.push(t+"="+encodeURIComponent(e)),i.isNumber(n)&&s.push("expires="+new Date(n).toGMTString()),i.isString(o)&&s.push("path="+o),i.isString(r)&&s.push("domain="+r),!0===a&&s.push("secure"),document.cookie=s.join("; ")},read:function(t){var e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove:function(t){this.write(t,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}()},function(t,e,n){function i(){this.handlers=[]}var o=n(2);i.prototype.use=function(t,e){return this.handlers.push({fulfilled:t,rejected:e}),this.handlers.length-1},i.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)},i.prototype.forEach=function(t){o.forEach(this.handlers,function(e){null!==e&&t(e)})},t.exports=i},function(t,e,n){function i(t){t.cancelToken&&t.cancelToken.throwIfRequested()}var o=n(2),r=n(18),a=n(19),s=n(5);t.exports=function(t){return i(t),t.headers=t.headers||{},t.data=r(t.data,t.headers,t.transformRequest),t.headers=o.merge(t.headers.common||{},t.headers[t.method]||{},t.headers||{}),o.forEach(["delete","get","head","post","put","patch","common"],function(e){delete t.headers[e]}),(t.adapter||s.adapter)(t).then(function(e){return i(t),e.data=r(e.data,e.headers,t.transformResponse),e},function(e){return a(e)||(i(t),e&&e.response&&(e.response.data=r(e.response.data,e.response.headers,t.transformResponse))),Promise.reject(e)})}},function(t,e,n){var i=n(2);t.exports=function(t,e,n){return i.forEach(n,function(n){t=n(t,e)}),t}},function(t,e){t.exports=function(t){return!(!t||!t.__CANCEL__)}},function(t,e){t.exports=function(t){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(t)}},function(t,e){t.exports=function(t,e){return t.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,"")}},function(t,e){function n(t){this.message=t}n.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},n.prototype.__CANCEL__=!0,t.exports=n},function(t,e,n){function i(t){if("function"!=typeof t)throw new TypeError("executor must be a function.");var e;this.promise=new Promise(function(t){e=t});var n=this;t(function(t){n.reason||(n.reason=new o(t),e(n.reason))})}var o=n(22);i.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},i.source=function(){var t;return{token:new i(function(e){t=e}),cancel:t}},t.exports=i},function(t,e){t.exports=function(t){return function(e){return t.apply(null,e)}}}])})}).call(e,n(13),n(7)(t))},function(module,exports,__webpack_require__){"use strict";(function(module){var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_RESULT__,_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(window){function expose(){var t=window.CE;CE.noConflict=function(){return window.CE=t,this},window.CE=CE}var CE={version:"1.0"};"object"===_typeof(module)&&"object"===_typeof(module.exports)?module.exports=CE:(__WEBPACK_AMD_DEFINE_FACTORY__=CE,void 0!==(__WEBPACK_AMD_DEFINE_RESULT__="function"==typeof __WEBPACK_AMD_DEFINE_FACTORY__?__WEBPACK_AMD_DEFINE_FACTORY__.call(exports,__webpack_require__,exports,module):__WEBPACK_AMD_DEFINE_FACTORY__)&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)),void 0!==window&&expose(),eval("CE.encryption = function (lng, lat) {if (!lng || !lat)return [lng, lat];function parseint(val,a){var c=2;if(a===2){c=4}else if(a===4){c=8}else if(a===8){c=16}return parseInt(val,c)}var str = \"Number('0.0000140609516643|0.0000034612922250598643|0.0031939526188402567|0.0000025266883565688847|0.9999929497380484|1.004913089948180627'.split('|')[5].split('.')[0]) + Number('0.'+'0.0000140609516643|0.0000034612922250598643|0.0031939526188402567|0.0000025266883565688847|0.9999929497380484|1.004913089948180627'.split('|')[0].split('.')[1])@Number('0.0000140609516643|0.0000034612922250598643|0.0031939526188402567|0.0000025266883565688847|0.9999929497380484|1.004913089948180627'.split('|')[4].split('.')[0]) + Number('0.'+'0.0000140609516643|0.0000034612922250598643|0.0031939526188402567|0.0000025266883565688847|0.9999929497380484|1.004913089948180627'.split('|')[1].split('.')[1])@Number('0.0000140609516643|0.0000034612922250598643|0.0031939526188402567|0.0000025266883565688847|0.9999929497380484|1.004913089948180627'.split('|')[3].split('.')[0]) + Number('0.'+'0.0000140609516643|0.0000034612922250598643|0.0031939526188402567|0.0000025266883565688847|0.9999929497380484|1.004913089948180627'.split('|')[2].split('.')[1])@Number('0.0000140609516643|0.0000034612922250598643|0.0031939526188402567|0.0000025266883565688847|0.9999929497380484|1.004913089948180627'.split('|')[2].split('.')[0]) + Number('0.'+'0.0000140609516643|0.0000034612922250598643|0.0031939526188402567|0.0000025266883565688847|0.9999929497380484|1.004913089948180627'.split('|')[3].split('.')[1])@Number('0.0000140609516643|0.0000034612922250598643|0.0031939526188402567|0.0000025266883565688847|0.9999929497380484|1.004913089948180627'.split('|')[1].split('.')[0]) + Number('0.'+'0.0000140609516643|0.0000034612922250598643|0.0031939526188402567|0.0000025266883565688847|0.9999929497380484|1.004913089948180627'.split('|')[4].split('.')[1])@Number('0.0000140609516643|0.0000034612922250598643|0.0031939526188402567|0.0000025266883565688847|0.9999929497380484|1.004913089948180627'.split('|')[0].split('.')[0]) + Number('0.'+'0.0000140609516643|0.0000034612922250598643|0.0031939526188402567|0.0000025266883565688847|0.9999929497380484|1.004913089948180627'.split('|')[5].split('.')[1])\";var tl=lng*Number(String(parseint('22',2))[0])*eval(str.split('@')[0])+lat*eval(str.split('@')[1])*Number(String(parseint('22',2))[0])+eval(str.split('@')[2])*Number(String(parseint('22',2))[0]);var ta=lng*Number(String(parseint('22',2))[0])*eval(str.split('@')[3])+lat*eval(str.split('@')[4])*Number(String(parseint('22',2))[0])+eval(str.split('@')[5])*Number(String(parseint('22',2))[0]);return [tl, ta];}")}(window)}).call(exports,__webpack_require__(7)(module))},function(t,e,n){"use strict";var i,o,r,r,a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(r){if("object"==a(e))t.exports=r();else{i=r,void 0!==(o="function"==typeof i?i.call(e,n,e,t):i)&&(t.exports=o)}}(function(){return function t(e,n,i){function o(s,l){if(!n[s]){if(!e[s]){var u="function"==typeof r&&r;if(!l&&u)return r(s,!0);if(a)return a(s,!0);throw new Error("Cannot find module '"+s+"'")}var h=n[s]={exports:{}};e[s][0].call(h.exports,function(t){var n=e[s][1][t];return o(n||t)},h,h.exports,t,e,n,i)}return n[s].exports}for(var a="function"==typeof r&&r,s=0;s<i.length;s++)o(i[s]);return o}({1:[function(t,e,n){function i(t,e,n){if(!(this instanceof i))return new i(t,e,n);if(Array.isArray(t))this.x=t[0],this.y=t[1],this.z=t[2]||0;else if("object"==(void 0===t?"undefined":a(t)))this.x=t.x,this.y=t.y,this.z=t.z||0;else if("string"==typeof t&&void 0===e){var o=t.split(",");this.x=parseFloat(o[0],10),this.y=parseFloat(o[1],10),this.z=parseFloat(o[2],10)||0}else this.x=t,this.y=e,this.z=n||0}var o=t("mgrs");i.fromMGRS=function(t){return new i(o.toPoint(t))},i.prototype.toMGRS=function(t){return o.forward([this.x,this.y],t)},e.exports=i},{mgrs:67}],2:[function(t,e,n){function i(t,e){if(!(this instanceof i))return new i(t);e=e||function(t){if(t)throw t};var n=o(t);if("object"!=(void 0===n?"undefined":a(n)))return void e(t);var s=l(n),u=i.projections.get(s.projName);u?(r(this,s),r(this,u),this.init(),e(null,this)):e(t)}var o=t("./parseCode"),r=t("./extend"),s=t("./projections"),l=t("./deriveConstants");i.projections=s,i.projections.start(),e.exports=i},{"./deriveConstants":33,"./extend":34,"./parseCode":37,"./projections":39}],3:[function(t,e,n){e.exports=function(t,e,n){var i,o,r,a=n.x,s=n.y,l=n.z||0;for(r=0;3>r;r++)if(!e||2!==r||void 0!==n.z)switch(0===r?(i=a,o="x"):1===r?(i=s,o="y"):(i=l,o="z"),t.axis[r]){case"e":n[o]=i;break;case"w":n[o]=-i;break;case"n":n[o]=i;break;case"s":n[o]=-i;break;case"u":void 0!==n[o]&&(n.z=i);break;case"d":void 0!==n[o]&&(n.z=-i);break;default:return null}return n}},{}],4:[function(t,e,n){var i=Math.PI/2,o=t("./sign");e.exports=function(t){return Math.abs(t)<i?t:t-o(t)*Math.PI}},{"./sign":21}],5:[function(t,e,n){var i=2*Math.PI,o=t("./sign");e.exports=function(t){return Math.abs(t)<=3.14159265359?t:t-o(t)*i}},{"./sign":21}],6:[function(t,e,n){e.exports=function(t){return Math.abs(t)>1&&(t=t>1?1:-1),Math.asin(t)}},{}],7:[function(t,e,n){e.exports=function(t){return 1-.25*t*(1+t/16*(3+1.25*t))}},{}],8:[function(t,e,n){e.exports=function(t){return.375*t*(1+.25*t*(1+.46875*t))}},{}],9:[function(t,e,n){e.exports=function(t){return.05859375*t*t*(1+.75*t)}},{}],10:[function(t,e,n){e.exports=function(t){return t*t*t*(35/3072)}},{}],11:[function(t,e,n){e.exports=function(t,e,n){var i=e*n;return t/Math.sqrt(1-i*i)}},{}],12:[function(t,e,n){e.exports=function(t,e,n,i,o){var r,a;r=t/e;for(var s=0;15>s;s++)if(a=(t-(e*r-n*Math.sin(2*r)+i*Math.sin(4*r)-o*Math.sin(6*r)))/(e-2*n*Math.cos(2*r)+4*i*Math.cos(4*r)-6*o*Math.cos(6*r)),r+=a,Math.abs(a)<=1e-10)return r;return NaN}},{}],13:[function(t,e,n){var i=Math.PI/2;e.exports=function(t,e){var n=1-(1-t*t)/(2*t)*Math.log((1-t)/(1+t));if(Math.abs(Math.abs(e)-n)<1e-6)return 0>e?-1*i:i;for(var o,r,a,s,l=Math.asin(.5*e),u=0;30>u;u++)if(r=Math.sin(l),a=Math.cos(l),s=t*r,o=Math.pow(1-s*s,2)/(2*a)*(e/(1-t*t)-r/(1-s*s)+.5/t*Math.log((1-s)/(1+s))),l+=o,Math.abs(o)<=1e-10)return l;return NaN}},{}],14:[function(t,e,n){e.exports=function(t,e,n,i,o){return t*o-e*Math.sin(2*o)+n*Math.sin(4*o)-i*Math.sin(6*o)}},{}],15:[function(t,e,n){e.exports=function(t,e,n){var i=t*e;return n/Math.sqrt(1-i*i)}},{}],16:[function(t,e,n){var i=Math.PI/2;e.exports=function(t,e){for(var n,o,r=.5*t,a=i-2*Math.atan(e),s=0;15>=s;s++)if(n=t*Math.sin(a),o=i-2*Math.atan(e*Math.pow((1-n)/(1+n),r))-a,a+=o,Math.abs(o)<=1e-10)return a;return-9999}},{}],17:[function(t,e,n){var i=.046875,o=.01953125,r=.01068115234375;e.exports=function(t){var e=[];e[0]=1-t*(.25+t*(i+t*(o+t*r))),e[1]=t*(.75-t*(i+t*(o+t*r)));var n=t*t;return e[2]=n*(.46875-t*(.013020833333333334+.007120768229166667*t)),n*=t,e[3]=n*(.3645833333333333-.005696614583333333*t),e[4]=n*t*.3076171875,e}},{}],18:[function(t,e,n){var i=t("./pj_mlfn");e.exports=function(t,e,n){for(var o=1/(1-e),r=t,a=20;a;--a){var s=Math.sin(r),l=1-e*s*s;if(l=(i(r,s,Math.cos(r),n)-t)*(l*Math.sqrt(l))*o,r-=l,Math.abs(l)<1e-10)return r}return r}},{"./pj_mlfn":19}],19:[function(t,e,n){e.exports=function(t,e,n,i){return n*=e,e*=e,i[0]*t-n*(i[1]+e*(i[2]+e*(i[3]+e*i[4])))}},{}],20:[function(t,e,n){e.exports=function(t,e){var n;return t>1e-7?(n=t*e,(1-t*t)*(e/(1-n*n)-.5/t*Math.log((1-n)/(1+n)))):2*e}},{}],21:[function(t,e,n){e.exports=function(t){return 0>t?-1:1}},{}],22:[function(t,e,n){e.exports=function(t,e){return Math.pow((1-t)/(1+t),e)}},{}],23:[function(t,e,n){e.exports=function(t){var e={x:t[0],y:t[1]};return t.length>2&&(e.z=t[2]),t.length>3&&(e.m=t[3]),e}},{}],24:[function(t,e,n){var i=Math.PI/2;e.exports=function(t,e,n){var o=t*n,r=.5*t;return o=Math.pow((1-o)/(1+o),r),Math.tan(.5*(i-e))/o}},{}],25:[function(t,e,n){n.wgs84={towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},n.ch1903={towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"},n.ggrs87={towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},n.nad83={towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},n.nad27={nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},n.potsdam={towgs84:"606.0,23.0,413.0",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},n.carthage={towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},n.hermannskogel={towgs84:"653.0,-212.0,449.0",ellipse:"bessel",datumName:"Hermannskogel"},n.ire65={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},n.rassadiran={towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"},n.nzgd49={towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},n.osgb36={towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Airy 1830"},n.s_jtsk={towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"},n.beduaram={towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"},n.gunung_segara={towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"},n.rnb72={towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"}},{}],26:[function(t,e,n){n.MERIT={a:6378137,rf:298.257,ellipseName:"MERIT 1983"},n.SGS85={a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"},n.GRS80={a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"},n.IAU76={a:6378140,rf:298.257,ellipseName:"IAU 1976"},n.airy={a:6377563.396,b:6356256.91,ellipseName:"Airy 1830"},n.APL4={a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"},n.NWL9D={a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"},n.mod_airy={a:6377340.189,b:6356034.446,ellipseName:"Modified Airy"},n.andrae={a:6377104.43,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"},n.aust_SA={a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"},n.GRS67={a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"},n.bessel={a:6377397.155,rf:299.1528128,ellipseName:"Bessel 1841"},n.bess_nam={a:6377483.865,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"},n.clrk66={a:6378206.4,b:6356583.8,ellipseName:"Clarke 1866"},n.clrk80={a:6378249.145,rf:293.4663,ellipseName:"Clarke 1880 mod."},n.clrk58={a:6378293.645208759,rf:294.2606763692654,ellipseName:"Clarke 1858"},n.CPM={a:6375738.7,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"},n.delmbr={a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"},n.engelis={a:6378136.05,rf:298.2566,ellipseName:"Engelis 1985"},n.evrst30={a:6377276.345,rf:300.8017,ellipseName:"Everest 1830"},n.evrst48={a:6377304.063,rf:300.8017,ellipseName:"Everest 1948"},n.evrst56={a:6377301.243,rf:300.8017,ellipseName:"Everest 1956"},n.evrst69={a:6377295.664,rf:300.8017,ellipseName:"Everest 1969"},n.evrstSS={a:6377298.556,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"},n.fschr60={a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"},n.fschr60m={a:6378155,rf:298.3,ellipseName:"Fischer 1960"},n.fschr68={a:6378150,rf:298.3,ellipseName:"Fischer 1968"},n.helmert={a:6378200,rf:298.3,ellipseName:"Helmert 1906"},n.hough={a:6378270,rf:297,ellipseName:"Hough"},n.intl={a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"},n.kaula={a:6378163,rf:298.24,ellipseName:"Kaula 1961"},n.lerch={a:6378139,rf:298.257,ellipseName:"Lerch 1979"},n.mprts={a:6397300,rf:191,ellipseName:"Maupertius 1738"},n.new_intl={a:6378157.5,b:6356772.2,ellipseName:"New International 1967"},n.plessis={a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"},n.krass={a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"},n.SEasia={a:6378155,b:6356773.3205,ellipseName:"Southeast Asia"},n.walbeck={a:6376896,b:6355834.8467,ellipseName:"Walbeck"},n.WGS60={a:6378165,rf:298.3,ellipseName:"WGS 60"},n.WGS66={a:6378145,rf:298.25,ellipseName:"WGS 66"},n.WGS7={a:6378135,rf:298.26,ellipseName:"WGS 72"},n.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"},n.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"}},{}],27:[function(t,e,n){n.greenwich=0,n.lisbon=-9.131906111111,n.paris=2.337229166667,n.bogota=-74.080916666667,n.madrid=-3.687938888889,n.rome=12.452333333333,n.bern=7.439583333333,n.jakarta=106.807719444444,n.ferro=-17.666666666667,n.brussels=4.367975,n.stockholm=18.058277777778,n.athens=23.7163375,n.oslo=10.722916666667},{}],28:[function(t,e,n){n.ft={to_meter:.3048},n["us-ft"]={to_meter:1200/3937}},{}],29:[function(t,e,n){function i(t,e,n){var i;return Array.isArray(n)?(i=s(t,e,n),3===n.length?[i.x,i.y,i.z]:[i.x,i.y]):s(t,e,n)}function o(t){return t instanceof a?t:t.oProj?t.oProj:a(t)}function r(t,e,n){t=o(t);var r,a=!1;return void 0===e?(e=t,t=l,a=!0):(void 0!==e.x||Array.isArray(e))&&(n=e,e=t,t=l,a=!0),e=o(e),n?i(t,e,n):(r={forward:function(n){return i(t,e,n)},inverse:function(n){return i(e,t,n)}},a&&(r.oProj=e),r)}var a=t("./Proj"),s=t("./transform"),l=a("WGS84");e.exports=r},{"./Proj":2,"./transform":65}],30:[function(t,e,n){var i=Math.PI/2,o=484813681109536e-20,r=.3826834323650898,a=function t(e){return this instanceof t?(this.datum_type=4,void(e&&(e.datumCode&&"none"===e.datumCode&&(this.datum_type=5),e.datum_params&&(this.datum_params=e.datum_params.map(parseFloat),(0!==this.datum_params[0]||0!==this.datum_params[1]||0!==this.datum_params[2])&&(this.datum_type=1),this.datum_params.length>3&&(0!==this.datum_params[3]||0!==this.datum_params[4]||0!==this.datum_params[5]||0!==this.datum_params[6])&&(this.datum_type=2,this.datum_params[3]*=o,this.datum_params[4]*=o,this.datum_params[5]*=o,this.datum_params[6]=this.datum_params[6]/1e6+1)),this.datum_type=e.grids?3:this.datum_type,this.a=e.a,this.b=e.b,this.es=e.es,this.ep2=e.ep2,3===this.datum_type&&(this.grids=e.grids)))):new t(e)};a.prototype={compare_datums:function(t){return this.datum_type===t.datum_type&&(!(this.a!==t.a||Math.abs(this.es-t.es)>5e-11)&&(1===this.datum_type?this.datum_params[0]===t.datum_params[0]&&this.datum_params[1]===t.datum_params[1]&&this.datum_params[2]===t.datum_params[2]:2===this.datum_type?this.datum_params[0]===t.datum_params[0]&&this.datum_params[1]===t.datum_params[1]&&this.datum_params[2]===t.datum_params[2]&&this.datum_params[3]===t.datum_params[3]&&this.datum_params[4]===t.datum_params[4]&&this.datum_params[5]===t.datum_params[5]&&this.datum_params[6]===t.datum_params[6]:3!==this.datum_type&&3!==t.datum_type||this.nadgrids===t.nadgrids))},geodetic_to_geocentric:function(t){var e,n,o,r,a,s,l,u=t.x,h=t.y,c=t.z?t.z:0;if(-i>h&&h>-1.001*i)h=-i;else if(h>i&&1.001*i>h)h=i;else if(-i>h||h>i)return null;return u>Math.PI&&(u-=2*Math.PI),a=Math.sin(h),l=Math.cos(h),s=a*a,r=this.a/Math.sqrt(1-this.es*s),e=(r+c)*l*Math.cos(u),n=(r+c)*l*Math.sin(u),o=(r*(1-this.es)+c)*a,t.x=e,t.y=n,t.z=o,0},geocentric_to_geodetic:function(t){var e,n,o,r,a,s,l,u,h,c,f,p,d,_,y,g,m=1e-12,v=t.x,b=t.y,L=t.z?t.z:0;if(!1,e=Math.sqrt(v*v+b*b),n=Math.sqrt(v*v+b*b+L*L),e/this.a<m){if(!0,_=0,n/this.a<m)return y=i,void(g=-this.b)}else _=Math.atan2(b,v);o=L/n,r=e/n,a=1/Math.sqrt(1-this.es*(2-this.es)*r*r),u=r*(1-this.es)*a,h=o*a,d=0;do{d++,l=this.a/Math.sqrt(1-this.es*h*h),g=e*u+L*h-l*(1-this.es*h*h),s=this.es*l/(l+g),a=1/Math.sqrt(1-s*(2-s)*r*r),c=r*(1-s)*a,f=o*a,p=f*u-c*h,u=c,h=f}while(p*p>1e-24&&30>d);return y=Math.atan(f/Math.abs(c)),t.x=_,t.y=y,t.z=g,t},geocentric_to_geodetic_noniter:function(t){var e,n,o,a,s,l,u,h,c,f,p,d,_,y,g,m,v,b=t.x,L=t.y,w=t.z?t.z:0;if(b=parseFloat(b),L=parseFloat(L),w=parseFloat(w),v=!1,0!==b)e=Math.atan2(L,b);else if(L>0)e=i;else if(0>L)e=-i;else if(v=!0,e=0,w>0)n=i;else{if(!(0>w))return n=i,void(o=-this.b);n=-i}return s=b*b+L*L,a=Math.sqrt(s),l=1.0026*w,h=Math.sqrt(l*l+s),f=l/h,d=a/h,p=f*f*f,u=w+this.b*this.ep2*p,m=a-this.a*this.es*d*d*d,c=Math.sqrt(u*u+m*m),_=u/c,y=m/c,g=this.a/Math.sqrt(1-this.es*_*_),o=y>=r?a/y-g:-r>=y?a/-y-g:w/_+g*(this.es-1),!1===v&&(n=Math.atan(_/y)),t.x=e,t.y=n,t.z=o,t},geocentric_to_wgs84:function(t){if(1===this.datum_type)t.x+=this.datum_params[0],t.y+=this.datum_params[1],t.z+=this.datum_params[2];else if(2===this.datum_type){var e=this.datum_params[0],n=this.datum_params[1],i=this.datum_params[2],o=this.datum_params[3],r=this.datum_params[4],a=this.datum_params[5],s=this.datum_params[6],l=s*(t.x-a*t.y+r*t.z)+e,u=s*(a*t.x+t.y-o*t.z)+n,h=s*(-r*t.x+o*t.y+t.z)+i;t.x=l,t.y=u,t.z=h}},geocentric_from_wgs84:function(t){if(1===this.datum_type)t.x-=this.datum_params[0],t.y-=this.datum_params[1],t.z-=this.datum_params[2];else if(2===this.datum_type){var e=this.datum_params[0],n=this.datum_params[1],i=this.datum_params[2],o=this.datum_params[3],r=this.datum_params[4],a=this.datum_params[5],s=this.datum_params[6],l=(t.x-e)/s,u=(t.y-n)/s,h=(t.z-i)/s;t.x=l+a*u-r*h,t.y=-a*l+u+o*h,t.z=r*l-o*u+h}}},e.exports=a},{}],31:[function(t,e,n){var i=1,o=2,r=6378137,a=.006694379990141316;e.exports=function(t,e,n){function s(t){return t===i||t===o}var l,u,h;if(t.compare_datums(e))return n;if(5===t.datum_type||5===e.datum_type)return n;var c=t.a,f=t.es,p=e.a,d=e.es,_=t.datum_type;if(3===_)if(0===this.apply_gridshift(t,0,n))t.a=r,t.es=a;else{if(!t.datum_params)return t.a=c,t.es=t.es,n;for(l=1,u=0,h=t.datum_params.length;h>u;u++)l*=t.datum_params[u];if(0===l)return t.a=c,t.es=t.es,n;_=t.datum_params.length>3?o:i}return 3===e.datum_type&&(e.a=r,e.es=a),(t.es!==e.es||t.a!==e.a||s(_)||s(e.datum_type))&&(t.geodetic_to_geocentric(n),s(t.datum_type)&&t.geocentric_to_wgs84(n),s(e.datum_type)&&e.geocentric_from_wgs84(n),e.geocentric_to_geodetic(n)),3===e.datum_type&&this.apply_gridshift(e,1,n),t.a=c,t.es=f,e.a=p,e.es=d,n}},{}],32:[function(t,e,n){function i(t){var e=this;if(2===arguments.length){var n=arguments[1];"string"==typeof n?"+"===n.charAt(0)?i[t]=r(arguments[1]):i[t]=a(arguments[1]):i[t]=n}else if(1===arguments.length){if(Array.isArray(t))return t.map(function(t){Array.isArray(t)?i.apply(e,t):i(t)});if("string"==typeof t){if(t in i)return i[t]}else"EPSG"in t?i["EPSG:"+t.EPSG]=t:"ESRI"in t?i["ESRI:"+t.ESRI]=t:"IAU2000"in t&&(i["IAU2000:"+t.IAU2000]=t);return}}var o=t("./global"),r=t("./projString"),a=t("./wkt");o(i),e.exports=i},{"./global":35,"./projString":38,"./wkt":66}],33:[function(t,e,n){var i=t("./constants/Datum"),o=t("./constants/Ellipsoid"),r=t("./extend"),a=t("./datum");e.exports=function(t){if(t.datumCode&&"none"!==t.datumCode){var e=i[t.datumCode];e&&(t.datum_params=e.towgs84?e.towgs84.split(","):null,t.ellps=e.ellipse,t.datumName=e.datumName?e.datumName:t.datumCode)}if(!t.a){var n=o[t.ellps]?o[t.ellps]:o.WGS84;r(t,n)}return t.rf&&!t.b&&(t.b=(1-1/t.rf)*t.a),(0===t.rf||Math.abs(t.a-t.b)<1e-10)&&(t.sphere=!0,t.b=t.a),t.a2=t.a*t.a,t.b2=t.b*t.b,t.es=(t.a2-t.b2)/t.a2,t.e=Math.sqrt(t.es),t.R_A&&(t.a*=1-t.es*(.16666666666666666+t.es*(.04722222222222222+.022156084656084655*t.es)),t.a2=t.a*t.a,t.b2=t.b*t.b,t.es=0),t.ep2=(t.a2-t.b2)/t.b2,t.k0||(t.k0=1),t.axis||(t.axis="enu"),t.datum||(t.datum=a(t)),t}},{"./constants/Datum":25,"./constants/Ellipsoid":26,"./datum":30,"./extend":34}],34:[function(t,e,n){e.exports=function(t,e){t=t||{};var n,i;if(!e)return t;for(i in e)void 0!==(n=e[i])&&(t[i]=n);return t}},{}],35:[function(t,e,n){e.exports=function(t){t("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),t("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),t("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs"),t.WGS84=t["EPSG:4326"],t["EPSG:3785"]=t["EPSG:3857"],t.GOOGLE=t["EPSG:3857"],t["EPSG:900913"]=t["EPSG:3857"],t["EPSG:102113"]=t["EPSG:3857"]}},{}],36:[function(t,e,n){var i=t("./core");i.defaultDatum="WGS84",i.Proj=t("./Proj"),i.WGS84=new i.Proj("WGS84"),i.Point=t("./Point"),i.toPoint=t("./common/toPoint"),i.defs=t("./defs"),i.transform=t("./transform"),i.mgrs=t("mgrs"),i.version=t("../package.json").version,t("./includedProjections")(i),e.exports=i},{"../package.json":68,"./Point":1,"./Proj":2,"./common/toPoint":23,"./core":29,"./defs":32,"./includedProjections":"hTEDpn","./transform":65,mgrs:67}],37:[function(t,e,n){function i(t){return"string"==typeof t}function o(t){return t in l}function r(t){return["GEOGCS","GEOCCS","PROJCS","LOCAL_CS"].reduce(function(e,n){return e+1+t.indexOf(n)},0)}function a(t){return"+"===t[0]}function s(t){return i(t)?o(t)?l[t]:r(t)?u(t):a(t)?h(t):void 0:t}var l=t("./defs"),u=t("./wkt"),h=t("./projString");e.exports=s},{"./defs":32,"./projString":38,"./wkt":66}],38:[function(t,e,n){var i=.017453292519943295,o=t("./constants/PrimeMeridian"),r=t("./constants/units");e.exports=function(t){var e={},n={};t.split("+").map(function(t){return t.trim()}).filter(function(t){return t}).forEach(function(t){var e=t.split("=");e.push(!0),n[e[0].toLowerCase()]=e[1]});var a,s,l,u={proj:"projName",datum:"datumCode",rf:function(t){e.rf=parseFloat(t)},lat_0:function(t){e.lat0=t*i},lat_1:function(t){e.lat1=t*i},lat_2:function(t){e.lat2=t*i},lat_ts:function(t){e.lat_ts=t*i},lon_0:function(t){e.long0=t*i},lon_1:function(t){e.long1=t*i},lon_2:function(t){e.long2=t*i},alpha:function(t){e.alpha=parseFloat(t)*i},lonc:function(t){e.longc=t*i},x_0:function(t){e.x0=parseFloat(t)},y_0:function(t){e.y0=parseFloat(t)},k_0:function(t){e.k0=parseFloat(t)},k:function(t){e.k0=parseFloat(t)},a:function(t){e.a=parseFloat(t)},b:function(t){e.b=parseFloat(t)},r_a:function(){e.R_A=!0},zone:function(t){e.zone=parseInt(t,10)},south:function(){e.utmSouth=!0},towgs84:function(t){e.datum_params=t.split(",").map(function(t){return parseFloat(t)})},to_meter:function(t){e.to_meter=parseFloat(t)},units:function(t){e.units=t,r[t]&&(e.to_meter=r[t].to_meter)},from_greenwich:function(t){e.from_greenwich=t*i},pm:function(t){e.from_greenwich=(o[t]?o[t]:parseFloat(t))*i},nadgrids:function(t){"@null"===t?e.datumCode="none":e.nadgrids=t},axis:function(t){var n="ewnsud";3===t.length&&-1!==n.indexOf(t.substr(0,1))&&-1!==n.indexOf(t.substr(1,1))&&-1!==n.indexOf(t.substr(2,1))&&(e.axis=t)}};for(a in n)s=n[a],a in u?(l=u[a],"function"==typeof l?l(s):e[l]=s):e[a]=s;return"string"==typeof e.datumCode&&"WGS84"!==e.datumCode&&(e.datumCode=e.datumCode.toLowerCase()),e}},{"./constants/PrimeMeridian":27,"./constants/units":28}],39:[function(t,e,n){function i(t,e){var n=a.length;return!t.names||(a[n]=t,t.names.forEach(function(t){r[t.toLowerCase()]=n}),this)}var o=[t("./projections/merc"),t("./projections/longlat")],r={},a=[];n.add=i,n.get=function(t){if(!t)return!1;var e=t.toLowerCase();return void 0!==r[e]&&a[r[e]]?a[r[e]]:void 0},n.start=function(){o.forEach(i)}},{"./projections/longlat":51,"./projections/merc":52}],40:[function(t,e,n){var i=1e-10,o=t("../common/msfnz"),r=t("../common/qsfnz"),a=t("../common/adjust_lon"),s=t("../common/asinz");n.init=function(){Math.abs(this.lat1+this.lat2)<i||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=o(this.e3,this.sin_po,this.cos_po),this.qs1=r(this.e3,this.sin_po,this.cos_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=o(this.e3,this.sin_po,this.cos_po),this.qs2=r(this.e3,this.sin_po,this.cos_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=r(this.e3,this.sin_po,this.cos_po),Math.abs(this.lat1-this.lat2)>i?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)},n.forward=function(t){var e=t.x,n=t.y;this.sin_phi=Math.sin(n),this.cos_phi=Math.cos(n);var i=r(this.e3,this.sin_phi,this.cos_phi),o=this.a*Math.sqrt(this.c-this.ns0*i)/this.ns0,s=this.ns0*a(e-this.long0),l=o*Math.sin(s)+this.x0,u=this.rh-o*Math.cos(s)+this.y0;return t.x=l,t.y=u,t},n.inverse=function(t){var e,n,i,o,r,s;return t.x-=this.x0,t.y=this.rh-t.y+this.y0,this.ns0>=0?(e=Math.sqrt(t.x*t.x+t.y*t.y),i=1):(e=-Math.sqrt(t.x*t.x+t.y*t.y),i=-1),o=0,0!==e&&(o=Math.atan2(i*t.x,i*t.y)),i=e*this.ns0/this.a,this.sphere?s=Math.asin((this.c-i*i)/(2*this.ns0)):(n=(this.c-i*i)/this.ns0,s=this.phi1z(this.e3,n)),r=a(o/this.ns0+this.long0),t.x=r,t.y=s,t},n.phi1z=function(t,e){var n,o,r,a,l,u=s(.5*e);if(i>t)return u;for(var h=t*t,c=1;25>=c;c++)if(n=Math.sin(u),o=Math.cos(u),r=t*n,a=1-r*r,l=.5*a*a/o*(e/(1-h)-n/a+.5/t*Math.log((1-r)/(1+r))),u+=l,Math.abs(l)<=1e-7)return u;return null},n.names=["Albers_Conic_Equal_Area","Albers","aea"]},{"../common/adjust_lon":5,"../common/asinz":6,"../common/msfnz":15,"../common/qsfnz":20}],41:[function(t,e,n){var i=t("../common/adjust_lon"),o=Math.PI/2,r=1e-10,a=t("../common/mlfn"),s=t("../common/e0fn"),l=t("../common/e1fn"),u=t("../common/e2fn"),h=t("../common/e3fn"),c=t("../common/gN"),f=t("../common/asinz"),p=t("../common/imlfn");n.init=function(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0)},n.forward=function(t){var e,n,f,p,d,_,y,g,m,v,b,L,w,k,x,M,P,O,C,T,S,E,D,j=t.x,z=t.y,B=Math.sin(t.y),I=Math.cos(t.y),A=i(j-this.long0);return this.sphere?Math.abs(this.sin_p12-1)<=r?(t.x=this.x0+this.a*(o-z)*Math.sin(A),t.y=this.y0-this.a*(o-z)*Math.cos(A),t):Math.abs(this.sin_p12+1)<=r?(t.x=this.x0+this.a*(o+z)*Math.sin(A),t.y=this.y0+this.a*(o+z)*Math.cos(A),t):(O=this.sin_p12*B+this.cos_p12*I*Math.cos(A),M=Math.acos(O),P=M/Math.sin(M),t.x=this.x0+this.a*P*I*Math.sin(A),t.y=this.y0+this.a*P*(this.cos_p12*B-this.sin_p12*I*Math.cos(A)),t):(e=s(this.es),n=l(this.es),f=u(this.es),p=h(this.es),Math.abs(this.sin_p12-1)<=r?(d=this.a*a(e,n,f,p,o),_=this.a*a(e,n,f,p,z),t.x=this.x0+(d-_)*Math.sin(A),t.y=this.y0-(d-_)*Math.cos(A),t):Math.abs(this.sin_p12+1)<=r?(d=this.a*a(e,n,f,p,o),_=this.a*a(e,n,f,p,z),t.x=this.x0+(d+_)*Math.sin(A),t.y=this.y0+(d+_)*Math.cos(A),t):(y=B/I,g=c(this.a,this.e,this.sin_p12),m=c(this.a,this.e,B),v=Math.atan((1-this.es)*y+this.es*g*this.sin_p12/(m*I)),b=Math.atan2(Math.sin(A),this.cos_p12*Math.tan(v)-this.sin_p12*Math.cos(A)),C=0===b?Math.asin(this.cos_p12*Math.sin(v)-this.sin_p12*Math.cos(v)):Math.abs(Math.abs(b)-Math.PI)<=r?-Math.asin(this.cos_p12*Math.sin(v)-this.sin_p12*Math.cos(v)):Math.asin(Math.sin(A)*Math.cos(v)/Math.sin(b)),L=this.e*this.sin_p12/Math.sqrt(1-this.es),w=this.e*this.cos_p12*Math.cos(b)/Math.sqrt(1-this.es),k=L*w,x=w*w,T=C*C,S=T*C,E=S*C,D=E*C,M=g*C*(1-T*x*(1-x)/6+S/8*k*(1-2*x)+E/120*(x*(4-7*x)-3*L*L*(1-7*x))-D/48*k),t.x=this.x0+M*Math.sin(b),t.y=this.y0+M*Math.cos(b),t))},n.inverse=function(t){t.x-=this.x0,t.y-=this.y0;var e,n,d,_,y,g,m,v,b,L,w,k,x,M,P,O,C,T,S,E,D,j,z;if(this.sphere){if((e=Math.sqrt(t.x*t.x+t.y*t.y))>2*o*this.a)return;return n=e/this.a,d=Math.sin(n),_=Math.cos(n),y=this.long0,Math.abs(e)<=r?g=this.lat0:(g=f(_*this.sin_p12+t.y*d*this.cos_p12/e),m=Math.abs(this.lat0)-o,y=i(Math.abs(m)<=r?this.lat0>=0?this.long0+Math.atan2(t.x,-t.y):this.long0-Math.atan2(-t.x,t.y):this.long0+Math.atan2(t.x*d,e*this.cos_p12*_-t.y*this.sin_p12*d))),t.x=y,t.y=g,t}return v=s(this.es),b=l(this.es),L=u(this.es),w=h(this.es),Math.abs(this.sin_p12-1)<=r?(k=this.a*a(v,b,L,w,o),e=Math.sqrt(t.x*t.x+t.y*t.y),x=k-e,g=p(x/this.a,v,b,L,w),y=i(this.long0+Math.atan2(t.x,-1*t.y)),t.x=y,t.y=g,t):Math.abs(this.sin_p12+1)<=r?(k=this.a*a(v,b,L,w,o),e=Math.sqrt(t.x*t.x+t.y*t.y),x=e-k,g=p(x/this.a,v,b,L,w),y=i(this.long0+Math.atan2(t.x,t.y)),t.x=y,t.y=g,t):(e=Math.sqrt(t.x*t.x+t.y*t.y),O=Math.atan2(t.x,t.y),M=c(this.a,this.e,this.sin_p12),C=Math.cos(O),T=this.e*this.cos_p12*C,S=-T*T/(1-this.es),E=3*this.es*(1-S)*this.sin_p12*this.cos_p12*C/(1-this.es),D=e/M,j=D-S*(1+S)*Math.pow(D,3)/6-E*(1+3*S)*Math.pow(D,4)/24,z=1-S*j*j/2-D*j*j*j/6,P=Math.asin(this.sin_p12*Math.cos(j)+this.cos_p12*Math.sin(j)*C),y=i(this.long0+Math.asin(Math.sin(O)*Math.sin(j)/Math.cos(P))),g=Math.atan((1-this.es*z*this.sin_p12/Math.sin(P))*Math.tan(P)/(1-this.es)),t.x=y,t.y=g,t)},n.names=["Azimuthal_Equidistant","aeqd"]},{"../common/adjust_lon":5,"../common/asinz":6,"../common/e0fn":7,"../common/e1fn":8,"../common/e2fn":9,"../common/e3fn":10,"../common/gN":11,"../common/imlfn":12,"../common/mlfn":14}],42:[function(t,e,n){var i=t("../common/mlfn"),o=t("../common/e0fn"),r=t("../common/e1fn"),a=t("../common/e2fn"),s=t("../common/e3fn"),l=t("../common/gN"),u=t("../common/adjust_lon"),h=t("../common/adjust_lat"),c=t("../common/imlfn"),f=Math.PI/2;n.init=function(){this.sphere||(this.e0=o(this.es),this.e1=r(this.es),this.e2=a(this.es),this.e3=s(this.es),this.ml0=this.a*i(this.e0,this.e1,this.e2,this.e3,this.lat0))},n.forward=function(t){var e,n,o=t.x,r=t.y;if(o=u(o-this.long0),this.sphere)e=this.a*Math.asin(Math.cos(r)*Math.sin(o)),n=this.a*(Math.atan2(Math.tan(r),Math.cos(o))-this.lat0);else{var a=Math.sin(r),s=Math.cos(r),h=l(this.a,this.e,a),c=Math.tan(r)*Math.tan(r),f=o*Math.cos(r),p=f*f,d=this.es*s*s/(1-this.es),_=this.a*i(this.e0,this.e1,this.e2,this.e3,r);e=h*f*(1-p*c*(1/6-(8-c+8*d)*p/120)),n=_-this.ml0+h*a/s*p*(.5+(5-c+6*d)*p/24)}return t.x=e+this.x0,t.y=n+this.y0,t},n.inverse=function(t){t.x-=this.x0,t.y-=this.y0;var e,n,i=t.x/this.a,o=t.y/this.a;if(this.sphere){var r=o+this.lat0;e=Math.asin(Math.sin(r)*Math.cos(i)),n=Math.atan2(Math.tan(i),Math.cos(r))}else{var a=this.ml0/this.a+o,s=c(a,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(s)-f)<=1e-10)return t.x=this.long0,t.y=f,0>o&&(t.y*=-1),t;var p=l(this.a,this.e,Math.sin(s)),d=p*p*p/this.a/this.a*(1-this.es),_=Math.pow(Math.tan(s),2),y=i*this.a/p,g=y*y;e=s-p*Math.tan(s)/d*y*y*(.5-(1+3*_)*y*y/24),n=y*(1-g*(_/3+(1+3*_)*_*g/15))/Math.cos(s)}return t.x=u(n+this.long0),t.y=h(e),t},n.names=["Cassini","Cassini_Soldner","cass"]},{"../common/adjust_lat":4,"../common/adjust_lon":5,"../common/e0fn":7,"../common/e1fn":8,"../common/e2fn":9,"../common/e3fn":10,"../common/gN":11,"../common/imlfn":12,"../common/mlfn":14}],43:[function(t,e,n){var i=t("../common/adjust_lon"),o=t("../common/qsfnz"),r=t("../common/msfnz"),a=t("../common/iqsfnz");n.init=function(){this.sphere||(this.k0=r(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))},n.forward=function(t){var e,n,r=t.x,a=t.y,s=i(r-this.long0);if(this.sphere)e=this.x0+this.a*s*Math.cos(this.lat_ts),n=this.y0+this.a*Math.sin(a)/Math.cos(this.lat_ts);else{var l=o(this.e,Math.sin(a));e=this.x0+this.a*this.k0*s,n=this.y0+this.a*l*.5/this.k0}return t.x=e,t.y=n,t},n.inverse=function(t){t.x-=this.x0,t.y-=this.y0;var e,n;return this.sphere?(e=i(this.long0+t.x/this.a/Math.cos(this.lat_ts)),n=Math.asin(t.y/this.a*Math.cos(this.lat_ts))):(n=a(this.e,2*t.y*this.k0/this.a),e=i(this.long0+t.x/(this.a*this.k0))),t.x=e,t.y=n,t},n.names=["cea"]},{"../common/adjust_lon":5,"../common/iqsfnz":13,"../common/msfnz":15,"../common/qsfnz":20}],44:[function(t,e,n){var i=t("../common/adjust_lon"),o=t("../common/adjust_lat");n.init=function(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)},n.forward=function(t){var e=t.x,n=t.y,r=i(e-this.long0),a=o(n-this.lat0);return t.x=this.x0+this.a*r*this.rc,t.y=this.y0+this.a*a,t},n.inverse=function(t){var e=t.x,n=t.y;return t.x=i(this.long0+(e-this.x0)/(this.a*this.rc)),t.y=o(this.lat0+(n-this.y0)/this.a),t},n.names=["Equirectangular","Equidistant_Cylindrical","eqc"]},{"../common/adjust_lat":4,"../common/adjust_lon":5}],45:[function(t,e,n){var i=t("../common/e0fn"),o=t("../common/e1fn"),r=t("../common/e2fn"),a=t("../common/e3fn"),s=t("../common/msfnz"),l=t("../common/mlfn"),u=t("../common/adjust_lon"),h=t("../common/adjust_lat"),c=t("../common/imlfn");n.init=function(){Math.abs(this.lat1+this.lat2)<1e-10||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=i(this.es),this.e1=o(this.es),this.e2=r(this.es),this.e3=a(this.es),this.sinphi=Math.sin(this.lat1),this.cosphi=Math.cos(this.lat1),this.ms1=s(this.e,this.sinphi,this.cosphi),this.ml1=l(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<1e-10?this.ns=this.sinphi:(this.sinphi=Math.sin(this.lat2),this.cosphi=Math.cos(this.lat2),this.ms2=s(this.e,this.sinphi,this.cosphi),this.ml2=l(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=l(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))},n.forward=function(t){var e,n=t.x,i=t.y;if(this.sphere)e=this.a*(this.g-i);else{var o=l(this.e0,this.e1,this.e2,this.e3,i);e=this.a*(this.g-o)}var r=this.ns*u(n-this.long0),a=this.x0+e*Math.sin(r),s=this.y0+this.rh-e*Math.cos(r);return t.x=a,t.y=s,t},n.inverse=function(t){t.x-=this.x0,t.y=this.rh-t.y+this.y0;var e,n,i,o;this.ns>=0?(n=Math.sqrt(t.x*t.x+t.y*t.y),e=1):(n=-Math.sqrt(t.x*t.x+t.y*t.y),e=-1);var r=0;if(0!==n&&(r=Math.atan2(e*t.x,e*t.y)),this.sphere)return o=u(this.long0+r/this.ns),i=h(this.g-n/this.a),t.x=o,t.y=i,t;var a=this.g-n/this.a;return i=c(a,this.e0,this.e1,this.e2,this.e3),o=u(this.long0+r/this.ns),t.x=o,t.y=i,t},n.names=["Equidistant_Conic","eqdc"]},{"../common/adjust_lat":4,"../common/adjust_lon":5,"../common/e0fn":7,"../common/e1fn":8,"../common/e2fn":9,"../common/e3fn":10,"../common/imlfn":12,"../common/mlfn":14,"../common/msfnz":15}],46:[function(t,e,n){var i=Math.PI/4,o=t("../common/srat"),r=Math.PI/2;n.init=function(){var t=Math.sin(this.lat0),e=Math.cos(this.lat0);e*=e,this.rc=Math.sqrt(1-this.es)/(1-this.es*t*t),this.C=Math.sqrt(1+this.es*e*e/(1-this.es)),this.phic0=Math.asin(t/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+i)/(Math.pow(Math.tan(.5*this.lat0+i),this.C)*o(this.e*t,this.ratexp))},n.forward=function(t){var e=t.x,n=t.y;return t.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*n+i),this.C)*o(this.e*Math.sin(n),this.ratexp))-r,t.x=this.C*e,t},n.inverse=function(t){for(var e=t.x/this.C,n=t.y,a=Math.pow(Math.tan(.5*n+i)/this.K,1/this.C),s=20;s>0&&(n=2*Math.atan(a*o(this.e*Math.sin(t.y),-.5*this.e))-r,!(Math.abs(n-t.y)<1e-14));--s)t.y=n;return s?(t.x=e,t.y=n,t):null},n.names=["gauss"]},{"../common/srat":22}],47:[function(t,e,n){var i=t("../common/adjust_lon"),o=t("../common/asinz");n.init=function(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1},n.forward=function(t){var e,n,o,r,a,s,l,u,h=t.x,c=t.y;return o=i(h-this.long0),e=Math.sin(c),n=Math.cos(c),r=Math.cos(o),s=this.sin_p14*e+this.cos_p14*n*r,a=1,s>0||Math.abs(s)<=1e-10?(l=this.x0+this.a*a*n*Math.sin(o)/s,u=this.y0+this.a*a*(this.cos_p14*e-this.sin_p14*n*r)/s):(l=this.x0+this.infinity_dist*n*Math.sin(o),u=this.y0+this.infinity_dist*(this.cos_p14*e-this.sin_p14*n*r)),t.x=l,t.y=u,t},n.inverse=function(t){var e,n,r,a,s,l;return t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,(e=Math.sqrt(t.x*t.x+t.y*t.y))?(a=Math.atan2(e,this.rc),n=Math.sin(a),r=Math.cos(a),l=o(r*this.sin_p14+t.y*n*this.cos_p14/e),s=Math.atan2(t.x*n,e*this.cos_p14*r-t.y*this.sin_p14*n),s=i(this.long0+s)):(l=this.phic0,s=0),t.x=s,t.y=l,t},n.names=["gnom"]},{"../common/adjust_lon":5,"../common/asinz":6}],48:[function(t,e,n){var i=t("../common/adjust_lon");n.init=function(){this.a=6377397.155,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.4334234309119251),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq},n.forward=function(t){var e,n,o,r,a,s,l,u=t.x,h=t.y,c=i(u-this.long0);return e=Math.pow((1+this.e*Math.sin(h))/(1-this.e*Math.sin(h)),this.alfa*this.e/2),n=2*(Math.atan(this.k*Math.pow(Math.tan(h/2+this.s45),this.alfa)/e)-this.s45),o=-c*this.alfa,r=Math.asin(Math.cos(this.ad)*Math.sin(n)+Math.sin(this.ad)*Math.cos(n)*Math.cos(o)),a=Math.asin(Math.cos(n)*Math.sin(o)/Math.cos(r)),s=this.n*a,l=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(r/2+this.s45),this.n),t.y=l*Math.cos(s)/1,t.x=l*Math.sin(s)/1,this.czech||(t.y*=-1,t.x*=-1),t},n.inverse=function(t){var e,n,i,o,r,a,s,l,u=t.x;t.x=t.y,t.y=u,this.czech||(t.y*=-1,t.x*=-1),a=Math.sqrt(t.x*t.x+t.y*t.y),r=Math.atan2(t.y,t.x),o=r/Math.sin(this.s0),i=2*(Math.atan(Math.pow(this.ro0/a,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),e=Math.asin(Math.cos(this.ad)*Math.sin(i)-Math.sin(this.ad)*Math.cos(i)*Math.cos(o)),n=Math.asin(Math.cos(i)*Math.sin(o)/Math.cos(e)),t.x=this.long0-n/this.alfa,s=e,l=0;var h=0;do{t.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(e/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(s))/(1-this.e*Math.sin(s)),this.e/2))-this.s45),Math.abs(s-t.y)<1e-10&&(l=1),s=t.y,h+=1}while(0===l&&15>h);return h>=15?null:t},n.names=["Krovak","krovak"]},{"../common/adjust_lon":5}],49:[function(t,e,n){var i=Math.PI/2,o=Math.PI/4,r=1e-10,a=t("../common/qsfnz"),s=t("../common/adjust_lon");n.S_POLE=1,n.N_POLE=2,n.EQUIT=3,n.OBLIQ=4,n.init=function(){var t=Math.abs(this.lat0);if(Math.abs(t-i)<r?this.mode=this.lat0<0?this.S_POLE:this.N_POLE:Math.abs(t)<r?this.mode=this.EQUIT:this.mode=this.OBLIQ,this.es>0){var e;switch(this.qp=a(this.e,1),this.mmf=.5/(1-this.es),this.apa=this.authset(this.es),this.mode){case this.N_POLE:case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp),e=Math.sin(this.lat0),this.sinb1=a(this.e,e)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*e*e)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd}}else this.mode===this.OBLIQ&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))},n.forward=function(t){var e,n,l,u,h,c,f,p,d,_,y=t.x,g=t.y;if(y=s(y-this.long0),this.sphere){if(h=Math.sin(g),_=Math.cos(g),l=Math.cos(y),this.mode===this.OBLIQ||this.mode===this.EQUIT){if(n=this.mode===this.EQUIT?1+_*l:1+this.sinph0*h+this.cosph0*_*l,r>=n)return null;n=Math.sqrt(2/n),e=n*_*Math.sin(y),n*=this.mode===this.EQUIT?h:this.cosph0*h-this.sinph0*_*l}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(l=-l),Math.abs(g+this.phi0)<r)return null;n=o-.5*g,n=2*(this.mode===this.S_POLE?Math.cos(n):Math.sin(n)),e=n*Math.sin(y),n*=l}}else{switch(f=0,p=0,d=0,l=Math.cos(y),u=Math.sin(y),h=Math.sin(g),c=a(this.e,h),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(f=c/this.qp,p=Math.sqrt(1-f*f)),this.mode){case this.OBLIQ:d=1+this.sinb1*f+this.cosb1*p*l;break;case this.EQUIT:d=1+p*l;break;case this.N_POLE:d=i+g,c=this.qp-c;break;case this.S_POLE:d=g-i,c=this.qp+c}if(Math.abs(d)<r)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:d=Math.sqrt(2/d),n=this.mode===this.OBLIQ?this.ymf*d*(this.cosb1*f-this.sinb1*p*l):(d=Math.sqrt(2/(1+p*l)))*f*this.ymf,e=this.xmf*d*p*u;break;case this.N_POLE:case this.S_POLE:c>=0?(e=(d=Math.sqrt(c))*u,n=l*(this.mode===this.S_POLE?d:-d)):e=n=0}}return t.x=this.a*e+this.x0,t.y=this.a*n+this.y0,t},n.inverse=function(t){t.x-=this.x0,t.y-=this.y0;var e,n,o,a,l,u,h,c=t.x/this.a,f=t.y/this.a;if(this.sphere){var p,d=0,_=0;if(p=Math.sqrt(c*c+f*f),(n=.5*p)>1)return null;switch(n=2*Math.asin(n),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(_=Math.sin(n),d=Math.cos(n)),this.mode){case this.EQUIT:n=Math.abs(p)<=r?0:Math.asin(f*_/p),c*=_,f=d*p;break;case this.OBLIQ:n=Math.abs(p)<=r?this.phi0:Math.asin(d*this.sinph0+f*_*this.cosph0/p),c*=_*this.cosph0,f=(d-Math.sin(n)*this.sinph0)*p;break;case this.N_POLE:f=-f,n=i-n;break;case this.S_POLE:n-=i}e=0!==f||this.mode!==this.EQUIT&&this.mode!==this.OBLIQ?Math.atan2(c,f):0}else{if(h=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(c/=this.dd,f*=this.dd,u=Math.sqrt(c*c+f*f),r>u)return t.x=0,t.y=this.phi0,t;a=2*Math.asin(.5*u/this.rq),o=Math.cos(a),c*=a=Math.sin(a),this.mode===this.OBLIQ?(h=o*this.sinb1+f*a*this.cosb1/u,l=this.qp*h,f=u*this.cosb1*o-f*this.sinb1*a):(h=f*a/u,l=this.qp*h,f=u*o)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(f=-f),!(l=c*c+f*f))return t.x=0,t.y=this.phi0,t;h=1-l/this.qp,this.mode===this.S_POLE&&(h=-h)}e=Math.atan2(c,f),n=this.authlat(Math.asin(h),this.apa)}return t.x=s(this.long0+e),t.y=n,t},n.P00=.3333333333333333,n.P01=.17222222222222222,n.P02=.10257936507936508,n.P10=.06388888888888888,n.P11=.0664021164021164,n.P20=.016415012942191543,n.authset=function(t){var e,n=[];return n[0]=t*this.P00,e=t*t,n[0]+=e*this.P01,n[1]=e*this.P10,e*=t,n[0]+=e*this.P02,n[1]+=e*this.P11,n[2]=e*this.P20,n},n.authlat=function(t,e){var n=t+t;return t+e[0]*Math.sin(n)+e[1]*Math.sin(n+n)+e[2]*Math.sin(n+n+n)},n.names=["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"]},{"../common/adjust_lon":5,"../common/qsfnz":20}],50:[function(t,e,n){var i=1e-10,o=t("../common/msfnz"),r=t("../common/tsfnz"),a=Math.PI/2,s=t("../common/sign"),l=t("../common/adjust_lon"),u=t("../common/phi2z");n.init=function(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<i)){var t=this.b/this.a;this.e=Math.sqrt(1-t*t);var e=Math.sin(this.lat1),n=Math.cos(this.lat1),a=o(this.e,e,n),s=r(this.e,this.lat1,e),l=Math.sin(this.lat2),u=Math.cos(this.lat2),h=o(this.e,l,u),c=r(this.e,this.lat2,l),f=r(this.e,this.lat0,Math.sin(this.lat0));Math.abs(this.lat1-this.lat2)>i?this.ns=Math.log(a/h)/Math.log(s/c):this.ns=e,isNaN(this.ns)&&(this.ns=e),this.f0=a/(this.ns*Math.pow(s,this.ns)),this.rh=this.a*this.f0*Math.pow(f,this.ns),this.title||(this.title="Lambert Conformal Conic")}},n.forward=function(t){var e=t.x,n=t.y;Math.abs(2*Math.abs(n)-Math.PI)<=i&&(n=s(n)*(a-2*i));var o,u,h=Math.abs(Math.abs(n)-a);if(h>i)o=r(this.e,n,Math.sin(n)),u=this.a*this.f0*Math.pow(o,this.ns);else{if(0>=(h=n*this.ns))return null;u=0}var c=this.ns*l(e-this.long0);return t.x=this.k0*(u*Math.sin(c))+this.x0,t.y=this.k0*(this.rh-u*Math.cos(c))+this.y0,t},n.inverse=function(t){var e,n,i,o,r,s=(t.x-this.x0)/this.k0,h=this.rh-(t.y-this.y0)/this.k0;this.ns>0?(e=Math.sqrt(s*s+h*h),n=1):(e=-Math.sqrt(s*s+h*h),n=-1);var c=0;if(0!==e&&(c=Math.atan2(n*s,n*h)),0!==e||this.ns>0){if(n=1/this.ns,i=Math.pow(e/(this.a*this.f0),n),-9999===(o=u(this.e,i)))return null}else o=-a;return r=l(c/this.ns+this.long0),t.x=r,t.y=o,t},n.names=["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_2SP","lcc"]},{"../common/adjust_lon":5,"../common/msfnz":15,"../common/phi2z":16,"../common/sign":21,"../common/tsfnz":24}],51:[function(t,e,n){function i(t){return t}n.init=function(){},n.forward=i,n.inverse=i,n.names=["longlat","identity"]},{}],52:[function(t,e,n){var i=t("../common/msfnz"),o=Math.PI/2,r=57.29577951308232,a=t("../common/adjust_lon"),s=Math.PI/4,l=t("../common/tsfnz"),u=t("../common/phi2z");n.init=function(){var t=this.b/this.a;this.es=1-t*t,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=i(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)},n.forward=function(t){var e=t.x,n=t.y;if(n*r>90&&-90>n*r&&e*r>180&&-180>e*r)return null;var i,u;if(Math.abs(Math.abs(n)-o)<=1e-10)return null;if(this.sphere)i=this.x0+this.a*this.k0*a(e-this.long0),u=this.y0+this.a*this.k0*Math.log(Math.tan(s+.5*n));else{var h=Math.sin(n),c=l(this.e,n,h);i=this.x0+this.a*this.k0*a(e-this.long0),u=this.y0-this.a*this.k0*Math.log(c)}return t.x=i,t.y=u,t},n.inverse=function(t){var e,n,i=t.x-this.x0,r=t.y-this.y0;if(this.sphere)n=o-2*Math.atan(Math.exp(-r/(this.a*this.k0)));else{var s=Math.exp(-r/(this.a*this.k0));if(-9999===(n=u(this.e,s)))return null}return e=a(this.long0+i/(this.a*this.k0)),t.x=e,t.y=n,t},n.names=["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"]},{"../common/adjust_lon":5,"../common/msfnz":15,"../common/phi2z":16,"../common/tsfnz":24}],53:[function(t,e,n){var i=t("../common/adjust_lon");n.init=function(){},n.forward=function(t){var e=t.x,n=t.y,o=i(e-this.long0),r=this.x0+this.a*o,a=this.y0+this.a*Math.log(Math.tan(Math.PI/4+n/2.5))*1.25;return t.x=r,t.y=a,t},n.inverse=function(t){t.x-=this.x0,t.y-=this.y0;var e=i(this.long0+t.x/this.a),n=2.5*(Math.atan(Math.exp(.8*t.y/this.a))-Math.PI/4);return t.x=e,t.y=n,t},n.names=["Miller_Cylindrical","mill"]},{"../common/adjust_lon":5}],54:[function(t,e,n){var i=t("../common/adjust_lon");n.init=function(){},n.forward=function(t){for(var e=t.x,n=t.y,o=i(e-this.long0),r=n,a=Math.PI*Math.sin(n),s=0;!0;s++){var l=-(r+Math.sin(r)-a)/(1+Math.cos(r));if(r+=l,Math.abs(l)<1e-10)break}r/=2,Math.PI/2-Math.abs(n)<1e-10&&(o=0);var u=.900316316158*this.a*o*Math.cos(r)+this.x0,h=1.4142135623731*this.a*Math.sin(r)+this.y0;return t.x=u,t.y=h,t},n.inverse=function(t){var e,n;t.x-=this.x0,t.y-=this.y0,n=t.y/(1.4142135623731*this.a),Math.abs(n)>.999999999999&&(n=.999999999999),e=Math.asin(n);var o=i(this.long0+t.x/(.900316316158*this.a*Math.cos(e)));o<-Math.PI&&(o=-Math.PI),o>Math.PI&&(o=Math.PI),n=(2*e+Math.sin(2*e))/Math.PI,Math.abs(n)>1&&(n=1);var r=Math.asin(n);return t.x=o,t.y=r,t},n.names=["Mollweide","moll"]},{"../common/adjust_lon":5}],55:[function(t,e,n){var i=484813681109536e-20;n.iterations=1,n.init=function(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013},n.forward=function(t){var e,n=t.x,o=t.y,r=o-this.lat0,a=n-this.long0,s=r/i*1e-5,l=a,u=1,h=0;for(e=1;10>=e;e++)u*=s,h+=this.A[e]*u;var c,f,p=h,d=l,_=1,y=0,g=0,m=0;for(e=1;6>=e;e++)c=_*p-y*d,f=y*p+_*d,_=c,y=f,g=g+this.B_re[e]*_-this.B_im[e]*y,m=m+this.B_im[e]*_+this.B_re[e]*y;return t.x=m*this.a+this.x0,t.y=g*this.a+this.y0,t},n.inverse=function(t){var e,n,o,r=t.x,a=t.y,s=r-this.x0,l=a-this.y0,u=l/this.a,h=s/this.a,c=1,f=0,p=0,d=0;for(e=1;6>=e;e++)n=c*u-f*h,o=f*u+c*h,c=n,f=o,p=p+this.C_re[e]*c-this.C_im[e]*f,d=d+this.C_im[e]*c+this.C_re[e]*f;for(var _=0;_<this.iterations;_++){var y,g,m=p,v=d,b=u,L=h;for(e=2;6>=e;e++)y=m*p-v*d,g=v*p+m*d,m=y,v=g,b+=(e-1)*(this.B_re[e]*m-this.B_im[e]*v),L+=(e-1)*(this.B_im[e]*m+this.B_re[e]*v);m=1,v=0;var w=this.B_re[1],k=this.B_im[1];for(e=2;6>=e;e++)y=m*p-v*d,g=v*p+m*d,m=y,v=g,w+=e*(this.B_re[e]*m-this.B_im[e]*v),k+=e*(this.B_im[e]*m+this.B_re[e]*v);var x=w*w+k*k;p=(b*w+L*k)/x,d=(L*w-b*k)/x}var M=p,P=d,O=1,C=0;for(e=1;9>=e;e++)O*=M,C+=this.D[e]*O;var T=this.lat0+C*i*1e5,S=this.long0+P;return t.x=S,t.y=T,t},n.names=["New_Zealand_Map_Grid","nzmg"]},{}],56:[function(t,e,n){var i=t("../common/tsfnz"),o=t("../common/adjust_lon"),r=t("../common/phi2z"),a=Math.PI/2,s=Math.PI/4,l=1e-10;n.init=function(){this.no_off=this.no_off||!1,this.no_rot=this.no_rot||!1,isNaN(this.k0)&&(this.k0=1);var t=Math.sin(this.lat0),e=Math.cos(this.lat0),n=this.e*t;this.bl=Math.sqrt(1+this.es/(1-this.es)*Math.pow(e,4)),this.al=this.a*this.bl*this.k0*Math.sqrt(1-this.es)/(1-n*n);var r=i(this.e,this.lat0,t),a=this.bl/e*Math.sqrt((1-this.es)/(1-n*n));1>a*a&&(a=1);var s,l;if(isNaN(this.longc)){var u=i(this.e,this.lat1,Math.sin(this.lat1)),h=i(this.e,this.lat2,Math.sin(this.lat2));this.lat0>=0?this.el=(a+Math.sqrt(a*a-1))*Math.pow(r,this.bl):this.el=(a-Math.sqrt(a*a-1))*Math.pow(r,this.bl);var c=Math.pow(u,this.bl),f=Math.pow(h,this.bl);s=this.el/c,l=.5*(s-1/s);var p=(this.el*this.el-f*c)/(this.el*this.el+f*c),d=(f-c)/(f+c),_=o(this.long1-this.long2);this.long0=.5*(this.long1+this.long2)-Math.atan(p*Math.tan(.5*this.bl*_)/d)/this.bl,this.long0=o(this.long0);var y=o(this.long1-this.long0);this.gamma0=Math.atan(Math.sin(this.bl*y)/l),this.alpha=Math.asin(a*Math.sin(this.gamma0))}else s=this.lat0>=0?a+Math.sqrt(a*a-1):a-Math.sqrt(a*a-1),this.el=s*Math.pow(r,this.bl),l=.5*(s-1/s),this.gamma0=Math.asin(Math.sin(this.alpha)/a),this.long0=this.longc-Math.asin(l*Math.tan(this.gamma0))/this.bl;this.no_off?this.uc=0:this.lat0>=0?this.uc=this.al/this.bl*Math.atan2(Math.sqrt(a*a-1),Math.cos(this.alpha)):this.uc=-1*this.al/this.bl*Math.atan2(Math.sqrt(a*a-1),Math.cos(this.alpha))},n.forward=function(t){var e,n,r,u=t.x,h=t.y,c=o(u-this.long0);if(Math.abs(Math.abs(h)-a)<=l)r=h>0?-1:1,n=this.al/this.bl*Math.log(Math.tan(s+r*this.gamma0*.5)),e=-1*r*a*this.al/this.bl;else{var f=i(this.e,h,Math.sin(h)),p=this.el/Math.pow(f,this.bl),d=.5*(p-1/p),_=.5*(p+1/p),y=Math.sin(this.bl*c),g=(d*Math.sin(this.gamma0)-y*Math.cos(this.gamma0))/_;n=Math.abs(Math.abs(g)-1)<=l?Number.POSITIVE_INFINITY:.5*this.al*Math.log((1-g)/(1+g))/this.bl,e=Math.abs(Math.cos(this.bl*c))<=l?this.al*this.bl*c:this.al*Math.atan2(d*Math.cos(this.gamma0)+y*Math.sin(this.gamma0),Math.cos(this.bl*c))/this.bl}return this.no_rot?(t.x=this.x0+e,t.y=this.y0+n):(e-=this.uc,t.x=this.x0+n*Math.cos(this.alpha)+e*Math.sin(this.alpha),t.y=this.y0+e*Math.cos(this.alpha)-n*Math.sin(this.alpha)),t},n.inverse=function(t){var e,n;this.no_rot?(n=t.y-this.y0,e=t.x-this.x0):(n=(t.x-this.x0)*Math.cos(this.alpha)-(t.y-this.y0)*Math.sin(this.alpha),e=(t.y-this.y0)*Math.cos(this.alpha)+(t.x-this.x0)*Math.sin(this.alpha),e+=this.uc);var i=Math.exp(-1*this.bl*n/this.al),s=.5*(i-1/i),u=.5*(i+1/i),h=Math.sin(this.bl*e/this.al),c=(h*Math.cos(this.gamma0)+s*Math.sin(this.gamma0))/u,f=Math.pow(this.el/Math.sqrt((1+c)/(1-c)),1/this.bl);return Math.abs(c-1)<l?(t.x=this.long0,t.y=a):Math.abs(c+1)<l?(t.x=this.long0,t.y=-1*a):(t.y=r(this.e,f),t.x=o(this.long0-Math.atan2(s*Math.cos(this.gamma0)-h*Math.sin(this.gamma0),Math.cos(this.bl*e/this.al))/this.bl)),t},n.names=["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","omerc"]},{"../common/adjust_lon":5,"../common/phi2z":16,"../common/tsfnz":24}],57:[function(t,e,n){var i=t("../common/e0fn"),o=t("../common/e1fn"),r=t("../common/e2fn"),a=t("../common/e3fn"),s=t("../common/adjust_lon"),l=t("../common/adjust_lat"),u=t("../common/mlfn"),h=1e-10,c=t("../common/gN");n.init=function(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=i(this.es),this.e1=o(this.es),this.e2=r(this.es),this.e3=a(this.es),this.ml0=this.a*u(this.e0,this.e1,this.e2,this.e3,this.lat0)},n.forward=function(t){var e,n,i,o=t.x,r=t.y,a=s(o-this.long0);if(i=a*Math.sin(r),this.sphere)Math.abs(r)<=h?(e=this.a*a,n=-1*this.a*this.lat0):(e=this.a*Math.sin(i)/Math.tan(r),n=this.a*(l(r-this.lat0)+(1-Math.cos(i))/Math.tan(r)));else if(Math.abs(r)<=h)e=this.a*a,n=-1*this.ml0;else{var f=c(this.a,this.e,Math.sin(r))/Math.tan(r);e=f*Math.sin(i),n=this.a*u(this.e0,this.e1,this.e2,this.e3,r)-this.ml0+f*(1-Math.cos(i))}return t.x=e+this.x0,t.y=n+this.y0,t},n.inverse=function(t){var e,n,i,o,r,a,l,c,f;if(i=t.x-this.x0,o=t.y-this.y0,this.sphere)if(Math.abs(o+this.a*this.lat0)<=h)e=s(i/this.a+this.long0),n=0;else{a=this.lat0+o/this.a,l=i*i/this.a/this.a+a*a,c=a;var p;for(r=20;r;--r)if(p=Math.tan(c),f=-1*(a*(c*p+1)-c-.5*(c*c+l)*p)/((c-a)/p-1),c+=f,Math.abs(f)<=h){n=c;break}e=s(this.long0+Math.asin(i*Math.tan(c)/this.a)/Math.sin(n))}else if(Math.abs(o+this.ml0)<=h)n=0,e=s(this.long0+i/this.a);else{a=(this.ml0+o)/this.a,l=i*i/this.a/this.a+a*a,c=a;var d,_,y,g,m;for(r=20;r;--r)if(m=this.e*Math.sin(c),d=Math.sqrt(1-m*m)*Math.tan(c),_=this.a*u(this.e0,this.e1,this.e2,this.e3,c),y=this.e0-2*this.e1*Math.cos(2*c)+4*this.e2*Math.cos(4*c)-6*this.e3*Math.cos(6*c),g=_/this.a,f=(a*(d*g+1)-g-.5*d*(g*g+l))/(this.es*Math.sin(2*c)*(g*g+l-2*a*g)/(4*d)+(a-g)*(d*y-2/Math.sin(2*c))-y),c-=f,Math.abs(f)<=h){n=c;break}d=Math.sqrt(1-this.es*Math.pow(Math.sin(n),2))*Math.tan(n),e=s(this.long0+Math.asin(i*d/this.a)/Math.sin(n))}return t.x=e,t.y=n,t},n.names=["Polyconic","poly"]},{"../common/adjust_lat":4,"../common/adjust_lon":5,"../common/e0fn":7,"../common/e1fn":8,"../common/e2fn":9,"../common/e3fn":10,"../common/gN":11,"../common/mlfn":14}],58:[function(t,e,n){var i=t("../common/adjust_lon"),o=t("../common/adjust_lat"),r=t("../common/pj_enfn"),a=t("../common/pj_mlfn"),s=t("../common/pj_inv_mlfn"),l=Math.PI/2,u=t("../common/asinz");n.init=function(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=r(this.es)},n.forward=function(t){var e,n,o=t.x,r=t.y;if(o=i(o-this.long0),this.sphere){if(this.m)for(var s=this.n*Math.sin(r),l=20;l;--l){var u=(this.m*r+Math.sin(r)-s)/(this.m+Math.cos(r));if(r-=u,Math.abs(u)<1e-10)break}else r=1!==this.n?Math.asin(this.n*Math.sin(r)):r;e=this.a*this.C_x*o*(this.m+Math.cos(r)),n=this.a*this.C_y*r}else{var h=Math.sin(r),c=Math.cos(r);n=this.a*a(r,h,c,this.en),e=this.a*o*c/Math.sqrt(1-this.es*h*h)}return t.x=e,t.y=n,t},n.inverse=function(t){var e,n,r,a;return t.x-=this.x0,r=t.x/this.a,t.y-=this.y0,e=t.y/this.a,this.sphere?(e/=this.C_y,r/=this.C_x*(this.m+Math.cos(e)),this.m?e=u((this.m*e+Math.sin(e))/this.n):1!==this.n&&(e=u(Math.sin(e)/this.n)),r=i(r+this.long0),e=o(e)):(e=s(t.y/this.a,this.es,this.en),a=Math.abs(e),l>a?(a=Math.sin(e),n=this.long0+t.x*Math.sqrt(1-this.es*a*a)/(this.a*Math.cos(e)),r=i(n)):l>a-1e-10&&(r=this.long0)),t.x=r,t.y=e,t},n.names=["Sinusoidal","sinu"]},{"../common/adjust_lat":4,"../common/adjust_lon":5,"../common/asinz":6,"../common/pj_enfn":17,"../common/pj_inv_mlfn":18,"../common/pj_mlfn":19}],59:[function(t,e,n){n.init=function(){var t=this.lat0;this.lambda0=this.long0;var e=Math.sin(t),n=this.a,i=this.rf,o=1/i,r=2*o-Math.pow(o,2),a=this.e=Math.sqrt(r);this.R=this.k0*n*Math.sqrt(1-r)/(1-r*Math.pow(e,2)),this.alpha=Math.sqrt(1+r/(1-r)*Math.pow(Math.cos(t),4)),this.b0=Math.asin(e/this.alpha);var s=Math.log(Math.tan(Math.PI/4+this.b0/2)),l=Math.log(Math.tan(Math.PI/4+t/2)),u=Math.log((1+a*e)/(1-a*e));this.K=s-this.alpha*l+this.alpha*a/2*u},n.forward=function(t){var e=Math.log(Math.tan(Math.PI/4-t.y/2)),n=this.e/2*Math.log((1+this.e*Math.sin(t.y))/(1-this.e*Math.sin(t.y))),i=-this.alpha*(e+n)+this.K,o=2*(Math.atan(Math.exp(i))-Math.PI/4),r=this.alpha*(t.x-this.lambda0),a=Math.atan(Math.sin(r)/(Math.sin(this.b0)*Math.tan(o)+Math.cos(this.b0)*Math.cos(r))),s=Math.asin(Math.cos(this.b0)*Math.sin(o)-Math.sin(this.b0)*Math.cos(o)*Math.cos(r));return t.y=this.R/2*Math.log((1+Math.sin(s))/(1-Math.sin(s)))+this.y0,t.x=this.R*a+this.x0,t},n.inverse=function(t){for(var e=t.x-this.x0,n=t.y-this.y0,i=e/this.R,o=2*(Math.atan(Math.exp(n/this.R))-Math.PI/4),r=Math.asin(Math.cos(this.b0)*Math.sin(o)+Math.sin(this.b0)*Math.cos(o)*Math.cos(i)),a=Math.atan(Math.sin(i)/(Math.cos(this.b0)*Math.cos(i)-Math.sin(this.b0)*Math.tan(o))),s=this.lambda0+a/this.alpha,l=0,u=r,h=-1e3,c=0;Math.abs(u-h)>1e-7;){if(++c>20)return;l=1/this.alpha*(Math.log(Math.tan(Math.PI/4+r/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(u))/2)),h=u,u=2*Math.atan(Math.exp(l))-Math.PI/2}return t.x=s,t.y=u,t},n.names=["somerc"]},{}],60:[function(t,e,n){var i=Math.PI/2,o=1e-10,r=t("../common/sign"),a=t("../common/msfnz"),s=t("../common/tsfnz"),l=t("../common/phi2z"),u=t("../common/adjust_lon");n.ssfn_=function(t,e,n){return e*=n,Math.tan(.5*(i+t))*Math.pow((1-e)/(1+e),.5*n)},n.init=function(){this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=o&&(this.k0=.5*(1+r(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=o&&(this.lat0>0?this.con=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=o&&(this.k0=.5*this.cons*a(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/s(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=a(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(this.ssfn_(this.lat0,this.sinlat0,this.e))-i,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))},n.forward=function(t){var e,n,r,a,l,h,c=t.x,f=t.y,p=Math.sin(f),d=Math.cos(f),_=u(c-this.long0);return Math.abs(Math.abs(c-this.long0)-Math.PI)<=o&&Math.abs(f+this.lat0)<=o?(t.x=NaN,t.y=NaN,t):this.sphere?(e=2*this.k0/(1+this.sinlat0*p+this.coslat0*d*Math.cos(_)),t.x=this.a*e*d*Math.sin(_)+this.x0,t.y=this.a*e*(this.coslat0*p-this.sinlat0*d*Math.cos(_))+this.y0,t):(n=2*Math.atan(this.ssfn_(f,p,this.e))-i,a=Math.cos(n),r=Math.sin(n),Math.abs(this.coslat0)<=o?(l=s(this.e,f*this.con,this.con*p),h=2*this.a*this.k0*l/this.cons,t.x=this.x0+h*Math.sin(c-this.long0),t.y=this.y0-this.con*h*Math.cos(c-this.long0),t):(Math.abs(this.sinlat0)<o?(e=2*this.a*this.k0/(1+a*Math.cos(_)),t.y=e*r):(e=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*r+this.cosX0*a*Math.cos(_))),t.y=e*(this.cosX0*r-this.sinX0*a*Math.cos(_))+this.y0),t.x=e*a*Math.sin(_)+this.x0,t))},n.inverse=function(t){t.x-=this.x0,t.y-=this.y0;var e,n,r,a,s,h=Math.sqrt(t.x*t.x+t.y*t.y);if(this.sphere){var c=2*Math.atan(h/(.5*this.a*this.k0));return e=this.long0,n=this.lat0,o>=h?(t.x=e,t.y=n,t):(n=Math.asin(Math.cos(c)*this.sinlat0+t.y*Math.sin(c)*this.coslat0/h),e=u(Math.abs(this.coslat0)<o?this.lat0>0?this.long0+Math.atan2(t.x,-1*t.y):this.long0+Math.atan2(t.x,t.y):this.long0+Math.atan2(t.x*Math.sin(c),h*this.coslat0*Math.cos(c)-t.y*this.sinlat0*Math.sin(c))),t.x=e,t.y=n,t)}if(Math.abs(this.coslat0)<=o){if(o>=h)return n=this.lat0,e=this.long0,t.x=e,t.y=n,t;t.x*=this.con,t.y*=this.con,r=h*this.cons/(2*this.a*this.k0),n=this.con*l(this.e,r),e=this.con*u(this.con*this.long0+Math.atan2(t.x,-1*t.y))}else a=2*Math.atan(h*this.cosX0/(2*this.a*this.k0*this.ms1)),e=this.long0,o>=h?s=this.X0:(s=Math.asin(Math.cos(a)*this.sinX0+t.y*Math.sin(a)*this.cosX0/h),e=u(this.long0+Math.atan2(t.x*Math.sin(a),h*this.cosX0*Math.cos(a)-t.y*this.sinX0*Math.sin(a)))),n=-1*l(this.e,Math.tan(.5*(i+s)));return t.x=e,t.y=n,t},n.names=["stere","Stereographic_South_Pole","Polar Stereographic (variant B)"]},{"../common/adjust_lon":5,"../common/msfnz":15,"../common/phi2z":16,"../common/sign":21,"../common/tsfnz":24}],61:[function(t,e,n){var i=t("./gauss"),o=t("../common/adjust_lon");n.init=function(){i.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))},n.forward=function(t){var e,n,r,a;return t.x=o(t.x-this.long0),i.forward.apply(this,[t]),e=Math.sin(t.y),n=Math.cos(t.y),r=Math.cos(t.x),a=this.k0*this.R2/(1+this.sinc0*e+this.cosc0*n*r),t.x=a*n*Math.sin(t.x),t.y=a*(this.cosc0*e-this.sinc0*n*r),t.x=this.a*t.x+this.x0,t.y=this.a*t.y+this.y0,t},n.inverse=function(t){var e,n,r,a,s;if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,s=Math.sqrt(t.x*t.x+t.y*t.y)){var l=2*Math.atan2(s,this.R2);e=Math.sin(l),n=Math.cos(l),a=Math.asin(n*this.sinc0+t.y*e*this.cosc0/s),r=Math.atan2(t.x*e,s*this.cosc0*n-t.y*this.sinc0*e)}else a=this.phic0,r=0;return t.x=r,t.y=a,i.inverse.apply(this,[t]),t.x=o(t.x+this.long0),t},n.names=["Stereographic_North_Pole","Oblique_Stereographic","Polar_Stereographic","sterea","Oblique Stereographic Alternative"]},{"../common/adjust_lon":5,"./gauss":46}],62:[function(t,e,n){var i=t("../common/e0fn"),o=t("../common/e1fn"),r=t("../common/e2fn"),a=t("../common/e3fn"),s=t("../common/mlfn"),l=t("../common/adjust_lon"),u=Math.PI/2,h=t("../common/sign"),c=t("../common/asinz");n.init=function(){this.e0=i(this.es),this.e1=o(this.es),this.e2=r(this.es),this.e3=a(this.es),this.ml0=this.a*s(this.e0,this.e1,this.e2,this.e3,this.lat0)},n.forward=function(t){var e,n,i,o=t.x,r=t.y,a=l(o-this.long0),u=Math.sin(r),h=Math.cos(r);if(this.sphere){var c=h*Math.sin(a);if(Math.abs(Math.abs(c)-1)<1e-10)return 93;n=.5*this.a*this.k0*Math.log((1+c)/(1-c)),e=Math.acos(h*Math.cos(a)/Math.sqrt(1-c*c)),0>r&&(e=-e),i=this.a*this.k0*(e-this.lat0)}else{var f=h*a,p=Math.pow(f,2),d=this.ep2*Math.pow(h,2),_=Math.tan(r),y=Math.pow(_,2);e=1-this.es*Math.pow(u,2);var g=this.a/Math.sqrt(e),m=this.a*s(this.e0,this.e1,this.e2,this.e3,r);n=this.k0*g*f*(1+p/6*(1-y+d+p/20*(5-18*y+Math.pow(y,2)+72*d-58*this.ep2)))+this.x0,i=this.k0*(m-this.ml0+g*_*(p*(.5+p/24*(5-y+9*d+4*Math.pow(d,2)+p/30*(61-58*y+Math.pow(y,2)+600*d-330*this.ep2)))))+this.y0}return t.x=n,t.y=i,t},n.inverse=function(t){var e,n,i,o,r,a;if(this.sphere){var s=Math.exp(t.x/(this.a*this.k0)),f=.5*(s-1/s),p=this.lat0+t.y/(this.a*this.k0),d=Math.cos(p);e=Math.sqrt((1-d*d)/(1+f*f)),r=c(e),0>p&&(r=-r),a=0===f&&0===d?this.long0:l(Math.atan2(f,d)+this.long0)}else{var _=t.x-this.x0,y=t.y-this.y0;for(e=(this.ml0+y/this.k0)/this.a,n=e,o=0;!(i=(e+this.e1*Math.sin(2*n)-this.e2*Math.sin(4*n)+this.e3*Math.sin(6*n))/this.e0-n,n+=i,Math.abs(i)<=1e-10);o++)if(o>=6)return 95;if(Math.abs(n)<u){var g=Math.sin(n),m=Math.cos(n),v=Math.tan(n),b=this.ep2*Math.pow(m,2),L=Math.pow(b,2),w=Math.pow(v,2),k=Math.pow(w,2);e=1-this.es*Math.pow(g,2);var x=this.a/Math.sqrt(e),M=x*(1-this.es)/e,P=_/(x*this.k0),O=Math.pow(P,2);r=n-x*v*O/M*(.5-O/24*(5+3*w+10*b-4*L-9*this.ep2-O/30*(61+90*w+298*b+45*k-252*this.ep2-3*L))),a=l(this.long0+P*(1-O/6*(1+2*w+b-O/20*(5-2*b+28*w-3*L+8*this.ep2+24*k)))/m)}else r=u*h(y),a=this.long0}return t.x=a,t.y=r,t},n.names=["Transverse_Mercator","Transverse Mercator","tmerc"]},{"../common/adjust_lon":5,"../common/asinz":6,"../common/e0fn":7,"../common/e1fn":8,"../common/e2fn":9,"../common/e3fn":10,"../common/mlfn":14,"../common/sign":21}],63:[function(t,e,n){var i=t("./tmerc");n.dependsOn="tmerc",n.init=function(){this.zone&&(this.lat0=0,this.long0=.017453292519943295*(6*Math.abs(this.zone)-183),this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,i.init.apply(this),this.forward=i.forward,this.inverse=i.inverse)},n.names=["Universal Transverse Mercator System","utm"]},{"./tmerc":62}],64:[function(t,e,n){var i=t("../common/adjust_lon"),o=Math.PI/2,r=1e-10,a=t("../common/asinz");n.init=function(){this.R=this.a},n.forward=function(t){var e,n,s=t.x,l=t.y,u=i(s-this.long0);Math.abs(l)<=r&&(e=this.x0+this.R*u,n=this.y0);var h=a(2*Math.abs(l/Math.PI));(Math.abs(u)<=r||Math.abs(Math.abs(l)-o)<=r)&&(e=this.x0,n=l>=0?this.y0+Math.PI*this.R*Math.tan(.5*h):this.y0+Math.PI*this.R*-Math.tan(.5*h));var c=.5*Math.abs(Math.PI/u-u/Math.PI),f=c*c,p=Math.sin(h),d=Math.cos(h),_=d/(p+d-1),y=_*_,g=_*(2/p-1),m=g*g,v=Math.PI*this.R*(c*(_-m)+Math.sqrt(f*(_-m)*(_-m)-(m+f)*(y-m)))/(m+f);0>u&&(v=-v),e=this.x0+v;var b=f+_;return v=Math.PI*this.R*(g*b-c*Math.sqrt((m+f)*(f+1)-b*b))/(m+f),n=l>=0?this.y0+v:this.y0-v,t.x=e,t.y=n,t},n.inverse=function(t){var e,n,o,a,s,l,u,h,c,f,p,d,_;return t.x-=this.x0,t.y-=this.y0,p=Math.PI*this.R,o=t.x/p,a=t.y/p,s=o*o+a*a,l=-Math.abs(a)*(1+s),u=l-2*a*a+o*o,h=-2*l+1+2*a*a+s*s,_=a*a/h+(2*u*u*u/h/h/h-9*l*u/h/h)/27,c=(l-u*u/3/h)/h,f=2*Math.sqrt(-c/3),p=3*_/c/f,Math.abs(p)>1&&(p=p>=0?1:-1),d=Math.acos(p)/3,n=t.y>=0?(-f*Math.cos(d+Math.PI/3)-u/3/h)*Math.PI:-(-f*Math.cos(d+Math.PI/3)-u/3/h)*Math.PI,e=Math.abs(o)<r?this.long0:i(this.long0+Math.PI*(s-1+Math.sqrt(1+2*(o*o-a*a)+s*s))/2/o),t.x=e,t.y=n,t},n.names=["Van_der_Grinten_I","VanDerGrinten","vandg"]},{"../common/adjust_lon":5,"../common/asinz":6}],65:[function(t,e,n){var i=.017453292519943295,o=57.29577951308232,r=t("./datum_transform"),a=t("./adjust_axis"),s=t("./Proj"),l=t("./common/toPoint");e.exports=function t(e,n,u){function h(t,e){return(1===t.datum.datum_type||2===t.datum.datum_type)&&"WGS84"!==e.datumCode}var c;return Array.isArray(u)&&(u=l(u)),e.datum&&n.datum&&(h(e,n)||h(n,e))&&(c=new s("WGS84"),t(e,c,u),e=c),"enu"!==e.axis&&a(e,!1,u),"longlat"===e.projName?(u.x*=i,u.y*=i):(e.to_meter&&(u.x*=e.to_meter,u.y*=e.to_meter),e.inverse(u)),e.from_greenwich&&(u.x+=e.from_greenwich),u=r(e.datum,n.datum,u),n.from_greenwich&&(u.x-=n.from_greenwich),"longlat"===n.projName?(u.x*=o,u.y*=o):(n.forward(u),n.to_meter&&(u.x/=n.to_meter,u.y/=n.to_meter)),"enu"!==n.axis&&a(n,!0,u),u}},{"./Proj":2,"./adjust_axis":3,"./common/toPoint":23,"./datum_transform":31}],66:[function(t,e,n){function i(t,e,n){t[e]=n.map(function(t){var e={};return o(t,e),e}).reduce(function(t,e){return h(t,e)},{})}function o(t,e){var n;return Array.isArray(t)?(n=t.shift(),"PARAMETER"===n&&(n=t.shift()),void(1===t.length?Array.isArray(t[0])?(e[n]={},o(t[0],e[n])):e[n]=t[0]:t.length?"TOWGS84"===n?e[n]=t:(e[n]={},["UNIT","PRIMEM","VERT_DATUM"].indexOf(n)>-1?(e[n]={name:t[0].toLowerCase(),convert:t[1]},3===t.length&&(e[n].auth=t[2])):"SPHEROID"===n?(e[n]={name:t[0],a:t[1],rf:t[2]},4===t.length&&(e[n].auth=t[3])):["GEOGCS","GEOCCS","DATUM","VERT_CS","COMPD_CS","LOCAL_CS","FITTED_CS","LOCAL_DATUM"].indexOf(n)>-1?(t[0]=["name",t[0]],i(e,n,t)):t.every(function(t){return Array.isArray(t)})?i(e,n,t):o(t,e[n])):e[n]=!0)):void(e[t]=!0)}function r(t,e){var n=e[0],i=e[1];!(n in t)&&i in t&&(t[n]=t[i],3===e.length&&(t[n]=e[2](t[n])))}function s(t){return t*u}function l(t){function e(e){var n=t.to_meter||1;return parseFloat(e,10)*n}"GEOGCS"===t.type?t.projName="longlat":"LOCAL_CS"===t.type?(t.projName="identity",t.local=!0):"object"==a(t.PROJECTION)?t.projName=Object.keys(t.PROJECTION)[0]:t.projName=t.PROJECTION,t.UNIT&&(t.units=t.UNIT.name.toLowerCase(),"metre"===t.units&&(t.units="meter"),t.UNIT.convert&&("GEOGCS"===t.type?t.DATUM&&t.DATUM.SPHEROID&&(t.to_meter=parseFloat(t.UNIT.convert,10)*t.DATUM.SPHEROID.a):t.to_meter=parseFloat(t.UNIT.convert,10))),t.GEOGCS&&(t.GEOGCS.DATUM?t.datumCode=t.GEOGCS.DATUM.name.toLowerCase():t.datumCode=t.GEOGCS.name.toLowerCase(),"d_"===t.datumCode.slice(0,2)&&(t.datumCode=t.datumCode.slice(2)),("new_zealand_geodetic_datum_1949"===t.datumCode||"new_zealand_1949"===t.datumCode)&&(t.datumCode="nzgd49"),"wgs_1984"===t.datumCode&&("Mercator_Auxiliary_Sphere"===t.PROJECTION&&(t.sphere=!0),t.datumCode="wgs84"),"_ferro"===t.datumCode.slice(-6)&&(t.datumCode=t.datumCode.slice(0,-6)),"_jakarta"===t.datumCode.slice(-8)&&(t.datumCode=t.datumCode.slice(0,-8)),~t.datumCode.indexOf("belge")&&(t.datumCode="rnb72"),t.GEOGCS.DATUM&&t.GEOGCS.DATUM.SPHEROID&&(t.ellps=t.GEOGCS.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),"international"===t.ellps.toLowerCase().slice(0,13)&&(t.ellps="intl"),t.a=t.GEOGCS.DATUM.SPHEROID.a,t.rf=parseFloat(t.GEOGCS.DATUM.SPHEROID.rf,10)),~t.datumCode.indexOf("osgb_1936")&&(t.datumCode="osgb36")),t.b&&!isFinite(t.b)&&(t.b=t.a),[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_2","Standard_Parallel_2"],["false_easting","False_Easting"],["false_northing","False_Northing"],["central_meridian","Central_Meridian"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",s],["longitude_of_center","Longitude_Of_Center"],["longc","longitude_of_center",s],["x0","false_easting",e],["y0","false_northing",e],["long0","central_meridian",s],["lat0","latitude_of_origin",s],["lat0","standard_parallel_1",s],["lat1","standard_parallel_1",s],["lat2","standard_parallel_2",s],["alpha","azimuth",s],["srsCode","name"]].forEach(function(e){return r(t,e)}),t.long0||!t.longc||"Albers_Conic_Equal_Area"!==t.projName&&"Lambert_Azimuthal_Equal_Area"!==t.projName||(t.long0=t.longc),t.lat_ts||!t.lat1||"Stereographic_South_Pole"!==t.projName&&"Polar Stereographic (variant B)"!==t.projName||(t.lat0=s(t.lat1>0?90:-90),t.lat_ts=t.lat1)}var u=.017453292519943295,h=t("./extend");e.exports=function(t,e){var n=JSON.parse((","+t).replace(/\s*\,\s*([A-Z_0-9]+?)(\[)/g,',["$1",').slice(1).replace(/\s*\,\s*([A-Z_0-9]+?)\]/g,',"$1"]').replace(/,\["VERTCS".+/,"")),i=n.shift(),r=n.shift();n.unshift(["name",r]),n.unshift(["type",i]),n.unshift("output");var a={};return o(n,a),l(a.output),h(e,a.output)}},{"./extend":34}],67:[function(t,e,n){function i(t){return t*(Math.PI/180)}function o(t){return t/Math.PI*180}function r(t){var e,n,o,r,a,l,u,h,c,f=t.lat,p=t.lon,d=6378137,_=.00669438,y=i(f),g=i(p);c=Math.floor((p+180)/6)+1,180===p&&(c=60),f>=56&&64>f&&p>=3&&12>p&&(c=32),f>=72&&84>f&&(p>=0&&9>p?c=31:p>=9&&21>p?c=33:p>=21&&33>p?c=35:p>=33&&42>p&&(c=37)),e=6*(c-1)-180+3,h=i(e),n=_/(1-_),o=d/Math.sqrt(1-_*Math.sin(y)*Math.sin(y)),r=Math.tan(y)*Math.tan(y),a=n*Math.cos(y)*Math.cos(y),l=Math.cos(y)*(g-h),u=d*(.9983242984503243*y-.002514607064228144*Math.sin(2*y)+2639046602129982e-21*Math.sin(4*y)-35*_*_*_/3072*Math.sin(6*y));var m=.9996*o*(l+(1-r+a)*l*l*l/6+(5-18*r+r*r+72*a-58*n)*l*l*l*l*l/120)+5e5,v=.9996*(u+o*Math.tan(y)*(l*l/2+(5-r+9*a+4*a*a)*l*l*l*l/24+(61-58*r+r*r+600*a-330*n)*l*l*l*l*l*l/720));return 0>f&&(v+=1e7),{northing:Math.round(v),easting:Math.round(m),zoneNumber:c,zoneLetter:s(f)}}function a(t){var e=t.northing,n=t.easting,i=t.zoneLetter,r=t.zoneNumber;if(0>r||r>60)return null;var s,l,u,h,c,f,p,d,_,y,g=6378137,m=.00669438,v=(1-Math.sqrt(1-m))/(1+Math.sqrt(1-m)),b=n-5e5,L=e;"N">i&&(L-=1e7),d=6*(r-1)-180+3,s=m/(1-m),p=L/.9996,_=p/6367449.145945056,y=_+(3*v/2-27*v*v*v/32)*Math.sin(2*_)+(21*v*v/16-55*v*v*v*v/32)*Math.sin(4*_)+151*v*v*v/96*Math.sin(6*_),l=g/Math.sqrt(1-m*Math.sin(y)*Math.sin(y)),u=Math.tan(y)*Math.tan(y),h=s*Math.cos(y)*Math.cos(y),c=g*(1-m)/Math.pow(1-m*Math.sin(y)*Math.sin(y),1.5),f=b/(.9996*l);var w=y-l*Math.tan(y)/c*(f*f/2-(5+3*u+10*h-4*h*h-9*s)*f*f*f*f/24+(61+90*u+298*h+45*u*u-252*s-3*h*h)*f*f*f*f*f*f/720);w=o(w);var k=(f-(1+2*u+h)*f*f*f/6+(5-2*h+28*u-3*h*h+8*s+24*u*u)*f*f*f*f*f/120)/Math.cos(y);k=d+o(k);var x;if(t.accuracy){var M=a({northing:t.northing+t.accuracy,easting:t.easting+t.accuracy,zoneLetter:t.zoneLetter,zoneNumber:t.zoneNumber});x={top:M.lat,right:M.lon,bottom:w,left:k}}else x={lat:w,lon:k};return x}function s(t){var e="Z";return 84>=t&&t>=72?e="X":72>t&&t>=64?e="W":64>t&&t>=56?e="V":56>t&&t>=48?e="U":48>t&&t>=40?e="T":40>t&&t>=32?e="S":32>t&&t>=24?e="R":24>t&&t>=16?e="Q":16>t&&t>=8?e="P":8>t&&t>=0?e="N":0>t&&t>=-8?e="M":-8>t&&t>=-16?e="L":-16>t&&t>=-24?e="K":-24>t&&t>=-32?e="J":-32>t&&t>=-40?e="H":-40>t&&t>=-48?e="G":-48>t&&t>=-56?e="F":-56>t&&t>=-64?e="E":-64>t&&t>=-72?e="D":-72>t&&t>=-80&&(e="C"),e}function l(t,e){var n="00000"+t.easting,i="00000"+t.northing;return t.zoneNumber+t.zoneLetter+u(t.easting,t.northing,t.zoneNumber)+n.substr(n.length-5,e)+i.substr(i.length-5,e)}function u(t,e,n){var i=h(n);return c(Math.floor(t/1e5),Math.floor(e/1e5)%20,i)}function h(t){var e=t%y;return 0===e&&(e=y),e}function c(t,e,n){var i=n-1,o=g.charCodeAt(i),r=m.charCodeAt(i),a=o+t-1,s=r+e,l=!1;return a>k&&(a=a-k+v-1,l=!0),(a===b||b>o&&a>b||(a>b||b>o)&&l)&&a++,(a===L||L>o&&a>L||(a>L||L>o)&&l)&&++a===b&&a++,a>k&&(a=a-k+v-1),s>w?(s=s-w+v-1,l=!0):l=!1,(s===b||b>r&&s>b||(s>b||b>r)&&l)&&s++,(s===L||L>r&&s>L||(s>L||L>r)&&l)&&++s===b&&s++,s>w&&(s=s-w+v-1),String.fromCharCode(a)+String.fromCharCode(s)}function f(t){if(t&&0===t.length)throw"MGRSPoint coverting from nothing";for(var e,n=t.length,i=null,o="",r=0;!/[A-Z]/.test(e=t.charAt(r));){if(r>=2)throw"MGRSPoint bad conversion from: "+t;o+=e,r++}var a=parseInt(o,10);if(0===r||r+3>n)throw"MGRSPoint bad conversion from: "+t;var s=t.charAt(r++);if("A">=s||"B"===s||"Y"===s||s>="Z"||"I"===s||"O"===s)throw"MGRSPoint zone letter "+s+" not handled: "+t;i=t.substring(r,r+=2);for(var l=h(a),u=p(i.charAt(0),l),c=d(i.charAt(1),l);c<_(s);)c+=2e6;var f=n-r;if(f%2!=0)throw"MGRSPoint has to have an even number \nof digits after the zone letter and two 100km letters - front \nhalf for easting meters, second half for \nnorthing meters"+t;var y,g,m,v,b,L=f/2,w=0,k=0;return L>0&&(y=1e5/Math.pow(10,L),g=t.substring(r,r+L),w=parseFloat(g)*y,m=t.substring(r+L),k=parseFloat(m)*y),v=w+u,b=k+c,{easting:v,northing:b,zoneLetter:s,zoneNumber:a,accuracy:y}}function p(t,e){for(var n=g.charCodeAt(e-1),i=1e5,o=!1;n!==t.charCodeAt(0);){if(n++,n===b&&n++,n===L&&n++,n>k){if(o)throw"Bad character: "+t;n=v,o=!0}i+=1e5}return i}function d(t,e){if(t>"V")throw"MGRSPoint given invalid Northing "+t;for(var n=m.charCodeAt(e-1),i=0,o=!1;n!==t.charCodeAt(0);){if(n++,n===b&&n++,n===L&&n++,n>w){if(o)throw"Bad character: "+t;n=v,o=!0}i+=1e5}return i}function _(t){var e;switch(t){case"C":e=11e5;break;case"D":e=2e6;break;case"E":e=28e5;break;case"F":e=37e5;break;case"G":e=46e5;break;case"H":e=55e5;break;case"J":e=64e5;break;case"K":e=73e5;break;case"L":e=82e5;break;case"M":e=91e5;break;case"N":e=0;break;case"P":e=8e5;break;case"Q":e=17e5;break;case"R":e=26e5;break;case"S":e=35e5;break;case"T":e=44e5;break;case"U":e=53e5;break;case"V":e=62e5;break;case"W":e=7e6;break;case"X":e=79e5;break;default:e=-1}if(e>=0)return e;throw"Invalid zone letter: "+t}var y=6,g="AJSAJS",m="AFAFAF",v=65,b=73,L=79,w=86,k=90;n.forward=function(t,e){return e=e||5,l(r({lat:t[1],lon:t[0]}),e)},n.inverse=function(t){var e=a(f(t.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat,e.lon,e.lat]:[e.left,e.bottom,e.right,e.top]},n.toPoint=function(t){var e=a(f(t.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat]:[(e.left+e.right)/2,(e.top+e.bottom)/2]}},{}],68:[function(t,e,n){e.exports={name:"proj4",version:"2.3.14",description:"Proj4js is a JavaScript library to transform point coordinates from one coordinate system to another, including datum transformations.",main:"lib/index.js",directories:{test:"test",doc:"docs"},scripts:{test:"./node_modules/istanbul/lib/cli.js test ./node_modules/mocha/bin/_mocha test/test.js"},repository:{type:"git",url:"git://github.com/proj4js/proj4js.git"},author:"",license:"MIT",jam:{main:"dist/proj4.js",include:["dist/proj4.js","README.md","AUTHORS","LICENSE.md"]},devDependencies:{"grunt-cli":"~0.1.13",grunt:"~0.4.2","grunt-contrib-connect":"~0.6.0","grunt-contrib-jshint":"~0.8.0",chai:"~1.8.1",mocha:"~1.17.1","grunt-mocha-phantomjs":"~0.4.0",browserify:"~12.0.1","grunt-browserify":"~4.0.1","grunt-contrib-uglify":"~0.11.1",curl:"git://github.com/cujojs/curl.git",istanbul:"~0.2.4",tin:"~0.4.0"},dependencies:{mgrs:"~0.0.2"}}},{}],"./includedProjections":[function(t,e,n){e.exports=t("hTEDpn")},{}],hTEDpn:[function(t,e,n){var i=[t("./lib/projections/tmerc"),t("./lib/projections/utm"),t("./lib/projections/sterea"),t("./lib/projections/stere"),t("./lib/projections/somerc"),t("./lib/projections/omerc"),t("./lib/projections/lcc"),t("./lib/projections/krovak"),t("./lib/projections/cass"),t("./lib/projections/laea"),t("./lib/projections/aea"),t("./lib/projections/gnom"),t("./lib/projections/cea"),t("./lib/projections/eqc"),t("./lib/projections/poly"),t("./lib/projections/nzmg"),t("./lib/projections/mill"),t("./lib/projections/sinu"),t("./lib/projections/moll"),t("./lib/projections/eqdc"),t("./lib/projections/vandg"),t("./lib/projections/aeqd")];e.exports=function(t){i.forEach(function(e){t.Proj.projections.add(e)})}},{"./lib/projections/aea":40,"./lib/projections/aeqd":41,"./lib/projections/cass":42,"./lib/projections/cea":43,"./lib/projections/eqc":44,"./lib/projections/eqdc":45,"./lib/projections/gnom":47,"./lib/projections/krovak":48,"./lib/projections/laea":49,"./lib/projections/lcc":50,"./lib/projections/mill":53,"./lib/projections/moll":54,"./lib/projections/nzmg":55,"./lib/projections/omerc":56,"./lib/projections/poly":57,"./lib/projections/sinu":58,"./lib/projections/somerc":59,"./lib/projections/stere":60,"./lib/projections/sterea":61,"./lib/projections/tmerc":62,"./lib/projections/utm":63,"./lib/projections/vandg":64}]},{},[36])(36)})},function(t,e,n){"use strict";var i,o,r;"function"==typeof Symbol&&Symbol.iterator;!function(a){o=[n(1),n(22)],i=a,void 0!==(r="function"==typeof i?i.apply(e,o):i)&&(t.exports=r)}(function(t,e){return t.Proj={},t.Proj._isProj4Obj=function(t){return void 0!==t.inverse&&void 0!==t.forward},t.Proj.Projection=t.Class.extend({initialize:function(e,n,i){var o=t.Proj._isProj4Obj(e);this._proj=o?e:this._projFromCodeDef(e,n),this.bounds=o?n:i},project:function(e){var n=this._proj.forward([e.lng,e.lat]);return new t.Point(n[0],n[1])},unproject:function(e,n){var i=this._proj.inverse([e.x,e.y]);return new t.LatLng(i[1],i[0],n)},_projFromCodeDef:function(t,n){if(n)e.defs(t,n);else if(void 0===e.defs[t]){var i=t.split(":");if(i.length>3&&(t=i[i.length-3]+":"+i[i.length-1]),void 0===e.defs[t])throw"No projection definition for code "+t}return e(t)}}),t.Proj.CRS=t.Class.extend({includes:t.CRS,options:{transformation:new t.Transformation(1,0,-1,0)},initialize:function(e,n,i){var o,r,a,s;if(t.Proj._isProj4Obj(e)?(r=e,o=r.srsCode,s=n||{},this.projection=new t.Proj.Projection(r,s.bounds)):(o=e,a=n,s=i||{},this.projection=new t.Proj.Projection(o,a,s.bounds)),t.Util.setOptions(this,s),this.code=o,this.transformation=this.options.transformation,this.options.origin&&(this.transformation=new t.Transformation(1,-this.options.origin[0],-1,this.options.origin[1])),this.options.scales)this._scales=this.options.scales;else if(this.options.resolutions){this._scales=[];for(var l=this.options.resolutions.length-1;l>=0;l--)this.options.resolutions[l]&&(this._scales[l]=1/this.options.resolutions[l])}this.infinite=!this.options.bounds},scale:function(t){var e,n,i,o,r=Math.floor(t);return t===r?this._scales[t]:(e=this._scales[r],n=this._scales[r+1],i=n-e,o=t-r,e+i*o)},zoom:function(t){var e,n,i,o=this._closestElement(this._scales,t),r=this._scales.indexOf(o);return t===o?r:(n=r+1,void 0===(e=this._scales[n])?1/0:(i=e-o,(t-o)/i+r))},distance:t.CRS.Earth.distance,R:t.CRS.Earth.R,_closestElement:function(t,e){for(var n,i=t.length;i--;)t[i]<=e&&(void 0===n||n<t[i])&&(n=t[i]);return n}}),t.Proj.GeoJSON=t.GeoJSON.extend({initialize:function(e,n){this._callLevel=0,t.GeoJSON.prototype.initialize.call(this,e,n)},addData:function(e){var n;e&&(e.crs&&"name"===e.crs.type?n=new t.Proj.CRS(e.crs.properties.name):e.crs&&e.crs.type&&(n=new t.Proj.CRS(e.crs.type+":"+e.crs.properties.code)),void 0!==n&&(this.options.coordsToLatLng=function(e){var i=t.point(e[0],e[1]);return n.projection.unproject(i)})),this._callLevel++;try{t.GeoJSON.prototype.addData.call(this,e)}finally{this._callLevel--,0===this._callLevel&&delete this.options.coordsToLatLng}}}),t.Proj.geoJson=function(e,n){return new t.Proj.GeoJSON(e,n)},t.Proj.ImageOverlay=t.ImageOverlay.extend({initialize:function(e,n,i){t.ImageOverlay.prototype.initialize.call(this,e,null,i),this._projectedBounds=n},_animateZoom:function(e){var n=this._map.getZoomScale(e.zoom),i=t.point(this._projectedBounds.min.x,this._projectedBounds.max.y),o=this._projectedToNewLayerPoint(i,e.zoom,e.center);t.DomUtil.setTransform(this._image,o,n)},_reset:function(){var e=this._map.getZoom(),n=this._map.getPixelOrigin(),i=t.bounds(this._transform(this._projectedBounds.min,e)._subtract(n),this._transform(this._projectedBounds.max,e)._subtract(n)),o=i.getSize();t.DomUtil.setPosition(this._image,i.min),this._image.style.width=o.x+"px",this._image.style.height=o.y+"px"},_projectedToNewLayerPoint:function(t,e,n){var i=this._map.getSize()._divideBy(2),o=this._map.project(n,e)._subtract(i)._round(),r=o.add(this._map._getMapPanePos());return this._transform(t,e)._subtract(r)},_transform:function(t,e){var n=this._map.options.crs,i=n.transformation,o=n.scale(e);return i.transform(t,o)}}),t.Proj.imageOverlay=function(e,n,i){return new t.Proj.ImageOverlay(e,n,i)},t.Proj})},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();GL.Module=function(){function t(e,n){i(this,t),this._uuid=GL.H.stamp(this),this.id=e,this._map=n,n&&(this._mapId=n.id),this.initConfig(),GL.ModuleManager.addModule(this),GL.Hub.on(GL.E.ModuleConfigSignal,this._onModuleConfigSignal,this),GL.Hub.on(GL.E.ModuleEnableSignal,this._onModuleEnableSignal,this)}return o(t,[{key:"activate",value:function(){}},{key:"inactivate",value:function(){}},{key:"config",value:function(t){}},{key:"hide",value:function(){}},{key:"show",value:function(){}},{key:"getDom",value:function(){}},{key:"initConfig",value:function(){var t=GL.Proxy.getConfig();if(t&&t.resource&&t.resource.module){var e=GL.Proxy.getPathFix(),n=e+t.resource.module+"/"+this.id+".json",i=this;GL.Http.get(n).then(function(t){i.config(t.data)}).catch(function(t){})}}},{key:"destroy",value:function(){GL.Hub.off(GL.E.ModuleConfigSignal,this._onModuleConfigSignal,this),GL.Hub.off(GL.E.ModuleEnableSignal,this._onModuleEnableSignal,this)}},{key:"_onModuleConfigSignal",value:function(t){if(3===t.length){var e=t[0],n=t[1],i=t[2];if(e===this.id){GL.Proxy.getMap(i)===this._map&&this.config(n)}}}},{key:"_onModuleEnableSignal",value:function(t){if(3===t.length){var e=t[0],n=t[1],i=t[2];if(e===this.id){GL.Proxy.getMap(i)===this._map&&(n?this.activate():this.inactivate())}}}}]),t}()},function(t,e,n){"use strict";GL.ModuleManager={module:{},addModule:function(t){if(t){var e=t.id,n=t._mapId;n in GL.ModuleManager.module||(GL.ModuleManager.module[n]={}),delete GL.ModuleManager.module[n][e],GL.ModuleManager.module[n][e]=t}},getModule:function(t,e){return e in GL.ModuleManager.module?GL.ModuleManager.module[e][t]:null}}},function(t,e,n){"use strict";n(43)},function(t,e,n){"use strict";(function(t){function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=n(0);!function(t){t&&t.__esModule}(o);GL.Layer=function(){function t(){e(this,t)}return i(t,[{key:"on",value:function(t,e,n){return this._delegate.on(t,e,n),this}},{key:"off",value:function(t,e,n){return this._delegate.off(t,e,n),this}},{key:"fire",value:function(t,e,n){return this._delegate.fire(t,e,n),this}},{key:"once",value:function(t,e,n){return this._delegate.once(t,e,n),this}},{key:"listens",value:function(t,e){return this._delegate.listens(t,e),this}},{key:"addEventParent",value:function(t){return this._delegate.addEventParent(t),this}},{key:"removeEventParent",value:function(t){return this._delegate.removeEventParent(t),this}},{key:"addEventListener",value:function(t,e,n){this._delegate.addEventListener(t,e,n)}},{key:"removeEventListener",value:function(t,e,n){this._delegate.removeEventListener(t,e,n)}},{key:"clearAllEventListeners",value:function(){this._delegate.removeEventListener()}},{key:"addOneTimeEventListener",value:function(t,e,n){this._delegate.addOneTimeEventListener(t,e,n)}},{key:"fireEvent",value:function(t,e,n){this._delegate.addOneTimeEventListener(t,e,n)}},{key:"hasEventListeners",value:function(t,e){this._delegate.addOneTimeEventListener(t,e)}},{key:"callInitHooks",value:function(){if(!this._initHooksCalled){this._initHooksCalled=!0,this._initHooks=this._initHooks||[];for(var t=0,e=this._initHooks.length;t<e;t++)this._initHooks[t].call(this)}}}]),t}(),GL.Layer.include=t.Class.include,GL.Layer.mergeOptions=t.Class.mergeOptions,GL.Layer.addInitHook=t.Class.addInitHook}).call(e,n(1))},function(t,e,n){"use strict";(function(t){function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var r=n(0),a=function(t){return t&&t.__esModule?t:{default:t}}(r),s={fitable:!0};GL.Map.GaeaInfo=function(n){function r(n){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e(this,r),o=t.extend({},s,o);var l=i(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,n,o)),u=a.default.LayerLookup.lookup("gaea",o.baseLayerOptions);return l.addBaseLayer(u),l}return o(r,n),r}(GL.Map)}).call(e,n(1))},function(t,e,n){"use strict";(function(t){function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var r=n(0),a=function(t){return t&&t.__esModule?t:{default:t}}(r),s={fitable:!0,zoom:9};GL.Map.TDT=function(n){function r(n){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e(this,r),o=t.extend({},s,o);var l=i(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,n,o)),u=a.default.LayerLookup.lookup("tdt",o.baseLayerOptions);return l.addBaseLayer(u),l}return o(r,n),r}(GL.Map)}).call(e,n(1))},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=n(0),l=function(t){return t&&t.__esModule?t:{default:t}}(s);GL.Map=function(t){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};i(this,e);var r=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return r._delegate=new l.default.Map(t,n),r._delegate._api=r,r._delegate._transformDomEventLngLat=function(t){return t.toDelegate()},r.callInitHooks(),r}return r(e,t),a(e,[{key:"_initDefaultVectorLayer",value:function(){this._delegate._defaultLayer=new GL.VectorLayer("internal temp vector layer",{},!0),this.addLayer(this._defaultLayer)}},{key:"reCheckByBaseLayer",value:function(t){return t=t&&t._delegate||t,this._delegate.reCheckByBaseLayer(t),this}},{key:"refresh",value:function(){return this._delegate.refresh(),this}},{key:"clear",value:function(){return this._delegate.clear(),this}},{key:"getCenter",value:function(){return this._delegate.getCenter().toDelegate()}},{key:"getZoom",value:function(){return this._delegate.getZoom()}},{key:"getMinZoom",value:function(){return this._delegate.getMinZoom()}},{key:"getMaxZoom",value:function(){return this._delegate.getMaxZoom()}},{key:"getBounds",value:function(){return this._delegate.getBounds().toDelegate()}},{key:"getMaxBounds",value:function(){return this._delegate.getMaxBounds().toDelegate()}},{key:"getSize",value:function(){return this._delegate.getSize().toDelegate()}},{key:"setMaxBounds",value:function(t){return t=t&&t._delegate||t,this._delegate.setMaxBounds(t),this}},{key:"setCenter",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments[2];return t=t&&t._delegate||t,this._delegate.setCenter(t,e,n),this}},{key:"panBy",value:function(t,e){return t=t&&t._delegate||t,this._delegate.panBy(t,e),this}},{key:"setZoom",value:function(t,e){return this._delegate.setZoom(t,e),this}},{key:"setMinZoom",value:function(t){return this._delegate.setMinZoom(t),this}},{key:"setMaxZoom",value:function(t){return this._delegate.setMaxZoom(t),this}},{key:"setView",value:function(t,e,n){return t=t&&t._delegate||t,this._delegate.setView(t,e,n),this}},{key:"fitBounds",value:function(t,e){return t=t&&t._delegate||t,this._delegate.fitBounds(t,e),this}},{key:"zoomIn",value:function(t,e){return this._delegate.zoomIn(t,e),this}},{key:"zoomOut",value:function(t,e){return this._delegate.zoomOut(t,e),this}},{key:"getPane",value:function(t){return this._delegate.getPane(t)}},{key:"getPanes",value:function(){return this._delegate.getPanes()}},{key:"getContainer",value:function(){return this._delegate.getContainer()}},{key:"getScale",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.getZoom();return this._delegate.getScale(t)}},{key:"getScaleZoom",value:function(t,e){return this._delegate.getScaleZoom(t,e)}},{key:"getResolution",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.getZoom();return this._delegate.getResolution(t)}},{key:"getScales",value:function(){return this._delegate.getScales()}},{key:"getResolutions",value:function(){return this._delegate.getResolutions()}},{key:"getOrigin",value:function(){return this._delegate.getOrigin().toDelegate()}},{key:"getPixelBounds",value:function(){return this._delegate.getPixelBounds().toDelegate()}},{key:"getPixelOrigin",value:function(){return this._delegate.getPixelOrigin().toDelegate()}},{key:"getPixelWorldBounds",value:function(t){return this._delegate.getPixelWorldBounds(t).toDelegate()}},{key:"toPixel",value:function(t){return t=t&&t._delegate||t,this._delegate.toPixel(t).toDelegate()}},{key:"toLngLat",value:function(t){return t=t&&t._delegate||t,this._delegate.toLngLat(t).toDelegate()}},{key:"project",value:function(t,e){return t=t&&t._delegate||t,this._delegate.project(t,e).toDelegate()}},{key:"unproject",value:function(t,e){return t=t&&t._delegate||t,this._delegate.unproject(t,e).toDelegate()}},{key:"distance",value:function(t,e){return t=t&&t._delegate||t,e=e&&e._delegate||e,this._delegate.distance(t,e)}},{key:"addBaseLayer",value:function(t){return t=t&&t._delegate||t,this._delegate.addBaseLayer(t),this}},{key:"getBaseLayer",value:function(t){return this._delegate.getBaseLayer(t)}},{key:"getBaseLayers",value:function(){return this._delegate.getBaseLayers()}},{key:"getLayer",value:function(t){var e=this._delegate.getLayer(t);return e?e.toDelegate():e}},{key:"getLayerId",value:function(t){return t=t&&t._delegate||t,this._delegate.getLayerId(t)}},{key:"getLayers",value:function(){var t=this._delegate.getLayers();return(t=t&&t.map(function(t){return t&&"function"==typeof t.toDelegate?t.toDelegate():t}))||[]}},{key:"addLayer",value:function(t){return t=t&&t._delegate||t,this._delegate.addLayer(t),this}},{key:"addLayers",value:function(t){return t=t&&t.map(function(t){return t&&t._delegate||t}),this._delegate.addLayer(t),this}},{key:"removeBaseLayer",value:function(t){return t=t&&t._delegate||t,this._delegate.removeBaseLayer(t),this}},{key:"removeLayer",value:function(t){return t=t&&t._delegate||t,this._delegate.removeLayer(t),this}},{key:"hasLayer",value:function(t){return t=t&&t._delegate||t,this._delegate.hasLayer(t)}},{key:"eachLayer",value:function(t,e){var n=this.getLayers();for(var i in n)t.call(e,n[i]);return this}},{key:"addControl",value:function(t){return this._delegate.addControl(t),this}},{key:"removeControl",value:function(t){return this._delegate.removeControl(t),this}},{key:"showMask",value:function(){this._delegate.showMask()}},{key:"hideMask",value:function(){this._delegate.hideMask()}},{key:"toggleMask",value:function(){this._delegate.toggleMask()}},{key:"remove",value:function(){return this._delegate.remove(),this}},{key:"id",get:function(){return this._delegate.id}},{key:"options",get:function(){return this._delegate.options}},{key:"_defaultLayer",get:function(){return this._delegate._defaultLayer}},{key:"boxZoom",get:function(){return this._delegate.boxZoom}},{key:"doubleClickZoom",get:function(){return this._delegate.doubleClickZoom}},{key:"dragging",get:function(){return this._delegate.dragging}},{key:"keyboard",get:function(){return this._delegate.keyboard}},{key:"scrollWheelZoom",get:function(){return this._delegate.scrollWheelZoom}},{key:"tap",get:function(){return this._delegate.tap}},{key:"touchZoom",get:function(){return this._delegate.touchZoom}}]),e}(GL.Layer)},function(t,e,n){"use strict";n(33),n(34),n(35),n(32)},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=n(0),a=function(t){return t&&t.__esModule?t:{default:t}}(r);GL.Envelope=function(){function t(e,n){i(this,t),e=e&&e._delegate||e,n=n&&n._delegate||n,Array.isArray(e)&&!n&&2===e.length&&(e[0]=e[0]&&e[0]._delegate||e[0],e[1]=e[1]&&e[1]._delegate||e[1]),this._delegate=new a.default.Envelope(e,n),this._delegate._api=this}return o(t,[{key:"clone",value:function(){return this._delegate.clone().toDelegate()}},{key:"expand",value:function(t){return this._delegate.expand(t).toDelegate()}},{key:"extend",value:function(t){return t=t&&t._delegate||t,this._delegate.extend(t),this}},{key:"getCenter",value:function(){return this._delegate.getCenter().toDelegate()}},{key:"getMin",value:function(){return this._delegate.getMin().toDelegate()}},{key:"getMax",value:function(){return this._delegate.getMax().toDelegate()}},{key:"contains",value:function(t){return t=t&&t._delegate||t,this._delegate.contains(t)}},{key:"intersects",value:function(t){return t=t&&t._delegate||t,this._delegate.intersects(t)}},{key:"overlaps",value:function(t){return t=t&&t._delegate||t,this._delegate.overlaps(t)}},{key:"equals",value:function(t){return t=t&&t._delegate||t,this._delegate.equals(t)}},{key:"isValid",value:function(){return this._delegate.isValid()}},{key:"toPolyline",value:function(t){return this._delegate.toPolyline(t).toDelegate()}},{key:"toPolygon",value:function(t){return this._delegate.toPolygon(t).toDelegate()}},{key:"toSize",value:function(t){return t=t&&t._delegate||t,this._delegate.toSize(t).toDelegate()}},{key:"toLngLats",value:function(){return GL.LngLat.lngLatsToDelegate(this._delegate.toLngLats(),0)}},{key:"toString",value:function(){return this._delegate.toString()}},{key:"toBBoxString",value:function(){return this._delegate.toBBoxString()}},{key:"toArray",value:function(){return this._delegate.toArray()}},{key:"type",get:function(){return this._delegate.type}}]),t}(),a.default.Envelope.prototype.toDelegate=function(){return this._api?this._api:new GL.Envelope(this.getSouthWest().clone(),this.getNorthEast().clone())},GL.Envelope.type=a.default.Envelope.type},function(t,e,n){"use strict";(function(t){function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=function(){function t(t,e){var n=[],i=!0,o=!1,r=void 0;try{for(var a,s=t[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);i=!0);}catch(t){o=!0,r=t}finally{try{!i&&s.return&&s.return()}finally{if(o)throw r}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=n(0),a=function(t){return t&&t.__esModule?t:{default:t}}(r);GL.LngLat=function(){function n(t,i){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;e(this,n),this._delegate=new a.default.LngLat(t,i,o),this._delegate._api=this}return o(n,[{key:"clone",value:function(){return this._delegate.clone().toDelegate()}},{key:"equals",value:function(t,e){return t=t._delegate||t,this._delegate.equals(t,e)}},{key:"toBounds",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;return this._delegate.toBounds(t).toDelegate()}},{key:"distanceTo",value:function(t){return t=t&&t._delegate||t,this._delegate.distanceTo(t)}},{key:"toPixel",value:function(t){return t=t&&t._delegate||t,this._delegate.toPixel(t)}},{key:"toString",value:function(){return this._delegate.toString()}},{key:"toArray",value:function(){return this._delegate.toArray()}},{key:"type",get:function(){return this._delegate.type}},{key:"lng",get:function(){return this._delegate.lng},set:function(t){this._delegate.lng=t}},{key:"lat",get:function(){return this._delegate.lat},set:function(t){this._delegate.lat=t}},{key:"alt",get:function(){return this._delegate.alt},set:function(t){this._delegate.alt=t}}],[{key:"format",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if("string"!=typeof e)return e;if(!(e=e.trim()))return e;for(var o=e.split("#"),r=[],a=0,s=o.length;a<s;a++){var l=o[a];if(l){for(var u=l.split(";"),h=[],c=0,f=u.length;c<f;c++){var p=u[c];if(p){var d=p.split(","),_=i(d,2),y=_[0],g=_[1],m=[t.Util.formatNum(y,7),t.Util.formatNum(g,7)];y=m[0],g=m[1];var v=[y,g];n&&(v=new GL.LngLat(v)),h.push(v)}}h.length&&r.push(h)}}return 1===r.length?r[0]:r}},{key:"parse",value:function(t){return a.default.LngLat.parse(t)}},{key:"lngLatsToDelegate",value:function(t,e){for(var n,i=[],o=0,r=t.length;o<r;o++)n=e?GL.LngLat.lngLatsToDelegate(t[o],e-1):t[o].toDelegate(),i.push(n);return i}},{key:"delegateToLngLats",value:function(t,e,n){for(var i=[],o=0,r=t.length;o<r;o++){var a=t[o];a&&i.push(e?GL.LngLat.delegateToLngLats(a,e-1,n):a._delegate||a)}return!e&&n&&i.push(i[0]),i}}]),n}(),a.default.LngLat.prototype.toDelegate=function(){return this._api?this._api:new GL.LngLat(this.lng,this.lat,this.alt)},GL.LngLat.type=a.default.LngLat.type}).call(e,n(1))},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=n(0),a=function(t){return t&&t.__esModule?t:{default:t}}(r);GL.Pixel=function(){function t(e,n){var o=arguments.length>2&&void 0!==arguments[2]&&arguments[2];i(this,t),this._delegate=new a.default.Pixel(e,n,o),this._delegate._api=this}return o(t,[{key:"clone",value:function(){return this._delegate.clone().toDelegate()}},{key:"add",value:function(t){return t=t&&t._delegate||t,this._delegate.add(t).toDelegate()}},{key:"subtract",value:function(t){return t=t&&t._delegate||t,this._delegate.subtract(t).toDelegate()}},{key:"multiplyBy",value:function(t){return this._delegate.multiplyBy(t).toDelegate()}},{key:"divideBy",value:function(t){return this._delegate.divideBy(t).toDelegate()}},{key:"scaleBy",value:function(t){return t=t&&t._delegate||t,this._delegate.scaleBy(t).toDelegate()}},{key:"unscaleBy",value:function(t){return t=t&&t._delegate||t,this._delegate.unscaleBy(t).toDelegate()}},{key:"round",value:function(){return this._delegate.round().toDelegate()}},{key:"floor",value:function(){return this._delegate.floor().toDelegate()}},{key:"ceil",value:function(){return this._delegate.ceil().toDelegate()}},{key:"distanceTo",value:function(t){return t=t&&t._delegate||t,this._delegate.distanceTo(t)}},{key:"equals",value:function(t){return t=t&&t._delegate||t,this._delegate.equals(t)}},{key:"contains",value:function(t){return t=t&&t._delegate||t,this._delegate.contains(t)}},{key:"toLngLat",value:function(t){return t=t&&t._delegate||t,this._delegate.toLngLat(t)}},{key:"toString",value:function(){return this._delegate.toString()}},{key:"toArray",value:function(){return this._delegate.toArray()}},{key:"type",get:function(){return this._delegate.type}},{key:"x",get:function(){return this._delegate.x},set:function(t){this._delegate.x=t}},{key:"y",get:function(){return this._delegate.y},set:function(t){this._delegate.y=t}}]),t}(),a.default.Pixel.prototype.toDelegate=function(){return this._api?this._api:new GL.Pixel(this.x,this.y)},GL.Pixel.type=a.default.Pixel.type},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=n(0),a=function(t){return t&&t.__esModule?t:{default:t}}(r);GL.Size=function(){function t(e,n){i(this,t),e=e&&e._delegate||e,n=n&&n._delegate||n,Array.isArray(e)&&!n&&2===e.length&&(e[0]=e[0]&&e[0]._delegate||e[0],e[1]=e[1]&&e[1]._delegate||e[1]),this._delegate=new a.default.Size(e,n),this._delegate._api=this}return o(t,[{key:"clone",value:function(){return this._delegate.clone().toDelegate()}},{key:"extend",value:function(t){return t=t&&t._delegate||t,this._delegate.extend(t),this}},{key:"getCenter",value:function(t){return this._delegate.getCenter(t).toDelegate()}},{key:"getBottomLeft",value:function(){return this._delegate.getBottomLeft().toDelegate()}},{key:"getTopRight",value:function(){return this._delegate.getTopRight().toDelegate()}},{key:"getMin",value:function(){return this._delegate.getMin().toDelegate()}},{key:"getMax",value:function(){return this._delegate.getMax().toDelegate()}},{key:"getSize",value:function(){return this._delegate.getSize().toDelegate()}},{key:"contains",value:function(t){return t=t&&t._delegate||t,this._delegate.contains(t)}},{key:"intersects",value:function(t){return t=t&&t._delegate||t,this._delegate.intersects(t)}},{key:"overlaps",value:function(t){return t=t&&t._delegate||t,this._delegate.overlaps(t)}},{key:"isValid",value:function(){return this._delegate.isValid()}},{key:"toEnvelope",value:function(t){return t=t&&t._delegate||t,this._delegate.toEnvelope(t).toDelegate()}},{key:"toString",value:function(){return this._delegate.toString()}},{key:"toArray",value:function(){return this._delegate.toArray()}},{key:"type",get:function(){return this._delegate.type}}]),t}(),a.default.Size.prototype.toDelegate=function(){return this._api?this._api:new GL.Size(this.min.clone(),this.max.clone())},GL.Size.type=a.default.Size.type},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=n(0),l=function(t){return t&&t.__esModule?t:{default:t}}(s);GL.ClusterLayer=function(t){function e(t,n){i(this,e);var r=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return r._delegate=new l.default.ClusterLayer(t,n),r._delegate._api=r,r.callInitHooks(),r}return r(e,t),a(e,[{key:"setOptions",value:function(t){return this._delegate.setOptions(t),this}},{key:"invoke",value:function(t){return this._delegate.invoke(t),this}},{key:"addOverlay",value:function(t){return t?(t=t&&t._delegate||t,t._layer=this,this._delegate.addOverlay(t),this):this}},{key:"addOverlays",value:function(t){return t?(t=t.map(function(t){return t&&t._delegate||t}),this._delegate.addOverlays(t),this):this}},{key:"removeOverlays",value:function(t){return t?(t=t.map(function(t){return t&&t._delegate||t}),this._delegate.removeOverlays(t),this):this}},{key:"removeOverlay",value:function(t){return t?(t=t&&t._delegate||t,this._delegate.removeLayer(t),this):this}},{key:"getOverlay",value:function(t){var e=this._delegate.getOverlay(t);return e&&e._api||e}},{key:"getOverlays",value:function(){return this._delegate.getOverlays().map(function(t){return t&&t._api||t})}},{key:"hasOverlay",value:function(t){return t?(t=t&&t._delegate||t,this._delegate.hasOverlay(t)):this}},{key:"clear",value:function(){return this._delegate.clear(),this}},{key:"clearHighlight",value:function(){return this._delegate.clearHighlight(),this}},{key:"getBounds",value:function(){var t=this._delegate.getBounds();return t&&"function"==typeof t.toDelegate?t.toDelegate():t}},{key:"hide",value:function(){return this._delegate.hide(),this}},{key:"show",value:function(){return this._delegate.show(),this}},{key:"visible",value:function(t){return this._delegate.visible(t),this}},{key:"id",get:function(){return this._delegate.id},set:function(t){return this._delegate.id=t,this}},{key:"type",get:function(){return this._delegate.type}},{key:"options",get:function(){return this._delegate.options}},{key:"_map",get:function(){var t=this._delegate._map;return t=t&&t._api||t}}]),e}(GL.Layer),l.default.ClusterLayer.prototype.toDelegate=function(){if(this._api)return this._api;var t=new GL.ClusterLayer(this.id,this.options);return t.addOverlays(this.getOverlays()),t},GL.ClusterLayer.type=l.default.ClusterLayer.type},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=n(0),l=function(t){return t&&t.__esModule?t:{default:t}}(s);GL.GeoJSON=function(t){function e(t,n){i(this,e);var r=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return r._delegate=new l.default.GeoJSON(t,n),r._delegate._api=r,r.callInitHooks(),r}return r(e,t),a(e,[{key:"addData",value:function(t){return this._delegate.addData(t),this}},{key:"resetStyle",value:function(t){return t=t&&t._delegate||t,this._delegate.resetStyle(t),this}},{key:"setStyle",value:function(t){return t=t&&t._delegate||t,this._delegate.setStyle(t),this}},{key:"id",get:function(){return this._delegate.id},set:function(t){return this._delegate.id=t,this}},{key:"type",get:function(){return this._delegate.type}},{key:"options",get:function(){return this._delegate.options}}],[{key:"geometryToLayer",value:function(t,e){return l.default.GeoJSON.geometryToLayer(t,e).toDelegate()}},{key:"coordsToLatLng",value:function(t){return l.default.GeoJSON.coordsToLatLng(t).toDelegate()}},{key:"coordsToLatLngs",value:function(t,e,n){var i=l.default.GeoJSON.coordsToLatLngs(t,e,n);return GL.LngLat.lngLatsToDelegate(i,e)}},{key:"latLngToCoords",value:function(t){return l.default.GeoJSON.latLngToCoords(t)}},{key:"latLngsToCoords",value:function(t,e,n){return l.default.GeoJSON.latLngsToCoords(t,e,n)}},{key:"getFeature",value:function(t,e){return l.default.GeoJSON.getFeature(t,e)}},{key:"asFeature",value:function(t){return l.default.GeoJSON.asFeature(t)}}]),e}(GL.Layer)},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=n(0),l=function(t){return t&&t.__esModule?t:{default:t}}(s);GL.HeatLayer=function(t){function e(t,n){i(this,e);var r=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return r._delegate=new l.default.HeatLayer(t,n),r._delegate._api=r,r.callInitHooks(),r}return r(e,t),a(e,[{key:"setLngLats",value:function(t){return this._delegate.setLngLats(t),this}},{key:"addLngLat",value:function(t){return this._delegate.addLngLat(t),this}},{key:"addLngLats",value:function(t){return this._delegate.addLngLats(t),this}},{key:"removeFirstLnglat",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return this._delegate.removeFirstLnglat(t),this}},{key:"removeLastLnglat",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return this._delegate.removeLastLnglat(t),this}},{key:"getLngLats",value:function(){return this._delegate.getLngLats()}},{key:"setOptions",value:function(t){return this._delegate.setOptions(t),this}},{key:"addTo",value:function(t){return t=t&&t._delegate||t,this._delegate.addTo(t),this}},{key:"remove",value:function(){return this._delegate.remove(),this}},{key:"clear",value:function(){return this._delegate.clear(),this}},{key:"hide",value:function(){return this._delegate.hide(),this}},{key:"show",value:function(){return this._delegate.show(),this}},{key:"visible",value:function(t){return this._delegate.visible(t),this}},{key:"bringToFront",value:function(){return this._delegate.bringToFront(),this}},{key:"bringToBack",value:function(){return this._delegate.bringToBack(),this}},{key:"id",get:function(){return this._delegate.id},set:function(t){return this._delegate.id=t,this}},{key:"type",get:function(){return this._delegate.type}},{key:"options",get:function(){return this._delegate.options}},{key:"_map",get:function(){var t=this._delegate._map;return t=t&&t._api||t}}]),e}(GL.Layer),l.default.HeatLayer.prototype.toDelegate=function(){if(this._api)return this._api;var t=new GL.HeatLayer(this.id,this.options);return t.setLngLats(this.getLngLats()),t},GL.HeatLayer.type=l.default.HeatLayer.type},function(t,e,n){"use strict";n(37),n(40),n(42),n(38),n(36),n(41)},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=n(0),l=function(t){return t&&t.__esModule?t:{default:t}}(s);GL.TiledLayer=function(t){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};i(this,e);var a=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return a._delegate=new l.default.TiledLayer(t,n,r),a._delegate._api=a,a.callInitHooks(),a}return r(e,t),a(e,[{key:"hide",value:function(){return this._delegate.hide(),this}},{key:"show",value:function(){return this._delegate.show(),this}},{key:"visible",value:function(t){return this._delegate.visible(t),this}},{key:"setOpacity",value:function(t){return this._delegate.setOpacity(t),this}},{key:"group",value:function(t){return this._delegate.group(t),this}},{key:"unGroup",value:function(t){return this._delegate.unGroup(t),this}},{key:"merge",value:function(t,e){return this._delegate.merge(t,e),this}},{key:"formatTileUrl",value:function(t){return this._delegate.formatTileUrl(t)}},{key:"name",get:function(){return this._delegate.name}},{key:"url",get:function(){return this._delegate.url}},{key:"type",get:function(){return this._delegate.type}},{key:"options",get:function(){return this._delegate.options}},{key:"isBaseLayer",get:function(){return this._delegate.isBaseLayer}}]),e}(GL.Layer),l.default.TiledLayer.prototype.toDelegate=function(){return this._api?this._api:new GL.TiledLayer(this.url,this.crs,this.options)}},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=n(0),l=function(t){return t&&t.__esModule?t:{default:t}}(s);GL.CanvasVectorLayer=function(t){function e(t,n){i(this,e);var r=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return r._delegate=new l.default.CanvasVectorLayer(t,n),r._delegate._api=r,r.callInitHooks(),r}return r(e,t),a(e,[{key:"setOptions",value:function(t){return this._delegate.setOptions(t),this}},{key:"addTo",value:function(t){return t=t&&t._delegate||t,this._delegate.addTo(t),this}},{key:"remove",value:function(){return this._delegate.remove(),this}},{key:"getOverlay",value:function(t){var e=this._delegate.getOverlay(t);return e&&e._api||e}},{key:"getOverlayId",value:function(t){return t=t&&t._delegate||t,this._delegate.getOverlayId(t)}},{key:"addOverlay",value:function(t){return t=t&&t._delegate||t,this._delegate.addOverlay(t),this}},{key:"removeOverlay",value:function(t){return t=t&&t._delegate||t,this._delegate.removeOverlay(t),this}},{key:"hasOverlay",value:function(t){return t=t&&t._delegate||t,this._delegate.hasOverlay(t)}},{key:"eachOverlay",value:function(t,e){var n=this.getOverlays();for(var i in n)t.call(e,n[i]);return this}},{key:"getOverlays",value:function(){var t=this._delegate.getOverlays();return t=t&&t.map(function(t){return t&&t._api||t})||t}},{key:"addOverlays",value:function(t){return t=t&&t.map(function(t){return t&&t._delegate||t})||t,this._delegate.addOverlays(t),this}},{key:"removeOverlays",value:function(t){return t=t&&t.map(function(t){return t&&t._delegate||t})||t,this._delegate.removeOverlays(t),this}},{key:"clear",value:function(){return this._delegate.clear(),this}},{key:"hide",value:function(){return this._delegate.hide(),this}},{key:"show",value:function(){return this._delegate.show(),this}},{key:"visible",value:function(t){return this._delegate.visible(t),this}},{key:"setZIndex",value:function(t){return this._delegate.setZIndex(t),this}},{key:"getBounds",value:function(){return this._delegate.getBounds().toDelegate()}},{key:"bringToFront",value:function(){return this._delegate.bringToFront(),this}},{key:"bringToBack",value:function(){return this._delegate.bringToBack(),this}},{key:"id",get:function(){return this._delegate.id},set:function(t){return this._delegate.id=t,this}},{key:"type",get:function(){return this._delegate.type}},{key:"options",get:function(){return this._delegate.options}},{key:"_map",get:function(){var t=this._delegate._map;return t=t&&t._api||t}}]),e}(GL.Layer),l.default.CanvasVectorLayer.prototype.toDelegate=function(){if(this._api)return this._api;var t=new GL.CanvasVectorLayer(this.id,this.options);return t.addOverlays(this.getOverlays()),t},GL.CanvasVectorLayer.type=l.default.CanvasVectorLayer.type},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=n(0),l=function(t){return t&&t.__esModule?t:{default:t}}(s),u=GL.VectorLayer;if(GL.VectorLayer=function(t){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];i(this,e);var a=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return a._delegate=new l.default.VectorLayer(t,n,r),a._delegate._api=a,a.callInitHooks(),a}return r(e,t),a(e,[{key:"addTo",value:function(t){return t=t&&t._delegate||t,this._delegate.addTo(t),this}},{key:"remove",value:function(){return this._delegate.remove(),this}},{key:"getOverlay",value:function(t){var e=this._delegate.getOverlay(t);return e&&e._api||e}},{key:"getOverlayId",value:function(t){return t=t&&t._delegate||t,this._delegate.getOverlayId(t)}},{key:"addOverlay",value:function(t){return t=t&&t._delegate||t,this._delegate.addOverlay(t),this}},{key:"removeOverlay",value:function(t){return t=t&&t._delegate||t,this._delegate.removeOverlay(t),this}},{key:"hasOverlay",value:function(t){return t=t&&t._delegate||t,this._delegate.hasOverlay(t)}},{key:"eachOverlay",value:function(t,e){var n=this.getOverlays();for(var i in n)t.call(e,n[i]);return this}},{key:"getOverlays",value:function(){var t=this._delegate.getOverlays();return t=t&&t.map(function(t){return t&&t._api||t})||t}},{key:"addOverlays",value:function(t){return t=t&&t.map(function(t){return t&&t._delegate||t})||t,this._delegate.addOverlays(t),this}},{key:"removeOverlays",value:function(t){return t=t&&t.map(function(t){return t&&t._delegate||t})||t,this._delegate.removeOverlays(t),this}},{key:"clear",value:function(){return this._delegate.clear(),this}},{key:"clearHighlight",value:function(){return this._delegate.clearHighlight(),this}},{key:"getBounds",value:function(){return this._delegate.getBounds().toDelegate()}},{key:"normal",value:function(){return this._delegate.normal(),this}},{key:"cluster",value:function(t){return this._delegate.cluster(t),this}},{key:"hide",value:function(){return this._delegate.hide(),this}},{key:"show",value:function(){return this._delegate.show(),this}},{key:"visible",value:function(t){return this._delegate.visible(t),this}},{key:"setZIndex",value:function(t){return this._delegate.setZIndex(t),this}},{key:"setStyle",value:function(t){return this._delegate.setStyle(t),this}},{key:"bringToFront",value:function(){return this._delegate.bringToFront(),this}},{key:"bringToBack",value:function(){return this._delegate.bringToBack(),this}},{key:"id",get:function(){return this._delegate.id},set:function(t){return this._delegate.id=t,this}},{key:"type",get:function(){return this._delegate.type}},{key:"options",get:function(){return this._delegate.options}},{key:"_map",get:function(){var t=this._delegate._map;return t=t&&t._api||t}},{key:"state",get:function(){return this._delegate.state},set:function(t){return this._delegate._state=t}}]),e}(GL.Layer),u){Object.keys(u).forEach(function(t){GL.VectorLayer.prototype[t]=u[t]})}l.default.VectorLayer.prototype.toDelegate=function(){if(this._api)return this._api;var t=new GL.VectorLayer(this.id,this.options);return t.addOverlays(this.getOverlays()),t},GL.VectorLayer.type=l.default.VectorLayer.type},function(t,e,n){"use strict";n(27),n(30),n(28),n(29),n(31),n(39),n(48),n(58),n(62)},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=n(0),l=function(t){return t&&t.__esModule?t:{default:t}}(s);GL.Circle=function(t){function e(t,n,r){i(this,e);var a=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t=t&&t._delegate||t,r=r&&r._delegate||r,a._delegate=new l.default.Overlay.Circle(t,n,r),a._delegate._api=a,a.callInitHooks(),a}return r(e,t),a(e,[{key:"addTo",value:function(t){return t=t&&t._delegate||t,this._delegate.addTo(t),this}},{key:"remove",value:function(){return this._delegate.remove(),this}},{key:"clone",value:function(){return this._delegate.clone().toDelegate()}},{key:"setCenter",value:function(t){return t=t&&t._delegate||t,this._delegate.setCenter(t),this}},{key:"getCenter",value:function(){return this._delegate.getCenter().toDelegate()}},{key:"redraw",value:function(){return this._delegate.redraw(),this}},{key:"contains",value:function(t){return t=t&&t._delegate||t,this._delegate.contains(t)}},{key:"getStyle",value:function(){return this._delegate.getStyle().toDelegate()}},{key:"highlight",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"#0088dd";return this._delegate.highlight(t),this}},{key:"clearHighlight",value:function(){return this._delegate.clearHighlight(),this}},{key:"serialize",value:function(){return this._delegate.serialize()}},{key:"toString",value:function(){return this._delegate.toString()}},{key:"hide",value:function(){return this._delegate.hide(),this}},{key:"show",value:function(){return this._delegate.show(),this}},{key:"visible",value:function(t){return this._delegate.visible(t),this}},{key:"bringToFront",value:function(){return this._delegate.bringToFront(),this}},{key:"bringToBack",value:function(){return this._delegate.bringToBack(),this}},{key:"setRadius",value:function(t){return this._delegate.setRadius(t),this}},{key:"getRadius",value:function(){return this._delegate.getRadius()}},{key:"setStyle",value:function(t){return t=t&&t._delegate||t,this._delegate.setStyle(t),this}},{key:"getElement",value:function(){return this._delegate.getElement()}},{key:"getBounds",value:function(){return this._delegate.getBounds().toDelegate()}},{key:"toGeoJSON",value:function(){return this._delegate.toGeoJSON()}},{key:"id",get:function(){return this._delegate.id},set:function(t){return this._delegate.id=t,this}},{key:"type",get:function(){return this._delegate.type}},{key:"isOverlay",get:function(){return this._delegate.isOverlay}},{key:"attr",get:function(){return this._delegate.attr},set:function(t){return this._delegate.attr=t,this}},{key:"editing",get:function(){return this._delegate.editing}},{key:"_map",get:function(){var t=this._delegate._map;return t=t&&t._api||t}}],[{key:"deserialize",value:function(t){return l.default.Overlay.Circle.deserialize(t).toDelegate()}}]),e}(GL.Layer),l.default.Overlay.Circle.prototype.toDelegate=function(){if(this._api)return this._api;var t=new GL.Circle(this.getCenter(),this.getRadius(),this.getStyle());return t.id=this.id,t.attr=this.attr,t},GL.Circle.type=l.default.Overlay.Circle.type},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=n(0),l=function(t){return t&&t.__esModule?t:{default:t}}(s);GL.DivOverlay=function(t){function e(t,n){i(this,e);var r=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return r._delegate=new l.default.DivOverlay(t,n),r._delegate._api=r,r.callInitHooks(),r}return r(e,t),a(e,[{key:"setLngLat",value:function(t){return t=t&&t._delegate||t,this._delegate.setLngLat(t),this}},{key:"getLngLat",value:function(){return this._delegate.getLngLat().toDelegate()}},{key:"getEvents",value:function(){return this._delegate.getEvents()}},{key:"getContent",value:function(){return this._delegate.getContent()}},{key:"setContent",value:function(t){return this._delegate.setContent(t),this}},{key:"getElement",value:function(){return this._delegate.getElement()}},{key:"isOpen",value:function(){return this._delegate.isOpen()}},{key:"bringToFront",value:function(){return this._delegate.bringToFront(),this}},{key:"bringToBack",value:function(){return this._delegate.bringToBack(),this}},{key:"options",get:function(){return this._delegate.options}}]),e}(GL.Layer),l.default.DivOverlay.prototype.toDelegate=function(){return this._api?this._api:new GL.DivOverlay(this.options,this._source)},GL.DivOverlay.type=l.default.DivOverlay.type},function(t,e,n){"use strict";(function(t){function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=n(0),s=function(t){return t&&t.__esModule?t:{default:t}}(a);GL.Rectangle=function(n){function a(t,n){e(this,a);var o=i(this,(a.__proto__||Object.getPrototypeOf(a)).call(this));return t=t&&t._delegate||t,n=n&&n._delegate||n,o._delegate=new s.default.Overlay.Rectangle(t,n),o._delegate._api=o,o.callInitHooks(),o}return o(a,n),r(a,[{key:"addTo",value:function(t){return t=t&&t._delegate||t,this._delegate.addTo(t),this}},{key:"remove",value:function(){return this._delegate.remove(),this}},{key:"clone",value:function(){return this._delegate.clone().toDelegate()}},{key:"isEmpty",value:function(){return this._delegate.isEmpty()}},{key:"setBounds",value:function(t){return t=t&&t._delegate||t,this._delegate.setBounds(t),this}},{key:"getMin",value:function(){return this._delegate.getMin().toDelegate()}},{key:"getMax",value:function(){return this._delegate.getMax().toDelegate()}},{key:"getStyle",value:function(){return this._delegate.getStyle().toDelegate()}},{key:"setStyle",value:function(t){return t=t&&t._delegate||t,this._delegate.setStyle(t),this}},{key:"getCenter",value:function(){return this._delegate.getCenter().toDelegate()}},{key:"getBounds",value:function(){return this._delegate.getBounds().toDelegate()}},{key:"getLngLats",value:function(){var e=this._delegate.getLngLats(),n=!t.Polyline._flat(e),i=n&&!t.Polyline._flat(e[0]);return GL.LngLat.lngLatsToDelegate(e,i?2:n?1:0)}},{key:"redraw",value:function(){return this._delegate.redraw(),this}},{key:"contains",value:function(t){return t=t&&t._delegate||t,this._delegate.contains(t)}},{key:"highlight",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"#0088dd";return this._delegate.highlight(t),this}},{key:"clearHighlight",value:function(){return this._delegate.clearHighlight(),this}},{key:"serialize",value:function(){return this._delegate.serialize()}},{key:"toString",value:function(){return this._delegate.toString()}},{key:"toGeoJSON",value:function(){return this._delegate.toGeoJSON()}},{key:"closestLayerPoint",value:function(t){return t=t&&t._delegate||t,this._delegate.closestLayerPoint(t).toDelegate()}},{key:"getElement",value:function(){return this._delegate.getElement()}},{key:"hide",value:function(){return this._delegate.hide(),this}},{key:"show",value:function(){return this._delegate.show(),this}},{key:"visible",value:function(t){return this._delegate.visible(t),this}},{key:"bringToFront",value:function(){return this._delegate.bringToFront(),this}},{key:"bringToBack",value:function(){return this._delegate.bringToBack(),this}},{key:"id",get:function(){return this._delegate.id},set:function(t){return this._delegate.id=t,this}},{key:"type",get:function(){return this._delegate.type}},{key:"isOverlay",get:function(){return this._delegate.isOverlay}},{key:"attr",get:function(){return this._delegate.attr},set:function(t){return this._delegate.attr=t,this}},{key:"editing",get:function(){return this._delegate.editing}},{key:"_map",get:function(){var t=this._delegate._map;return t=t&&t._api||t}}],[{key:"deserialize",value:function(t){return s.default.Overlay.Rectangle.deserialize(t).toDelegate()}}]),a}(GL.Layer),s.default.Overlay.Rectangle.prototype.toDelegate=function(){if(this._api)return this._api;var t=new GL.Rectangle(this.getBounds().clone(),this.getStyle());return t.id=this.id,t.attr=this.attr,t},GL.Rectangle.type=s.default.Overlay.Rectangle.type}).call(e,n(1))},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=n(0),l=function(t){return t&&t.__esModule?t:{default:t}}(s);GL.Text=function(t){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};i(this,e);var a=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t=t&&t._delegate||t,a._delegate=new l.default.Overlay.Text(t,n,r),a._delegate._api=a,a.callInitHooks(),a}return r(e,t),a(e,[{key:"clone",value:function(){return this._delegate.clone().toDelegate()}},{key:"addTo",value:function(t){return t=t&&t._delegate||t,this._delegate.addTo(t),this}},{key:"remove",value:function(){return this._delegate.remove(),this}},{key:"setHtml",value:function(t){return t=t&&t._delegate||t,this._delegate.setHtml(t),this}},{key:"setClassName",value:function(t){return this._delegate.setClassName(t),this}},{key:"setPosition",value:function(t){return t=t&&t._delegate||t,this._delegate.setPosition(t),this}},{key:"getHtml",value:function(){return this._delegate.getHtml()}},{key:"getLngLat",value:function(){return this._delegate.getLngLat().toDelegate()}},{key:"getCenter",value:function(){return this._delegate.getCenter().toDelegate()}},{key:"getIcon",value:function(){return this._delegate.getIcon().toDelegate()}},{key:"getOpacity",value:function(){return this._delegate.getOpacity()}},{key:"setLngLat",value:function(t){return t=t&&t._delegate||t,this._delegate.setLngLat(t),this}},{key:"setIcon",value:function(t){return t=t&&t._delegate||t,this._delegate.setIcon(t),this}},{key:"setZIndex",value:function(t){return this._delegate.setZIndex(t),this}},{key:"setOpacity",value:function(t){return this._delegate.setOpacity(t),this}},{key:"update",value:function(){return this._delegate.update(),this}},{key:"highlight",value:function(){return this._delegate.highlight(),this}},{key:"clearHighlight",value:function(){return this._delegate.clearHighlight(),this}},{key:"hide",value:function(){return this._delegate.hide(),this}},{key:"show",value:function(){return this._delegate.show(),this}},{key:"visible",value:function(t){return this._delegate.visible(t),this}},{key:"bringToFront",value:function(){return this._delegate.bringToFront(),this}},{key:"bringToBack",value:function(){return this._delegate.bringToBack(),this}},{key:"serialize",value:function(){return this._delegate.serialize()}},{key:"toString",value:function(){return this._delegate.toString()}},{key:"toGeoJSON",value:function(){return this._delegate.toGeoJSON()}},{key:"id",get:function(){return this._delegate.id},set:function(t){return this._delegate.id=t,this}},{key:"type",get:function(){return this._delegate.type}},{key:"isOverlay",get:function(){return this._delegate.isOverlay}},{key:"attr",get:function(){return this._delegate.attr},set:function(t){return this._delegate.attr=t,this}},{key:"options",get:function(){return this._delegate.options}},{key:"editing",get:function(){return this._delegate.editing}},{key:"_map",get:function(){var t=this._delegate._map;return t=t&&t._api||t}}],[{key:"deserialize",value:function(t){return l.default.Overlay.Text.deserialize(t).toDelegate()}}]),e}(GL.Layer),l.default.Overlay.Text.prototype.toDelegate=function(){if(this._api)return this._api;var t=new GL.Text(this.getLngLat(),this.getHtml(),this.options);return t.id=this.id,t.attr=this.attr,t},GL.Text.type=l.default.Overlay.Text.type},function(t,e,n){"use strict";n(49),n(51),n(50),n(44),n(46),n(47),n(45)},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=n(0),l=function(t){return t&&t.__esModule?t:{default:t}}(s);GL.Point=function(t){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};i(this,e);var a=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t=t&&t._delegate||t,n=n&&n._delegate||n,a._delegate=new l.default.Overlay.Point(t,n,r),a._delegate._api=a,a.callInitHooks(),a}return r(e,t),a(e,[{key:"clone",value:function(){return this._delegate.clone().toDelegate()}},{key:"addTo",value:function(t){return t=t&&t._delegate||t,this._delegate.addTo(t),this}},{key:"remove",value:function(){return this._delegate.remove(),this}},{key:"getLngLat",value:function(){return this._delegate.getLngLat().toDelegate()}},{key:"getCenter",value:function(){return this._delegate.getCenter().toDelegate()}},{key:"getIcon",value:function(){return this._delegate.getIcon().toDelegate()}},{key:"getIconImg",value:function(){return this._delegate.getIconImg()}},{key:"getIconHandler",value:function(){return this._delegate.getIconHandler()}},{key:"getIconWrap",value:function(){return this._delegate.getIconWrap()}},{key:"getOpacity",value:function(){return this._delegate.getOpacity()}},{key:"setLngLat",value:function(t){return t=t&&t._delegate||t,this._delegate.setLngLat(t),this}},{key:"setIcon",value:function(t){return t=t&&t._delegate||t,this._delegate.setIcon(t),this}},{key:"setZIndex",value:function(t){return this._delegate.setZIndex(t),this}},{key:"setOpacity",value:function(t){return this._delegate.setOpacity(t),this}},{key:"update",value:function(){return this._delegate.update(),this}},{key:"highlight",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"#0088dd",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:60;return this._delegate.highlight(t,e),this}},{key:"clearHighlight",value:function(){return this._delegate.clearHighlight(),this}},{key:"hide",value:function(){return this._delegate.hide(),this}},{key:"show",value:function(){return this._delegate.show(),this}},{key:"visible",value:function(t){return this._delegate.visible(t),this}},{key:"bringToFront",value:function(){return this._delegate.bringToFront(),this}},{key:"bringToBack",value:function(){return this._delegate.bringToBack(),this}},{key:"serialize",value:function(){return this._delegate.serialize()}},{key:"toString",value:function(){return this._delegate.toString()}},{key:"toGeoJSON",value:function(){return this._delegate.toGeoJSON()}},{key:"rotate",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this._delegate.rotate(t),this}},{key:"id",get:function(){return this._delegate.id},set:function(t){return this._delegate.id=t,this}},{key:"type",get:function(){return this._delegate.type}},{key:"isOverlay",get:function(){return this._delegate.isOverlay}},{key:"attr",get:function(){return this._delegate.attr},set:function(t){return this._delegate.attr=t,this}},{key:"options",get:function(){return this._delegate.options}},{key:"editing",get:function(){return this._delegate.editing}},{key:"dragging",get:function(){return this._delegate.dragging}},{key:"_map",get:function(){var t=this._delegate._map;return t=t&&t._api||t}}],[{key:"deserialize",value:function(t){return l.default.Overlay.Point.deserialize(t).toDelegate()}}]),e}(GL.Layer),l.default.Overlay.Point.prototype.toDelegate=function(){if(this._api)return this._api;var t=new GL.Point(this._latlng,this.options.icon,this.options);return t.id=this.id,t.attr=this.attr,t},GL.Point.type=l.default.Overlay.Point.type},function(t,e,n){"use strict";(function(t){function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=n(0),s=function(t){return t&&t.__esModule?t:{default:t}}(a);GL.Polygon=function(n){function a(n,o){e(this,a);var r=i(this,(a.__proto__||Object.getPrototypeOf(a)).call(this));if(Array.isArray(n)){var l=!t.Polyline._flat(n),u=l&&!t.Polyline._flat(n[0]);n=GL.LngLat.delegateToLngLats(n,u?2:l?1:0,!0)}return o=o&&o._delegate||o,r._delegate=new s.default.Overlay.Polygon(n,o),r._delegate._api=r,r.callInitHooks(),r}return o(a,n),r(a,[{key:"addTo",value:function(t){return t=t&&t._delegate||t,this._delegate.addTo(t),this}},{key:"remove",value:function(){return this._delegate.remove(),this}},{key:"clone",value:function(){return this._delegate.clone().toDelegate()}},{key:"isEmpty",value:function(){return this._delegate.isEmpty()}},{key:"getStyle",value:function(){return this._delegate.getStyle().toDelegate()}},{key:"getCenter",value:function(){return this._delegate.getCenter().toDelegate()}},{key:"getBounds",value:function(){return this._delegate.getBounds().toDelegate()}},{key:"getLngLats",value:function(){var e=this._delegate.getLngLats(),n=!t.Polyline._flat(e),i=n&&!t.Polyline._flat(e[0]);return GL.LngLat.lngLatsToDelegate(e,i?2:n?1:0)}},{key:"getRing",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.isMulti?this.getLngLats()[t][0]:this.getLngLats()[0]}},{key:"setStyle",value:function(t){return t=t&&t._delegate||t,this._delegate.setStyle(t),this}},{key:"setLngLats",value:function(e){var n=!t.Polyline._flat(e),i=n&&!t.Polyline._flat(e[0]);return e=GL.LngLat.delegateToLngLats(e,i?2:n?1:0,!0),this._delegate.setLngLats(e),this}},{key:"push",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t=t&&t._delegate||t,this._delegate.push(t,e),this}},{key:"addLngLat",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return t=t&&t._delegate||t,this._delegate.addLngLat(t,e,n),this}},{key:"removeLngLat",value:function(t,e){return this._delegate.removeLngLat(t,e),this}},{key:"redraw",value:function(){return this._delegate.redraw(),this}},{key:"contains",value:function(t){return t=t&&t._delegate||t,this._delegate.contains(t)}},{key:"highlight",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"#ff0000";return this._delegate.highlight(t),this}},{key:"clearHighlight",value:function(){return this._delegate.clearHighlight(),this}},{key:"serialize",value:function(){return this._delegate.serialize()}},{key:"toString",value:function(){return this._delegate.toString()}},{key:"toGeoJSON",value:function(){return this._delegate.toGeoJSON()}},{key:"closestLayerPoint",value:function(t){return t=t&&t._delegate||t,this._delegate.closestLayerPoint(t).toDelegate()}},{key:"getElement",value:function(){return this._delegate.getElement()}},{key:"hide",value:function(){return this._delegate.hide(),this}},{key:"show",value:function(){return this._delegate.show(),this}},{key:"visible",value:function(t){return this._delegate.visible(t),this}},{key:"bringToFront",value:function(){return this._delegate.bringToFront(),this}},{key:"bringToBack",value:function(){return this._delegate.bringToBack(),this}},{key:"intersects",value:function(){return this._delegate.intersects()}},{key:"newLatLngIntersects",value:function(t,e,n){return t=t&&t._delegate||t,this._delegate.newLatLngIntersects(t,e,n)}},{key:"newPointIntersects",value:function(t,e,n){return t=t&&t._delegate||t,this._delegate.newPointIntersects(t,e,n)}},{key:"id",get:function(){return this._delegate.id},set:function(t){return this._delegate.id=t,this}},{key:"type",get:function(){return this._delegate.type}},{key:"isOverlay",get:function(){return this._delegate.isOverlay}},{key:"attr",get:function(){return this._delegate.attr},set:function(t){return this._delegate.attr=t,this}},{key:"editing",get:function(){return this._delegate.editing}},{key:"_map",get:function(){var t=this._delegate._map;return t=t&&t._api||t}},{key:"isMulti",get:function(){return this._delegate.isMulti}}],[{key:"deserialize",value:function(t){return s.default.Overlay.Polygon.deserialize(t).toDelegate()}}]),a}(GL.Layer),s.default.Overlay.Polygon.prototype.toDelegate=function(){if(this._api)return this._api;var t=new GL.Polygon(this.getLngLats(),this.getStyle());return t.id=this.id,t.attr=this.attr,t},GL.Polygon.type=s.default.Overlay.Polygon.type}).call(e,n(1))},function(t,e,n){"use strict";(function(t){function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=n(0),s=function(t){return t&&t.__esModule?t:{default:t}}(a);GL.Polyline=function(n){function a(n,o){e(this,a);var r=i(this,(a.__proto__||Object.getPrototypeOf(a)).call(this));if(Array.isArray(n)){var l=!t.Polyline._flat(n);n=GL.LngLat.delegateToLngLats(n,l?1:0)}return o=o&&o._delegate||o,r._delegate=new s.default.Overlay.Polyline(n,o),r._delegate._api=r,r.callInitHooks(),r}return o(a,n),r(a,[{key:"addTo",value:function(t){return t=t&&t._delegate||t,this._delegate.addTo(t),this}},{key:"remove",value:function(){return this._delegate.remove(),this}},{key:"clone",value:function(){return this._delegate.clone().toDelegate()}},{key:"isEmpty",value:function(){return this._delegate.isEmpty()}},{key:"getStyle",value:function(){return this._delegate.getStyle().toDelegate()}},{key:"getCenter",value:function(){return this._delegate.getCenter().toDelegate()}},{key:"getBounds",value:function(){return this._delegate.getBounds().toDelegate()}},{key:"getLngLats",value:function(){var t=this._delegate.getLngLats();return GL.LngLat.lngLatsToDelegate(t,this.isMulti?1:0)}},{key:"getRing",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.isMulti?this.getLngLats()[t]:this.getLngLats()}},{key:"setStyle",value:function(t){return t=t&&t._delegate||t,this._delegate.setStyle(t),this}},{key:"setLngLats",value:function(e){var n=!t.Polyline._flat(e);return e=GL.LngLat.delegateToLngLats(e,n?1:0),this._delegate.setLngLats(e),this}},{key:"push",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t=t&&t._delegate||t,this._delegate.push(t,e),this}},{key:"addLngLat",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return t=t&&t._delegate||t,this._delegate.addLngLat(t,e,n),this}},{key:"removeLngLat",value:function(t,e){return this._delegate.removeLngLat(t,e),this}},{key:"redraw",value:function(){return this._delegate.redraw(),this}},{key:"contains",value:function(t){return t=t&&t._delegate||t,this._delegate.contains(t)}},{key:"highlight",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"#ff0000";return this._delegate.highlight(t),this}},{key:"clearHighlight",value:function(){return this._delegate.clearHighlight(),this}},{key:"serialize",value:function(){return this._delegate.serialize()}},{key:"toString",value:function(){return this._delegate.toString()}},{key:"toGeoJSON",value:function(){return this._delegate.toGeoJSON()}},{key:"closestLayerPoint",value:function(t){return t=t&&t._delegate||t,this._delegate.closestLayerPoint(t).toDelegate()}},{key:"getElement",value:function(){return this._delegate.getElement()}},{key:"hide",value:function(){return this._delegate.hide(),this}},{key:"show",value:function(){return this._delegate.show(),this}},{key:"visible",value:function(t){return this._delegate.visible(t),this}},{key:"bringToFront",value:function(){return this._delegate.bringToFront(),this}},{key:"bringToBack",value:function(){return this._delegate.bringToBack(),this}},{key:"intersects",value:function(){return this._delegate.intersects()}},{key:"newLatLngIntersects",value:function(t,e,n){return t=t&&t._delegate||t,this._delegate.newLatLngIntersects(t,e,n)}},{key:"newPointIntersects",value:function(t,e,n){return t=t&&t._delegate||t,this._delegate.newPointIntersects(t,e,n)}},{key:"id",get:function(){return this._delegate.id},set:function(t){return this._delegate.id=t,this}},{key:"type",get:function(){return this._delegate.type}},{key:"isOverlay",get:function(){return this._delegate.isOverlay}},{key:"attr",get:function(){return this._delegate.attr},set:function(t){return this._delegate.attr=t,this}},{key:"editing",get:function(){return this._delegate.editing}},{key:"_map",get:function(){var t=this._delegate._map;return t=t&&t._api||t}},{key:"isMulti",get:function(){return this._delegate.isMulti}}],[{key:"deserialize",value:function(t){return s.default.Overlay.Polyline.deserialize(t).toDelegate()}}]),a}(GL.Layer),s.default.Overlay.Polyline.prototype.toDelegate=function(){if(this._api)return this._api;var t=new GL.Polyline(this.getLngLats(),this.getStyle());return t.id=this.id,t.attr=this.attr,t},GL.Polyline.type=s.default.Overlay.Polyline.type}).call(e,n(1))},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=n(0),a=function(t){return t&&t.__esModule?t:{default:t}}(r);GL.Icon.Div=function(){function t(e,n,o,r){i(this,t),e=e&&e._delegate||e,this._delegate=new a.default.Icon.Div(e,n,o,r),this._delegate._api=this}return o(t,[{key:"createIcon",value:function(t){return this._delegate.createIcon(t)}},{key:"createShadow",value:function(t){return this._delegate.createShadow(t)}},{key:"clone",value:function(){return this._delegate.clone().toDelegate()}},{key:"toJSON",value:function(){return this._delegate.toJSON()}},{key:"options",get:function(){return this._delegate.options}}]),t}(),a.default.Icon.Div.prototype.toDelegate=function(){return this._api?this._api:new GL.Icon.Div(this.options)}},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=n(0),a=function(t){return t&&t.__esModule?t:{default:t}}(r);GL.Icon.Smart=function(){function t(e,n){i(this,t),this._delegate=new a.default.Icon.Smart(e,n),this._delegate._api=this}return o(t,[{key:"createIcon",value:function(t){return this._delegate.createIcon(t)}},{key:"createShadow",value:function(t){return this._delegate.createShadow(t)}},{key:"clone",value:function(){return this._delegate.clone().toDelegate()}},{key:"toJSON",value:function(){return this._delegate.toJSON()}},{key:"options",get:function(){return this._delegate.options}}]),t}(),a.default.Icon.Smart.prototype.toDelegate=function(){return this._api?this._api:new GL.Icon.Smart(this.options)}},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=n(0),a=function(t){return t&&t.__esModule?t:{default:t}}(r);GL.Icon.Stat=function(){function t(e,n,o,r,s){i(this,t),this._delegate=new a.default.Icon.Stat(e,n,o,r,s),this.count=e,this.data=n,this.style=o,this.size=r,this._delegate._api=this}return o(t,[{key:"createIcon",value:function(t){return this._delegate.createIcon(t)}},{key:"createShadow",value:function(t){return this._delegate.createShadow(t)}},{key:"clone",value:function(){return this._delegate.clone().toDelegate()}},{key:"toJSON",value:function(){return this._delegate.toJSON()}},{key:"options",get:function(){return this._delegate.options}}]),t}(),a.default.Icon.Stat.prototype.toDelegate=function(){return this._api?this._api:new GL.Icon.Stat(this.count,this.data,this.style,this.size,this.options)}},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=n(0),a=function(t){return t&&t.__esModule?t:{default:t}}(r);GL.Icon=function(){function t(e){i(this,t),this._delegate=new a.default.Icon(e),this._delegate._api=this}return o(t,[{key:"createIcon",value:function(t){return this._delegate.createIcon(t)}},{key:"createShadow",value:function(t){return this._delegate.createShadow(t)}},{key:"clone",value:function(){return this._delegate.clone().toDelegate()}},{key:"toJSON",value:function(){return this._delegate.toJSON()}},{key:"options",get:function(){return this._delegate.options}}]),t}(),a.default.Icon.prototype.toDelegate=function(){return this._api?this._api:new GL.Icon(this.options)}},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=n(0),a=function(t){return t&&t.__esModule?t:{default:t}}(r);GL.Style.Fill=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];i(this,t),this._delegate=new a.default.Style.Fill(e,n),this._delegate._api=this}return o(t,[{key:"clone",value:function(){return this._delegate.clone().toDelegate()}},{key:"toJSON",value:function(){return this._delegate.toJSON()}},{key:"options",get:function(){return this._delegate.options}},{key:"isDash",get:function(){return this._delegate.isDash}}]),t}(),a.default.Style.Fill.prototype.toDelegate=function(){return this._api?this._api:new GL.Style.Fill(this.options,this.isDash)}},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=n(0),a=function(t){return t&&t.__esModule?t:{default:t}}(r);GL.Style=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];i(this,t),this._delegate=new a.default.Style(e,n),this._delegate._api=this}return o(t,[{key:"clone",value:function(){return this._delegate.clone().toDelegate()}},{key:"toJSON",value:function(){return this._delegate.toJSON()}},{key:"options",get:function(){return this._delegate.options}},{key:"isDash",get:function(){return this._delegate.isDash}}]),t}(),a.default.Style.prototype.toDelegate=function(){return this._api?this._api:new GL.Style(this.options,this.isDash)}},function(t,e,n){"use strict";n(55),n(52),n(53),n(54),n(57),n(56)},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=n(0),l=function(t){return t&&t.__esModule?t:{default:t}}(s);GL.Label=function(t){function e(t,n){i(this,e);var r=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n=n&&n._delegate||n,r._delegate=new l.default.Label(t,n),r._delegate._api=r,r.callInitHooks(),r}return r(e,t),a(e,[{key:"setLngLat",value:function(t){return t=t&&t._delegate||t,this._delegate.setLngLat(t),this}},{key:"getLngLat",value:function(){return this._delegate.getLngLat()}},{key:"getContent",value:function(){return this._delegate.getContent()}},{key:"setContent",value:function(t){return this._delegate.setContent(t),this}},{key:"getElement",value:function(){return this._delegate.getElement()}},{key:"getEvents",value:function(){return this._delegate.getEvents()}},{key:"isOpen",value:function(){return this._delegate.isOpen()}},{key:"bringToFront",value:function(){return this._delegate.bringToFront(),this}},{key:"bringToBack",value:function(){return this._delegate.bringToBack(),this}}]),e}(GL.DivOverlay),l.default.Label.prototype.toDelegate=function(){return this._api?this._api:new GL.Label(this.options,this._source)},GL.Layer.include({bindLabel:function(t,e){return t=t&&t._delegate||t,this._delegate.bindLabel(t,e),this},unbindLabel:function(){return this._delegate.unbindLabel(),this},openLabel:function(){return this._delegate.openLabel(),this},closeLabel:function(){return this._delegate.closeLabel(),this},toggleLabel:function(){return this._delegate.toggleLabel(),this},isLabelOpen:function(){return this._delegate.isLabelOpen()},getLabel:function(){var t=this._delegate.getLabel();return t&&t._api||t},getLabelContent:function(){return this._delegate.getLabelContent()},setLabelContent:function(t){return t=t&&t._delegate||t,this._delegate.setLabelContent(t),this}}),GL.Map.include({addLabel:function(t,e,n){return t=t&&t._delegate||t,e=e&&e._delegate||e,this._delegate.addLabel(t,e,n),this},removeLabel:function(t){return t=t&&t._delegate||t,this._delegate.removeLabel(t),this},openLabels:function(){return this._delegate.openLabels(),this},closeLabels:function(){return this._delegate.closeLabels(),this}})},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=n(0),l=function(t){return t&&t.__esModule?t:{default:t}}(s);GL.Popup=function(t){function e(t,n){i(this,e);var r=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n=n&&n._delegate||n,r._delegate=new l.default.Popup(t,n),r._delegate._api=r,r.callInitHooks(),r}return r(e,t),a(e,[{key:"setAttachmentContent",value:function(t){return this._delegate.setAttachmentContent(t),this}},{key:"getAttachmentContent",value:function(){return this._delegate.getAttachmentContent()}},{key:"setAttachmentOptions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._delegate.setAttachmentOptions(t),this}},{key:"openAttachment",value:function(){return this._delegate.openAttachment(),this}},{key:"closeAttachment",value:function(){return this._delegate.closeAttachment(),this}},{key:"isAttachmentOpen",value:function(){return this._delegate.isAttachmentOpen()}},{key:"setLngLat",value:function(t){return t=t&&t._delegate||t,this._delegate.setLngLat(t),this}},{key:"getLngLat",value:function(){return this._delegate.getLngLat()}},{key:"getContent",value:function(){return this._delegate.getContent()}},{key:"setContent",value:function(t){return this._delegate.setContent(t),this}},{key:"getElement",value:function(){return this._delegate.getElement()}},{key:"getEvents",value:function(){return this._delegate.getEvents()}},{key:"isOpen",value:function(){return this._delegate.isOpen()}},{key:"bringToFront",value:function(){return this._delegate.bringToFront(),this}},{key:"bringToBack",value:function(){return this._delegate.bringToBack(),this}},{key:"openOn",value:function(t){return t=t&&t._delegate||t,this._delegate.openOn(t),this}},{key:"update",value:function(){return this._delegate.update(),this}}]),e}(GL.DivOverlay),l.default.Popup.prototype.toDelegate=function(){return this._api?this._api:new GL.Popup(this.options,this._source)},GL.Map.include({openPopup:function(t,e,n){return t=t&&t._delegate||t,e=e&&e._delegate||e,this._delegate.openPopup(t,e,n),this},closePopup:function(t){return t=t&&t._delegate||t,this._delegate.closePopup(t),this}}),GL.Layer.include({bindPopup:function(t,e){return t=t&&t._delegate||t,this._delegate.bindPopup(t,e),this},unbindPopup:function(){return this._delegate.unbindPopup(),this},openPopup:function(t,e){return t=t&&t._delegate||t,e=e&&e._delegate||e,this._delegate.openPopup(t,e),this},closePopup:function(){return this._delegate.closePopup(),this},togglePopup:function(t){return t=t&&t._delegate||t,this._delegate.togglePopup(t),this},isPopupOpen:function(){return this._delegate.isPopupOpen()},setPopupContent:function(t){return t=t&&t._delegate||t,this._delegate.setPopupContent(t),this},getPopup:function(){var t=this._delegate.getPopup();return t&&t._api||t}})},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=n(0),l=function(t){return t&&t.__esModule?t:{default:t}}(s);GL.Tooltip=function(t){function e(t,n){i(this,e);var r=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n=n&&n._delegate||n,r._delegate=new l.default.Tooltip(t,n),r._delegate._api=r,r.callInitHooks(),r}return r(e,t),a(e,[{key:"setLngLat",value:function(t){return t=t&&t._delegate||t,this._delegate.setLngLat(t),this}},{key:"getLngLat",value:function(){return this._delegate.getLngLat()}},{key:"getContent",value:function(){return this._delegate.getContent()}},{key:"setContent",value:function(t){return this._delegate.setContent(t),this}},{key:"getElement",value:function(){return this._delegate.getElement()}},{key:"getEvents",value:function(){return this._delegate.getEvents()}},{key:"isOpen",value:function(){return this._delegate.isOpen()}},{key:"bringToFront",value:function(){return this._delegate.bringToFront(),this}},{key:"bringToBack",value:function(){return this._delegate.bringToBack(),this}}]),e}(GL.DivOverlay),l.default.Tooltip.prototype.toDelegate=function(){return this._api?this._api:new GL.Tooltip(this.options,this._source)},GL.Map.include({openTooltip:function(t,e,n){return t=t&&t._delegate||t,e=e&&e._delegate||e,this._delegate.openTooltip(t,e,n),this},closeTooltip:function(t){return t=t&&t._delegate||t,this._delegate.closeTooltip(t),this}}),GL.Layer.include({bindTooltip:function(t,e){return t=t&&t._delegate||t,this._delegate.bindTooltip(t,e),this},unbindTooltip:function(){return this._delegate.unbindTooltip(),this},openTooltip:function(t,e){return t=t&&t._delegate||t,e=e&&e._delegate||e,this._delegate.openTooltip(t,e),this},closeTooltip:function(){return this._delegate.closeTooltip(),this},toggleTooltip:function(t){return t=t&&t._delegate||t,this._delegate.toggleTooltip(t),this},isTooltipOpen:function(){return this._delegate.isTooltipOpen()},setTooltipContent:function(t){return t=t&&t._delegate||t,this._delegate.setTooltipContent(t),this},getTooltip:function(){var t=this._delegate.getTooltip();return t&&t._api||t}})},function(t,e,n){"use strict";n(59),n(60),n(61)},function(t,e,n){"use strict";GL.ConfigBuilder={build:function(t){var e=GL.Cache.getConfig();if(!e)return{};if(!e.map||!e.map[t])return{};var n=e.map[t],i=n.view,o=n.crs,r={};return i&&Object.keys(i)&&(r.view=i),o&&o.origin&&o.resolutions&&o.resolutions.length&&(r.crs=new GL.CRS.EPSG4326(o.origin,o.resolutions)),e.callback&&(r.callback=new Function(e.callback+"();")),r}}},function(t,e,n){"use strict";n(68),n(67),n(66),n(65)},function(t,e,n){"use strict";(function(t,e){var i=n(0);(function(t){return t&&t.__esModule?t:{default:t}})(i).default.CRS.BAIDU=new t.CRS("EPSG:3395","+proj=merc +lon_0=0 +k=1 +x_0=140 +y_0=-250 +datum=WGS84 +units=m +no_defs",{resolutions:function(){var t=[];t[0]=Math.pow(2,18);for(var e=1;e<19;e++)t[e]=Math.pow(2,18-e);return t}(),origin:[0,0],bounds:e.bounds([20037508.342789244,0],[0,20037508.342789244])})}).call(e,n(23),n(1))},function(t,e,n){"use strict";(function(t){var e=n(0);(function(t){return t&&t.__esModule?t:{default:t}})(e).default.CRS.EPSG3857=t.extend({},t.CRS.EPSG3857)}).call(e,n(1))},function(t,e,n){"use strict";(function(t){function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var r=n(0),a=function(t){return t&&t.__esModule?t:{default:t}}(r);a.default.CRS.EPSG4326=function(n){function r(n,o){e(this,r);var a=i(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,n,o));return a.code="EPSG:4326",a.projection=t.Projection.LonLat,a.transformation=new t.Transformation(1/180,1,-1/180,.5),a.origin&&(a.transformation=new t.Transformation(1,-a.origin[0],-1,a.origin[1])),a}return o(r,n),r}(a.default.CRS)}).call(e,n(1))},function(t,e,n){"use strict";(function(t){var e=function(){function t(t,e){var n=[],i=!0,o=!1,r=void 0;try{for(var a,s=t[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);i=!0);}catch(t){o=!0,r=t}finally{try{!i&&s.return&&s.return()}finally{if(o)throw r}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i=n(0);(function(t){return t&&t.__esModule?t:{default:t}})(i).default.CRS=t.Class.extend({includes:t.CRS,initialize:function(n,i){var o=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=n.split(","),a=e(r,2),s=a[0],l=a[1];if(this.origin=[+s,+l],this.resolutions=i,this.R=t.CRS.Earth.R,this.distance=t.CRS.Earth.distance,this.infinite=o,this.resolutions){this.scales=[];for(var u=this.resolutions.length-1;u>=0;u--)this.resolutions[u]&&(this.scales[u]=1/this.resolutions[u])}},scale:function(t){var e=Math.floor(t),n=void 0,i=void 0,o=void 0,r=void 0;return t===e?this.scales[t]:(n=this.scales[e],i=this.scales[e+1],o=i-n,r=t-e,n+o*r)},zoom:function(t){if(t<Math.min.apply(this.scales,this.scales))return-1/0;if(t>Math.max.apply(this.scales,this.scales))return 1/0;var e=this._closestElement(this.scales,t),n=this.scales.indexOf(e),i=void 0,o=void 0,r=void 0;return t===e?n:(o=n+1,void 0===(i=this.scales[o])?1/0:(r=i-e,(t-e)/r+n))},_closestElement:function(t,e){for(var n=void 0,i=t.length;i--;)t[i]<=e&&(void 0===n||n<t[i])&&(n=t[i]);return n}})}).call(e,n(1))},function(t,e,n){"use strict";n(83),n(70),n(76),n(82)},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=n(0),s=i(a);n(159);var l=n(73),u=i(l),h=n(72),c=i(h),f=n(9),p=i(f),d=n(74),_=i(d),y=n(75),g=i(y),m=n(71),v=i(m);s.default.Draw=s.default.Draw||{},s.default.Draw.Local=v.default,s.default.DrawTool=function(){function t(){o(this,t)}return r(t,null,[{key:"activate",value:function(t,e,n,i,o){switch(s.default.DrawTool._handler&&s.default.DrawTool.deactivate(),e){case s.default.Overlay.Point.type:s.default.DrawTool._handler=new u.default(t,n,i,o);break;case s.default.Overlay.Circle.type:s.default.DrawTool._handler=new c.default(t,n,i,o);break;case s.default.Overlay.Polyline.type:s.default.DrawTool._handler=new p.default(t,n,i,o);break;case s.default.Overlay.Polygon.type:s.default.DrawTool._handler=new _.default(t,n,i,o);break;case s.default.Overlay.Rectangle.type:s.default.DrawTool._handler=new g.default(t,n,i,o);break;default:throw new TypeError("unknown type")}return s.default.DrawTool._handler.enable(),s.default.DrawTool._handler}},{key:"deactivate",value:function(){s.default.DrawTool._handler&&s.default.DrawTool._handler.disable()}}]),t}()},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={circle:{tooltip:{start:""},radius:""},point:{tooltip:{start:""}},polygon:{tooltip:{start:"",cont:"",end:""}},polyline:{error:"<strong>:</strong> ",tooltip:{start:"",cont:"",end:""}},rectangle:{tooltip:{start:""}},simpleshape:{tooltip:{end:""}}}},function(t,e,n){"use strict";(function(t){function i(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),l=function t(e,n,i){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,n);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,n,i)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(i)},u=n(10),h=i(u),c=n(0),f=i(c),p={style:new f.default.Style.Fill({color:"#3388ff",weight:4,opacity:.5,fillColor:null,fillOpacity:.2}),showRadius:!0,showArea:!0},d=function(e){function n(e,i,a,s){o(this,n),s=t.extend({},p,s);var l=r(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e,i,a,s));return l.type=f.default.Overlay.Circle.type,l._initialLabelText=f.default.Draw.Local.circle.tooltip.start,l}return a(n,e),s(n,[{key:"_drawShape",value:function(t){this._shape?this._shape.setRadius(this._startLngLat.distanceTo(t)):(this._shape=new f.default.Overlay.Circle(this._startLngLat,this._startLngLat.distanceTo(t),new f.default.Style.Fill(this.options.shapeOptions)),this._layer.addOverlay(this._shape))}},{key:"_fireCreatedEvent",value:function(){var t=new f.default.Overlay.Circle(this._startLngLat,this._shape.getRadius(),new f.default.Style.Fill(this.options.shapeOptions));l(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"_fireCreatedEvent",this).call(this,t)}},{key:"_onMouseMove",value:function(t){var e=t.latlng,n=this.options.showRadius,i=this.options.showArea,o=void 0,r=void 0;if(this._tooltip.updatePosition(e),this._isDrawing){this._drawShape(e),o=this._shape.getRadius(),r=Math.PI*Math.pow(o,2);var a="";n&&(a=f.default.Draw.Local.circle.radius+": "+f.default.Help.Geometry.readableDistance(o)),i&&(a+=","+f.default.Help.Geometry.readableArea(r)),this._tooltip.updateContent({text:this._endLabelText,subtext:a})}}}]),n}(h.default);e.default=d}).call(e,n(1))},function(t,e,n){"use strict";(function(t){function i(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),l=function t(e,n,i){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,n);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,n,i)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(i)},u=n(3),h=i(u),c=n(0),f=i(c),p={icon:null,repeatMode:!1,zIndexOffset:2e3},d=function(e){function n(e,i,a,s){o(this,n),s=t.extend({},p,s);var l=r(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e,i,a,s));return l.type=f.default.Overlay.Point,l}return a(n,e),s(n,[{key:"addHooks",value:function(){l(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"addHooks",this).call(this),this._map&&(this._tooltip&&this._tooltip.updateContent({text:f.default.Draw.Local.point.tooltip.start}),this._mouseMarker||(this._mouseMarker=new f.default.Overlay.Point(this._map.getCenter(),new f.default.Icon.Div("","gaea-mouse-marker",[0,0],{iconAnchor:[20,20],iconSize:[40,40]}),{opacity:0,zIndexOffset:this.options.zIndexOffset})),this._mouseMarker.on("click",this._onClick,this),this._layer.addOverlay(this._mouseMarker),this._map.on("mousemove",this._onMouseMove,this),this._map.on("click",this._onTouch,this))}},{key:"removeHooks",value:function(){l(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"removeHooks",this).call(this),this._map&&(this._marker&&(this._marker.off("click",this._onClick,this),this._map.off("click",this._onClick,this).off("click",this._onTouch,this),delete this._marker),this._mouseMarker.off("click",this._onClick,this),delete this._mouseMarker,this._map.off("mousemove",this._onMouseMove,this))}},{key:"_onMouseMove",value:function(t){var e=t.latlng;this._tooltip&&this._tooltip.updatePosition(e),this._mouseMarker.setLngLat(e),this._marker?this._marker.setLngLat(e):(this._marker=new f.default.Overlay.Point(e,this.options.icon),this._marker.on("click",this._onClick,this),this._map.on("click",this._onClick,this),this._layer.addOverlay(this._marker))}},{key:"_onClick",value:function(){this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable()}},{key:"_onTouch",value:function(t){this._onMouseMove(t),this._onClick()}},{key:"_fireCreatedEvent",value:function(){var t=new f.default.Overlay.Point(this._marker.getLngLat(),this.options.icon);l(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"_fireCreatedEvent",this).call(this,t)}}]),n}(h.default);e.default=d}).call(e,n(1))},function(t,e,n){"use strict";(function(t){function i(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),l=function t(e,n,i){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,n);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,n,i)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(i)},u=n(9),h=i(u),c=n(0),f=i(c),p={showArea:!0,allowIntersection:!0,style:new f.default.Style.Fill({color:"#3388ff",weight:4,opacity:.5,fillColor:null,fillOpacity:.2})},d=function(e){function n(e,i,a,s){o(this,n),s=t.extend({},p,s);var l=r(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e,i,a,s));return l.type=f.default.Overlay.Polygon.type,l.Poly=f.default.Overlay.Polygon,l}return a(n,e),s(n,[{key:"_updateFinishHandler",value:function(){var t=this._markers.length;1===t&&this._markers[0].on("click",this._finishShape,this),t>2&&(this._markers[t-1].on("dblclick",this._finishShape,this),t>3&&this._markers[t-2].off("dblclick",this._finishShape,this))}},{key:"_getTooltipText",value:function(){var t=void 0,e=void 0;return 0===this._markers.length?t=f.default.Draw.Local.polygon.tooltip.start:this._markers.length<2?t=f.default.Draw.Local.polygon.tooltip.cont:(t=f.default.Draw.Local.polygon.tooltip.end,e=this._getMeasurementString()),{text:t,subtext:e}}},{key:"_getMeasurementString",value:function(){var t=f.default.Help.Geometry.area(this._poly);return f.default.Help.Geometry.readableArea(t)}},{key:"_shapeIsValid",value:function(){return this._markers.length>=3}},{key:"_cleanUpShape",value:function(){var t=this._markers.length;t>0&&(this._markers[0].off("click",this._finishShape,this),t>2&&this._markers[t-1].off("dblclick",this._finishShape,this))}},{key:"_showErrorTooltip",value:function(){this._errorShown=!0,this._tooltip.showAsError().updateContent({text:this.options.drawError.message}),this._poly.setStyle(new f.default.Style.Fill(t.extend({},this.options.style.options,this.options.drawError))),this._clearHideErrorTimeout(),this._hideErrorTimeout=setTimeout(t.Util.bind(this._hideErrorTooltip,this),this.options.drawError.timeout)}},{key:"_fireCreatedEvent",value:function(){var t=new f.default.Overlay.Polygon(this._poly.getLngLats(),this.options.style);l(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"_fireCreatedEvent",this).call(this,t)}}]),n}(h.default);e.default=d}).call(e,n(1))},function(t,e,n){"use strict";(function(t){function i(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),l=function t(e,n,i){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,n);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,n,i)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(i)},u=n(10),h=i(u),c=n(0),f=i(c),p={style:new f.default.Style.Fill({color:"#3388ff",weight:4,opacity:.5,fillColor:null,fillOpacity:.2}),showArea:!0},d=function(e){function n(e,i,a,s){o(this,n),s=t.extend({},p,s);var l=r(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e,i,a,s));return l.type=f.default.Overlay.Rectangle.type,l._initialLabelText=f.default.Draw.Local.rectangle.tooltip.start,l}return a(n,e),s(n,[{key:"_drawShape",value:function(t){this._shape?this._shape.setBounds(new f.default.Envelope(this._startLngLat,t)):(this._shape=new f.default.Overlay.Rectangle(new f.default.Envelope(this._startLngLat,t),this.options.style),this._layer.addOverlay(this._shape))}},{key:"_fireCreatedEvent",value:function(){var t=new f.default.Overlay.Rectangle(this._shape.getBounds(),this.options.style);l(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"_fireCreatedEvent",this).call(this,t)}},{key:"_getTooltipText",value:function(){var t=l(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"_getTooltipText",this).call(this),e=this._shape,i=this.options.showArea,o=void 0,r=void 0,a=void 0;return e&&(o=this._shape._defaultShape?this._shape._defaultShape():this._shape.getLngLats(),r=f.default.Help.Geometry.area(o),a=i?f.default.Help.Geometry.readableArea(r):""),{text:t.text,subtext:a}}}]),n}(h.default);e.default=d}).call(e,n(1))},function(t,e,n){"use strict";(function(t){function e(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=n(0),a=e(r);n(160);var s=n(79),l=e(s),u=n(81),h=e(u),c=n(80),f=e(c),p=n(78),d=e(p),_=n(77),y=e(_);a.default.Edit=a.default.Edit||{},a.default.Edit.Local=y.default,a.default.EditTool=function(){function e(){i(this,e)}return o(e,null,[{key:"activate",value:function(e,n){if(a.default.EditTool._handler&&a.default.EditTool.deactivate(),e.editing)t.setOptions(e.editing,t.extend({},e.editing.options,n)),a.default.EditTool._handler=e.editing;else switch(e.type){case a.default.Overlay.Point.type:a.default.EditTool._handler=new l.default(e,n);break;case a.default.Overlay.Circle.type:a.default.EditTool._handler=new d.default(e,n);break;case a.default.Overlay.Polyline.type:case a.default.Overlay.Polygon.type:a.default.EditTool._handler=new f.default(e,n);break;case a.default.Overlay.Rectangle.type:a.default.EditTool._handler=new h.default(e,n);break;default:throw new Error("edit shape: unknown type")}return a.default.EditTool._handler.enable(),a.default.EditTool._handler}},{key:"deactivate",value:function(){a.default.EditTool._handler&&(a.default.EditTool._handler.disable(),delete a.default.EditTool._handler)}}]),e}()}).call(e,n(1))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={subtext:"",Point:{text:""},Circle:{text:""},Polygon:{text:""},Polyline:{text:""},Rectangle:{text:""}}},function(t,e,n){"use strict";(function(t){function i(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),l=function t(e,n,i){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,n);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,n,i)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(i)},u=n(11),h=i(u),c=n(0),f=i(c),p={moveIcon:new f.default.Icon.Div("","gaea-draw-vertex-icon gaea-edit-move",null,{iconSize:[12,12]}),resizeIcon:new f.default.Icon.Div("","gaea-draw-vertex-icon gaea-edit-resize",null,{iconSize:[12,12]}),pathOptions:{fillColor:"#fe57a1",fillOpacity:.1,maintainColor:!1},showRadius:!0,showArea:!0},d=function(e){function n(e,i){o(this,n),i=t.extend({},p,i);var a=r(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e,i)),s=t.extend({},p.pathOptions,i.pathOptions||{});return s.maintainColor&&(s.color=style.options.color,s.fillColor=style.options.fillColor),a._shape.options.original=t.extend({},a._shape.options),a._shape.options.editing=s,a}return a(n,e),s(n,[{key:"_createMoveMarker",value:function(){var t=this._shape.getCenter();this._moveMarker=this._createMarker(t,this.options.moveIcon)}},{key:"_createResizeMarker",value:function(){var t=this._shape.getCenter(),e=this._getResizeMarkerPoint(t);this._resizeMarkers=[],this._resizeMarkers.push(this._createMarker(e,this.options.resizeIcon))}},{key:"_getResizeMarkerPoint",value:function(e){var n=e.lng,i=e.lat,o=this._shape._map,r=Math.PI/180,a=this._shape._mRadius/t.CRS.Earth.R/r,s=o.project([n,i+a]),l=o.project([n,i-a]),u=s.add(l).divideBy(2),h=o.unproject(u).lat,c=Math.acos((Math.cos(a*r)-Math.sin(i*r)*Math.sin(h*r))/(Math.cos(i*r)*Math.cos(h*r)))/r;return(isNaN(c)||0===c)&&(c=a/Math.cos(Math.PI/180*i)),this._point=u.subtract(o.getPixelOrigin()),new f.default.LngLat(n+c,h)}},{key:"_move",value:function(t){var e=this._getResizeMarkerPoint(t);this._resizeMarkers[0].setLngLat(e),this._shape.setCenter(t),this._shape.fire("editmove")}},{key:"_resize",value:function(t){var e=this._moveMarker.getLngLat(),n=e.distanceTo(t);this._shape.setRadius(n),this._shape.fire("editresize");var i=this.options.showRadius,o=this.options.showArea,r=void 0;r=Math.PI*Math.pow(n,2);var a="";i&&(a=f.default.Draw.Local.circle.radius+": "+f.default.Help.Geometry.readableDistance(n)),o&&(a+=","+f.default.Help.Geometry.readableArea(r)),this._updateTooltipContent(this._originText,a),this.options.showScale&&this._updateScale(t)}},{key:"_updateScale",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(0===e){var n=this._moveMarker.getLngLat(),i=n.distanceTo(t),o=this._shape._layer;if(!this._scale){var r=new f.default.Style({weight:2,opacity:.5,color:"#000"},!0);r.options.dashArray="8, 12",this._scale=new f.default.Overlay.Polyline([t.toString(),n.toString()],r);var a=new f.default.Label({offset:[0,-10],className:"edit-circle-scale-label"});this._scale.bindLabel(a)}o.hasOverlay(this._scale)||o.addOverlay(this._scale),this._scale.setLngLats([t.toString(),n.toString()]),this._scale.setLabelContent(f.default.Help.Geometry.readableDistance(i)),this._scale._label.setLngLat(this._scale.getCenter())}else if(1===e){var s=this._shape._layer;s&&this._scale&&s.removeOverlay(this._scale)}else this._scale=null}},{key:"_fireEdit",value:function(){this.options.showScale&&this._updateScale(null,1),l(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"_fireEdit",this).call(this)}},{key:"removeHooks",value:function(){this.options.showScale&&this._updateScale(null,2),l(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"removeHooks",this).call(this)}}]),n}(h.default);e.default=d,f.default.Overlay.Circle.addInitHook(function(){this.on("add",function(){d&&(this.editing=new d(this),this.options.editable&&this.editing.enable()),this.editing&&this.editing.enabled()&&this.editing.addHooks()}),this.on("remove",function(){this.editing&&this.editing.enabled()&&this.editing.removeHooks()})})}).call(e,n(1))},function(t,e,n){"use strict";(function(t){function i(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),l=function t(e,n,i){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,n);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,n,i)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(i)},u=n(4),h=i(u),c=n(0),f=i(c),p=function(e){function n(t,e){o(this,n);var i=r(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,t,e));return i._marker=i._shape,i}return a(n,e),s(n,[{key:"addHooks",value:function(){l(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"addHooks",this).call(this);var t=this._marker;t.dragging.enable(),t.on("dragend",this._onDragEnd,t),this._toggleMarkerHighlight()}},{key:"removeHooks",value:function(){l(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"removeHooks",this).call(this);var t=this._marker;t.dragging.disable(),t.off("dragend",this._onDragEnd,t),this._toggleMarkerHighlight()}},{key:"_onDragEnd",value:function(t){var e=t.target;e.edited=!0,e.fire("editmove")}},{key:"_toggleMarkerHighlight",value:function(){var e=this._marker._iconWrap||this._marker._icon;e&&(e.style.display="none",t.DomUtil.hasClass(e,"gaea-edit-marker-selected")?(t.DomUtil.removeClass(e,"gaea-edit-marker-selected"),this._offsetMarker(e,-4)):(t.DomUtil.addClass(e,"gaea-edit-marker-selected"),this._offsetMarker(e,4)),e.style.display="")}},{key:"_offsetMarker",value:function(t,e){var n=parseInt(t.style.marginTop,10)-e,i=parseInt(t.style.marginLeft,10)-e;t.style.marginTop=n+"px",t.style.marginLeft=i+"px"}}]),n}(h.default);e.default=p,f.default.Overlay.Point.addInitHook(function(){this.on("add",function(){p&&(this.editing=new p(this),this.options.editable&&this.editing.enable()),this.editing&&this.editing.enabled()&&this.editing.addHooks()}),this.on("remove",function(){this.editing&&this.editing.enabled()&&this.editing.removeHooks()})})}).call(e,n(1))},function(t,e,n){"use strict";(function(t){function i(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),l=function t(e,n,i){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,n);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,n,i)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(i)},u=n(4),h=i(u),c=n(0),f=i(c),p=function(t){function e(t,n){o(this,e);var i=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n));return i._poly=i._shape,i._poly.on("revert-edited",i._updateLatLngs,i),i}return a(e,t),s(e,[{key:"_defaultShape",value:function(){return this._poly._defaultShape()}},{key:"_eachVertexHandler",value:function(t){for(var e=0;e<this._verticesHandlers.length;e++)t(this._verticesHandlers[e])}},{key:"addHooks",value:function(){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"addHooks",this).call(this),this.latlngs=[this._poly._latlngs],this._poly._holes&&(this.latlngs=this.latlngs.concat(this._poly._holes)),this._initHandlers(),this._eachVertexHandler(function(t){t.addHooks()})}},{key:"removeHooks",value:function(){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"removeHooks",this).call(this),this._eachVertexHandler(function(t){t.removeHooks()})}},{key:"updateMarkers",value:function(){this._eachVertexHandler(function(t){t.updateMarkers()})}},{key:"_initHandlers",value:function(){this._verticesHandlers=[];for(var t=0;t<this.latlngs.length;t++)this._verticesHandlers.push(new _(this._poly,this.latlngs[t],this.options))}},{key:"_updateLatLngs",value:function(t){this.latlngs=[t.layer._latlngs],t.layer._holes&&(this.latlngs=this.latlngs.concat(t.layer._holes))}}]),e}(h.default),d={allowIntersection:!0,icon:new f.default.Icon.Div("","gaea-draw-vertex-icon",null,{iconSize:[12,12]}),drawError:{color:"#b00b00",timeout:2500},pathOptions:{fillColor:"#fe57a1",fillOpacity:.1,maintainColor:!1},showArea:!0,showLength:!0},_=function(e){function n(e,i,a){o(this,n),a&&a.drawError&&(a.drawError=t.extend({},d.drawError,a.drawError)),a=t.extend({},d,a);var s=r(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e,a));s._poly=s._shape,s._latlngs=i,t.setOptions(s,a);var l=t.extend({},d.pathOptions,a.pathOptions||{});return l.maintainColor&&(l.color=s._poly.options.color,l.fillColor=s._poly.options.fillColor),s._poly.options.original=t.extend({},s._poly.options),s._poly.options.editing=l,s}return a(n,e),s(n,[{key:"_defaultShape",value:function(){return f.default.Help.Geometry.isFlat(this._latlngs)?this._latlngs:this._latlngs[0]}},{key:"addHooks",value:function(){var t=this._poly;t=t&&t._delegate||t;var e=new f.default.Style.Fill(t.options.editing);t instanceof f.default.Overlay.Polygon||(t.options.fill=!1,t.options.editing&&(t.options.editing.fill=!1),e=new f.default.Style(t.options.editing)),t.setStyle(e),t._map&&(this._map=t._map,this._vectorLayer||this._initMarkers(),t._map.addLayer(this._vectorLayer))}},{key:"removeHooks",value:function(){var t=this._poly;t.setStyle(new f.default.Style.Fill(t.options.original)),t._map&&this._vectorLayer&&(this._vectorLayer.clear(),t._map.removeLayer(this._vectorLayer),this._vectorLayer=null,this._markers=[])}},{key:"updateMarkers",value:function(){this._vectorLayer.clear(),this._initMarkers()}},{key:"_initMarkers",value:function(){if(!this._vectorLayer){var t=GL.H.uuid("edit");this._vectorLayer=new f.default.VectorLayer(t)}this._markers=[];var e=this._defaultShape(),n=void 0,i=void 0,o=void 0,r=void 0;for(n=0,o=e.length;n<o;n++)r=this._createMarker(e[n],n),r.on("click",this._onMarkerClick,this),this._markers.push(r);var a=void 0,s=void 0;for(n=0,i=o-1;n<o;i=n++)0===n&&this._poly.type!==f.default.Overlay.Polygon.type||(a=this._markers[i],s=this._markers[n],this._createMiddleMarker(a,s),this._updatePrevNext(a,s))}},{key:"_createMarker",value:function(t,e){var n=new f.default.Overlay.Point(t,this.options.icon,{draggable:!0});return n._origLatLng=t,n._index=e,n.on("dragstart",this._onMarkerDragStart,this).on("drag",this._onMarkerDrag,this).on("dragend",this._fireEdit,this).on("touchmove",this._onTouchMove,this).on("touchend",this._fireEdit,this).on("MSPointerMove",this._onTouchMove,this).on("MSPointerUp",this._fireEdit,this),this._vectorLayer.addOverlay(n),n}},{key:"_onMarkerDragStart",value:function(){this._poly.fire("editstart")}},{key:"_spliceLatLngs",value:function(){var t=this._defaultShape(),e=[].splice.apply(t,arguments);return this._poly._convertLatLngs(t,!0),this._poly.redraw(),e}},{key:"_removeMarker",value:function(t){var e=t._index;this._vectorLayer.removeOverlay(t),this._markers.splice(e,1),this._spliceLatLngs(e,1),this._updateIndexes(e,-1),t.off("dragstart",this._onMarkerDragStart,this).off("drag",this._onMarkerDrag,this).off("dragend",this._fireEdit,this).off("touchmove",this._onMarkerDrag,this).off("touchend",this._fireEdit,this).off("click",this._onMarkerClick,this).off("MSPointerMove",this._onTouchMove,this).off("MSPointerUp",this._fireEdit,this)}},{key:"_fireEdit",value:function(){this._poly.edited=!0,this._poly.fire("editend"),this._poly._map.fire("editvertex",{features:this._vectorLayer,poly:this._poly}),this._updateTooltipContent(this._originText,f.default.Edit.Local.subtext)}},{key:"_onMarkerDrag",value:function(e){var n=this,i=e.target,o=this._poly;if(t.extend(i._origLatLng,i._latlng),i._middleLeft&&i._middleLeft.setLngLat(this._getMiddleLatLng(i._prev,i)),i._middleRight&&i._middleRight.setLngLat(this._getMiddleLatLng(i,i._next)),o.options){if(o instanceof f.default.Overlay.Polygon){if(this.options.showArea){var r=this._getArea();this._updateTooltipContent(this._originText,r)}}else if(this.options.showLength){var a=this._getLength();this._updateTooltipContent(this._originText,a)}if(!o.options.allowIntersection&&o.intersects()){var s=o.options.color;o instanceof f.default.Overlay.Polygon?o.setStyle(new f.default.Style.Fill(t.extend({},o.options.pathOptions,this.options.drawError))):o.setStyle(new f.default.Style(t.extend({},o.options.pathOptions,this.options.drawError))),this._onMarkerClick(e),this._updateTooltipContent(f.default.Draw.Local.polyline.error,""),setTimeout(function(){o.setStyle(new f.default.Style.Fill(t.extend({},o.options,{color:s}))),n._updateTooltipContent(n._originText,f.default.Edit.Local.subtext)},1e3)}}this._poly.redraw(),this._poly.fire("editdrag")}},{key:"_getTooltipText",value:function(){return{text:this._originText,subtext:f.default.Edit.Local.subtext}}},{key:"_getArea",value:function(){var t=f.default.Help.Geometry.area(this._poly);return f.default.Help.Geometry.readableArea(t)}},{key:"_getLength",value:function(){var t=f.default.Help.Geometry.distance(this._poly);return f.default.Help.Geometry.readableDistance(t)}},{key:"_onMarkerClick",value:function(t){var e=f.default.Overlay.Polygon&&this._poly instanceof f.default.Overlay.Polygon?4:3,n=t.target;this._defaultShape().length<e||(this._removeMarker(n),this._updatePrevNext(n._prev,n._next),n._middleLeft&&this._vectorLayer.removeOverlay(n._middleLeft),n._middleRight&&this._vectorLayer.removeOverlay(n._middleRight),n._prev&&n._next?this._createMiddleMarker(n._prev,n._next):n._prev?n._next||(n._prev._middleRight=null):n._next._middleLeft=null,this._fireEdit())}},{key:"_onTouchMove",value:function(e){var n=this._map.mouseEventToLayerPoint(e.originalEvent.touches[0]),i=this._map.layerPointToLatLng(n),o=e.target;t.extend(o._origLatLng,i),o._middleLeft&&o._middleLeft.setLngLat(this._getMiddleLatLng(o._prev,o)),o._middleRight&&o._middleRight.setLngLat(this._getMiddleLatLng(o,o._next)),this._poly.redraw(),this.updateMarkers()}},{key:"_updateIndexes",value:function(t,e){this._vectorLayer.eachLayer(function(n){n._index>t&&(n._index+=e)})}},{key:"_createMiddleMarker",value:function(t,e){var n=this._getMiddleLatLng(t,e),i=this._createMarker(n),o=void 0,r=void 0,a=void 0;i.setOpacity(.6),t._middleRight=e._middleLeft=i,r=function(){i.off("touchmove",r,this);var a=e._index;i._index=a,i.off("click",o,this).on("click",this._onMarkerClick,this),n.lat=i.getLngLat().lat,n.lng=i.getLngLat().lng,this._spliceLatLngs(a,0,n),this._markers.splice(a,0,i),i.setOpacity(1),this._updateIndexes(a,1),e._index++,this._updatePrevNext(t,i),this._updatePrevNext(i,e),this._poly.fire("editstart")},a=function(){i.off("dragstart",r,this),i.off("dragend",a,this),i.off("touchmove",r,this),this._createMiddleMarker(t,i),this._createMiddleMarker(i,e)},o=function(){r.call(this),a.call(this),this._fireEdit()},i.on("click",o,this).on("dragstart",r,this).on("dragend",a,this).on("touchmove",r,this),this._vectorLayer.addLayer(i)}},{key:"_updatePrevNext",value:function(t,e){t&&(t._next=e),e&&(e._prev=t)}},{key:"_getMiddleLatLng",value:function(t,e){var n=this._poly._map,i=n.project(t.getLngLat()),o=n.project(e.getLngLat());return n.unproject(i._add(o)._divideBy(2))}}]),n}(h.default);e.default=p,f.default.Overlay.Polyline.addInitHook(function(){this.on("add",function(){!p||this.type!==f.default.Overlay.Polyline.type&&this.type!==f.default.Overlay.Polygon.type||(this.editing=new p(this,this.options.poly),this.options.editable&&this.editing.enable()),this.editing&&this.editing.enabled()&&this.editing.addHooks()}),this.on("remove",function(){this.editing&&this.editing.enabled()&&this.editing.removeHooks()})})}).call(e,n(1))},function(t,e,n){"use strict";(function(t){function i(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),l=function t(e,n,i){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,n);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,n,i)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(i)},u=n(11),h=i(u),c=n(0),f=i(c),p={moveIcon:new f.default.Icon.Div("","gaea-draw-vertex-icon gaea-edit-move",null,{iconSize:[12,12]}),resizeIcon:new f.default.Icon.Div("","gaea-draw-vertex-icon gaea-edit-resize",null,{iconSize:[12,12]}),pathOptions:{fillColor:"#fe57a1",fillOpacity:.1,maintainColor:!1},showArea:!0},d=function(e){function n(e,i){o(this,n),i=t.extend({},p,i);var a=r(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e,i)),s=t.extend({},p.pathOptions,i.pathOptions||{});return s.maintainColor&&(s.color=style.options.color,s.fillColor=style.options.fillColor),a._shape.options.original=t.extend({},a._shape.options),a._shape.options.editing=s,a}return a(n,e),s(n,[{key:"_createMoveMarker",value:function(){var t=this._shape.getBounds(),e=t.getCenter();this._moveMarker=this._createMarker(e,this.options.moveIcon)}},{key:"_createResizeMarker",value:function(){var t=this._getCorners();this._resizeMarkers=[];for(var e=0,n=t.length;e<n;e++)this._resizeMarkers.push(this._createMarker(t[e],this.options.resizeIcon)),this._resizeMarkers[e]._cornerIndex=e}},{key:"_onMarkerDragStart",value:function(t){l(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"_onMarkerDragStart",this).call(this,t);var e=this._getCorners(),i=t.target,o=i._cornerIndex;this._oppositeCorner=e[(o+2)%4],this._toggleCornerMarkers(0,o)}},{key:"_onMarkerDragEnd",value:function(t){var e=t.target,i=void 0,o=void 0;e===this._moveMarker&&(i=this._shape.getBounds(),o=i.getCenter(),e.setLngLat(o)),this._toggleCornerMarkers(1),this._repositionCornerMarkers(),l(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"_onMarkerDragEnd",this).call(this,t)}},{key:"_move",value:function(t){for(var e=this._shape._defaultShape?this._shape._defaultShape():this._shape.getLngLats(),n=this._shape.getBounds(),i=n.getCenter(),o=void 0,r=[],a=0,s=e.length;a<s;a++)o=[e[a].lat-i.lat,e[a].lng-i.lng],r.push([t.lng+o[1],t.lat+o[0]]);this._shape.setLngLats(r),this._repositionCornerMarkers(),this._shape.fire("editmove")}},{key:"_resize",value:function(t){var e=void 0;this._shape.setBounds(new f.default.Envelope(t,this._oppositeCorner)),e=this._shape.getBounds(),this._moveMarker.setLngLat(e.getCenter()),this._shape.fire("editresize");var n=this.options.showArea,i=void 0,o=void 0,r=void 0;n&&(i=this._shape._defaultShape?this._shape._defaultShape():this._shape.getLngLats(),o=f.default.Help.Geometry.area(i),r=n?f.default.Help.Geometry.readableArea(o):"",this._updateTooltipContent(this._originText,r))}},{key:"_getCorners",value:function(){return this._shape.getBounds().toLngLats()}},{key:"_toggleCornerMarkers",value:function(t){for(var e=0,n=this._resizeMarkers.length;e<n;e++)this._resizeMarkers[e].setOpacity(t)}},{key:"_repositionCornerMarkers",value:function(){for(var t=this._getCorners(),e=0,n=this._resizeMarkers.length;e<n;e++)this._resizeMarkers[e].setLngLat(t[e])}}]),n}(h.default);e.default=d,f.default.Overlay.Rectangle.addInitHook(function(){this.on("add",function(){d&&(this.editing=new d(this),this.options.editable&&this.editing.enable()),this.editing&&this.editing.enabled()&&this.editing.addHooks()}),this.on("remove",function(){this.editing&&this.editing.enabled()&&this.editing.removeHooks()})})}).call(e,n(1))},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=n(0),a=function(t){return t&&t.__esModule?t:{default:t}}(r);a.default.Measure=function(){function t(e){i(this,t),this._map=e,this._vectorLayer=new a.default.VectorLayer,e.addLayer(this._vectorLayer)}return o(t,[{key:"activate",value:function(t,e){return this.isActivate?this:(this.isActivate=!0,a.default.DrawTool.activate(this._map,t,this._onDrawCreated,this,e),this)}},{key:"deactivate",value:function(){return this.isActivate=!1,a.default.DrawTool.deactivate(),this}},{key:"clear",value:function(){return this._vectorLayer.clear(),this}},{key:"_onDrawCreated",value:function(t){if("vertex"===t.status)this._onDrawVertex(t);else if("created"===t.status){this.deactivate();var e=t.feature;if(e=e&&e._delegate||e,this._vectorLayer.addOverlay(e),e.type===a.default.Overlay.Polygon.type){var n=this._calculatePolygonArea(e);e.bindLabel(n)}}}},{key:"_onDrawVertex",value:function(t){var e=t.added,n=t.featureType,i=t.vertexs,o=i.length;if(!e||n!==a.default.Overlay.Polyline.type)return this;var r=i[o-1],s=r.clone();if(s.on("click",function(t){r.fire("click")}),o>1){var l=i.map(function(t){return t.getLngLat()}),u=this._calculatePolylineDistance(l);s.bindLabel(u)}this._vectorLayer.addOverlay(s)}},{key:"_calculatePolylineDistance",value:function(t){var e=a.default.Help.Geometry.distance(t);return a.default.Help.Geometry.readableDistance(e)}},{key:"_calculatePolygonArea",value:function(t){var e=a.default.Help.Geometry.area(t);return a.default.Help.Geometry.readableArea(e)}}]),t}()},function(t,e,n){"use strict";(function(t){function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();n(161);var o=n(0);(function(t){return t&&t.__esModule?t:{default:t}})(o).default.DrawTooltip=function(){function n(i,o){e(this,n),i=i&&i._delegate||i,o=o&&o._delegate||o,this._map=i,this._shape=o,this._tooltipPane=i.getPane("tooltipPane"),this._container=t.DomUtil.create("div","gaea-draw-tooltip",this._tooltipPane),this._singleLineLabel=!1,this._shape?this._shape.on("mouseout",this._onMouseOut,this):this._map.on("mouseout",this._onMouseOut,this)}return i(n,[{key:"dispose",value:function(){this._shape?this._shape.off("mouseout",this._onMouseOut,this):this._map.off("mouseout",this._onMouseOut,this),this._container&&(this._tooltipPane.removeChild(this._container),this._container=null)}},{key:"updateContent",value:function(e){return this._container?(e.subtext=e.subtext||"",0!==e.subtext.length||this._singleLineLabel?e.subtext.length>0&&this._singleLineLabel&&(t.DomUtil.removeClass(this._container,"gaea-draw-tooltip-single"),this._singleLineLabel=!1):(t.DomUtil.addClass(this._container,"gaea-draw-tooltip-single"),this._singleLineLabel=!0),this._container.innerHTML=(e.subtext.length>0?'<span class="gaea-draw-tooltip-subtext">'+e.subtext+"</span><br />":"")+"<span>"+e.text+"</span>",0===e.subtext.length&&0===e.text.length?t.DomUtil.addClass(this._container,"hide"):t.DomUtil.removeClass(this._container,"hide"),this):this}},{key:"updatePosition",value:function(e){var n=this._map.latLngToLayerPoint(e),i=this._container;return this._container&&(i.style.visibility="inherit",t.DomUtil.setPosition(i,n)),this}},{key:"showAsError",value:function(){return this._container&&t.DomUtil.addClass(this._container,"gaea-error-draw-tooltip"),this}},{key:"removeError",value:function(){return this._container&&t.DomUtil.removeClass(this._container,"gaea-error-draw-tooltip"),this}},{key:"_onMouseOut",value:function(){this._container&&(this._container.style.visibility="hidden")}}]),n}()}).call(e,n(1))},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=n(0);(function(t){return t&&t.__esModule?t:{default:t}})(r).default.Event=function(){function t(){i(this,t)}return o(t,null,[{key:"ModuleEnableSignal",get:function(){return"__ModuleEnable"}},{key:"ModuleConfigSignal",get:function(){return"__ModuleConfig"}},{key:"MapInited",get:function(){return"__MapInited"}},{key:"MapDestroy",get:function(){return"__MapDestroy"}},{key:"MapLoaded",get:function(){return"__MapLoadCompleted"}},{key:"BaseMapCompleted",get:function(){return"__BaseMapCompleted"}},{key:"BaseLayerAdded",get:function(){return"__BaseLayerAdded"}},{key:"BaseLayerRemoved",get:function(){return"__BaseLayerRemoved"}},{key:"BaseLayerGroupChanged",get:function(){return"__BaseLayerGroupChanged"}},{key:"FullScreenChanged",get:function(){return"__FullScreenChanged"}},{key:"ChangeFullScreen",get:function(){return"__ChangeFullScreen"}},{key:"EnterFullScreen",get:function(){return"__EnterFullScreen"}},{key:"ExitFullScreen",get:function(){return"__ExitFullScreen"}}]),t}()},function(t,e,n){"use strict";(function(t){function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=n(0),a=function(t){return t&&t.__esModule?t:{default:t}}(r);a.default.Help.Geometry=function(){function n(){e(this,n)}return o(n,null,[{key:"isCoordStr",value:function(t){return!!GL.H.isString(t)&&t.indexOf(",")>0}},{key:"isLngLatStr",value:function(t){return a.default.Help.Geometry.isCoordStr(t)&&1===getLevOfArr(t.split(","))}},{key:"isFlat",value:function(e){return!t.Util.isArray(e[0])||"object"!==i(e[0][0])&&void 0!==e[0][0]}},{key:"simplify",value:function(e,n){for(var i=t.LineUtil.simplify(e,n),o=[],r=0,s=i.length;r<s;r++)o.push(new a.default.Pixel(i[r]));return o}},{key:"distanceOfPointToLine",value:function(e,n,i){return t.LineUtil.pointToSegmentDistance(e,n,i)}},{key:"closestPointOnSegment",value:function(e,n,i){return new a.default.Pixel(t.LineUtil.closestPointOnSegment(e,n,i))}},{key:"clipPolyline",value:function(e,n,i,o,r){var s=t.LineUtil.clipSegment(e,n,i,o,r);if(!s)return[];for(var l=[],u=0,h=s.length;u<h;u++)l.push(new a.default.Pixel(s[u]));return l}},{key:"clipPolygon",value:function(e,n,i){for(var o=t.PolyUtil.clipPolygon(e,n,i),r=[],s=0,l=o.length;s<l;s++)r.push(new a.default.Pixel(o[s]));return r}},{key:"area",value:function(e){if(!e)return 0;var n=void 0;if("function"==typeof e.getRing)n=e.getRing();else{var i=!t.Polyline._flat(e),o=i&&!t.Polyline._flat(e[0]);n=i?o?e[0][0]:e[0]:e}var r=void 0,a=n.length,s=0,l=Math.PI/180,u=void 0,h=void 0;if(a<3)return 0;for(r=0;r<a;r++)u=n[r],h=n[(r+1)%a],s+=(h.lng-u.lng)*l*(2+Math.sin(u.lat*l)+Math.sin(h.lat*l));return s=6378137*s*6378137/2,Math.abs(s)}},{key:"interpolateOnLngLatSegment",value:function(t,e,n){return new a.default.LngLat(t.lng*(1-n)+n*e.lng,t.lat*(1-n)+n*e.lat)}},{key:"isIntersect",value:function(t,e,n,i,o,r,a,s){var l=!1,u=(n-t)*(s-r)-(i-e)*(a-o);if(0!==u){var h=((e-r)*(a-o)-(t-o)*(s-r))/u,c=((e-r)*(n-t)-(t-o)*(i-e))/u;h>=0&&h<=1&&c>=0&&c<=1&&(l=!0)}return l}},{key:"calculateDistanceOfLngLatToPoly",value:function(t,e,n){for(var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"meter",o=Number.MAX_VALUE,r=a.default.Help.Geometry.calculateSegments(n),s=void 0,l=void 0,u=void 0,h=void 0,c=void 0,f=e.toPixel(t),p=0,d=r.length;p<d;p+=2){s=r[p],l=r[p+1],u=s.toPixel(t),h=l.toPixel(t),c=a.default.Help.Geometry.closestPointOnSegment(f,u,h);var _=e.distanceTo(c.toLngLat(t));"px"===i&&(_=f.distanceTo(c)),_<o&&(o=_)}return o}},{key:"calculateSegments",value:function(t){var e=[],n=t.getLngLats();t.type!==a.default.Overlay.Polyline.type&&t.type!==a.default.Overlay.Polygon.type||(n=[n]);for(var i=void 0,o=void 0,r=void 0,s=0;s<n.length;s++){i=n[s],o=i[0];for(var l=1;l<i.length;l++)r=i[l],o.lng===r.lng&&o.lat===r.lat||(e.push(o),e.push(r)),o=r}return e}},{key:"distancePixelOfLngLat",value:function(t,e,n){return t.latLngToLayerPoint(e).distanceTo(t.latLngToLayerPoint(n))}},{key:"distancePixelOfLngLatSegment",value:function(e,n,i,o){var r=e.latLngToLayerPoint(n),a=e.latLngToLayerPoint(i),s=e.latLngToLayerPoint(o);return t.LineUtil.pointToSegmentDistance(r,a,s)}},{key:"readableDistance",value:function(t){return t>1e3?(t/1e3).toFixed(2)+" ":t.toFixed(1)+" "}},{key:"readableArea",value:function(t){return t>=1e4?(t/1e6).toFixed(2)+" ":t.toFixed(2)+" ;"}},{key:"belongsSegment",value:function(t,e,n,i){i=void 0===i?.2:i;var o=e.distanceTo(n);return(e.distanceTo(t)+t.distanceTo(n)-o)/o<i}},{key:"distance",value:function(t){var e=a.default.Help.Geometry.accumulatedDistances(t);return e.length>0?e[e.length-1]:0}},{key:"accumulatedDistances",value:function(e){if("function"==typeof e.getRing)e=e.getRing();else{!t.Polyline._flat(e)&&(e=e[0])}if(0===e.length)return[];for(var n=0,i=[0],o=0,r=e.length-1;o<r;o++)e[o]&&e[o+1]&&(n+=e[o].distanceTo(e[o+1]),i.push(n));return i}},{key:"closestLngLatOnSegment",value:function(e,n,i,o){var r=e.getMaxZoom();r===1/0&&(r=e.getZoom());var a=e.project(n,r),s=e.project(i,r),l=e.project(o,r),u=t.LineUtil.closestPointOnSegment(a,s,l);return e.unproject(u,r)}},{key:"interpolateOnPixelSegment",value:function(t,e,n){return new a.default.Pixel(t.x*(1-n)+n*e.x,t.y*(1-n)+n*e.y)}},{key:"computeAngle",value:function(t,e){return 180*Math.atan2(e.y-t.y,e.x-t.x)/Math.PI}},{key:"computeSlope",value:function(t,e){var n=(e.y-t.y)/(e.x-t.x);return{a:n,b:t.y-n*t.x}}},{key:"rotateLngLat",value:function(t,e,n,i){var o=t.getMaxZoom();o===1/0&&(o=t.getZoom());var r=n*Math.PI/180,s=t.project(e,o),l=t.project(i,o),u=Math.cos(r)*(s.x-l.x)-Math.sin(r)*(s.y-l.y)+l.x,h=Math.sin(r)*(s.x-l.x)+Math.cos(r)*(s.y-l.y)+l.y;return t.unproject(new a.default.Pixel(u,h),o)}},{key:"bearing",value:function(t,e){var n=Math.PI/180,i=t.lat*n,o=e.lat*n,r=t.lng*n,a=e.lng*n,s=Math.sin(a-r)*Math.cos(o),l=Math.cos(i)*Math.sin(o)-Math.sin(i)*Math.cos(o)*Math.cos(a-r),u=(180*Math.atan2(s,l)/Math.PI+360)%360;return u>=180?u-360:u}},{key:"destination",value:function(t,e,n){e=(e+360)%360;var i=Math.PI/180,o=180/Math.PI,r=6378137,s=t.lng*i,l=t.lat*i,u=e*i,h=Math.sin(l),c=Math.cos(l),f=Math.cos(n/r),p=Math.sin(n/r),d=Math.asin(h*f+c*p*Math.cos(u)),_=s+Math.atan2(Math.sin(u)*p*c,f-h*Math.sin(d));return _*=o,_=_>180?_-360:_<-180?_+360:_,new a.default.LngLat([_,d*o])}}]),n}()}).call(e,n(1))},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=n(0),a=function(t){return t&&t.__esModule?t:{default:t}}(r),s=.006693421622965943,l=3e3*Math.PI/180;a.default.Help.Transform=function(){function t(){i(this,t)}return o(t,null,[{key:"transformBD09ToGCJ02",value:function(t,e){var n=t-.0065,i=e-.006,o=Math.sqrt(n*n+i*i)-2e-5*Math.sin(i*l),r=Math.atan2(i,n)-3e-6*Math.cos(n*l);return[o*Math.cos(r),o*Math.sin(r)]}},{key:"transformGCJ02ToBD09",value:function(t,e){var n=Math.sqrt(t*t+e*e)+2e-5*Math.sin(e*l),i=Math.atan2(e,t)+3e-6*Math.cos(t*l);return[n*Math.cos(i)+.0065,n*Math.sin(i)+.006]}},{key:"transformWGS84ToGCJ02",value:function(t,e){if(a.default.Help.Transform.outOfChina(t,e))return[t,e];var n=a.default.Help.Transform._transformLat(t-105,e-35),i=a.default.Help.Transform._transformLng(t-105,e-35),o=e/180*Math.PI,r=Math.sin(o);r=1-s*r*r;var l=Math.sqrt(r);return n=180*n/(6378245*(1-s)/(r*l)*Math.PI),i=180*i/(6378245/l*Math.cos(o)*Math.PI),[t+i,e+n]}},{key:"transformGCJ02ToWGS84",value:function(t,e){if(a.default.Help.Transform.outOfChina(t,e))return[t,e];var n=a.default.Help.Transform._transformLat(t-105,e-35),i=a.default.Help.Transform._transformLng(t-105,e-35),o=e/180*Math.PI,r=Math.sin(o);r=1-s*r*r;var l=Math.sqrt(r);return n=180*n/(6378245*(1-s)/(r*l)*Math.PI),i=180*i/(6378245/l*Math.cos(o)*Math.PI),[2*t-(t+i),2*e-(e+n)]}},{key:"transformBD09ToWGS84",value:function(t,e){var n=a.default.Help.Transform.transformBD09ToGCJ02(t,e);return a.default.Help.Transform.transformGCJ02ToWGS84(n[0],n[1])}},{key:"transformWGS84ToBD09",value:function(t,e){var n=a.default.Help.Transform.transformWGS84ToGCJ02(t,e);return a.default.Help.Transform.transformGCJ02ToBD09(n[0],n[1])}},{key:"transformWGS84ToMercator",value:function(t,e){var n=20037508.342789*t/180,i=Math.log(Math.tan((90+e)*Math.PI/360))/(Math.PI/180);return i=20037508.34789*i/180,[n,i]}},{key:"transformMercatorToWGS84",value:function(t,e){var n=t/20037508.342789*180,i=e/20037508.342789*180;return i=180/Math.PI*(2*Math.atan(Math.exp(y*Math.PI/180))-Math.PI/2),[n,i]}},{key:"encodeLngLat",value:function(t){function e(t){var e=t<<1,n="";for(t<0&&(e=~e);e>=32;)n+=String.fromCharCode(63+(32|31&e)),e>>=5;return n+=String.fromCharCode(e+63)}if(!t||0===t.length)return t;Array.isArray(t[0])||(t=[t]);for(var n=0,i=0,o="",r=0,a=t.length;r<a;r++){var s=t[r];if(!s||s.length<2||s[0]>s[1])throw"Invalid parameter";var l=Math.round(1e6*s[0]),u=Math.round(1e6*s[1]),h=u-n,c=l-i;n=u,i=l,o+=e(c)+e(h)}return o}},{key:"decodeLngLat",value:function(t){for(var e=t.length,n=0,i=[],o=0,r=0;n<e;){var a=void 0,s=0,l=0;do{a=t.charCodeAt(n++)-63,l|=(31&a)<<s,s+=5}while(a>=32);r+=1&l?~(l>>1):l>>1,s=0,l=0;do{a=t.charCodeAt(n++)-63,l|=(31&a)<<s,s+=5}while(a>=32);o+=1&l?~(l>>1):l>>1,i.push([Math.round(1e6*(1e-6*r).toFixed(6))/1e6,Math.round(1e6*(1e-6*o).toFixed(6))/1e6])}return 1===i.length?i[0]:i}},{key:"_transformLat",value:function(t,e){var n=2*t-100+3*e+.2*e*e+.1*t*e+.2*Math.sqrt(Math.abs(t));return n+=2*(20*Math.sin(6*t*Math.PI)+20*Math.sin(2*t*Math.PI))/3,n+=2*(20*Math.sin(e*Math.PI)+40*Math.sin(e/3*Math.PI))/3,n+=2*(160*Math.sin(e/12*Math.PI)+320*Math.sin(e*Math.PI/30))/3}},{key:"_transformLng",value:function(t,e){var n=300+t+2*e+.1*t*t+.1*t*e+.1*Math.sqrt(Math.abs(t));return n+=2*(20*Math.sin(6*t*Math.PI)+20*Math.sin(2*t*Math.PI))/3,n+=2*(20*Math.sin(t*Math.PI)+40*Math.sin(t/3*Math.PI))/3,n+=2*(150*Math.sin(t/12*Math.PI)+300*Math.sin(t/30*Math.PI))/3}},{key:"outOfChina",value:function(t,e){return t<72.004||t>137.8347||e<.8293||e>55.8271||!1}}]),t}()},function(t,e,n){"use strict";n(85),n(86)},function(t,e,n){"use strict";(function(t){function e(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=function t(e,n,i){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,n);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,n,i)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(i)},l=n(0),u=e(l);n(87),n(84),n(89);var h=n(138),c=e(h);n(132),n(102),n(103),n(109),n(148),n(152),n(91),u.default.Map=function(e){function n(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};i(this,n),e=u.default.MapOption.build(t,e);var r=o(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,t,e));return r.id=t,r._baseLayers=[],r._initDefaultVectorLayer(),r.whenReady(function(){this._addDevTip(),GL.Proxy.addMap(this),this.fire(u.default.Event.MapInited,this)},r),r}return r(n,e),a(n,[{key:"_addDevTip",value:function(){this.getContainer();return}},{key:"_initDefaultVectorLayer",value:function(){this._defaultLayer=new u.default.VectorLayer("internal temp vector layer",{},!0),this.addLayer(this._defaultLayer)}},{key:"reCheckByBaseLayer",value:function(t){if(!t.isBaseLayer)return this;this.options.crs=t.crs||this.options.crs;var e=null;this.options.fitable&&(e=this.options.maxBounds||t.maxBounds),this.setMaxBounds(e)}},{key:"refresh",value:function(){this._onResize();var t=this.getCenter(),e=this.getZoom();this._resetView(t,e)}},{key:"clear",value:function(){return this._defaultLayer.clear(),this}},{key:"getCenter",value:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?new u.default.LngLat(this._lastCenter):this.layerPointToLatLng(this._getCenterLayerPoint())}},{key:"getZoom",value:function(){return this._zoom}},{key:"getMinZoom",value:function(){return s(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"getMinZoom",this).call(this)}},{key:"getMaxZoom",value:function(){return void 0===this.options.maxZoom?this.options.crs&&this.options.crs.resolutions&&this.options.crs.resolutions.length?this.options.crs.resolutions.length-1:void 0===this._layersMaxZoom?1/0:this._layersMaxZoom:this.options.maxZoom}},{key:"getBounds",value:function(){var t=this.getPixelBounds(),e=this.unproject(t.getBottomLeft()),n=this.unproject(t.getTopRight());return new u.default.Envelope(e,n)}},{key:"getMaxBounds",value:function(){return this.options.maxBounds}},{key:"getSize",value:function(){return this._size&&!this._sizeChanged||(this._size=new u.default.Pixel(this._container.clientWidth,this._container.clientHeight),this._sizeChanged=!1),this._size.clone()}},{key:"setMaxBounds",value:function(t){return t=new u.default.Envelope(t),t.isValid()?(this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this.options.maxBounds=t,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this.off("moveend",this._panInsideMaxBounds))}},{key:"setCenter",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=arguments[2];return t=new u.default.LngLat(t),e?s(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"flyTo",this).call(this,t,i):s(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"panTo",this).call(this,t,i)}},{key:"panBy",value:function(t,e){return t=new u.default.Pixel(t),s(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"panBy",this).call(this,t,e)}},{key:"setZoom",value:function(t,e){return s(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"setZoom",this).call(this,t,e)}},{key:"setMinZoom",value:function(t){return s(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"setMinZoom",this).call(this,t)}},{key:"setMaxZoom",value:function(t){return s(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"setMaxZoom",this).call(this,t)}},{key:"setView",value:function(t,e,i){return t=new u.default.LngLat(t),s(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"setView",this).call(this,t,e,i)}},{key:"getPane",value:function(t){return s(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"getPane",this).call(this,t)}},{key:"getPanes",value:function(){return s(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"getPanes",this).call(this)}},{key:"getContainer",value:function(){return s(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"getContainer",this).call(this)}},{key:"getPopup",value:function(){return this._popup}},{key:"getScale",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.getZoom();return this.options.crs.scales?this.options.crs.scales[t]:null}},{key:"getScaleZoom",value:function(t,e){return s(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"getScaleZoom",this).call(this,t,e)}},{key:"getResolution",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.getZoom();return this.options.crs.resolutions?this.options.crs.resolutions[t]:null}},{key:"getScales",value:function(){return this.options.crs.scales?[].concat(this.options.crs.scales):[]}},{key:"getResolutions",value:function(){return this.options.crs.resolutions?[].concat(this.options.crs.resolutions):[]}},{key:"getOrigin",value:function(){return new u.default.LngLat(this.options.crs.origin)}},{key:"getPixelBounds",value:function(t,e){var n=this._getTopLeftPoint(t,e);return new u.default.Size(n,n.add(this.getSize()))}},{key:"getPixelOrigin",value:function(){return this._checkIfLoaded(),this._pixelOrigin=new u.default.Pixel(this._pixelOrigin),this._pixelOrigin}},{key:"getPixelWorldBounds",value:function(t){return new u.default.Size(this.options.crs.getProjectedBounds(void 0===t?this.getZoom():t))}},{key:"toPixel",value:function(t){return this.latLngToContainerPoint(t)}},{key:"toLngLat",value:function(t){return this.containerPointToLatLng(t)}},{key:"project",value:function(t,e){e=void 0===e?this._zoom:e;var n=this.options.crs.latLngToPoint(new u.default.LngLat(t),e);return new u.default.Pixel(n)}},{key:"unproject",value:function(t,e){e=void 0===e?this._zoom:e;var n=this.options.crs.pointToLatLng(new u.default.Pixel(t),e);return new u.default.LngLat(n)}},{key:"distance",value:function(t,e){return this.options.crs.distance(new u.default.LngLat(t),new u.default.LngLat(e))}},{key:"layerPointToLatLng",value:function(t){var e=new u.default.Pixel(t).add(this.getPixelOrigin());return this.unproject(e)}},{key:"latLngToLayerPoint",value:function(t){return this.project(new u.default.LngLat(t))._subtract(this.getPixelOrigin())}},{key:"wrapLatLng",value:function(t){return new u.default.LngLat(this.options.crs.wrapLatLng(new u.default.LngLat(t)))}},{key:"wrapLatLngBounds",value:function(t){return new u.default.Envelope(this.options.crs.wrapLatLngBounds(new u.default.Envelope(t)))}},{key:"containerPointToLayerPoint",value:function(t){return new u.default.Pixel(t).subtract(this._getMapPanePos())}},{key:"layerPointToContainerPoint",value:function(t){return new u.default.Pixel(t).add(this._getMapPanePos())}},{key:"containerPointToLatLng",value:function(t){var e=this.containerPointToLayerPoint(new u.default.Pixel(t));return this.layerPointToLatLng(e)}},{key:"latLngToContainerPoint",value:function(t){return this.layerPointToContainerPoint(this.latLngToLayerPoint(new u.default.LngLat(t)))}},{key:"setZoomAround",value:function(e,n,i){var o=this.getZoomScale(n)||1,r=this.getSize().divideBy(2),a=e instanceof t.Point?e:this.latLngToContainerPoint(e),s=a.subtract(r).multiplyBy(1-1/o),l=this.containerPointToLatLng(r.add(s));return this.setView(l,n,{zoom:i})}},{key:"getRenderer",value:function(e){var n=e.options.renderer||this._getPaneRenderer(e.options.pane)||this.options.renderer||this._renderer;return n||(n=this._renderer=this.options.preferCanvas&&this._createCanvas()||t.svg()),this.hasLayer(n)||this.addLayer(n),n}},{key:"_getPaneRenderer",value:function(e){if("overlayPane"===e||void 0===e)return!1;var n=this._paneRenderers[e];return void 0===n&&(n=t.SVG&&t.svg({pane:e})||this._createCanvas({pane:e}),this._paneRenderers[e]=n),n}},{key:"_createCanvas",value:function(e){return t.Browser.canvas?new c.default(e):null}},{key:"mouseEventToContainerPoint",value:function(e){var n=t.DomEvent.getMousePosition(e,this._container);return new u.default.Pixel(n)}},{key:"mouseEventToLayerPoint",value:function(t){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(t))}},{key:"mouseEventToLatLng",value:function(t){return this.layerPointToLatLng(this.mouseEventToLayerPoint(t))}},{key:"_resetView",value:function(t,e){return t=new u.default.LngLat(t),s(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"_resetView",this).call(this,t,e)}},{key:"_initPanes",value:function(){var e=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),t.DomUtil.setPosition(this._mapPane,new u.default.Pixel(0,0)),this.createPane("tilePane"),this.createPane("maskPane"),this.createPane("shadowPane"),this.createPane("overlayPane"),this.createPane("markerPane"),this.createPane("labelPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),t.DomUtil.addClass(e.maskPane,"hide"),this.options.markerZoomAnimation||(t.DomUtil.addClass(e.markerPane,"leaflet-zoom-hide"),t.DomUtil.addClass(e.shadowPane,"leaflet-zoom-hide"))}},{key:"_fireDOMEvent",value:function(e,n,i){if("click"===e.type){var o=t.Util.extend({},e);o.type="preclick",this._fireDOMEvent(o,o.type,i)}if(!e._stopped&&(i=(i||[]).concat(this._findEventTargets(e,n)),i.length)){var r=i[0];"contextmenu"===n&&r.listens(n,!0)&&t.DomEvent.preventDefault(e);var a={originalEvent:e};if("keypress"!==e.type){var s=r instanceof t.Marker;a.containerPoint=s?this.latLngToContainerPoint(r.getLatLng()):this.mouseEventToContainerPoint(e),a.layerPoint=this.containerPointToLayerPoint(a.containerPoint);var l=s?new u.default.LngLat(r.getLatLng()):this.layerPointToLatLng(a.layerPoint);a.latlng=l,a.lnglat=this._transformDomEventLngLat(l)}for(var h=0;h<i.length;h++)if(i[h].fire(n,a,!0),a.originalEvent._stopped||i[h].options.nonBubblingEvents&&-1!==t.Util.indexOf(i[h].options.nonBubblingEvents,n))return}}},{key:"_transformDomEventLngLat",value:function(t){return t}},{key:"panInsideBounds",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{animate:!1};this._enforcingBounds=!0;var i=this.getCenter(),o=this._limitCenter(i,this._zoom,t.latLngBounds(e));return i.equals(o)||this.panTo(o,n),this._enforcingBounds=!1,this}},{key:"addBaseLayer",value:function(t){return this._baseLayers.push(t),this.fire(u.default.Event.BaseLayerAdded,t),this}},{key:"getBaseLayer",value:function(t){for(var e=this._baseLayers,n=0,i=e.length;n<i;n++){var o=e[n];if(this.getLayerId(o)===t)return o}return null}},{key:"getBaseLayers",value:function(){return this._baseLayers}},{key:"getLayer",value:function(t){return this._layers[t]}},{key:"getLayerId",value:function(e){return e.id=e.id||t.stamp(e),e.id}},{key:"getLayers",value:function(){var t=[];for(var e in this._layers){var n=this._layers[e];t.push(n)}return t}},{key:"addLayer",value:function(t){if(!t)return this;if(t.isOverlay&&!t._layer)throw new Error("Illegal layer type."+t);var e=this.getLayerId(t);if(t.isBaseLayer&&!t._isBrother&&!this.getBaseLayer(e))throw new Error("Illegal base layer oprate."+t);return t.isOverlay&&t._layer&&t._layer._prefix&&(e=t._layer._prefix+e),this._layers[e]?this:(this.reCheckByBaseLayer(t),this._layers[e]=t,t._mapToAdd=this,t.beforeAdd&&t.beforeAdd(this),this.whenReady(t._layerAdd,t),this)}},{key:"addLayers",value:function(e){e=e?t.Util.isArray(e)?e:[e]:[];for(var n=0,i=e.length;n<i;n++)this.addLayer(e[n]);return this}},{key:"removeBaseLayer",value:function(t){var e=this._baseLayers.indexOf(t);return-1===e?this:(this._baseLayers.splice(e,1),this.fire(u.default.Event.BaseLayerRemoved,t),this)}},{key:"removeLayer",value:function(t){if(!t)return this;var e=this.getLayerId(t);return t.isOverlay&&t._layer&&t._layer._prefix&&(e=t._layer._prefix+e),this._layers[e]?(this._loaded&&t.onRemove(this),t.getAttribution&&this.attributionControl&&this.attributionControl.removeAttribution(t.getAttribution()),delete this._layers[e],this._loaded&&(this.fire("layerremove",{layer:t}),t.fire("remove")),t._map=t._mapToAdd=null,this):this}},{key:"hasLayer",value:function(t){if(!t)return!1;var e=this.getLayerId(t);return t.isOverlay&&t._layer&&t._layer._prefix&&(e=t._layer._prefix+e),t in this._layers||e in this._layers}},{key:"eachLayer",value:function(t,e){return s(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"eachLayer",this).call(this,t,e)}},{key:"addControl",value:function(t){return s(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"addControl",this).call(this,t)}},{key:"removeControl",value:function(t){return s(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"removeControl",this).call(this,t)}},{key:"remove",value:function(){return GL.Proxy.removeMap(this),this.fire(u.default.Event.MapDestroy,this),s(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"remove",this).call(this)}}]),n}(t.Map)}).call(e,n(1))},function(t,e,n){"use strict";(function(t){function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=n(0),r=function(t){return t&&t.__esModule?t:{default:t}}(o),a=function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}({layers:[],doubleClickZoom:!1,closePopupOnClick:!1,attributionControl:!0,worldCopyJump:!1,preferCanvas:!0,bounceAtZoomLimits:!1},"doubleClickZoom",!0),s=[120.58105869,31.30115627];r.default.MapOption=function(){function n(){e(this,n)}return i(n,null,[{key:"build",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=GL.ConfigBuilder.build(e),o=i.crs,l=i.view||{};return l&&(n=t.extend({},l,n)),n=t.extend({},a,n),n.crs=n.crs||o||t.CRS.EPSG4326,n.zoom=n.zoom||0,n.maxBounds&&(n.maxBounds=new r.default.Envelope(n.maxBounds),n.center||(n.center=n.maxBounds.getCenter())),n.center=new r.default.LngLat(n.center||s),n.callback=i.callback,n.hasOwnProperty("fitable")||(n.fitable=!0),n}}]),n}()}).call(e,n(1))},function(t,e,n){"use strict";n(99),n(100),n(98),n(101)},function(t,e,n){"use strict";n(94),n(95),n(96),n(92),n(93),n(97)},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=n(0),a=function(t){return t&&t.__esModule?t:{default:t}}(r),s=["fullscreenchange","mozfullscreenchange","webkitfullscreenchange","msfullscreenchange"],l=function(){function t(){i(this,t),this._state=!1;for(var e=0,n=s.length;e<n;e++){var o=s[e];document.addEventListener(o,function(){this._state=!this._state,GL.Hub.fire(a.default.Event.FullScreenChanged,this._state)}.bind(this))}GL.Hub.on(a.default.Event.EnterFullScreen,this.enter,this),GL.Hub.on(a.default.Event.ExitFullScreen,this.exit,this),GL.Hub.on(a.default.Event.ChangeFullScreen,this.change,this)}return o(t,[{key:"change",value:function(){if(this._state)return void GL.Hub.fire(GL.E.ExitFullScreen);GL.Hub.fire(GL.E.EnterFullScreen)}},{key:"enter",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];t=0===t.length?document.documentElement:t[0],t.requestFullscreen?t.requestFullscreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.webkitRequestFullscreen?t.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT):t.msRequestFullscreen&&t.msRequestFullscreen()}},{key:"exit",value:function(){document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen()}},{key:"dump",value:function(){}}]),t}();!function(){new l}()},function(t,e,n){"use strict";(function(t){function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=n(0),r=function(t){return t&&t.__esModule?t:{default:t}}(o);r.default.MapMask=function(){function t(n){e(this,t),this._map=n,this._map.on(r.default.Event.BaseMapCompleted,this.prepare,this)}return i(t,[{key:"prepare",value:function(){var t=this._map.getPane("maskPane"),e=new r.default.Envelope([[-180,-90],[180,90]]),n=e.toSize(this._map),i=n.min,o=n.max;t.style.width=o.x-i.x+"px",t.style.height=o.y-i.y+"px",t.style.left=i.x+"px",t.style.top=i.y+"px"}}]),t}(),t.Map.include({showMask:function(){var e=this.getPane("maskPane");t.DomUtil.removeClass(e,"hide"),t.DomUtil.addClass(e,"show")},hideMask:function(){var e=this.getPane("maskPane");t.DomUtil.removeClass(e,"show"),t.DomUtil.addClass(e,"hide")},toggleMask:function(){var e=this.getPane("maskPane");t.DomUtil.hasClass(e,"show")?(t.DomUtil.removeClass(e,"show"),t.DomUtil.addClass(e,"hide")):(t.DomUtil.removeClass(e,"hide"),t.DomUtil.addClass(e,"show"))},_resetMaskZIndex:function(t){this.getPane("maskPane").style.zIndex=t}}),t.Map.mergeOptions({mask:!0}),t.Map.addInitHook(function(){this.options.mask&&new r.default.MapMask(this)})}).call(e,n(1))},function(t,e,n){"use strict";(function(t){function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=n(0),s=function(t){return t&&t.__esModule?t:{default:t}}(a);s.default.MapZoom=function(n){function a(t){e(this,a);var n=i(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,t));return n._container=t._container,n.createDom(),n}return o(a,n),r(a,[{key:"addHooks",value:function(){t.DomEvent.on(this._map._container,"mousewheel",this.play,this)}},{key:"removeHooks",value:function(){t.DomEvent.off(this._map._container,"mousewheel",this.play,this)}},{key:"createDom",value:function(){this._zoomAnmationContainer=t.DomUtil.create("div","leaflet-zoom-container",this._container),this._topleft=t.DomUtil.create("div","gaea-zoom-left-top left-top gaea-zoom",this._zoomAnmationContainer),this._topright=t.DomUtil.create("div","gaea-zoom-right-top right-top gaea-zoom",this._zoomAnmationContainer),this._bottomright=t.DomUtil.create("div","gaea-zoom-right-bottom right-bottom gaea-zoom",this._zoomAnmationContainer),this._bottomleft=t.DomUtil.create("div","gaea-zoom-left-bottom left-bottom  gaea-zoom",this._zoomAnmationContainer)}},{key:"updateDom",value:function(e){e?(t.DomUtil.setClass(this._topleft,"gaea-zoom-left-top left-top gaea-zoom"),t.DomUtil.setClass(this._topright,"gaea-zoom-right-top right-top gaea-zoom"),t.DomUtil.setClass(this._bottomright,"gaea-zoom-right-bottom right-bottom gaea-zoom"),t.DomUtil.setClass(this._bottomleft,"gaea-zoom-left-bottom left-bottom gaea-zoom")):(t.DomUtil.setClass(this._topleft,"gaea-zoom-right-bottom left-top gaea-zoom"),t.DomUtil.setClass(this._topright,"gaea-zoom-left-bottom right-top gaea-zoom"),t.DomUtil.setClass(this._bottomright,"gaea-zoom-left-top right-bottom gaea-zoom"),t.DomUtil.setClass(this._bottomleft,"gaea-zoom-right-top left-bottom gaea-zoom"))}},{key:"_visibleDom",value:function(t){this._zoomAnmationContainer.style.display=t?"block":"none"}},{key:"_getSize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=t.DomUtil.getStyle(this._zoomAnmationContainer,"width"),i=t.DomUtil.getStyle(this._zoomAnmationContainer,"height");return n=n.substr(0,n.length-2),i=i.substr(0,i.length-2),[n*e,i*e]}},{key:"_resetPostion",value:function(t,e){this._zoomAnmationContainer.style.width=t[0]+"px",this._zoomAnmationContainer.style.height=t[1]+"px",this._zoomAnmationContainer.style.left=e.x-.5*t[0]+"px",this._zoomAnmationContainer.style.top=e.y-.5*t[1]+"px"}},{key:"play",value:function(t){var e=t.wheelDelta||t.detail,n=e>0,i=this._map.getMinZoom(),o=this._map.getMaxZoom(),r=this._map.getZoom();if(!(!n&&r===i||n&&r===o)){var a=[120,90],s=[60,45];this._ax=.1*6/4,this._ay=.1125,this._vx=0,this._vy=0,n||(a=[60,45],s=[120,90],this._ax=6*-.1/4,this._ay=-.1125);var l=this._map.mouseEventToContainerPoint(t);this._resetPostion(s,l),this._visibleDom(!0),this.updateDom(n),this._update(a,l)}}},{key:"_update",value:function(e,n){this._vx+=this._ax,this._vy+=this._ay;var i=this._getSize(),o=i[0]+this._vx,r=i[1]+this._vy;if(o<60||o>120)return this._visibleDom(!1),void t.Util.cancelAnimFrame(this._animRequest);this._resetPostion([o,r],n),this._animRequest=t.Util.requestAnimFrame(function(){this._update(e,n)},this,!0)}}]),a}(t.Handler),t.Map.mergeOptions({zoomEffect:!0}),t.Map.addInitHook("addHandler","zoomEffect",s.default.MapZoom)}).call(e,n(1))},function(t,e,n){"use strict";(function(t){function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=n(0),s=function(t){return t&&t.__esModule?t:{default:t}}(a),l={position:"bottomright",prefix:'<a href="http://www.gaeainfo.com" target="_blank" title="GMap">GMap</a>'};s.default.Control.Attribution=function(n){function a(n){e(this,a),n=t.extend({},l,n);var o=i(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,n));return o._attributions={},o}return o(a,n),r(a,[{key:"onAdd",value:function(e){e.attributionControl=this,this._container=t.DomUtil.create("div","leaflet-control-attribution"),t.DomEvent&&t.DomEvent.disableClickPropagation(this._container);for(var n in e._layers)e._layers[n].getAttribution&&this.addAttribution(e._layers[n].getAttribution());return this._update(),this._container}},{key:"setPosition",value:function(t){return this.options.position=t,this._update(),this}},{key:"setPrefix",value:function(t){return this.options.prefix=t,this._update(),this}},{key:"addAttribution",value:function(t){return t?(this._attributions[t]||(this._attributions[t]=0),this._attributions[t]++,this._update(),this):this}},{key:"removeAttribution",value:function(t){return t?(this._attributions[t]&&(this._attributions[t]--,this._update()),this):this}},{key:"_update",value:function(){if(this._map){var t=[];for(var e in this._attributions)this._attributions[e]&&t.push(e);var n=[];this.options.prefix&&n.push(this.options.prefix),t.length&&n.push(t.join(", "));var i=GL.Proxy.getConfig();if(i&&i.feedback){var o='<a href="'+i.feedback+'" target="_blank" title=""></a>';n.push(o)}this._container.innerHTML=n.join(" | ")}}}]),a}(s.default.Control),t.Map.mergeOptions({attributionControl:!0,attributionControlPosition:"bottomright"}),t.Map.addInitHook(function(){if(this.attributionControl&&this.attributionControl.remove(),this.options.attributionControl){var t=new s.default.Control.Attribution({position:this.options.attributionControlPosition}).addTo(this);this.attributionControl=t}})}).call(e,n(1))},function(t,e,n){"use strict";(function(t){function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=n(0),s=function(t){return t&&t.__esModule?t:{default:t}}(a),l={position:"bottomleft",maxWidth:200,metric:!0,imperial:!0};s.default.Control.Scale=function(n){function a(n){return e(this,a),n=t.extend({},l,n),i(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,n))}return o(a,n),r(a,[{key:"onAdd",value:function(e){var n=t.DomUtil.create("div","leaflet-control-scale"),i=this.options;return this._addScales(i,"leaflet-control-scale-line",n),e.on(i.updateWhenIdle?"moveend":"move",this._update,this),e.whenReady(this._update,this),n}},{key:"onRemove",value:function(t){t.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)}},{key:"_addScales",value:function(e,n,i){e.metric&&(this._mScale=t.DomUtil.create("div",n,i)),e.imperial&&(this._iScale=t.DomUtil.create("div",n,i))}},{key:"_update",value:function(){var t=this._map,e=t.getSize().y/2,n=t.distance(t.containerPointToLatLng([0,e]),t.containerPointToLatLng([this.options.maxWidth,e]));this._updateScales(n)}},{key:"_updateScales",value:function(t){this.options.metric&&t&&this._updateMetric(t),this.options.imperial&&t&&this._updateImperial(t)}},{key:"_updateMetric",value:function(t){var e=this._getRoundNum(t),n=e<1e3?e+" m":e/1e3+" km";this._updateScale(this._mScale,n,e/t)}},{key:"_updateImperial",value:function(t){var e=3.2808399*t,n=void 0,i=void 0,o=void 0;e>5280?(n=e/5280,i=this._getRoundNum(n),this._updateScale(this._iScale,i+" mi",i/n)):(o=this._getRoundNum(e),this._updateScale(this._iScale,o+" ft",o/e))}},{key:"_updateScale",value:function(t,e,n){t.style.width=Math.round(this.options.maxWidth*n)+"px",t.innerHTML=e}},{key:"_getRoundNum",value:function(t){var e=Math.pow(10,(Math.floor(t)+"").length-1),n=t/e;return n=n>=10?10:n>=5?5:n>=3?3:n>=2?2:1,e*n}}]),a}(s.default.Control),t.Map.mergeOptions({scaleControl:!0}),t.Map.addInitHook(function(){this.options.scaleControl&&(new s.default.Control.Scale).addTo(this)})}).call(e,n(1))},function(t,e,n){"use strict";(function(t){function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();n(162);var a=n(0),s=function(t){return t&&t.__esModule?t:{default:t}}(a),l={position:"bottomright"},u=function(n){function a(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;e(this,a),n=t.extend({},l,n);var r=i(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,n,o));return r.current=null,r}return o(a,n),r(a,[{key:"onAdd",value:function(e){return this._map=e,this._map.on(s.default.Event.BaseLayerAdded,this.update,this),this._map.on(s.default.Event.BaseLayerRemoved,this.removed,this),this._map.on(s.default.Event.BaseLayerGroupChanged,this.updateGroup,this),this._container=t.DomUtil.create("div","leaflet-control basemaps basemaps-closed"),t.DomEvent.disableClickPropagation(this._container),t.Browser.touch||t.DomEvent.disableScrollPropagation(this._container),t.DomEvent.on(this._container,"mouseenter",function(){t.DomUtil.removeClass(this._container,"basemaps-closed")},this),t.DomEvent.on(this._container,"mouseleave",function(){t.DomUtil.addClass(this._container,"basemaps-closed")},this),this._container}},{key:"updateGroup",value:function(t){var e=t.layer,n=t.subLayer,i=t.added;this.current===e&&(i?this._map.addLayer(n):this._map.removeLayer(n))}},{key:"removed",value:function(e){var n=this._map,i=n.getLayerId(e);t.DomUtil.remove(this.layerNodes[i]),delete this.layerNodes[i],this.update(),0===n.getBaseLayers().length&&this._removeCurrentLayer()}},{key:"update",value:function(){var e=this._map,n=e.getBaseLayers();this.layerNodes=this.layerNodes||{};for(var i=0,o=n.length;i<o;i++){var r=n[i];this.renderDom(r)}if(0===document.getElementsByClassName(this._map.id+"-basemap active").length&&n.length>0){var a=n[0];this.renderOnMap(a);var l=e.getLayerId(a),u=this.layerNodes[l];if(!u)return;t.DomUtil.addClass(u,"active"),this._map.fire(s.default.Event.MapLoaded),this._map.fire(s.default.Event.BaseMapCompleted)}if(n.length<2)return void t.DomUtil.addClass(this._container,"hide");t.DomUtil.removeClass(this._container,"hide")}},{key:"renderDom",value:function(e){var n=this._map.getLayerId(e);if(!this.layerNodes[n]){var i=this._map.id+"-basemap basemap",o=t.DomUtil.create("div",i,this._container),r=t.DomUtil.create("img",null,o);if(r.src=e.options.preview,!e.options.preview){var a=GL.Proxy.getImgInfo("images.preview");r.src=a?a.url:""}this.layerNodes[n]=o,t.DomEvent.on(o,"click",this.activeHandler,this)}}},{key:"activeHandler",value:function(e){var n=e.currentTarget,i=void 0;for(var o in this.layerNodes)this.layerNodes[o]===n&&(i=o);if(i){var r=isNaN(Number(i))?i:Number(i),a=this._map.getBaseLayer(r);a!==this.current&&(this.renderOnMap(a),t.DomUtil.removeClass(document.getElementsByClassName(this._map.id+"-basemap basemap active")[0],"active"),t.DomUtil.addClass(n,"active"),this._map.fire(s.default.Event.BaseMapCompleted))}}},{key:"renderOnMap",value:function(t){var e=this._map.getCenter();if(t.options.bounds){var n=new s.default.Envelope(t.options.bounds);n&&(this._map.setMaxBounds(n.clone()),e&&n.contains(e)||(e=n.getCenter()))}var i=this._map.getZoom()||0;i>t.options.maxZoom&&(i=t.options.minZoom),i<t.options.minZoom&&(i=t.options.minZoom),this._removeCurrentLayer(),this._map.options.crs=t.crs||this._map.options.crs,e&&this._map.setView(e,i),this._addNewLayer(t),this.current=t}},{key:"_removeCurrentLayer",value:function(){if(this.current&&(this._map.removeLayer(this.current),this.current._group))for(var t=0,e=this.current._group.length;t<e;t++){var n=this.current._group[t];this._map.removeLayer(n)}}},{key:"_addNewLayer",value:function(t){if(t){if(this._map.addLayer(t),t._group)for(var e=0,n=t._group.length;e<n;e++){var i=t._group[e];this._map.addLayer(i)}this._map.refresh()}}}]),a}(t.Control);t.Map.addInitHook(function(){(new u).addTo(this)})}).call(e,n(1))},function(t,e,n){"use strict";(function(t){function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a=function(){function t(t,e){var n=[],i=!0,o=!1,r=void 0;try{for(var a,s=t[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);i=!0);}catch(t){o=!0,r=t}finally{try{!i&&s.return&&s.return()}finally{if(o)throw r}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),l=function t(e,n,i){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,n);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,n,i)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(i)},u=n(0),h=function(t){return t&&t.__esModule?t:{default:t}}(u),c=";";h.default.Envelope=function(n){function u(n,o){if(e(this,u),n instanceof h.default.Envelope){var r,s=i(this,(u.__proto__||Object.getPrototypeOf(u)).call(this));return r=n,i(s,r)}var l=n,f=o;if(n instanceof t.LatLngBounds&&(l=new h.default.LngLat(n.getSouthWest()),f=new h.default.LngLat(n.getNorthEast())),"string"==typeof n&&!o){var p=n.split(c),d=a(p,2);l=d[0],f=d[1]}if(t.Util.isArray(n)&&!o){if(n.length<2)throw new Error("Invalid envelope: ("+n+", "+o+")");var _=[n[0],n[1]];l=_[0],f=_[1]}var s=i(this,(u.__proto__||Object.getPrototypeOf(u)).call(this,l,f));return s.type=h.default.Envelope.type,i(s)}return o(u,n),s(u,[{key:"clone",value:function(){return new h.default.Envelope(this.getSouthWest().clone(),this.getNorthEast().clone())}},{key:"union",value:function(t){return this.extend(t)}},{key:"expand",value:function(t){return this.pad(t)}},{key:"extend",value:function(e){if(!(e=new h.default.LngLat(e)||new h.default.Envelope(e)))return this;var n=this._southWest,i=this._northEast,o=void 0,r=void 0;if(e instanceof t.LatLng)o=e,r=e;else if(e instanceof t.LatLngBounds&&(o=e._southWest,r=e._northEast,!o||!r))return this;return n||i?(n.lat=Math.min(o.lat,n.lat),n.lng=Math.min(o.lng,n.lng),i.lat=Math.max(r.lat,i.lat),i.lng=Math.max(r.lng,i.lng)):(this._southWest=new h.default.LngLat(o.lng,o.lat),this._northEast=new h.default.LngLat(r.lng,r.lat)),this}},{key:"pad",value:function(t){var e=this._southWest,n=this._northEast,i=Math.abs(e.lat-n.lat)*t,o=Math.abs(e.lng-n.lng)*t;return new h.default.Envelope(new h.default.LngLat(e.lng-o,e.lat-i),new h.default.LngLat(n.lng+o,n.lat+i))}},{key:"getCenter",value:function(){return new h.default.LngLat((this.getSouthWest().lng+this.getNorthEast().lng)/2,(this.getSouthWest().lat+this.getNorthEast().lat)/2)}},{key:"getSouthWest",value:function(){return this._southWest}},{key:"getMin",value:function(){return this.getSouthWest()}},{key:"getNorthEast",value:function(){return this._northEast}},{key:"getMax",value:function(){return this.getNorthEast()}},{key:"getNorthWest",value:function(){return new h.default.LngLat(this.getWest(),this.getNorth())}},{key:"getSouthEast",value:function(){return new h.default.LngLat(this.getEast(),this.getSouth())}},{key:"contains",value:function(e){"object"!==(void 0===e?"undefined":r(e))||Array.isArray(e)||(e=[e.lng,e.lat]),e=new h.default.LngLat(e)||new h.default.Envelope(e);var n=this._southWest,i=this._northEast,o=void 0,a=void 0;return e instanceof t.LatLngBounds?(o=e.getSouthWest(),a=e.getNorthEast()):o=a=e,o.lat>=n.lat&&a.lat<=i.lat&&o.lng>=n.lng&&a.lng<=i.lng}},{key:"intersects",value:function(t){if(t=new h.default.Envelope(t),!t.isValid()||!this.isValid())return!1;var e=this._southWest,n=this._northEast,i=t.getSouthWest(),o=t.getNorthEast(),r=o.lat>=e.lat&&i.lat<=n.lat,a=o.lng>=e.lng&&i.lng<=n.lng;return r&&a}},{key:"overlaps",value:function(t){if(t=new h.default.Envelope(t),!t.isValid()||!this.isValid())return!1;var e=this._southWest,n=this._northEast,i=t.getSouthWest(),o=t.getNorthEast(),r=o.lat>e.lat&&i.lat<n.lat,a=o.lng>e.lng&&i.lng<n.lng;return r&&a}},{key:"equals",value:function(t){return!!t&&(t=new h.default.Envelope(t),!(!t.isValid()||!this.isValid())&&(this._southWest.equals(t.getSouthWest())&&this._northEast.equals(t.getNorthEast())))}},{key:"isValid",value:function(){return l(u.prototype.__proto__||Object.getPrototypeOf(u.prototype),"isValid",this).call(this)}},{key:"toPolyline",value:function(t){return new h.default.Overlay.Polyline(this.toLngLats(),t)}},{key:"toPolygon",value:function(t){return new h.default.Overlay.Polygon(this.toLngLats(),t)}},{key:"toSize",value:function(t){var e=this.getNorthWest().toPixel(t),n=this.getSouthEast().toPixel(t);return new h.default.Size(e,n)}},{key:"toLngLats",value:function(){return[this.getSouthWest(),this.getNorthWest(),this.getNorthEast(),this.getSouthEast()]}},{key:"toString",value:function(){return this.getMin().toString()+c+this.getMax().toString()}},{key:"toBBoxString",value:function(){return l(u.prototype.__proto__||Object.getPrototypeOf(u.prototype),"toBBoxString",this).call(this)}},{key:"toArray",value:function(){return[this.getMin().toArray(),this.getMax().toArray()]}}]),u}(t.LatLngBounds),h.default.Envelope.type="Envelope"}).call(e,n(1))},function(t,e,n){"use strict";(function(t){function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var r=function(){function t(t,e){var n=[],i=!0,o=!1,r=void 0;try{for(var a,s=t[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);i=!0);}catch(t){o=!0,r=t}finally{try{!i&&s.return&&s.return()}finally{if(o)throw r}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),l=function t(e,n,i){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,n);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,n,i)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(i)},u=n(0),h=function(t){return t&&t.__esModule?t:{default:t}}(u),c=",";h.default.LngLat=function(n){function u(n,o){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;if(e(this,u),void 0===n||null===n||""===n)throw new Error("Invalid lnglat: ("+n+", "+o+")");var l=n,f=o,p=s;if(n instanceof t.LatLng){var d=[n.lng,n.lat,n.alt];l=d[0],f=d[1],p=d[2]}if(t.Util.isArray(n)&&"object"!==a(n[0])&&(2===n.length||3===n.length)){var _=r(n,3);l=_[0],f=_[1],p=_[2]}if("string"==typeof n){var y=n.split(c),g=r(y,3);l=g[0],f=g[1],p=g[2]}var m=i(this,(u.__proto__||Object.getPrototypeOf(u)).call(this,f,l,p));return m.type=h.default.LngLat.type,m}return o(u,n),s(u,[{key:"clone",value:function(){return new h.default.LngLat(this.lng,this.lat,this.alt)}},{key:"equals",value:function(t,e){return l(u.prototype.__proto__||Object.getPrototypeOf(u.prototype),"equals",this).call(this,t,e)}},{key:"wrap",value:function(){return new h.default.LngLat(t.CRS.Earth.wrapLatLng(this))}},{key:"toBounds",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;return new h.default.Envelope(l(u.prototype.__proto__||Object.getPrototypeOf(u.prototype),"toBounds",this).call(this,t))}},{key:"distanceTo",value:function(t){return l(u.prototype.__proto__||Object.getPrototypeOf(u.prototype),"distanceTo",this).call(this,t)}},{key:"toPixel",value:function(t){return t.toPixel(this)}},{key:"toString",value:function(){var e=t.Util.formatNum(this.lng,7),n=t.Util.formatNum(this.lat,7);return this.alt?""+e+c+n+c+t.Util.formatNum(this.alt,7):""+e+c+n}},{key:"toArray",value:function(){var e=t.Util.formatNum(this.lng,7),n=t.Util.formatNum(this.lat,7);return this.alt?[e,n,t.Util.formatNum(this.alt,7)]:[e,n]}}],[{key:"format",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if("string"!=typeof e)return e;if(!(e=e.trim()))return e;for(var i=e.split("#"),o=[],a=0,s=i.length;a<s;a++){var l=i[a];if(l){for(var u=l.split(";"),f=[],p=0,d=u.length;p<d;p++){var _=u[p];if(_){var y=_.split(c),g=r(y,2),m=g[0],v=g[1],b=[t.Util.formatNum(m,7),t.Util.formatNum(v,7)];m=b[0],v=b[1];var L=[m,v];n&&(L=new h.default.LngLat(L)),f.push(L)}}f.length&&o.push(f)}}return 1===o.length?o[0]:o}},{key:"parse",value:function(e){var n=[];if(Array.isArray(e)){for(var i=0,o=e.length;i<o;i++){var r=new h.default.LngLat(e[i]);n.push(r.toString())}return n.join(";")}if((e=e._delegate||e)instanceof h.default.LngLat)return e.toString();if(e instanceof h.default.Overlay.Point)return e.getLngLat().toString();if(e instanceof h.default.Overlay.Circle)return e.getCenter().toString();var a=void 0,s=[];if(e instanceof h.default.Overlay.Polyline)s=e.getLngLats(),a=!t.Polyline._flat(s);else if(e instanceof h.default.Overlay.Polygon){s=e.getLngLats();var l=!t.Polyline._flat(s);a=l&&!t.Polyline._flat(s[0])}a||(s=[s]);for(var u=0,c=s.length;u<c;u++){for(var f=Array.isArray(s[u][0])?s[u][0]:s[u],p=[],d=0,_=f.length;d<_;d++){var y=new h.default.LngLat(f[d]);p.push(y.toString())}n.push(p.join(";"))}return n.join("#")}}]),u}(t.LatLng),h.default.LngLat.type="LngLat"}).call(e,n(1))},function(t,e,n){"use strict";(function(t){function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var r=function(){function t(t,e){var n=[],i=!0,o=!1,r=void 0;try{for(var a,s=t[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);i=!0);}catch(t){o=!0,r=t}finally{try{!i&&s.return&&s.return()}finally{if(o)throw r}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=n(0),l=function(t){return t&&t.__esModule?t:{default:t}}(s),u=",";l.default.Pixel=function(n){function s(n,o){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(e(this,s),void 0===n||null===n||""===n)throw new Error("Invalid pixel: ("+n+", "+o+")");var h=n,c=o;if(n instanceof t.Point){var f=[n.x,n.y];h=f[0],c=f[1]}if("string"==typeof n){var p=n.split(u),d=r(p,2);h=d[0],c=d[1]}if(t.Util.isArray(n)){var _=[n[0],n[1]];h=_[0],c=_[1],a=o||!1}var y=i(this,(s.__proto__||Object.getPrototypeOf(s)).call(this,h,c,a));return y.type=l.default.Pixel.type,y}return o(s,n),a(s,[{key:"clone",value:function(){return new l.default.Pixel(this.x,this.y)}},{key:"add",value:function(t){return t=t instanceof l.default.Pixel?t:new l.default.Pixel(t),this.clone()._add(t)}},{key:"subtract",value:function(t){return t=t instanceof l.default.Pixel?t:new l.default.Pixel(t),this.clone()._subtract(t)}},{key:"multiplyBy",value:function(t){return this.clone()._multiplyBy(t)}},{key:"divideBy",value:function(t){return this.clone()._divideBy(t)}},{key:"scaleBy",value:function(t){return t=t instanceof l.default.Pixel?t:new l.default.Pixel(t),new l.default.Pixel(this.x*t.x,this.y*t.y)}},{key:"unscaleBy",value:function(t){return t=t instanceof l.default.Pixel?t:new l.default.Pixel(t),new l.default.Pixel(this.x/t.x,this.y/t.y)}},{key:"round",value:function(){return this.clone()._round()}},{key:"floor",value:function(){return this.clone()._floor()}},{key:"ceil",value:function(){return this.clone()._ceil()}},{key:"distanceTo",value:function(t){t=t instanceof l.default.Pixel?t:new l.default.Pixel(t);var e=t.x-this.x,n=t.y-this.y;return Math.sqrt(e*e+n*n)}},{key:"equals",value:function(t){return t=t instanceof l.default.Pixel?t:new l.default.Pixel(t),t.x===this.x&&t.y===this.y}},{key:"contains",value:function(t){return t=t instanceof l.default.Pixel?t:new l.default.Pixel(t),Math.abs(t.x)<=Math.abs(this.x)&&Math.abs(t.y)<=Math.abs(this.y)}},{key:"toLngLat",value:function(t){return t.toLngLat(this)}},{key:"toString",value:function(){return t.Util.formatNum(this.x)+u+t.Util.formatNum(this.y)}},{key:"toArray",value:function(){return[this.x,this.y]}}]),s}(t.Point),l.default.Pixel.type="Pixel"}).call(e,n(1))},function(t,e,n){"use strict";(function(t){function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var r=function(){function t(t,e){var n=[],i=!0,o=!1,r=void 0;try{for(var a,s=t[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);i=!0);}catch(t){o=!0,r=t}finally{try{!i&&s.return&&s.return()}finally{if(o)throw r}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=function t(e,n,i){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,n);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,n,i)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(i)},l=n(0),u=function(t){return t&&t.__esModule?t:{default:t}}(l),h=";";u.default.Size=function(n){function l(n,o){if(e(this,l),n instanceof u.default.Size){var a,s=i(this,(l.__proto__||Object.getPrototypeOf(l)).call(this));return a=n,i(s,a)}var c=n,f=o;if(n instanceof t.Bounds&&(c=new u.default.Pixel(n.min),f=new u.default.Pixel(n.max)),"string"==typeof n&&!o){var p=n.split(h),d=r(p,2);c=d[0],f=d[1]}if(t.Util.isArray(n)&&!o){if(n.length<2)throw new Error("Invalid size: ("+n+", "+o+")");var _=[n[0],n[1]];c=_[0],f=_[1]}var s=i(this,(l.__proto__||Object.getPrototypeOf(l)).call(this,c,f));return s.type=u.default.Size.type,i(s)}return o(l,n),a(l,[{key:"clone",value:function(){return new u.default.Pixel(this.min.clone(),this.max.clone())}},{key:"union",value:function(t){return this.extend(t)}},{key:"extend",value:function(t){return t=new u.default.Pixel(t),this.min||this.max?(this.min.x=Math.min(t.x,this.min.x),this.max.x=Math.max(t.x,this.max.x),this.min.y=Math.min(t.y,this.min.y),this.max.y=Math.max(t.y,this.max.y)):(this.min=t.clone(),this.max=t.clone()),this}},{key:"getCenter",value:function(t){return new u.default.Pixel((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,t)}},{key:"getBottomLeft",value:function(){return new u.default.Pixel(this.min.x,this.max.y)}},{key:"getTopRight",value:function(){return new u.default.Pixel(this.max.x,this.min.y)}},{key:"getMin",value:function(){return this.min}},{key:"getMax",value:function(){return this.max}},{key:"getSize",value:function(){return this.max.subtract(this.min)}},{key:"contains",value:function(e){e=new u.default.Pixel(e)||new u.default.Size(e);var n=void 0,i=void 0;return e instanceof t.Bounds?(n=e.min,i=e.max):n=i=e,n.x>=this.min.x&&i.x<=this.max.x&&n.y>=this.min.y&&i.y<=this.max.y}},{key:"intersects",value:function(t){if(t=new u.default.Size(t),!t.isValid()||!this.isValid())return!1;var e=this.min,n=this.max,i=t.min,o=t.max,r=o.x>=e.x&&i.x<=n.x,a=o.y>=e.y&&i.y<=n.y;return r&&a}},{key:"overlaps",value:function(t){if(t=new u.default.Size(t),!t.isValid()||!this.isValid())return!1;var e=this.min,n=this.max,i=t.min,o=t.max,r=o.x>e.x&&i.x<n.x,a=o.y>e.y&&i.y<n.y;return r&&a}},{key:"isValid",value:function(){return s(l.prototype.__proto__||Object.getPrototypeOf(l.prototype),"isValid",this).call(this)}},{key:"toEnvelope",value:function(t){var e=new u.default.Pixel(this.min.x,this.max.y).toLngLat(t),n=new u.default.Pixel(this.max.x,this.min.y).toLngLat(t);return new u.default.Envelope(e,n)}},{key:"toString",value:function(){return this.min.toString()+h+this.max.toString()}},{key:"toArray",value:function(){return[this.getMin.toArray(),this.getMax().toArray()]}}]),l}(t.Bounds),u.default.Size.type="Size"}).call(e,n(1))},function(t,e,n){"use strict";(function(t){function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=function t(e,n,i){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,n);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,n,i)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(i)},s=n(0),l={text:"",title:"",clazz:"",position:"topleft"};(function(t){return t&&t.__esModule?t:{default:t}})(s).default.Control=function(n){function s(n){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;e(this,s);var r=t.extend({},l,n),a=i(this,(s.__proto__||Object.getPrototypeOf(s)).call(this,r));return o&&(a.callback=o),a}return o(s,n),r(s,[{key:"onAdd",value:function(e){this._container=t.DomUtil.create("div","gaea-control leaflet-bar");var n=t.DomUtil.create("a",this.options.clazz,this._container);n.href="javascript:void(0);",n.innerHTML=this.options.text,n.title=this.options.title;var i=t.DomEvent.stopPropagation;return t.DomEvent.on(this._container,"click",i).on(this._container,"mousedown",i).on(this._container,"dblclick",i).on(this._container,"click",t.DomEvent.preventDefault),this.callback&&t.DomEvent.on(this._container,"click",this.callback,this),this._container}},{key:"getPosition",value:function(){return a(s.prototype.__proto__||Object.getPrototypeOf(s.prototype),"getPosition",this).call(this)}},{key:"setPosition",value:function(t){var e=this._map;return e&&e.removeControl(this),this.options.position=t,e&&e.addControl(this),this}},{key:"getContainer",value:function(){return this._container}},{key:"addTo",value:function(t){return t=t&&t._delegate||t,a(s.prototype.__proto__||Object.getPrototypeOf(s.prototype),"addTo",this).call(this,t)}},{key:"remove",value:function(){return a(s.prototype.__proto__||Object.getPrototypeOf(s.prototype),"remove",this).call(this)}}]),s}(t.Control)}).call(e,n(1))},function(t,e,n){"use strict";(function(t){function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=function t(e,n,i){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,n);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,n,i)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(i)},s=n(0),l=function(t){return t&&t.__esModule?t:{default:t}}(s);l.default.Handler=function(t){function n(t){return e(this,n),i(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,t))}return o(n,t),r(n,[{key:"enable",value:function(){return a(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"enable",this).call(this)}},{key:"disable",value:function(){return a(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"disable",this).call(this)}},{key:"enabled",value:function(){return a(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"enabled",this).call(this)}}]),n}(t.Handler),l.default.Handler.PointDrag=function(n){function a(t){e(this,a);var n=i(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,t));return n._point=n._marker,n}return o(a,n),r(a,[{key:"addHooks",value:function(){var e=this._getMarkerIcon();this._draggable||(this._draggable=new t.Draggable(e,e,!0)),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),t.DomUtil.addClass(e,"leaflet-marker-draggable")}},{key:"removeHooks",value:function(){this._draggable.off({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._getMarkerIcon()&&t.DomUtil.removeClass(this._getMarkerIcon(),"leaflet-marker-draggable")}},{key:"_onDrag",value:function(e){var n=this._marker,i=n._shadow,o=t.DomUtil.getPosition(this._getMarkerIcon()),r=n._map.layerPointToLatLng(o);i&&t.DomUtil.setPosition(i,o),n._latlng=r,e.latlng=r,e.oldLatLng=this._oldLatLng,e.oldLngLat=this._oldLatLng,e.lnglat=r,n.fire("move",e).fire("drag",e)}},{key:"_onDragEnd",value:function(t){delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",t)}},{key:"_getMarkerIcon",value:function(){return this._marker._iconWrap||this._marker._icon}}]),a}(t.Handler.MarkerDrag)}).call(e,n(1))},function(t,e,n){"use strict";(function(t){function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=n(0),s=function(t){return t&&t.__esModule?t:{default:t}}(a);n(105),n(164),n(163),s.default.ClusterLayer=function(n){function a(n){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e(this,a);var r=i(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,o));return r.id=n||t.stamp(r),r.type=s.default.ClusterLayer.type,r}return o(a,n),r(a,[{key:"getLayer",value:function(e){var n=null;return this.eachLayer(function(i){i.id!==e&&t.stamp(i)!==e||(n=i)}),n}},{key:"getLayerId",value:function(e){return e.id||t.stamp(e)}},{key:"invoke",value:function(e){var n,i,o=Array.prototype.slice.call(arguments,1),r=this.getLayers();for(n in r)i=r[n],i[e]&&i[e].apply(i,o);return this._featureGroup.eachLayer(function(n){n instanceof t.MarkerCluster&&n[e]&&n[e].apply(n,o)}),this}},{key:"_defaultIconCreateFunction",value:function(t){var e=t.getChildCount(),n=" marker-cluster-";return n+=e<10?"small":e<100?"medium":"large",new GL.Icon.Div("<div><span>"+e+"</span></div>","marker-cluster"+n,[40,40])}},{key:"setOptions",value:function(e){return t.Util.setOptions(this,e),this}},{key:"addOverlay",value:function(t){return t?(t._layer=this,this.addLayer(t),this):this}},{key:"addOverlays",value:function(t){var e=this;return t?(t.forEach(function(t){t._layer=e}),this.addLayers(t),this):this}},{key:"removeOverlays",value:function(t){if(!t)return this;for(var e=0,n=t.length;e<n;e++)this.removeOverlay(t[e]);return this}},{key:"removeOverlay",value:function(t){return t?(this.removeLayer(t),this):this}},{key:"getOverlay",value:function(t){return this.getLayer(t)}},{key:"getOverlays",value:function(){return this.getLayers()}},{key:"hasOverlay",value:function(t){return t?this.hasLayer(t):this}},{key:"clear",value:function(){return this.clearLayers(),this}},{key:"clearHighlight",value:function(){return this.eachOverlay(function(t){t.clearHighlight()}),this}},{key:"getBounds",value:function(){var t=new s.default.Envelope;for(var e in this._layers){var n=this._layers[e];t.extend(n.getBounds?n.getBounds():n.getLngLat())}return t}},{key:"hide",value:function(){return this._$map=this._map,this._$map.removeLayer(this),this}},{key:"show",value:function(){return this._$map&&(this._$map.addLayer(this),delete this._$map),this}},{key:"visible",value:function(t){return t?this.show():this.hide(),this}}]),a}(t.MarkerClusterGroup),s.default.ClusterLayer.type="ClusterLayer",t.MarkerCluster.include({getOverlay:function(e){var n=this.getAllChildMarkers().find(function(n){return n.id===e||t.stamp(n)===e});return n&&n._api||n},getOverlays:function(){return this.getAllChildMarkers().map(function(t){return t&&t._api||t})}}),t.MarkerCluster.include({hide:function(){return this.visible(!1)},show:function(){return this.visible(!0)},visible:function(e){e||(this.closePopup(),this.closeTooltip());var n=this.getElement();return n?(e?(t.DomUtil.removeClass(n,"hide"),t.DomUtil.addClass(n,"show")):(t.DomUtil.removeClass(n,"show"),t.DomUtil.addClass(n,"hide")),this):this}})}).call(e,n(1))},function(t,e,n){"use strict";(function(n){var i,o,r,a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(n,s){"object"===a(e)&&void 0!==t?s(e):(o=[e],i=s,void 0!==(r="function"==typeof i?i.apply(e,o):i)&&(t.exports=r))}(0,function(t){var e=n.MarkerClusterGroup=n.FeatureGroup.extend({options:{maxClusterRadius:80,iconCreateFunction:null,clusterPane:n.Marker.prototype.options.pane,spiderfyOnMaxZoom:!0,showCoverageOnHover:!0,zoomToBoundsOnClick:!0,singleMarkerMode:!1,disableClusteringAtZoom:null,removeOutsideVisibleBounds:!0,animate:!0,animateAddingMarkers:!1,spiderfyDistanceMultiplier:1,spiderLegPolylineOptions:{weight:1.5,color:"#222",opacity:.5},chunkedLoading:!1,chunkInterval:200,chunkDelay:50,chunkProgress:null,polygonOptions:{}},initialize:function(t){n.Util.setOptions(this,t),this.options.iconCreateFunction||(this.options.iconCreateFunction=this._defaultIconCreateFunction),this._featureGroup=n.featureGroup(),this._featureGroup.addEventParent(this),this._nonPointGroup=n.featureGroup(),this._nonPointGroup.addEventParent(this),this._inZoomAnimation=0,this._needsClustering=[],this._needsRemoving=[],this._currentShownBounds=null,this._queue=[],this._childMarkerEventHandlers={dragstart:this._childMarkerDragStart,move:this._childMarkerMoved,dragend:this._childMarkerDragEnd};var e=n.DomUtil.TRANSITION&&this.options.animate;n.extend(this,e?this._withAnimation:this._noAnimation),this._markerCluster=e?n.MarkerCluster:n.MarkerClusterNonAnimated},addLayer:function(t){if(t instanceof n.LayerGroup)return this.addLayers([t]);if(!t.getLatLng)return this._nonPointGroup.addLayer(t),this.fire("layeradd",{layer:t}),this;if(!this._map)return this._needsClustering.push(t),this.fire("layeradd",{layer:t}),this;if(this.hasLayer(t))return this;this._unspiderfy&&this._unspiderfy(),this._addLayer(t,this._maxZoom),this.fire("layeradd",{layer:t}),this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons();var e=t,i=this._zoom;if(t.__parent)for(;e.__parent._zoom>=i;)e=e.__parent;return this._currentShownBounds.contains(e.getLatLng())&&(this.options.animateAddingMarkers?this._animationAddLayer(t,e):this._animationAddLayerNonAnimated(t,e)),this},removeLayer:function(t){return t instanceof n.LayerGroup?this.removeLayers([t]):t.getLatLng?this._map?t.__parent?(this._unspiderfy&&(this._unspiderfy(),this._unspiderfyLayer(t)),this._removeLayer(t,!0),this.fire("layerremove",{layer:t}),this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons(),t.off(this._childMarkerEventHandlers,this),this._featureGroup.hasLayer(t)&&(this._featureGroup.removeLayer(t),t.clusterShow&&t.clusterShow()),this):this:(!this._arraySplice(this._needsClustering,t)&&this.hasLayer(t)&&this._needsRemoving.push({layer:t,latlng:t._latlng}),this.fire("layerremove",{layer:t}),this):(this._nonPointGroup.removeLayer(t),this.fire("layerremove",{layer:t}),this)},addLayers:function(t,e){if(!n.Util.isArray(t))return this.addLayer(t);var i,o=this._featureGroup,r=this._nonPointGroup,a=this.options.chunkedLoading,s=this.options.chunkInterval,l=this.options.chunkProgress,u=t.length,h=0,c=!0;if(this._map){var f=(new Date).getTime(),p=n.bind(function(){for(var d=(new Date).getTime();h<u;h++){if(a&&h%200==0){if((new Date).getTime()-d>s)break}if((i=t[h])instanceof n.LayerGroup)c&&(t=t.slice(),c=!1),this._extractNonGroupLayers(i,t),u=t.length;else if(i.getLatLng){if(!this.hasLayer(i)&&(this._addLayer(i,this._maxZoom),e||this.fire("layeradd",{layer:i}),i.__parent&&2===i.__parent.getChildCount())){var _=i.__parent.getAllChildMarkers(),y=_[0]===i?_[1]:_[0];o.removeLayer(y)}}else r.addLayer(i),e||this.fire("layeradd",{layer:i})}l&&l(h,u,(new Date).getTime()-f),h===u?(this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons(),this._topClusterLevel._recursivelyAddChildrenToMap(null,this._zoom,this._currentShownBounds)):setTimeout(p,this.options.chunkDelay)},this);p()}else for(var d=this._needsClustering;h<u;h++)i=t[h],i instanceof n.LayerGroup?(c&&(t=t.slice(),c=!1),this._extractNonGroupLayers(i,t),u=t.length):i.getLatLng?this.hasLayer(i)||d.push(i):r.addLayer(i);return this},removeLayers:function(t){var e,i,o=t.length,r=this._featureGroup,a=this._nonPointGroup,s=!0;if(!this._map){for(e=0;e<o;e++)i=t[e],i instanceof n.LayerGroup?(s&&(t=t.slice(),s=!1),this._extractNonGroupLayers(i,t),o=t.length):(this._arraySplice(this._needsClustering,i),a.removeLayer(i),this.hasLayer(i)&&this._needsRemoving.push({layer:i,latlng:i._latlng}),this.fire("layerremove",{layer:i}));return this}if(this._unspiderfy){this._unspiderfy();var l=t.slice(),u=o;for(e=0;e<u;e++)i=l[e],i instanceof n.LayerGroup?(this._extractNonGroupLayers(i,l),u=l.length):this._unspiderfyLayer(i)}for(e=0;e<o;e++)i=t[e],i instanceof n.LayerGroup?(s&&(t=t.slice(),s=!1),this._extractNonGroupLayers(i,t),o=t.length):i.__parent?(this._removeLayer(i,!0,!0),this.fire("layerremove",{layer:i}),r.hasLayer(i)&&(r.removeLayer(i),i.clusterShow&&i.clusterShow())):(a.removeLayer(i),this.fire("layerremove",{layer:i}));return this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons(),this._topClusterLevel._recursivelyAddChildrenToMap(null,this._zoom,this._currentShownBounds),this},clearLayers:function(){return this._map||(this._needsClustering=[],this._needsRemoving=[],delete this._gridClusters,delete this._gridUnclustered),this._noanimationUnspiderfy&&this._noanimationUnspiderfy(),this._featureGroup.clearLayers(),this._nonPointGroup.clearLayers(),this.eachLayer(function(t){t.off(this._childMarkerEventHandlers,this),delete t.__parent},this),this._map&&this._generateInitialClusters(),this},getBounds:function(){var t=new n.LatLngBounds;this._topClusterLevel&&t.extend(this._topClusterLevel._bounds);for(var e=this._needsClustering.length-1;e>=0;e--)t.extend(this._needsClustering[e].getLatLng());return t.extend(this._nonPointGroup.getBounds()),t},eachLayer:function(t,e){var n,i,o,r=this._needsClustering.slice(),a=this._needsRemoving;for(this._topClusterLevel&&this._topClusterLevel.getAllChildMarkers(r),i=r.length-1;i>=0;i--){for(n=!0,o=a.length-1;o>=0;o--)if(a[o].layer===r[i]){n=!1;break}n&&t.call(e,r[i])}this._nonPointGroup.eachLayer(t,e)},getLayers:function(){var t=[];return this.eachLayer(function(e){t.push(e)}),t},getLayer:function(t){var e=null;return t=parseInt(t,10),this.eachLayer(function(i){n.stamp(i)===t&&(e=i)}),e},hasLayer:function(t){if(!t)return!1;var e,n=this._needsClustering;for(e=n.length-1;e>=0;e--)if(n[e]===t)return!0;for(n=this._needsRemoving,e=n.length-1;e>=0;e--)if(n[e].layer===t)return!1;return!(!t.__parent||t.__parent._group!==this)||this._nonPointGroup.hasLayer(t)},zoomToShowLayer:function(t,e){"function"!=typeof e&&(e=function(){});var n=function n(){!t._icon&&!t.__parent._icon||this._inZoomAnimation||(this._map.off("moveend",n,this),this.off("animationend",n,this),t._icon?e():t.__parent._icon&&(this.once("spiderfied",e,this),t.__parent.spiderfy()))};t._icon&&this._map.getBounds().contains(t.getLatLng())?e():t.__parent._zoom<Math.round(this._map._zoom)?(this._map.on("moveend",n,this),this._map.panTo(t.getLatLng())):(this._map.on("moveend",n,this),this.on("animationend",n,this),t.__parent.zoomToBounds())},onAdd:function(t){this._map=t;var e,n,i;if(!isFinite(this._map.getMaxZoom()))throw"Map has no maxZoom specified";for(this._featureGroup.addTo(t),this._nonPointGroup.addTo(t),this._gridClusters||this._generateInitialClusters(),this._maxLat=t.options.crs.projection.MAX_LATITUDE,e=0,n=this._needsRemoving.length;e<n;e++)i=this._needsRemoving[e],i.newlatlng=i.layer._latlng,i.layer._latlng=i.latlng;for(e=0,n=this._needsRemoving.length;e<n;e++)i=this._needsRemoving[e],this._removeLayer(i.layer,!0),i.layer._latlng=i.newlatlng;this._needsRemoving=[],this._zoom=Math.round(this._map._zoom),this._currentShownBounds=this._getExpandedVisibleBounds(),this._map.on("zoomend",this._zoomEnd,this),this._map.on("moveend",this._moveEnd,this),this._spiderfierOnAdd&&this._spiderfierOnAdd(),this._bindEvents(),n=this._needsClustering,this._needsClustering=[],this.addLayers(n,!0)},onRemove:function(t){t.off("zoomend",this._zoomEnd,this),t.off("moveend",this._moveEnd,this),this._unbindEvents(),this._map._mapPane.className=this._map._mapPane.className.replace(" leaflet-cluster-anim",""),this._spiderfierOnRemove&&this._spiderfierOnRemove(),delete this._maxLat,this._hideCoverage(),this._featureGroup.remove(),this._nonPointGroup.remove(),this._featureGroup.clearLayers(),this._map=null},getVisibleParent:function(t){for(var e=t;e&&!e._icon;)e=e.__parent;return e||null},_arraySplice:function(t,e){for(var n=t.length-1;n>=0;n--)if(t[n]===e)return t.splice(n,1),!0},_removeFromGridUnclustered:function(t,e){for(var n=this._map,i=this._gridUnclustered,o=Math.floor(this._map.getMinZoom());e>=o&&i[e].removeObject(t,n.project(t.getLatLng(),e));e--);},_childMarkerDragStart:function(t){t.target.__dragStart=t.target._latlng},_childMarkerMoved:function(t){if(!this._ignoreMove&&!t.target.__dragStart){var e=t.target._popup&&t.target._popup.isOpen();this._moveChild(t.target,t.oldLatLng,t.latlng),e&&t.target.openPopup()}},_moveChild:function(t,e,n){t._latlng=e,this.removeLayer(t),t._latlng=n,this.addLayer(t)},_childMarkerDragEnd:function(t){var e=t.target.__dragStart;delete t.target.__dragStart,e&&this._moveChild(t.target,e,t.target._latlng)},_removeLayer:function(t,e,n){var i=this._gridClusters,o=this._gridUnclustered,r=this._featureGroup,a=this._map,s=Math.floor(this._map.getMinZoom());e&&this._removeFromGridUnclustered(t,this._maxZoom);var l,u=t.__parent,h=u._markers;for(this._arraySplice(h,t);u&&(u._childCount--,u._boundsNeedUpdate=!0,!(u._zoom<s));)e&&u._childCount<=1?(l=u._markers[0]===t?u._markers[1]:u._markers[0],i[u._zoom].removeObject(u,a.project(u._cLatLng,u._zoom)),o[u._zoom].addObject(l,a.project(l.getLatLng(),u._zoom)),this._arraySplice(u.__parent._childClusters,u),u.__parent._markers.push(l),l.__parent=u.__parent,u._icon&&(r.removeLayer(u),n||r.addLayer(l))):u._iconNeedsUpdate=!0,u=u.__parent;delete t.__parent},_isOrIsParent:function(t,e){for(;e;){if(t===e)return!0;e=e.parentNode}return!1},fire:function(t,e,i){if(e&&e.layer instanceof n.MarkerCluster){if(e.originalEvent&&this._isOrIsParent(e.layer._icon,e.originalEvent.relatedTarget))return;t="cluster"+t}n.FeatureGroup.prototype.fire.call(this,t,e,i)},listens:function(t,e){return n.FeatureGroup.prototype.listens.call(this,t,e)||n.FeatureGroup.prototype.listens.call(this,"cluster"+t,e)},_defaultIconCreateFunction:function(t){var e=t.getChildCount(),i=" marker-cluster-";return i+=e<10?"small":e<100?"medium":"large",new n.DivIcon({html:"<div><span>"+e+"</span></div>",className:"marker-cluster"+i,iconSize:new n.Point(40,40)})},_bindEvents:function(){var t=this._map,e=this.options.spiderfyOnMaxZoom,n=this.options.showCoverageOnHover,i=this.options.zoomToBoundsOnClick;(e||i)&&this.on("clusterclick",this._zoomOrSpiderfy,this),n&&(this.on("clustermouseover",this._showCoverage,this),this.on("clustermouseout",this._hideCoverage,this),t.on("zoomend",this._hideCoverage,this))},_zoomOrSpiderfy:function(t){for(var e=t.layer,n=e;1===n._childClusters.length;)n=n._childClusters[0];n._zoom===this._maxZoom&&n._childCount===e._childCount&&this.options.spiderfyOnMaxZoom?e.spiderfy():this.options.zoomToBoundsOnClick&&e.zoomToBounds(),t.originalEvent&&13===t.originalEvent.keyCode&&this._map._container.focus()},_showCoverage:function(t){var e=this._map;this._inZoomAnimation||(this._shownPolygon&&e.removeLayer(this._shownPolygon),t.layer.getChildCount()>2&&t.layer!==this._spiderfied&&(this._shownPolygon=new n.Polygon(t.layer.getConvexHull(),this.options.polygonOptions),e.addLayer(this._shownPolygon)))},_hideCoverage:function(){this._shownPolygon&&(this._map.removeLayer(this._shownPolygon),this._shownPolygon=null)},_unbindEvents:function(){var t=this.options.spiderfyOnMaxZoom,e=this.options.showCoverageOnHover,n=this.options.zoomToBoundsOnClick,i=this._map;(t||n)&&this.off("clusterclick",this._zoomOrSpiderfy,this),e&&(this.off("clustermouseover",this._showCoverage,this),this.off("clustermouseout",this._hideCoverage,this),i.off("zoomend",this._hideCoverage,this))},_zoomEnd:function(){this._map&&(this._mergeSplitClusters(),this._zoom=Math.round(this._map._zoom),this._currentShownBounds=this._getExpandedVisibleBounds())},_moveEnd:function(){if(!this._inZoomAnimation){var t=this._getExpandedVisibleBounds();this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),this._zoom,t),this._topClusterLevel._recursivelyAddChildrenToMap(null,Math.round(this._map._zoom),t),this._currentShownBounds=t}},_generateInitialClusters:function(){var t=Math.ceil(this._map.getMaxZoom()),e=Math.floor(this._map.getMinZoom()),i=this.options.maxClusterRadius,o=i;"function"!=typeof i&&(o=function(){return i}),null!==this.options.disableClusteringAtZoom&&(t=this.options.disableClusteringAtZoom-1),this._maxZoom=t,this._gridClusters={},this._gridUnclustered={};for(var r=t;r>=e;r--)this._gridClusters[r]=new n.DistanceGrid(o(r)),this._gridUnclustered[r]=new n.DistanceGrid(o(r));this._topClusterLevel=new this._markerCluster(this,e-1)},_addLayer:function(t,e){var n,i,o=this._gridClusters,r=this._gridUnclustered,a=Math.floor(this._map.getMinZoom());for(this.options.singleMarkerMode&&this._overrideMarkerIcon(t),t.on(this._childMarkerEventHandlers,this);e>=a;e--){n=this._map.project(t.getLatLng(),e);var s=o[e].getNearObject(n);if(s)return s._addChild(t),void(t.__parent=s);if(s=r[e].getNearObject(n)){var l=s.__parent;l&&this._removeLayer(s,!1);var u=new this._markerCluster(this,e,s,t);o[e].addObject(u,this._map.project(u._cLatLng,e)),s.__parent=u,t.__parent=u;var h=u;for(i=e-1;i>l._zoom;i--)h=new this._markerCluster(this,i,h),o[i].addObject(h,this._map.project(s.getLatLng(),i));return l._addChild(h),void this._removeFromGridUnclustered(s,e)}r[e].addObject(t,n)}this._topClusterLevel._addChild(t),t.__parent=this._topClusterLevel},_refreshClustersIcons:function(){this._featureGroup.eachLayer(function(t){t instanceof n.MarkerCluster&&t._iconNeedsUpdate&&t._updateIcon()})},_enqueue:function(t){this._queue.push(t),this._queueTimeout||(this._queueTimeout=setTimeout(n.bind(this._processQueue,this),300))},_processQueue:function(){for(var t=0;t<this._queue.length;t++)this._queue[t].call(this);this._queue.length=0,clearTimeout(this._queueTimeout),this._queueTimeout=null},_mergeSplitClusters:function(){var t=Math.round(this._map._zoom);this._processQueue(),this._zoom<t&&this._currentShownBounds.intersects(this._getExpandedVisibleBounds())?(this._animationStart(),this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),this._zoom,this._getExpandedVisibleBounds()),this._animationZoomIn(this._zoom,t)):this._zoom>t?(this._animationStart(),this._animationZoomOut(this._zoom,t)):this._moveEnd()},_getExpandedVisibleBounds:function(){return this.options.removeOutsideVisibleBounds?n.Browser.mobile?this._checkBoundsMaxLat(this._map.getBounds()):this._checkBoundsMaxLat(this._map.getBounds().pad(1)):this._mapBoundsInfinite},_checkBoundsMaxLat:function(t){var e=this._maxLat;return void 0!==e&&(t.getNorth()>=e&&(t._northEast.lat=1/0),t.getSouth()<=-e&&(t._southWest.lat=-1/0)),t},_animationAddLayerNonAnimated:function(t,e){if(e===t)this._featureGroup.addLayer(t);else if(2===e._childCount){e._addToMap();var n=e.getAllChildMarkers();this._featureGroup.removeLayer(n[0]),this._featureGroup.removeLayer(n[1])}else e._updateIcon()},_extractNonGroupLayers:function(t,e){var i,o=t.getLayers(),r=0;for(e=e||[];r<o.length;r++)i=o[r],i instanceof n.LayerGroup?this._extractNonGroupLayers(i,e):e.push(i);return e},_overrideMarkerIcon:function(t){return t.options.icon=this.options.iconCreateFunction({getChildCount:function(){return 1},getAllChildMarkers:function(){return[t]}})}});n.MarkerClusterGroup.include({_mapBoundsInfinite:new n.LatLngBounds(new n.LatLng(-1/0,-1/0),new n.LatLng(1/0,1/0))}),n.MarkerClusterGroup.include({_noAnimation:{_animationStart:function(){},_animationZoomIn:function(t,e){this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),t),this._topClusterLevel._recursivelyAddChildrenToMap(null,e,this._getExpandedVisibleBounds()),this.fire("animationend")},_animationZoomOut:function(t,e){this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),t),this._topClusterLevel._recursivelyAddChildrenToMap(null,e,this._getExpandedVisibleBounds()),this.fire("animationend")},_animationAddLayer:function(t,e){this._animationAddLayerNonAnimated(t,e)}},_withAnimation:{_animationStart:function(){this._map._mapPane.className+=" leaflet-cluster-anim",this._inZoomAnimation++},_animationZoomIn:function(t,e){var i,o=this._getExpandedVisibleBounds(),r=this._featureGroup,a=Math.floor(this._map.getMinZoom());this._ignoreMove=!0,this._topClusterLevel._recursively(o,t,a,function(n){var a,s=n._latlng,l=n._markers;for(o.contains(s)||(s=null),n._isSingleParent()&&t+1===e?(r.removeLayer(n),n._recursivelyAddChildrenToMap(null,e,o)):(n.clusterHide(),n._recursivelyAddChildrenToMap(s,e,o)),i=l.length-1;i>=0;i--)a=l[i],o.contains(a._latlng)||r.removeLayer(a)}),this._forceLayout(),this._topClusterLevel._recursivelyBecomeVisible(o,e),r.eachLayer(function(t){t instanceof n.MarkerCluster||!t._icon||t.clusterShow()}),this._topClusterLevel._recursively(o,t,e,function(t){t._recursivelyRestoreChildPositions(e)}),this._ignoreMove=!1,this._enqueue(function(){this._topClusterLevel._recursively(o,t,a,function(t){r.removeLayer(t),t.clusterShow()}),this._animationEnd()})},_animationZoomOut:function(t,e){this._animationZoomOutSingle(this._topClusterLevel,t-1,e),this._topClusterLevel._recursivelyAddChildrenToMap(null,e,this._getExpandedVisibleBounds()),this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),t,this._getExpandedVisibleBounds())},_animationAddLayer:function(t,e){var n=this,i=this._featureGroup;i.addLayer(t),e!==t&&(e._childCount>2?(e._updateIcon(),this._forceLayout(),this._animationStart(),t._setPos(this._map.latLngToLayerPoint(e.getLatLng())),t.clusterHide(),this._enqueue(function(){i.removeLayer(t),t.clusterShow(),n._animationEnd()})):(this._forceLayout(),n._animationStart(),n._animationZoomOutSingle(e,this._map.getMaxZoom(),this._zoom)))}},_animationZoomOutSingle:function(t,e,n){var i=this._getExpandedVisibleBounds(),o=Math.floor(this._map.getMinZoom());t._recursivelyAnimateChildrenInAndAddSelfToMap(i,o,e+1,n);var r=this;this._forceLayout(),t._recursivelyBecomeVisible(i,n),this._enqueue(function(){if(1===t._childCount){var a=t._markers[0];this._ignoreMove=!0,a.setLatLng(a.getLatLng()),this._ignoreMove=!1,a.clusterShow&&a.clusterShow()}else t._recursively(i,n,o,function(t){t._recursivelyRemoveChildrenFromMap(i,o,e+1)});r._animationEnd()})},_animationEnd:function(){this._map&&(this._map._mapPane.className=this._map._mapPane.className.replace(" leaflet-cluster-anim","")),this._inZoomAnimation--,this.fire("animationend")},_forceLayout:function(){n.Util.falseFn(document.body.offsetWidth)}}),n.markerClusterGroup=function(t){return new n.MarkerClusterGroup(t)};var i=n.MarkerCluster=n.Marker.extend({options:n.Icon.prototype.options,initialize:function(t,e,i,o){n.Marker.prototype.initialize.call(this,i?i._cLatLng||i.getLatLng():new n.LatLng(0,0),{icon:this,pane:t.options.clusterPane}),this._group=t,this._zoom=e,this._markers=[],this._childClusters=[],this._childCount=0,this._iconNeedsUpdate=!0,this._boundsNeedUpdate=!0,this._bounds=new n.LatLngBounds,i&&this._addChild(i),o&&this._addChild(o)},getAllChildMarkers:function(t,e){t=t||[];for(var n=this._childClusters.length-1;n>=0;n--)this._childClusters[n].getAllChildMarkers(t);for(var i=this._markers.length-1;i>=0;i--)e&&this._markers[i].__dragStart||t.push(this._markers[i]);return t},getChildCount:function(){return this._childCount},zoomToBounds:function(t){for(var e,n=this._childClusters.slice(),i=this._group._map,o=i.getBoundsZoom(this._bounds),r=this._zoom+1,a=i.getZoom();n.length>0&&o>r;){r++;var s=[];for(e=0;e<n.length;e++)s=s.concat(n[e]._childClusters);n=s}o>r?this._group._map.setView(this._latlng,r):o<=a?this._group._map.setView(this._latlng,a+1):this._group._map.fitBounds(this._bounds,t)},getBounds:function(){var t=new n.LatLngBounds;return t.extend(this._bounds),t},_updateIcon:function(){this._iconNeedsUpdate=!0,this._icon&&this.setIcon(this)},createIcon:function(){return this._iconNeedsUpdate&&(this._iconObj=this._group.options.iconCreateFunction(this),this._iconNeedsUpdate=!1),this._iconObj.createIcon()},createShadow:function(){return this._iconObj.createShadow()},_addChild:function(t,e){this._iconNeedsUpdate=!0,this._boundsNeedUpdate=!0,this._setClusterCenter(t),t instanceof n.MarkerCluster?(e||(this._childClusters.push(t),t.__parent=this),this._childCount+=t._childCount):(e||this._markers.push(t),this._childCount++),this.__parent&&this.__parent._addChild(t,!0)},_setClusterCenter:function(t){this._cLatLng||(this._cLatLng=t._cLatLng||t._latlng)},_resetBounds:function(){var t=this._bounds;t._southWest&&(t._southWest.lat=1/0,t._southWest.lng=1/0),t._northEast&&(t._northEast.lat=-1/0,t._northEast.lng=-1/0)},_recalculateBounds:function(){var t,e,i,o,r=this._markers,a=this._childClusters,s=0,l=0,u=this._childCount;if(0!==u){for(this._resetBounds(),t=0;t<r.length;t++)i=r[t]._latlng,this._bounds.extend(i),s+=i.lat,l+=i.lng;for(t=0;t<a.length;t++)e=a[t],e._boundsNeedUpdate&&e._recalculateBounds(),this._bounds.extend(e._bounds),i=e._wLatLng,o=e._childCount,s+=i.lat*o,l+=i.lng*o;this._latlng=this._wLatLng=new n.LatLng(s/u,l/u),this._boundsNeedUpdate=!1}},_addToMap:function(t){t&&(this._backupLatlng=this._latlng,this.setLatLng(t)),this._group._featureGroup.addLayer(this)},_recursivelyAnimateChildrenIn:function(t,e,n){this._recursively(t,this._group._map.getMinZoom(),n-1,function(t){var n,i,o=t._markers;for(n=o.length-1;n>=0;n--)i=o[n],i._icon&&(i._setPos(e),i.clusterHide())},function(t){var n,i,o=t._childClusters;for(n=o.length-1;n>=0;n--)i=o[n],i._icon&&(i._setPos(e),i.clusterHide())})},_recursivelyAnimateChildrenInAndAddSelfToMap:function(t,e,n,i){this._recursively(t,i,e,function(o){o._recursivelyAnimateChildrenIn(t,o._group._map.latLngToLayerPoint(o.getLatLng()).round(),n),o._isSingleParent()&&n-1===i?(o.clusterShow(),o._recursivelyRemoveChildrenFromMap(t,e,n)):o.clusterHide(),o._addToMap()})},_recursivelyBecomeVisible:function(t,e){this._recursively(t,this._group._map.getMinZoom(),e,null,function(t){t.clusterShow()})},_recursivelyAddChildrenToMap:function(t,e,n){this._recursively(n,this._group._map.getMinZoom()-1,e,function(i){if(e!==i._zoom)for(var o=i._markers.length-1;o>=0;o--){var r=i._markers[o];n.contains(r._latlng)&&(t&&(r._backupLatlng=r.getLatLng(),r.setLatLng(t),r.clusterHide&&r.clusterHide()),i._group._featureGroup.addLayer(r))}},function(e){e._addToMap(t)})},_recursivelyRestoreChildPositions:function(t){for(var e=this._markers.length-1;e>=0;e--){var n=this._markers[e];n._backupLatlng&&(n.setLatLng(n._backupLatlng),delete n._backupLatlng)}if(t-1===this._zoom)for(var i=this._childClusters.length-1;i>=0;i--)this._childClusters[i]._restorePosition();else for(var o=this._childClusters.length-1;o>=0;o--)this._childClusters[o]._recursivelyRestoreChildPositions(t)},_restorePosition:function(){this._backupLatlng&&(this.setLatLng(this._backupLatlng),delete this._backupLatlng)},_recursivelyRemoveChildrenFromMap:function(t,e,n,i){var o,r;this._recursively(t,e-1,n-1,function(t){for(r=t._markers.length-1;r>=0;r--)o=t._markers[r],i&&i.contains(o._latlng)||(t._group._featureGroup.removeLayer(o),o.clusterShow&&o.clusterShow())},function(t){for(r=t._childClusters.length-1;r>=0;r--)o=t._childClusters[r],i&&i.contains(o._latlng)||(t._group._featureGroup.removeLayer(o),o.clusterShow&&o.clusterShow())})},_recursively:function(t,e,n,i,o){var r,a,s=this._childClusters,l=this._zoom;if(e<=l&&(i&&i(this),o&&l===n&&o(this)),l<e||l<n)for(r=s.length-1;r>=0;r--)a=s[r],a._boundsNeedUpdate&&a._recalculateBounds(),t.intersects(a._bounds)&&a._recursively(t,e,n,i,o)},_isSingleParent:function(){return this._childClusters.length>0&&this._childClusters[0]._childCount===this._childCount}});n.Marker.include({clusterHide:function(){var t=this.options.opacity;return this.setOpacity(0),this.options.opacity=t,this},clusterShow:function(){return this.setOpacity(this.options.opacity)}}),n.DistanceGrid=function(t){this._cellSize=t,this._sqCellSize=t*t,this._grid={},this._objectPoint={}},n.DistanceGrid.prototype={addObject:function(t,e){var i=this._getCoord(e.x),o=this._getCoord(e.y),r=this._grid,a=r[o]=r[o]||{},s=a[i]=a[i]||[],l=n.Util.stamp(t);this._objectPoint[l]=e,s.push(t)},updateObject:function(t,e){this.removeObject(t),this.addObject(t,e)},removeObject:function(t,e){var i,o,r=this._getCoord(e.x),a=this._getCoord(e.y),s=this._grid,l=s[a]=s[a]||{},u=l[r]=l[r]||[];for(delete this._objectPoint[n.Util.stamp(t)],i=0,o=u.length;i<o;i++)if(u[i]===t)return u.splice(i,1),1===o&&delete l[r],!0},eachObject:function(t,e){var n,i,o,r,a,s,l=this._grid;for(n in l){a=l[n];for(i in a)for(s=a[i],o=0,r=s.length;o<r;o++)t.call(e,s[o])&&(o--,r--)}},getNearObject:function(t){var e,i,o,r,a,s,l,u,h=this._getCoord(t.x),c=this._getCoord(t.y),f=this._objectPoint,p=this._sqCellSize,d=null;for(e=c-1;e<=c+1;e++)if(r=this._grid[e])for(i=h-1;i<=h+1;i++)if(a=r[i])for(o=0,s=a.length;o<s;o++)l=a[o],((u=this._sqDist(f[n.Util.stamp(l)],t))<p||u<=p&&null===d)&&(p=u,d=l);return d},_getCoord:function(t){var e=Math.floor(t/this._cellSize);return isFinite(e)?e:t},_sqDist:function(t,e){var n=e.x-t.x,i=e.y-t.y;return n*n+i*i}},function(){n.QuickHull={getDistant:function(t,e){var n=e[1].lat-e[0].lat;return(e[0].lng-e[1].lng)*(t.lat-e[0].lat)+n*(t.lng-e[0].lng)},findMostDistantPointFromBaseLine:function(t,e){var n,i,o,r=0,a=null,s=[];for(n=e.length-1;n>=0;n--)i=e[n],(o=this.getDistant(i,t))>0&&(s.push(i),o>r&&(r=o,a=i));return{maxPoint:a,newPoints:s}},buildConvexHull:function(t,e){var n=[],i=this.findMostDistantPointFromBaseLine(t,e);return i.maxPoint?(n=n.concat(this.buildConvexHull([t[0],i.maxPoint],i.newPoints)),n=n.concat(this.buildConvexHull([i.maxPoint,t[1]],i.newPoints))):[t[0]]},getConvexHull:function(t){var e,n=!1,i=!1,o=!1,r=!1,a=null,s=null,l=null,u=null,h=null,c=null;for(e=t.length-1;e>=0;e--){var f=t[e];(!1===n||f.lat>n)&&(a=f,n=f.lat),(!1===i||f.lat<i)&&(s=f,i=f.lat),(!1===o||f.lng>o)&&(l=f,o=f.lng),(!1===r||f.lng<r)&&(u=f,r=f.lng)}return i!==n?(c=s,h=a):(c=u,h=l),[].concat(this.buildConvexHull([c,h],t),this.buildConvexHull([h,c],t))}}}(),n.MarkerCluster.include({getConvexHull:function(){var t,e,i=this.getAllChildMarkers(),o=[];for(e=i.length-1;e>=0;e--)t=i[e].getLatLng(),o.push(t);return n.QuickHull.getConvexHull(o)}}),n.MarkerCluster.include({_2PI:2*Math.PI,_circleFootSeparation:25,_circleStartAngle:0,_spiralFootSeparation:28,_spiralLengthStart:11,_spiralLengthFactor:5,_circleSpiralSwitchover:9,spiderfy:function(){if(this._group._spiderfied!==this&&!this._group._inZoomAnimation){var t,e=this.getAllChildMarkers(null,!0),n=this._group,i=n._map,o=i.latLngToLayerPoint(this._latlng);this._group._unspiderfy(),this._group._spiderfied=this,e.length>=this._circleSpiralSwitchover?t=this._generatePointsSpiral(e.length,o):(o.y+=10,t=this._generatePointsCircle(e.length,o)),this._animationSpiderfy(e,t)}},unspiderfy:function(t){this._group._inZoomAnimation||(this._animationUnspiderfy(t),this._group._spiderfied=null)},_generatePointsCircle:function(t,e){var i,o,r=this._group.options.spiderfyDistanceMultiplier*this._circleFootSeparation*(2+t),a=r/this._2PI,s=this._2PI/t,l=[];for(a=Math.max(a,35),l.length=t,i=0;i<t;i++)o=this._circleStartAngle+i*s,l[i]=new n.Point(e.x+a*Math.cos(o),e.y+a*Math.sin(o))._round();return l},_generatePointsSpiral:function(t,e){var i,o=this._group.options.spiderfyDistanceMultiplier,r=o*this._spiralLengthStart,a=o*this._spiralFootSeparation,s=o*this._spiralLengthFactor*this._2PI,l=0,u=[];for(u.length=t,i=t;i>=0;i--)i<t&&(u[i]=new n.Point(e.x+r*Math.cos(l),e.y+r*Math.sin(l))._round()),l+=a/r+5e-4*i,r+=s/l;return u},_noanimationUnspiderfy:function(){var t,e,n=this._group,i=n._map,o=n._featureGroup,r=this.getAllChildMarkers(null,!0);for(n._ignoreMove=!0,this.setOpacity(1),e=r.length-1;e>=0;e--)t=r[e],o.removeLayer(t),t._preSpiderfyLatlng&&(t.setLatLng(t._preSpiderfyLatlng),delete t._preSpiderfyLatlng),t.setZIndexOffset&&t.setZIndexOffset(0),t._spiderLeg&&(i.removeLayer(t._spiderLeg),delete t._spiderLeg);n.fire("unspiderfied",{cluster:this,markers:r}),n._ignoreMove=!1,n._spiderfied=null}}),n.MarkerClusterNonAnimated=n.MarkerCluster.extend({_animationSpiderfy:function(t,e){var i,o,r,a,s=this._group,l=s._map,u=s._featureGroup,h=this._group.options.spiderLegPolylineOptions;for(s._ignoreMove=!0,i=0;i<t.length;i++)a=l.layerPointToLatLng(e[i]),o=t[i],r=new n.Polyline([this._latlng,a],h),l.addLayer(r),o._spiderLeg=r,o._preSpiderfyLatlng=o._latlng,o.setLatLng(a),o.setZIndexOffset&&o.setZIndexOffset(1e6),u.addLayer(o);this.setOpacity(.3),s._ignoreMove=!1,s.fire("spiderfied",{cluster:this,markers:t})},_animationUnspiderfy:function(){this._noanimationUnspiderfy()}}),n.MarkerCluster.include({_animationSpiderfy:function(t,e){var i,o,r,a,s,l,u=this,h=this._group,c=h._map,f=h._featureGroup,p=this._latlng,d=c.latLngToLayerPoint(p),_=n.Path.SVG,y=n.extend({},this._group.options.spiderLegPolylineOptions),g=y.opacity;for(void 0===g&&(g=n.MarkerClusterGroup.prototype.options.spiderLegPolylineOptions.opacity),_?(y.opacity=0,y.className=(y.className||"")+" leaflet-cluster-spider-leg"):y.opacity=g,h._ignoreMove=!0,i=0;i<t.length;i++)o=t[i],l=c.layerPointToLatLng(e[i]),r=new n.Polyline([p,l],y),c.addLayer(r),o._spiderLeg=r,_&&(a=r._path,s=a.getTotalLength()+.1,a.style.strokeDasharray=s,a.style.strokeDashoffset=s),o.setZIndexOffset&&o.setZIndexOffset(1e6),o.clusterHide&&o.clusterHide(),f.addLayer(o),o._setPos&&o._setPos(d);for(h._forceLayout(),h._animationStart(),i=t.length-1;i>=0;i--)l=c.layerPointToLatLng(e[i]),o=t[i],o._preSpiderfyLatlng=o._latlng,o.setLatLng(l),o.clusterShow&&o.clusterShow(),_&&(r=o._spiderLeg,a=r._path,a.style.strokeDashoffset=0,r.setStyle({opacity:g}));this.setOpacity(.3),h._ignoreMove=!1,setTimeout(function(){h._animationEnd(),h.fire("spiderfied",{cluster:u,markers:t})},200)},_animationUnspiderfy:function(t){var e,i,o,r,a,s,l=this,u=this._group,h=u._map,c=u._featureGroup,f=t?h._latLngToNewLayerPoint(this._latlng,t.zoom,t.center):h.latLngToLayerPoint(this._latlng),p=this.getAllChildMarkers(null,!0),d=n.Path.SVG;for(u._ignoreMove=!0,u._animationStart(),this.setOpacity(1),i=p.length-1;i>=0;i--)e=p[i],e._preSpiderfyLatlng&&(e.closePopup(),e.setLatLng(e._preSpiderfyLatlng),delete e._preSpiderfyLatlng,s=!0,e._setPos&&(e._setPos(f),s=!1),e.clusterHide&&(e.clusterHide(),s=!1),s&&c.removeLayer(e),d&&(o=e._spiderLeg,r=o._path,a=r.getTotalLength()+.1,r.style.strokeDashoffset=a,o.setStyle({opacity:0})));u._ignoreMove=!1,setTimeout(function(){var t=0;for(i=p.length-1;i>=0;i--)e=p[i],e._spiderLeg&&t++;for(i=p.length-1;i>=0;i--)e=p[i],e._spiderLeg&&(e.clusterShow&&e.clusterShow(),e.setZIndexOffset&&e.setZIndexOffset(0),t>1&&c.removeLayer(e),h.removeLayer(e._spiderLeg),delete e._spiderLeg);u._animationEnd(),u.fire("unspiderfied",{cluster:l,markers:p})},200)}}),n.MarkerClusterGroup.include({_spiderfied:null,unspiderfy:function(){this._unspiderfy.apply(this,arguments)},_spiderfierOnAdd:function(){this._map.on("click",this._unspiderfyWrapper,this),this._map.options.zoomAnimation&&this._map.on("zoomstart",this._unspiderfyZoomStart,this),this._map.on("zoomend",this._noanimationUnspiderfy,this),n.Browser.touch||this._map.getRenderer(this)},_spiderfierOnRemove:function(){this._map.off("click",this._unspiderfyWrapper,this),this._map.off("zoomstart",this._unspiderfyZoomStart,this),this._map.off("zoomanim",this._unspiderfyZoomAnim,this),this._map.off("zoomend",this._noanimationUnspiderfy,this),this._noanimationUnspiderfy()},_unspiderfyZoomStart:function(){this._map&&this._map.on("zoomanim",this._unspiderfyZoomAnim,this)},_unspiderfyZoomAnim:function(t){n.DomUtil.hasClass(this._map._mapPane,"leaflet-touching")||(this._map.off("zoomanim",this._unspiderfyZoomAnim,this),this._unspiderfy(t))},_unspiderfyWrapper:function(){this._unspiderfy()},_unspiderfy:function(t){this._spiderfied&&this._spiderfied.unspiderfy(t)},_noanimationUnspiderfy:function(){this._spiderfied&&this._spiderfied._noanimationUnspiderfy()},_unspiderfyLayer:function(t){t._spiderLeg&&(this._featureGroup.removeLayer(t),t.clusterShow&&t.clusterShow(),t.setZIndexOffset&&t.setZIndexOffset(0),this._map.removeLayer(t._spiderLeg),delete t._spiderLeg)}}),n.MarkerClusterGroup.include({refreshClusters:function(t){return t?t instanceof n.MarkerClusterGroup?t=t._topClusterLevel.getAllChildMarkers():t instanceof n.LayerGroup?t=t._layers:t instanceof n.MarkerCluster?t=t.getAllChildMarkers():t instanceof n.Marker&&(t=[t]):t=this._topClusterLevel.getAllChildMarkers(),this._flagParentsIconsNeedUpdate(t),this._refreshClustersIcons(),this.options.singleMarkerMode&&this._refreshSingleMarkerModeMarkers(t),this},_flagParentsIconsNeedUpdate:function(t){var e,n;for(e in t)for(n=t[e].__parent;n;)n._iconNeedsUpdate=!0,n=n.__parent},_refreshSingleMarkerModeMarkers:function(t){var e,n;for(e in t)n=t[e],this.hasLayer(n)&&n.setIcon(this._overrideMarkerIcon(n))}}),n.Marker.include({refreshIconOptions:function(t,e){var i=this.options.icon;return n.setOptions(i,t),this.setIcon(i),e&&this.__parent&&this.__parent._group.refreshClusters(this),this}}),t.MarkerClusterGroup=e,t.MarkerCluster=i})}).call(e,n(1))},function(t,e,n){"use strict";(function(t){function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=n(0),s=function(t){return t&&t.__esModule?t:{default:t}}(a);s.default.GeoJSON=function(n){function a(t,n){e(this,a);var o=i(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,"",n));return o._layers={},t&&o.addData(t),o.type=s.default.GeoJSON.type,o}return o(a,n),r(a,[{key:"addData",value:function(e){var n=t.Util.isArray(e)?e:e.features,i=void 0,o=void 0,r=void 0;if(n){for(i=0,o=n.length;i<o;i++)r=n[i],(r.geometries||r.geometry||r.features||r.coordinates)&&this.addData(r);return this}var a=this.options;if(a.filter&&!a.filter(e))return this;var l=s.default.GeoJSON.geometryToLayer(e,a);return l?(l.feature=s.default.GeoJSON.asFeature(e),l.defaultOptions=l.options,this.resetStyle(l),a.onEachFeature&&a.onEachFeature(e,l),this.addOverlay(l)):this}},{key:"resetStyle",value:function(e){return e.options=t.Util.extend({},e.defaultOptions),this._setLayerStyle(e,this.options.style),this}},{key:"setStyle",value:function(t){return this.eachLayer(function(e){this._setLayerStyle(e,t)},this)}},{key:"_setLayerStyle",value:function(t,e){"function"==typeof e&&(e=e(t.feature)),t.setStyle&&t.setStyle(e)}}],[{key:"geometryToLayer",value:function(t,e){var n="Feature"===t.type?t.geometry:t,i=n?n.coordinates:null,o=new s.default.VectorLayer,r=e&&e.pointToLayer,a=e&&e.coordsToLatLng||s.default.GeoJSON.coordsToLatLng,l=void 0,u=void 0,h=void 0,c=void 0;if(!i&&!n)return null;switch(n.type){case"Point":return l=a(i),r?r(t,l):new s.default.Overlay.Point(l);case"MultiPoint":for(h=0,c=i.length;h<c;h++)l=a(i[h]),o.addOverlay(r?r(t,l):new s.default.Overlay.Point(l));return o;case"LineString":case"MultiLineString":return u=this.coordsToLatLngs(i,"LineString"===n.type?0:1,a),new s.default.Overlay.Polyline(u);case"Polygon":case"MultiPolygon":return u=this.coordsToLatLngs(i,"Polygon"===n.type?1:2,a),new s.default.Overlay.Polygon(u);case"GeometryCollection":for(h=0,c=n.geometries.length;h<c;h++){var f=this.geometryToLayer({geometry:n.geometries[h],type:"Feature",properties:t.properties},e);f&&o.addOverlay(f)}return o;default:throw new Error("Invalid GeoJSON object.")}}},{key:"coordsToLatLng",value:function(t){return new s.default.LngLat(t[0],t[1],t[2])}},{key:"coordsToLatLngs",value:function(t,e,n){for(var i,o=[],r=0,a=t.length;r<a;r++)i=e?s.default.GeoJSON.coordsToLatLngs(t[r],e-1,n):(n||s.default.GeoJSON.coordsToLatLng)(t[r]),o.push(i);return o}},{key:"latLngToCoords",value:function(t){return void 0!==t.alt?[t.lng,t.lat,t.alt]:[t.lng,t.lat]}},{key:"latLngsToCoords",value:function(t,e,n){for(var i=[],o=0,r=t.length;o<r;o++)i.push(e?s.default.GeoJSON.latLngsToCoords(t[o],e-1,n):s.default.GeoJSON.latLngToCoords(t[o]));return!e&&n&&i.push(i[0]),i}},{key:"getFeature",value:function(e,n){return e.feature?t.extend({},e.feature,{geometry:n}):s.default.GeoJSON.asFeature(n)}},{key:"asFeature",value:function(t){return"Feature"===t.type||"FeatureCollection"===t.type?t:{type:"Feature",properties:{},geometry:t}}}]),a}(s.default.VectorLayer),s.default.GeoJSON.type="GeoJSON"}).call(e,n(1))},function(t,e,n){"use strict";(function(t){function e(t){return t&&t.__esModule?t:{default:t}}var i=n(0),o=e(i),r=n(108),a=e(r),s={minOpacity:.5,maxZoom:void 0,radius:25,blur:15,max:1,gradient:{.4:"blue",.6:"cyan",.7:"lime",.8:"yellow",1:"red"}};o.default.HeatLayer=t.Layer.extend({initialize:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.id=e,this._lnglats=[],n=t.extend({},s,n),t.setOptions(this,n),this.types=o.default.HeatLayer.type},setLatLngs:function(t){return this._lnglats=t,this.redraw()},addLatLng:function(t){return this._lnglats.push(t),this.redraw()},addLatLngs:function(t){return this._lnglats=this._lnglats.concat(t),this.redraw()},setLngLats:function(t){return t&&t[0]instanceof GL.LngLat&&(t=t.map(function(t){return[t.lng,t.lat,t.alt]})),this.setLatLngs(t)},getLngLats:function(){return this._lnglats},addLngLat:function(t){return t instanceof GL.LngLat&&(t=[t.lng,t.lat,t.alt]),this.addLatLng(t)},addLngLats:function(t){var e=t.map(function(t){return[t.lng,t.lat,t.alt]});return this.addLatLngs(e)},removeFirstLnglat:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return this._lnglats.splice(0,t),this.redraw()},removeLastLnglat:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return this._lnglats.splice(this._lnglats.length-t,t),this.redraw()},setOptions:function(e){return t.setOptions(this,e),this._heat&&this._updateOptions(),this.redraw()},redraw:function(){return this._heat&&!this._frame&&this._map&&!this._map._animating&&(this._frame=t.Util.requestAnimFrame(this._redraw,this)),this},clear:function(){return this.setLatLngs([])},hide:function(){return this.visible(!1)},show:function(){return this.visible(!0)},visible:function(e){var n=this._canvas;return n?(e?(t.DomUtil.removeClass(n,"hide"),t.DomUtil.addClass(n,"show")):(t.DomUtil.removeClass(n,"show"),t.DomUtil.addClass(n,"hide")),this):this},bringToFront:function(){var e=this._canvas;return e?(t.DomUtil.toFront(e),this):this},bringToBack:function(){var e=this._canvas;return e?(t.DomUtil.toBack(e),this):this},onAdd:function(e){this._map=e,this._canvas||this._initCanvas(),this.options.pane?this.getPane().appendChild(this._canvas):e._panes.overlayPane.appendChild(this._canvas),e.on("moveend",this._reset,this),e.options.zoomAnimation&&t.Browser.any3d&&e.on("zoomanim",this._animateZoom,this),this._reset()},onRemove:function(t){this.options.pane?this.getPane().removeChild(this._canvas):t.getPanes().overlayPane.removeChild(this._canvas),t.off("moveend",this._reset,this),t.options.zoomAnimation&&t.off("zoomanim",this._animateZoom,this)},addTo:function(t){return t.addLayer(this),this},_initCanvas:function(){var e=this._canvas=t.DomUtil.create("canvas","leaflet-heatmap-layer leaflet-layer"),n=t.DomUtil.testProp(["transformOrigin","WebkitTransformOrigin","msTransformOrigin"]);e.style[n]="50% 50%";var i=this._map.getSize();e.width=i.x,e.height=i.y;var o=this._map.options.zoomAnimation&&t.Browser.any3d;t.DomUtil.addClass(e,"leaflet-zoom-"+(o?"animated":"hide")),this._heat=(0,a.default)(e),this._updateOptions()},_updateOptions:function(){this._heat.radius(this.options.radius||this._heat.defaultRadius,this.options.blur),this.options.gradient&&this._heat.gradient(this.options.gradient),this.options.max&&this._heat.max(this.options.max)},_reset:function(){var e=this._map.containerPointToLayerPoint([0,0]);t.DomUtil.setPosition(this._canvas,e);var n=this._map.getSize();this._heat._width!==n.x&&(this._canvas.width=this._heat._width=n.x),this._heat._height!==n.y&&(this._canvas.height=this._heat._height=n.y),this._redraw()},_redraw:function(){if(this._map){var t=[],e=this._heat._r,n=this._map.getSize(),i=new o.default.Size(new o.default.Pixel([-e,-e]),n.add([e,e])),r=void 0===this.options.max?1:this.options.max,a=void 0===this.options.maxZoom?this._map.getMaxZoom():this.options.maxZoom,s=1/Math.pow(2,Math.max(0,Math.min(a-this._map.getZoom(),12))),l=e/2,u=[],h=this._map._getMapPanePos(),c=h.x%l,f=h.y%l,p=void 0,d=void 0,_=void 0,y=void 0,g=void 0,m=void 0,v=void 0,b=void 0,L=void 0;for(p=0,d=this._lnglats.length;p<d;p++)if(_=this._map.latLngToContainerPoint(this._lnglats[p]),i.contains(_)){g=Math.floor((_.x-c)/l)+2,m=Math.floor((_.y-f)/l)+2;var w=void 0!==this._lnglats[p].alt?this._lnglats[p].alt:void 0!==this._lnglats[p][2]?+this._lnglats[p][2]:1;L=w?w*s:s,u[m]=u[m]||[],y=u[m][g],y?(y[0]=(y[0]*y[2]+_.x*L)/(y[2]+L),y[1]=(y[1]*y[2]+_.y*L)/(y[2]+L),y[2]+=L):u[m][g]=[_.x,_.y,L]}for(p=0,d=u.length;p<d;p++)if(u[p])for(v=0,b=u[p].length;v<b;v++)(y=u[p][v])&&t.push([Math.round(y[0]),Math.round(y[1]),Math.min(y[2],r)]);this._heat.data(t).draw(this.options.minOpacity),this._frame=null}},_animateZoom:function(e){var n=this._map.getZoomScale(e.zoom),i=this._map._getCenterOffset(e.center)._multiplyBy(-n).subtract(this._map._getMapPanePos());t.DomUtil.setTransform?t.DomUtil.setTransform(this._canvas,i,n):this._canvas.style[t.DomUtil.TRANSFORM]=t.DomUtil.getTranslateString(i)+" scale("+n+")"}}),o.default.HeatLayer.type="HeatLayer"}).call(e,n(1))},function(t,e,n){"use strict";function i(t){if(!(this instanceof i))return new i(t);this._canvas=t="string"==typeof t?document.getElementById(t):t,this._ctx=t.getContext("2d"),this._width=t.width,this._height=t.height,this._max=1,this._data=[]}t.exports=i,i.prototype={defaultRadius:25,defaultGradient:{.4:"blue",.6:"cyan",.7:"lime",.8:"yellow",1:"red"},data:function(t){return this._data=t,this},max:function(t){return this._max=t,this},add:function(t){return this._data.push(t),this},clear:function(){return this._data=[],this},radius:function(t,e){e=void 0===e?15:e;var n=this._circle=this._createCanvas(),i=n.getContext("2d"),o=this._r=t+e;return n.width=n.height=2*o,i.shadowOffsetX=i.shadowOffsetY=2*o,i.shadowBlur=e,i.shadowColor="black",i.beginPath(),i.arc(-o,-o,t,0,2*Math.PI,!0),i.closePath(),i.fill(),this},resize:function(){this._width=this._canvas.width,this._height=this._canvas.height},gradient:function(t){var e=this._createCanvas(),n=e.getContext("2d"),i=n.createLinearGradient(0,0,0,256);e.width=1,e.height=256;for(var o in t)i.addColorStop(+o,t[o]);return n.fillStyle=i,n.fillRect(0,0,1,256),this._grad=n.getImageData(0,0,1,256).data,this},draw:function(t){this._circle||this.radius(this.defaultRadius),this._grad||this.gradient(this.defaultGradient);var e=this._ctx;e.clearRect(0,0,this._width,this._height);for(var n,i=0,o=this._data.length;i<o;i++)n=this._data[i],e.globalAlpha=Math.max(n[2]/this._max,void 0===t?.05:t),e.drawImage(this._circle,n[0]-this._r,n[1]-this._r);var r=e.getImageData(0,0,this._width,this._height);return this._colorize(r.data,this._grad),e.putImageData(r,0,0),this},_colorize:function(t,e){for(var n,i=0,o=t.length;i<o;i+=4)(n=4*t[i+3])&&(t[i]=e[n],t[i+1]=e[n+1],t[i+2]=e[n+2])},_createCanvas:function(){return"undefined"!=typeof document?document.createElement("canvas"):new this._canvas.constructor}}},function(t,e,n){"use strict";n(127),n(104),n(107),n(110),n(106),n(126),n(125),n(128)},function(t,e,n){"use strict";(function(t){function e(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=n(2),a=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(r),s=n(0),l=e(s);n(111);var u=n(114),h=e(u),c=n(116),f=e(c),p=n(115),d=e(p),_=n(113),y=e(_),g=n(117),m=e(g),v=n(112),b=e(v);n(124);var L=n(118),w=e(L);l.default.LayerLookup=function(){function e(){i(this,e)}return o(e,null,[{key:"lookup",value:function(t,e){var n=null;switch(t){case a.gaea.type:n=l.default.LayerLookup.createGaeaTiledLayer("",e);break;case a.tdt.type:n=l.default.LayerLookup.createTdtTiledLayer("vec_c",e);var i=l.default.LayerLookup.createTdtTiledLayer("cva_c",e);n.group(i);break;case a.pgis.type:n=[],a.pgis.rootURL.forEach(function(t){var i=l.default.LayerLookup.createPgisTiledLayer(t,e);n.push(i)});break;default:n=l.default.LayerLookup.createTiledLayer("",e)}return n}},{key:"createTiledLayer",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=null;return n&&"3857"===n.code?(i=l.default.CRS.EPSG3857,e.maxZoom||(e.maxZoom=18)):n&&n.origin&&n.resolutions&&(i=new l.default.CRS.EPSG4326(n.origin,n.resolutions)),new l.default.TiledLayer(t,i,e)}},{key:"createGaeaTiledLayer",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};e=e||a.gaea.rootURL,i=t.extend({},a.gaea.crs,i),n=t.extend({},a.gaea.options,n);var o=null;return i&&"3857"===i.code?(o=l.default.CRS.EPSG3857,n.maxZoom||(n.maxZoom=18)):i&&i.origin&&i.resolutions&&(o=new l.default.CRS.EPSG4326(i.origin,i.resolutions)),new h.default(e,o,n)}},{key:"createPgisTiledLayer",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=a.pgis.crs;o=t.extend(o,i);var r=a.pgis.options;return r=t.extend(r,n),o&&o.origin&&o.resolutions&&(i=new l.default.CRS.EPSG4326(o.origin,o.resolutions)),new d.default(e,i,r)}},{key:"createTdtTiledLayer",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=a.tdt.crs,o=a.tdt.options;o=t.extend(o,n);var r=null;return i&&i.origin&&i.resolutions&&(r=new l.default.CRS.EPSG4326(i.origin,i.resolutions)),new f.default(e,r,o)}},{key:"createEsriTiledLayer",value:function(e,n,i){if(!(e=(e||"").trim()))throw new Error("illegal baselayer url--\x3e"+e);if(!n||!i){var o=GL.EsriTiledLayer.buildEsriTiledOptions(e);i=t.extend(o.crs,i||{}),n=t.extend(o.options,n||{})}var r=void 0;return i&&"3857"===i.code?(r=l.default.CRS.EPSG3857,n.maxZoom||(n.maxZoom=18)):i&&i.origin&&i.resolutions&&(r=new l.default.CRS.EPSG4326(i.origin,i.resolutions)),new y.default(e,r,n)}},{key:"createWmtsTiledLayer",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a.tdt.options,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:a.tdt.crs,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};GL.H.isObjBlank(e)&&(e=a.tdt.options);var o=n;return GL.H.isObjBlank(o)&&(o=a.tdt.crs),n&&"3857"===n.code?n=l.default.CRS.EPSG3857:o&&o.origin&&o.resolutions&&(n=new l.default.CRS.EPSG4326(o.origin,o.resolutions)),new m.default(t,n,e,i)}},{key:"createBaiduTiledLayer",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return n=l.default.CRS.BAIDU,new b.default(t,e,n)}},{key:"createProtobufTiledLayer",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};i=t.extend({},a.gaea.crs,i),n=t.extend({},a.gaea.options,n);var o=null;return i&&"3857"===i.code?(o=l.default.CRS.EPSG3857,n.maxZoom||(n.maxZoom=18)):i&&i.origin&&i.resolutions&&(o=new l.default.CRS.EPSG4326(i.origin,i.resolutions)),new w.default(e,o,n)}}]),e}()}).call(e,n(1))},function(t,e,n){"use strict";(function(t){function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=function t(e,n,i){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,n);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,n,i)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(i)},s=n(0),l=function(t){return t&&t.__esModule?t:{default:t}}(s),u={attribution:'&copy; <a href="http://www.gaeainfo.com" target="_blank">GaeaInfo</a><em> - </em>'};l.default.TiledLayer=function(n){function s(n,o){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(e(this,s),!r.useNative){if(!(n=(n||"").trim()))throw new Error("illegal baselayer url--\x3e"+n);"/"===n[n.length-1]&&(n=n.substr(0,n.length-1))}r=t.extend({},u,r);var a=void 0;r.maxBounds&&(a=r.bounds=new l.default.Envelope(r.maxBounds)),o&&(r.maxZoom=r.maxZoom||o.resolutions.length-1);var h=i(this,(s.__proto__||Object.getPrototypeOf(s)).call(this,n,r));if(h.maxBounds=a,h.name=r.name||void 0,h.url=n,h.version=r.version||"",h.format=r.format||"",h.format&&"."!==h.format[0]&&(h.format="."+h.format),h.format=h.format.toLowerCase(),h.type="tiled",h.crs=o,h.isBaseLayer=!0,h.id=t.stamp(h),r.useNative){if(h._native=h.url,h._cacheTileCallback=[],!h._native||"string"==typeof h._native)throw new Error("");if(!r.dbTableName)throw new Error("(options.dbTableName )")}return h}return o(s,n),r(s,[{key:"setUrl",value:function(t,e){return this._url=t,this.url=t,e||this.redraw(),this}},{key:"hide",value:function(){return this.visible(!1)}},{key:"show",value:function(){return this.visible(!0)}},{key:"visible",value:function(e){var n=this.getContainer();if(!n)return this;if(e?(t.DomUtil.removeClass(n,"hide"),t.DomUtil.addClass(n,"show")):(t.DomUtil.removeClass(n,"show"),t.DomUtil.addClass(n,"hide")),this._isBrother&&this._group)for(var i=0,o=this._group.length;i<o;i++)this._group[i].visible(e);return this}},{key:"setOpacity",value:function(t){return a(s.prototype.__proto__||Object.getPrototypeOf(s.prototype),"setOpacity",this).call(this,t)}},{key:"group",value:function(t){return this._group=this._group||[],t._isBrother=!0,this._group.push(t),this._map&&this._map.fire(l.default.Event.BaseLayerGroupChanged,{layer:this,subLayer:t,added:!0}),this}},{key:"unGroup",value:function(t){var e=!1;if(t&&t._isBrother){this._group=this._group||[];for(var n=0;n<this._group.length;n++){this._group[n]===t&&(this._group.splice(n,1),e=!0)}}return this._map&&e&&this._map.fire(l.default.Event.BaseLayerGroupChanged,{layer:this,subLayer:t,added:!1}),this}},{key:"merge",value:function(t,e){this._merge=this._merge||{},this._merge[t.id]={layer:t,options:e}}},{key:"createTile",value:function(e,n){var i=document.createElement("img");return t.DomEvent.on(i,"load",t.bind(this._tileOnLoad,this,n,i)),t.DomEvent.on(i,"error",t.bind(this._tileOnError,this,n,i)),this.options.crossOrigin&&(i.crossOrigin=""),i.alt="",i.setAttribute("role","presentation"),i.src=this.getTileUrl(e,i),i}},{key:"getTileUrl",value:function(e,n){var i={r:t.Browser.retina?"@2x":"",s:this._getSubdomain(e),x:e.x,y:e.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var o=this._globalTileRange.max.y-e.y;this.options.tms&&(i.y=o),i["-y"]=o}var r={row:i.y,col:i.x,zoom:i.z,"-row":i["-y"]};if(this.options.useNative)return this.getTileByNative(r,n),"";var a=this.formatTileUrl(r);if(this.options.customParams){-1===a.lastIndexOf("?")&&(a+="?");for(var s in this.options.customParams)a+="&"+s+"="+this.options.customParams[s]}return a=t.Util.template(a,t.extend(i,this.options))}},{key:"formatTileUrl",value:function(t){var e=t.row,n=t.col,i=t.zoom;return this.options.invertedY&&void 0!==t["-row"]&&(e=t["-row"]),this.url+"/"+i+"/"+e+"/"+n+this.format}},{key:"getTileByNative",value:function(t,e){var n=t.row;this.options.invertedY&&void 0!==t["-row"]&&(n=t["-row"]);var i=""+this.options.dbTableName+t.zoom+t.col+n;this._cacheTileCallback.push(i),window[i]=function(t){e.src=t,window[i]._called=!0},this._native.getTile(t.zoom,t.col,n,this.options.dbTableName,!1)}},{key:"_cleanOldTile",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this._cacheTileCallback.length-1;n>=0;n--){var i=this._cacheTileCallback[n];window[i]?(window[i]._called||e)&&(delete window[i],this._cacheTileCallback.splice(n,1)):this._cacheTileCallback.splice(n,1)}}},{key:"onAdd",value:function(){this.crs=this.crs||this._map.options.crs,a(s.prototype.__proto__||Object.getPrototypeOf(s.prototype),"onAdd",this).call(this),this.options.useNative&&(this._map.on("zoomstart",this.hide,this),this._map.on("zoomend",this.show,this),this._map.on("zoomend",this._cleanOldTile,this))}},{key:"onRemove",value:function(t){if(this._group)for(var e=0,n=this._group.length;e<n;e++){var i=this._group[e];t.removeLayer(i)}a(s.prototype.__proto__||Object.getPrototypeOf(s.prototype),"onRemove",this).call(this,t),this.options.useNative&&(this._map.off("zoomstart",this.hide,this),this._map.off("zoomend",this.show,this),this._cleanOldTile(null,!0),this._map.off("zoomend",this._cleanOldTile,this))}},{key:"_resetGrid",value:function(){var t=this._map,e=t.options.crs,n=this._tileSize=this.getTileSize(),i=this._tileZoom,o=this._map.getPixelWorldBounds(this._tileZoom);o&&(this._globalTileRange=this._pxBoundsToTileRange(o)),this._wrapX=e.wrapLng&&!this.options.noWrap&&[Math.floor(t.project([e.wrapLng[0],0],i).x/n.x),Math.ceil(t.project([e.wrapLng[1],0],i).x/n.y)],this._wrapY=e.wrapLat&&!this.options.noWrap&&[Math.floor(t.project([e.wrapLat[0],0],i).y/n.x),Math.ceil(t.project([e.wrapLat[1],0],i).y/n.y)]}}]),s}(t.TileLayer)}).call(e,n(1))},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=n(2),l=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(s),u=n(0),h=function(t){return t&&t.__esModule?t:{default:t}}(u),c=function(t){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments[2];i(this,e);var a=l.baidu.rootURL,s=n.style||"normal";a=a.replace("{style}",s),"image"===s&&(a=l.baidu.imageRootURL),n.minZoom=Math.max(0,l.baidu.minZoom),n.maxZoom=Math.min(18,l.baidu.maxZoom),n.maxBounds=n.maxBounds||l.baidu.maxBounds,n.zoomOffset=n.zoomOffset||0,n.tms=!0,r.resolutions=r.resolutions||r.options.resolutions;var u=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,a,r,n));return u.type=l.baidu.type,u}return r(e,t),a(e,[{key:"formatTileUrl",value:function(t){var e=t.row,n=t.col,i=t.zoom;return this.url.replace("{x}",n).replace("{y}",e).replace("{z}",i)}}]),e}(h.default.TiledLayer);e.default=c},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=n(2),l=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(s),u=n(0),h=function(t){return t&&t.__esModule?t:{default:t}}(u),c=function(t){function e(t,n,r){i(this,e);var a=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n,r));return a.type=l.esri.type,a}return r(e,t),a(e,[{key:"formatTileUrl",value:function(t){var e=t.row,n=t.col,i=t.zoom,o="/tile/{lev}/{row}/{col}".replace("{lev}",i).replace("{row}",e).replace("{col}",n);return this.url+o+this.format}}]),e}(h.default.TiledLayer);e.default=c},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function a(t,e){for(var n=t.length;n<e;)t="0"+t,n++;return t}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),l=n(2),u=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(l),h=n(0),c=function(t){return t&&t.__esModule?t:{default:t}}(h),f=function(t){function e(t,n,r){i(this,e);var a=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n,r));return a.type=u.gaea.type,a}return r(e,t),s(e,[{key:"formatTileUrl",value:function(t){var e=t.row.toString(16),n=t.col.toString(16),i=t.zoom.toString(),o="/{lev}/{row}/{col}".replace("{lev}","L"+a(i,2)).replace("{row}","R"+a(e,8)).replace("{col}","C"+a(n,8));return this.url+o+this.format}}]),e}(c.default.TiledLayer);e.default=f},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=n(2),l=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(s),u=n(0),h=function(t){return t&&t.__esModule?t:{default:t}}(u),c=function(t){function e(t,n,r){i(this,e);var a=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n,r));return a.type=l.pgis.type,a}return r(e,t),a(e,[{key:"formatTileUrl",value:function(t){var e=t.row,n=t.col,i=t.zoom-this.options.zoomOffset,o=this._map.options.crs.resolutions[i],r="0.3"===this.options.version.toString()?Math.ceil(90/(256*o))-e-1:e;return this._url+"/EzMap?Service=getImage&Type=RGB&ZoomOffset="+this.options.zoomOffset+"&Col="+n+"&Row="+r+"&Zoom="+i+"&V="+this.options.version}}]),e}(h.default.TiledLayer);e.default=c},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=n(2),l=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(s),u=n(0),h=function(t){return t&&t.__esModule?t:{default:t}}(u),c=function(t){function e(t,n,r){i(this,e);var a=l.tdt.rootURL,s=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,a,n,r));return s._suburl=t,s.type=l.tdt.type,s}return r(e,t),a(e,[{key:"formatTileUrl",value:function(t){var e=t.row,n=t.col,i=t.zoom,o=this._suburl.substr(0,3),r=this._url+"/"+this._suburl+"/wmts";return r+="?SERVICE=WMTS&VERSION=1.0.0&REQUEST=GetTile&FORMAT=tiles&TILEMATRIXSET=c&STYLE=default&LAYER="+o+"&TILEMATRIX="+i+"&TILEROW="+e+"&TILECOL="+n}}]),e}(h.default.TiledLayer);e.default=c},function(t,e,n){"use strict";(function(t){function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=n(0),l=function(t){return t&&t.__esModule?t:{default:t}}(s),u={service:"WMTS",request:"GetTile",version:"1.0.0",layer:"",style:"",tilematrixSet:"",format:"image/jpeg"},h=function(e){function n(e,r,a,s){i(this,n);var l=o(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e,r,a)),h=t.extend({},u),c=s.tileSize||l.options.tileSize;a.detectRetina&&t.Browser.retina?h.width=h.height=2*c:h.width=h.height=c;for(var f in s)"matrixIds"!=f&&(h[f]=s[f]);return l.wmtsParams=h,l.type="wmts_tiled",l}return r(n,e),a(n,[{key:"formatTileUrl",value:function(e){var n=e.row,i=e.col,o=e.zoom;this.options.invertedY&&void 0!==e["-row"]&&(n=e["-row"]);var r=this._url;return r+t.Util.getParamString(this.wmtsParams,r)+"&tilematrix="+this._getTileMatrix(o)+"&tilerow="+n+"&tilecol="+i}},{key:"_getTileMatrix",value:function(t){var e=void 0,n=this.wmtsParams.tileMatrix||this.wmtsParams.TileMatrix;return n&&(e=Array.isArray(n)?n[t+1]:n+":"+t),void 0===e&&(e=t),e}}]),n}(l.default.TiledLayer);e.default=h}).call(e,n(1))},function(t,e,n){"use strict";(function(t){function i(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(null===t)return t;for(var n=t.length;n<e;)t="0"+t,n++;return t}Object.defineProperty(e,"__esModule",{value:!0});var r=n(171),a=i(r),s=n(177),l=n(0),u=i(l),h=t.VectorGrid.extend({options:{fetchOptions:{},rendererFactory:t.canvas.tile},initialize:function(e,n,i){if(this._url=e,i=t.extend({},this.options,i),i.useNative){if(this._native=this._url,this._cacheTileCallback=[],!this._native||"string"==typeof this._native)throw new Error("");if(!i.dbTableName)throw new Error("(options.dbTableName )")}i.crs=n,n&&(i.maxZoom=i.maxZoom||n.resolutions.length-1);var o=void 0;if(i.maxBounds&&(o=i.bounds=new u.default.Envelope(i.maxBounds)),this.maxBounds=o,this.type="protobufTiled",this.crs=n,this.isBaseLayer=!0,!i.style&&!this.options.enableDefaultStyle)throw new Error("Missing style file!");t.VectorGrid.prototype.initialize.call(this,i)},onAdd:function(e){var n=this;"string"==typeof this.options.style?fetch(this.options.style).then(function(i){i.json().then(function(i){n.options.featureTypeStyles=i,t.GridLayer.prototype.onAdd.call(n,e)})}).catch(function(t){throw t}):(this.options.featureTypeStyles=this.options.style,t.GridLayer.prototype.onAdd.call(this,e)),this.options.useNative&&this._map.on("zoomend",this._cleanOldTile,this)},onRemove:function(e){t.GridLayer.prototype.onRemove.call(this,e),this.options.useNative&&(this._cleanOldTile(null,!0),this._map.off("zoomend",this._cleanOldTile,this))},setStyle:function(t){var e=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.options.style=t,"string"==typeof this.options.style?fetch(this.options.style).then(function(t){t.json().then(function(t){e.options.featureTypeStyles=t,n&&e.redraw()})}).catch(function(t){throw t}):(this.options.featureTypeStyles=this.options.style,n&&this.redraw())},_updateLevels:function(){this._levels&&t.GridLayer.prototype._updateLevels.call(this)},_update:function(e){this._levels&&t.GridLayer.prototype._update.call(this,e)},setUrl:function(t,e){return this._url=t,this._tileCache={},e||this.redraw(),this},_isCurrentTile:function(t,e){if(!this._map)return!0;var n=this._map._animatingZoom?this._map._animateToZoom:this._map._zoom,i=n===t.z,e=this._tileCoordsToBounds(t),o=this._map.getBounds().overlaps(e);return i&&o},getTileUrl:function(e,n){var i={s:this._getSubdomain(e),x:e.x,y:e.y,z:e.z};if(this._map&&!this._map.options.crs.infinite){var r=this._globalTileRange.max.y-e.y;this.options.tms&&(i.y=r),i["-y"]=r}return i.x=i.x.toString(16),i.x="C"+o(i.x,8).toUpperCase(),i.y=i.y.toString(16),i.y="R"+o(i.y,8).toUpperCase(),i["-y"]&&(i["-y"]=i["-y"].toString(16),i["-y"]="R"+o(i["-y"],8).toUpperCase()),null===i.z?null:(i.z="L"+o(i.z,2),t.Util.template(this._url,t.extend(i,this.options)))},getDynamicTileUrl:function(e,n){var i={s:this._getSubdomain(e),x:e.x,y:e.y,z:e.z};if(this._map&&!this._map.options.crs.infinite){var o=this._globalTileRange.max.y-e.y;this.options.tms&&(i.y=o),i["-y"]=o}return null===i.z?null:t.Util.template(this._url,t.extend(i,this.options))},getTileByNative:function(t,e){var n=this,i={s:this._getSubdomain(t),x:t.x,y:t.y,z:t.z};if(this._map&&!this._map.options.crs.infinite){var o=this._globalTileRange.max.y-t.y;this.options.tms&&(i.y=o),i["-y"]=o}return new Promise(function(t,e){var o=i.y;n.options.invertedY&&void 0!==i["-y"]&&(o=i["-y"]);var r=""+n.options.dbTableName+i.z+i.x+o;n._cacheTileCallback.push(r),window[r]=function(e){if(window[r]._called=!0,!e)return void t({layers:[]});var n=new a.default(new Uint8Array(e.split("|"))),i=new s.VectorTile(n);for(var o in i.layers){for(var l=[],u=0;u<i.layers[o].length;u++){var h=i.layers[o].feature(u);h.geometry=h.loadGeometry(),l.push(h)}i.layers[o].features=l}t(i)},n._native.getTile(i.z,i.x,o,n.options.dbTableName,!0)})},_cleanOldTile:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this._cacheTileCallback.length-1;n>=0;n--){var i=this._cacheTileCallback[n];window[i]?(window[i]._called||e)&&(delete window[i],this._cacheTileCallback.splice(n,1)):this._cacheTileCallback.splice(n,1)}},_getVectorTilePromise:function(t,e){var n=this,i=this._getCacheTile(t);if(i)return Promise.resolve(i);if(this.options.useNative)return this.getTileByNative(t,e);var o="";if(!(o="function"==typeof this._url?this._url(t,e):this.options.useDynamic?this.getDynamicTileUrl(t,e):this.getTileUrl(t,e)))return Promise.resolve(null);try{return fetch(o,this.options.fetchOptions).then(function(t){return t.ok?t.blob().then(function(t){var e=new FileReader;return new Promise(function(n){e.addEventListener("loadend",function(){var t=new a.default(e.result);return n(new s.VectorTile(t))}),e.readAsArrayBuffer(t)})}):{layers:[]}}.bind(this)).then(function(e){for(var i in e.layers){for(var o=[],r=0;r<e.layers[i].length;r++){var a=e.layers[i].feature(r);a.geometry=a.loadGeometry(),o.push(a)}e.layers[i].features=o}return n._setCacheTile(t,e),e})}catch(t){}},_setCacheTile:function(t,e){this._tileCache[t.z]||(this._tileCache[t.z]={}),this._tileCache[t.z][t.x+"-"+t.y]=e},_getCacheTile:function(t){return this._tileCache[t.z]?this._tileCache[t.z][t.x+"-"+t.y]:null},_getSubdomain:function(t){if(!this.options.subdomains)return null;var e=Math.abs(t.x+t.y)%this.options.subdomains.length;return this.options.subdomains[e]}});e.default=h}).call(e,n(1))},function(t,e,n){"use strict";(function(t){t.Canvas.Tile=t.Canvas.extend({_scale:t.Browser.retina?2:1,initialize:function(e,n,i){t.Canvas.prototype.initialize.call(this,i),this._tileCoord=e,this._size=n.multiplyBy(this._scale),this._initContainer(),this._container.setAttribute("width",this._size.x),this._container.setAttribute("height",this._size.y),this._container.setAttribute("coord",e.z+", "+e.x+", "+e.y),this._ctx.scale(this._scale,this._scale),this._ctx.globalCompositeOperation="source-over",this._container.style.width=n.x+"px",this._container.style.height=n.y+"px",this._layers={},this._drawnLayers={},this._drawing=!0,i.interactive?this._container.style.pointerEvents="auto":this._container.style.pointerEvents="none"},getCoord:function(){return this._tileCoord},getContainer:function(){return this._container},getOffset:function(){return this._tileCoord.scaleBy(this._size).subtract(this._map.getPixelOrigin())},onAdd:t.Util.falseFn,addTo:function(t){this._map=t},removeFrom:function(t){delete this._map},_onClick:function(e){var n,i=this._map.mouseEventToLayerPoint(e).subtract(this.getOffset()),o=[];for(var r in this._layers)n=this._layers[r],n._containsPoint(i)&&!this._map._draggableMoved(n)&&o.push(n);o.length&&(t.DomEvent._fakeStop(e),e.layers=o,this._fireEvent([o[0]],e))},_onMouseMove:function(t){if(this._map&&!this._map.dragging.moving()&&!this._map._animatingZoom){var e=this._map.mouseEventToLayerPoint(t).subtract(this.getOffset());this._handleMouseHover(t,e)}},_updateIcon:function(e){if(this._drawing){var n=e._icon,i=n.options,o=t.point(i.iconSize),r=i.iconAnchor||o&&o.divideBy(2,!0),a=e._point.subtract(r),s=this._ctx,l=e._getImage();l.complete&&l._success?s.drawImage(l,a.x,a.y,o.x,o.y):(t.DomEvent.on(l,"error",function(t){l._success=!1}),t.DomEvent.on(l,"load",function(t){l._success=!0,s.drawImage(l,a.x,a.y,o.x,o.y)})),this._drawnLayers[e._leaflet_id]=e}},_fillStroke:function(t,e){t.save();var n=e.options;n.fill&&(t.globalAlpha=n.fillOpacity,t.fillStyle=n.fillColor||n.color,t.fill(n.fillRule||"evenodd")),n.shadow&&(t.shadowBlur=n.shadowBlur||0,t.shadowOffsetX=n.shadowOffsetX||2,t.shadowOffsetY=n.shadowOffsetY||4,t.shadowColor=n.shadowColor||"rgba(0,0,0,0.3)"),n.stroke&&0!==n.weight&&(t.globalAlpha=n.opacity,t.lineWidth=n.weight,t.strokeStyle=n.color,t.lineCap=n.lineCap,t.lineJoin=n.lineJoin,t.stroke()),t.restore()},_updateTextBackgroud:function(t){var e=t._point,n=this._ctx;if(t.properties.label){var i=t.options,o=i.font||{background:!1},r=o.size||12;if(n.save(),o.background){var a=e.x-6-r/2,s=e.y-6-r/2,l=r+12,u=r+12,h=o.backgroundColor||"#000";GL.H.fillRoundRect(n,a,s,l,u,6,h)}n.restore()}},_updateText:function(t){var e=t._point,n=this._ctx,i=t.properties.label;if(i){var o=t.options,r=o.font||{background:!1},a=r.size||12,s=r.family||"sans-serif",l=r.weight||"normal",u=r.style||"normal";n.save(),n.textAlign="center",n.textBaseline="middle",n.font=u+" "+l+" "+a+"px "+s,r.stroke&&(n.lineWidth=r.strokeWidth>0?r.strokeWidth:1,n.strokeStyle=r.strokeColor||"#FFFFFF",n.strokeText(i,e.x,e.y)),n.fillStyle=r.color||"#000000",n.fillText(i,e.x,e.y),n.restore()}}}),t.canvas.tile=function(e,n,i){return new t.Canvas.Tile(e,n,i)}}).call(e,n(1))},function(t,e,n){"use strict";(function(t){function e(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}n(12);var i=n(123),o=n(122),r=n(121),a=t.extend({},t.Path.prototype.options,{fill:!0,fillOpacity:.6,radius:1.5});t.VectorGrid=t.GridLayer.extend({options:{attribution:'&copy; <a href="http://www.gaeainfo.com" target="_blank">GaeaInfo</a><em> - </em>',rendererFactory:t.svg.tile,vectorTileLayerStyles:{},interactive:!1,disabledLabel:!1},initialize:function(e){if(this.id=t.stamp(this),t.setOptions(this,e),this._dataLayerNames={},t.GridLayer.prototype.initialize.apply(this,arguments),this.options.getFeatureId&&(this._vectorTiles={},this._overriddenStyles={},this.on("tileunload",function(t){var e=this._tileCoordsToKey(t.coords),n=this._vectorTiles[e];n&&this._map&&n.removeFrom(this._map),delete this._vectorTiles[e]},this)),!e.style)throw new Error("Missing style file!");this._tileCache={}},createTile:function(e,n){this.options.zoomOffset&&(e.z=e.z+this.options.zoomOffset);var i=this.options.getFeatureId,o=this.getTileSize(),r=this.options.rendererFactory(e,o,this.options),a=this._tileCoordsToBounds(e),s=this._getVectorTilePromise(e,a);return i&&(this._vectorTiles[this._tileCoordsToKey(e)]=r,r._features={}),s.then(function(i){if(i&&i.layers&&0!==i.layers.length)for(var o=this._sortLayers(i.layers),a=0;a<o.length;a++){var s=o[a];this._dataLayerNames[s]=!0;var l=i.layers[s];if(0!==l.length)if("T_Label"!==s||this.options.disabledLabel){var u=this.calculateMaxStyleCountInLayer(s,l,e);if(u<1){if(!this.options.enableDefaultStyle)continue;this._doRender(r,s,l,e,0)}else for(var h=0;h<u;h++)this._doRender(r,s,l,e,h)}else this._renderText(r,s,l,e,!0),this._renderText(r,s,l,e)}null!=this._map&&r.addTo(this._map),t.Util.requestAnimFrame(n.bind(e,null,null))}.bind(this)),r.getContainer()},calculateMaxStyleCountInLayer:function(t,e,n){var i=this,o=0;return(e.features||[]).forEach(function(e){var r=i.styleFn(t,e,n.z);r&&(r instanceof Array||(r=[r]),r.length>o&&(o=r.length))}),o},_sortLayers:function(t){var e=Object.keys(t),n=this.options.featureTypeStyles?this.options.featureTypeStyles.LAYER_SORT_RULE||[]:[],i=Array.from(n);return i&&i.length?(i.push("T_Label"),e.sort(function(t,e){return i.indexOf(t)-i.indexOf(e)}),e):e},_sortFeaturesByCategory:function(t,e){if(!this.options.featureTypeStyles)return e;var n="CATEGORY",i=this.options.featureTypeStyles.LAYER_CATEGORY_SORT_RULE;if(!i)return e;i&&i[t]&&(n=i[t].typeFiled||n);var o=i[t].categories||[];return o.length?(e.sort(function(t,e){var i=t.properties?t.properties[n]||t.properties[n.toLowerCase()]:"",r=e.properties?e.properties[n]||e.properties[n.toLowerCase()]:"";return o.indexOf(i)-o.indexOf(r)}),e):e},_doRender:function(e,n,i,o,r){var s=this.options.getFeatureId,l=this.getTileSize().divideBy(i.extent),u=i.features;u=this._sortFeaturesByCategory(n,u);for(var h=0;h<u.length;h++){var c,f=u[h];f.properties.LAYER=n;var p=this.styleFn(n,f,o.z);if(s){c=this.options.getFeatureId(f);var d=this._overriddenStyles[c];d&&(p=d[n]?d[n]:d)}if(!p){if(!this.options.enableDefaultStyle)continue;p=[a]}if(p instanceof Function&&(p=p(n,f.properties,o.z)),p instanceof Array||(p=[p]),p.length){if(r>-1){if(!p[r])continue;p=p.splice(r,1)}for(var _=this._createLayer(f,l),y=0;y<p.length;y++){var g=p[y];1!==f.type&&(g=t.extend({},t.Path.prototype.options,g)),_.render(e,g),e._addPath(_)}this.options.interactive&&_.makeInteractive(),s&&(e._features[c]={layerName:n,feature:_})}}},_renderText:function(n,i,o,r){for(var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],s=this.getTileSize().divideBy(o.extent),l=o.features,u=0;u<l.length;u++){var h=l[u],c=this.styleFn(h.properties.lyrname||i,h,r.z);if(c){c instanceof Function&&(c=c(i,o.properties,r.z));var f=c;if(Array.isArray(c)){var p;f=(p=t).extend.apply(p,[{}].concat(e(c)))}this._createLayer(h,s).renderText(n,f,a)}}},styleFn:function(t,e,n){this.options.zoomOffset&&(n-=this.options.zoomOffset);var i=this.options.featureTypeStyles,o=i[t],r="CATEGORY",a=i.LAYER_CATEGORY_SORT_RULE;a&&a[t]&&(r=a[t].typeFiled||r);var s=e.properties?e.properties[r]||e.properties[r.toLowerCase()]:"";if(!o)return null;var l=o[s];if(l instanceof Function)return l;if(!l||!l.length)return null;var u=l.filter(function(t){return n>=t.minZoom&&n<=t.maxZoom}),h=[];return u.forEach(function(t){h=h.concat(t.symbols.map(function(t){return t.style}))}),h.sort(function(t,e){return(e.weight||0)-(t.weight||0)}),h},setFeatureStyle:function(t,e){this._overriddenStyles[t]=e;for(var n in this._vectorTiles){var i=this._vectorTiles[n],o=i._features,r=o[t];if(r){var a=r.feature,s=e;e[r.layerName]&&(s=e[r.layerName]),this._updateStyles(a,i,s)}}return this},resetFeatureStyle:function(e){delete this._overriddenStyles[e];for(var n in this._vectorTiles){var i=this._vectorTiles[n],o=i._features,r=o[e];if(r){var a=r.feature,s=this.options.vectorTileLayerStyles[r.layerName]||t.Path.prototype.options;this._updateStyles(a,i,s)}}return this},getDataLayerNames:function(){return Object.keys(this._dataLayerNames)},_updateStyles:function(e,n,i){(i=i instanceof Function?i(e.properties,n.getCoord().z):i)instanceof Array||(i=[i]);for(var o=0;o<i.length;o++){var r=t.extend({},t.Path.prototype.options,i[o]);e.updateStyle(n,r)}},_createLayer:function(t,e,n){var a;switch(t.type){case 1:a=new i.PointSymbolizer(t,e);break;case 2:a=new o.LineSymbolizer(t,e);break;case 3:a=new r.FillSymbolizer(t,e)}return this.options.interactive&&a.addEventParent(this),a},hide:function(){return this.visible(!1)},show:function(){return this.visible(!0)},visible:function(e){var n=this.getContainer();if(!n)return this;if(e?(t.DomUtil.removeClass(n,"hide"),t.DomUtil.addClass(n,"show")):(t.DomUtil.removeClass(n,"show"),t.DomUtil.addClass(n,"hide")),this._isBrother&&this._group)for(var i=0,o=this._group.length;i<o;i++)this._group[i].visible(e);return this},setOpacity:function(e){return t.GridLayer.prototype.setOpacity.call(this,e)},group:function(t){return this._group=this._group||[],t._isBrother=!0,this._group.push(t),this._map&&this._map.fire(GL.E.BaseLayerGroupChanged,{layer:this,subLayer:t,added:!0}),this},unGroup:function(t){var e=!1;if(t&&t._isBrother){this._group=this._group||[];for(var n=0;n<this._group.length;n++){this._group[n]===t&&(this._group.splice(n,1),e=!0)}}return this._map&&e&&this._map.fire(GL.E.BaseLayerGroupChanged,{layer:this,subLayer:t,added:!1}),this}}),t.vectorGrid=function(e){return new t.VectorGrid(e)}}).call(e,n(1))},function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.FillSymbolizer=void 0;var i=n(6),o=n(5);e.FillSymbolizer=t.Polygon.extend({includes:[i.Symbolizer.prototype,o.PolyBase],initialize:function(t,e){this.properties=t.properties,this.type="Polygon",this._makeFeatureParts(t,e)},render:function(t,e){i.Symbolizer.prototype.render.call(this,t,e),this._updatePath()}})}).call(e,n(1))},function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.LineSymbolizer=void 0;var i=n(6),o=n(5);e.LineSymbolizer=t.Polyline.extend({includes:[i.Symbolizer.prototype,o.PolyBase],initialize:function(t,e){this.properties=t.properties,this.type="Polyline",this._makeFeatureParts(t,e)},render:function(t,e){e.fill=!1,i.Symbolizer.prototype.render.call(this,t,e),this._updatePath()},updateStyle:function(t,e){e.fill=!1,i.Symbolizer.prototype.updateStyle.call(this,t,e)}})}).call(e,n(1))},function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.PointSymbolizer=void 0;var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o=n(6),r=(n(5),{fill:!0,fillColor:"#000000",color:"#000000",radius:1.5,font:{disabled:!1,size:12,color:"#000000",stroke:!0,strokeColor:"#FFFFFF",strokeWidth:1,background:!1,backgroundColor:"#000000",family:"Microsoft YaHei SimHei sans-serif",weight:"normal",style:"normal"}}),a=e.PointSymbolizer=t.CircleMarker.extend({options:r,includes:o.Symbolizer.prototype,statics:{iconCache:{}},initialize:function(t,e){this.properties=t.properties,this.type="Point",this._makeFeatureParts(t,e)},render:function(e,n){n.icon&&!n.icon.options&&(this._icon=t.icon(n.icon)),o.Symbolizer.prototype.render.call(this,e,n),this._radius=n.radius||this.options.radius,this._updatePath()},renderText:function(e,n){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this._renderer=e,this.options=t.extend({},r,n),i?e._updateTextBackgroud(this):e._updateText(this)},_makeFeatureParts:function(e,n){var o=e.geometry[0];"object"===i(o[0])&&"x"in o[0]?(this._point=t.point(o[0]).scaleBy(n),this._empty=t.Util.falseFn):(this._point=t.point(o).scaleBy(n),this._empty=t.Util.falseFn)},makeInteractive:function(){this._updateBounds()},updateStyle:function(e,n){return Object.keys(n).length||(n=r),n.icon&&(this._icon=t.icon(n.icon)),this._radius=n.radius||this._radius,this._updateBounds(),o.Symbolizer.prototype.updateStyle.call(this,e,n)},_updateBounds:function(){var e=this._icon;if(e&&e.options.iconUrl){var n=t.point(e.options.iconSize),i=e.options.iconAnchor||n&&n.divideBy(2,!0),o=this._point.subtract(i);this._pxBounds=new t.Bounds(o,o.add(e.options.iconSize))}else t.CircleMarker.prototype._updateBounds.call(this)},_updatePath:function(){var e=this._icon;e&&e.options.iconUrl?this._renderer._updateIcon(this):t.CircleMarker.prototype._updatePath.call(this)},_getImage:function(){if(this._icon){var t=this._icon.options.iconUrl,e=this._icon;return a.iconCache[t]=e.createIcon()}return null},_containsPoint:function(e){return this._icon?this._pxBounds.contains(e):t.CircleMarker.prototype._containsPoint.call(this,e)}})}).call(e,n(1))},function(t,e,n){"use strict";n(120),n(119),n(12)},function(t,e,n){"use strict";(function(t){function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=n(0),s=function(t){return t&&t.__esModule?t:{default:t}}(a);s.default.CanvasLabelLayer=function(n){function a(n){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e(this,a);var r=i(this,(a.__proto__||Object.getPrototypeOf(a)).call(this));return r._url=n,t.setOptions(r,o),r._layers=[],r.id=t.stamp(r),r.type=s.default.CanvasLabelLayer.type,r}return o(a,n),r(a,[{key:"setOptions",value:function(e){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return t.setOptions(this,e),n?this._redraw():this}},{key:"setStyle",value:function(e){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=t.extend({},this.options,{style:e});this.setOptions(o,n),i&&this._query()}},{key:"onAdd",value:function(e){this._map=e,this._container||this._initCanvas(),this.options.pane?this.getPane().appendChild(this._container):e._panes.overlayPane.appendChild(this._container),this.options.interactive?this._container.style.pointerEvents="auto":this._container.style.pointerEvents="none",this._query(),e.on("zoomstart",this.clear,this),e.on("moveend",this._query,this),e.on("resize",this._query,this),e.options.zoomAnimation&&t.Browser.any3d&&e.on("zoomanim",this._animateZoom,this)}},{key:"onRemove",value:function(t){this.options.pane?this.getPane().removeChild(this._container):t.getPanes().overlayPane.removeChild(this._container),t.off("zoomstart",this.clear,this),t.off("moveend",this._query,this),t.off("resize",this._query,this),t.options.zoomAnimation&&t.off("zoomanim",this._animateZoom,this)}},{key:"addTo",value:function(t){return t.addLayer(this),this}},{key:"remove",value:function(){return this._map.removeLayer(this),this}},{key:"clear",value:function(){this._layers=[],this._redraw()}},{key:"hide",value:function(){return t.DomUtil.removeClass(this._container,"show"),t.DomUtil.addClass(this._container,"hide"),this}},{key:"show",value:function(){return t.DomUtil.removeClass(this._container,"hide"),t.DomUtil.addClass(this._container,"show"),this}},{key:"visible",value:function(t){return t?this.show():this.hide()}},{key:"bringToFront",value:function(){return this._map&&(t.DomUtil.toFront(this._container),this._setAutoZIndex(Math.max)),this}},{key:"bringToBack",value:function(){return this._map&&(t.DomUtil.toBack(this._container),this._setAutoZIndex(Math.min)),this}},{key:"setZIndex",value:function(t){this.options.zIndex=t,this._updateZIndex()}},{key:"_updateZIndex",value:function(){this._container&&void 0!==this.options.zIndex&&null!==this.options.zIndex&&(this._container.style.zIndex=this.options.zIndex)}},{key:"_query",value:function(){var t=this;this._cancelTokenSource&&(this._cancelTokenSource.cancel("Operation canceled by the user."),this._cancelTokenSource=null);var e=this._map.getBounds(),n=e.getMin(),i=e.getMax(),o=this._map.getResolution(),r={yMin:n.lat,yMax:i.lat,xMin:n.lng,xMax:i.lng,resolution:o,style:this._formatServerStyle()};this._cancelTokenSource=GL.Http.CancelToken.source(),GL.Http.post(this._url,r,{cancelToken:this._cancelTokenSource.token}).then(function(e){var n=e.data||{};t._layers=n.labels||[],t._reset()}).catch(function(){})}},{key:"_animateZoom",value:function(e){var n=this._map.getZoomScale(e.zoom),i=this._map._getCenterOffset(e.center)._multiplyBy(-n).subtract(this._map._getMapPanePos());t.DomUtil.setTransform(this._container,i,n)}},{key:"_reset",value:function(){var e=this._map.containerPointToLayerPoint([0,0]);t.DomUtil.setPosition(this._container,e),this._resetCanvasSize(),this._redraw()}},{key:"_resetCanvasSize",value:function(){var e=this._map.getSize(),n=t.Browser.retina?2:1;if(n>1){var i=e.multiplyBy(n);this._container.width=i.x,this._container.height=i.y,this._context.scale(n,n),this._container.style.width=e.x+"px",this._container.style.height=e.y+"px"}else this._container.width=e.x,this._container.height=e.y}},{key:"_redraw",value:function(){var t=this;this._context.clearRect(0,0,this._container.width,this._container.height),this._map&&this._layers.forEach(function(e){t._drawText(e)})}},{key:"_drawText",value:function(t){var e=t.label;if(e){var n=this.fontStyleFn(t.lyrname,t.category);n||(n={});var i=this._map.latLngToContainerPoint(new s.default.LngLat(t.x,t.y)),o=n.size||12,r=n.family||"sans-serif",a=n.weight||"normal",l=n.style||"normal";if(n.background){var u=i.x-6-o/2,h=i.y-6-o/2,c=o+12,f=o+12,p=n.backgroundColor||"#000";this._context.beginPath(),this._context.globalCompositeOperation="destination-over",GL.H.fillRoundRect(this._context,u,h,c,f,6,p),this._context.globalCompositeOperation="source-over"}this._context.save(),this._context.textAlign="center",this._context.textBaseline="middle",this._context.font=l+" "+a+" "+o+"px "+r,n.stroke&&(this._context.lineWidth=n.strokeWidth||1,this._context.strokeStyle=n.strokeColor||"#FFFFFF",this._context.strokeText(e,i.x,i.y)),this._context.fillStyle=n.color||"#000000",this._context.fillText(e,i.x,i.y),this._context.restore()}}},{key:"styleFn",value:function(t,e){var n=this._map.getZoom();this.options.zoomOffset&&(n-=this.options.zoomOffset);var i=this.options.style,o=i[t];if(!o)return null;var r=o[e];if(!r||!r.length)return null;var a=r.filter(function(t){return n>=t.minZoom&&n<=t.maxZoom}),s=[];return a.forEach(function(t){s=s.concat(t.symbols.map(function(t){return t.style}).filter(function(t){return!!t}))}),s}},{key:"fontStyleFn",value:function(t,e){var n=this.styleFn(t,e);if(!n)return null;var i=n.map(function(t){return t.font}).filter(function(t){return!!t});return i.length?i[0]:null}},{key:"hasFontSymbolStyleFn",value:function(t,e){var n=this.styleFn(t,e);return n?(n=n.filter(function(t){return!!t.font}),n.length?n[0]:null):null}},{key:"_formatServerStyle",value:function(){var t=this;if(this._map){var e={},n=this.options.style,i=n.LAYER_CATEGORY_SORT_RULE;for(var o in i){var r;!function(n){var o=[],a=[],s=[],l=i[n].geometryType,u=i[n].categories;for(r=0;r<u.length;r++){(function(){var e=u[r],i=t.hasFontSymbolStyleFn(n,e);if(!i)return o.push(e),"continue";var h=i.font;if(!h||h.disabled)return o.push(e),"continue";var c={category:e};if(h.size&&(c.size=h.size),a.push(c),"point"===l.toLowerCase()){var f=0;f=!i.isPixelIcon&&i.icon.iconUrl?Math.max.apply(null,i.icon.iconSize):2*i.radius;var p=h.avoid||[],d=p.findIndex(function(t){return n===t.lyrname&&e===t.category});if(d>-1&&p.splice(d,1),f>0){var _={lyrname:n,category:e,absoluteavoid:!0,size:f};p.unshift(_)}h.avoid=p,s=s.concat(h.avoid)}})()}e[n]={noLabel:o,label:a,avoid:s}}(o)}return e}}},{key:"_initCanvas",value:function(){this._container=t.DomUtil.create("canvas","leaflet-canvas-icon-layer leaflet-layer");var e=t.DomUtil.testProp(["transformOrigin","WebkitTransformOrigin","msTransformOrigin"]);this._container.style[e]="50% 50%",this._context=this._container.getContext("2d"),this._resetCanvasSize();var n=this._map.options.zoomAnimation&&t.Browser.any3d;t.DomUtil.addClass(this._container,"leaflet-zoom-"+(n?"animated":"hide"))}}]),a}(t.Layer?t.Layer:t.Class),s.default.CanvasLabelLayer.type="CanvasLabelLayer"}).call(e,n(1))},function(t,e,n){"use strict";(function(t){function e(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=n(174),l=e(s),u=n(0),h=e(u);h.default.CanvasVectorLayer=function(e){function n(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};i(this,n);var a=o(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return t.setOptions(a,r),a._layers={},a.id=e||t.stamp(a),a.type=h.default.CanvasVectorLayer.type,a._textList=[],a}return r(n,e),a(n,[{key:"setOptions",value:function(e){return t.setOptions(this,e),this._redraw(!0)}},{key:"onAdd",value:function(e){this._map=e,this._container||this._initCanvas(),this.options.pane?this.getPane().appendChild(this._container):e._panes.overlayPane.appendChild(this._container),e.on("moveend",this._reset,this),e.on("resize",this._reset,this),e.options.zoomAnimation&&t.Browser.any3d&&e.on("zoomanim",this._animateZoom,this)}},{key:"onRemove",value:function(t){this.options.pane?this.getPane().removeChild(this._container):t.getPanes().overlayPane.removeChild(this._container),t.off("moveend",this._reset,this),t.off("resize",this._reset,this),t.options.zoomAnimation&&t.off("zoomanim",this._animateZoom,this)}},{key:"addTo",value:function(t){return t.addLayer(this),this}},{key:"remove",value:function(){return this._map.removeLayer(this),this}},{key:"clear",value:function(){this._latlngMarkers=null,this._markers=null,this._layers={},this._redraw(!0)}},{key:"getOverlay",value:function(t){return this._layers[t]}},{key:"getOverlayId",value:function(t){return t?this.getLayerId(t):null}},{key:"getOverlays",value:function(){return this._layers?Object.values(this._layers):[]}},{key:"getLayerId",value:function(e){return e.id||t.stamp(e)}},{key:"hasOverlay",value:function(t){return!!t&&(t in this._layers||this.getLayerId(t)in this._layers)}},{key:"eachOverlay",value:function(t,e){var n=this.getOverlays();for(var i in n)t.call(e,n[i]);return this}},{key:"addOverlays",value:function(t){var e=this;if(t&&t.length){var n=[],i=[];return t.forEach(function(t){if(t.options.icon){var o=t.getLatLng(),r=e._map.getBounds().contains(o),a=e._addMarker(t,o,r);!0===r&&n.push(a[0]),i.push(a[1])}}),this._markers.load(n),this._latlngMarkers.load(i),this}}},{key:"addOverlay",value:function(t){var e=t.getLatLng(),n=this._map.getBounds().contains(e),i=this._addMarker(t,e,n);return i?(!0===n&&this._markers.insert(i[0]),this._latlngMarkers.insert(i[1]),this):this}},{key:"removeOverlays",value:function(t){var e=this;if(t&&t.length)return t.forEach(function(t){e.removeOverlay(t)}),this}},{key:"removeOverlay",value:function(t){return this._removeMarker(t,!0),this}},{key:"hide",value:function(){return t.DomUtil.removeClass(this._container,"show"),t.DomUtil.addClass(this._container,"hide"),this}},{key:"show",value:function(){return t.DomUtil.removeClass(this._container,"hide"),t.DomUtil.addClass(this._container,"show"),this}},{key:"visible",value:function(t){return t?this.show():this.hide()}},{key:"bringToFront",value:function(){return this._map&&(t.DomUtil.toFront(this._container),this._setAutoZIndex(Math.max)),this}},{key:"bringToBack",value:function(){return this._map&&(t.DomUtil.toBack(this._container),this._setAutoZIndex(Math.min)),this}},{key:"setZIndex",value:function(t){this.options.zIndex=t,this._updateZIndex()}},{key:"getBounds",value:function(){var t=new h.default.Envelope;for(var e in this._layers){var n=this._layers[e];t.extend(n.getBounds?n.getBounds():n.getLngLat())}return t}},{key:"_updateZIndex",value:function(){this._container&&void 0!==this.options.zIndex&&null!==this.options.zIndex&&(this._container.style.zIndex=this.options.zIndex)}},{key:"_setAutoZIndex",value:function(t){for(var e,n=this.getPane().children,i=-t(-1/0,1/0),o=0,r=n.length;o<r;o++)e=n[o].style.zIndex,n[o]!==this._container&&e&&(i=t(i,+e));isFinite(i)&&(this.options.zIndex=i+t(-1,1),this._updateZIndex())}},{key:"_removeMarker",value:function(t,e){var n=this;t.minX&&(t=t.data);var i=t.getLatLng(),o=n._map.getBounds().contains(i),r={minX:i.lng,minY:i.lat,maxX:i.lng,maxY:i.lat,data:t};n._latlngMarkers.remove(r,function(t,e){return t.data._leaflet_id===e.data._leaflet_id}),n._latlngMarkers.total--,n._latlngMarkers.dirty++,delete t.canvas_img,delete t._map,this._imageLookup&&delete this._imageLookup[t.options.icon.options.iconUrl],!0===o&&!0===e&&n._redraw(!0),delete this._layers[this.getLayerId(t)]}},{key:"_addMarker",value:function(e,n,i){if(!this._layers[this.getLayerId(e)]||!e._map){var o=this;e._map=o._map,this._delegateMethods(e),o._markers||(o._markers=new l.default),o._latlngMarkers||(o._latlngMarkers=new l.default,o._latlngMarkers.dirty=0,o._latlngMarkers.total=0),t.Util.stamp(e);var r=o._map.latLngToContainerPoint(n),a=e.options.icon.options;if(a.html){this._context.save(),this._context.font=e.options.font||"400 12px sans-serif";var s=this._context.measureText(a.html);a.iconSize=[s.width,s.width/a.html.length],this._context.restore()}var u=a.iconSize,h=u[0]/2,c=u[1]/2,f=[{minX:r.x-h,minY:r.y-c,maxX:r.x+h,maxY:r.y+c,data:e},{minX:n.lng,minY:n.lat,maxX:n.lng,maxY:n.lat,data:e}];return o._latlngMarkers.dirty++,o._latlngMarkers.total++,!0===i&&o._drawMarker(e,r),this._layers[this.getLayerId(e)]=e,f}}},{key:"_drawMarker",value:function(t,e){var n=this;this._imageLookup||(this._imageLookup={}),e||(e=n._map.latLngToContainerPoint(t.getLatLng()));var i=t.options.icon.options.iconUrl,o=t.options.icon.options.html;if(i)if(t.canvas_img)n._drawImage(t,e);else if(n._imageLookup[i])t.canvas_img=n._imageLookup[i][0],!1===n._imageLookup[i][1]?n._imageLookup[i][2].push([t,e]):n._drawImage(t,e);else{var r=new Image;t.canvas_img=r,n._imageLookup[i]=[r,!1,[[t,e]]],r.onload=function(){n._imageLookup[i][1]=!0,n._imageLookup[i][2].forEach(function(t){n._drawImage(t[0],t[1])})},r.src=i}else o&&this._drawText(t,e)}},{key:"_drawImage",value:function(t,e){if(t.canvas_img){var n=t.options.icon.options;n.iconAnchor||(n.iconAnchor=n.iconSize.map(function(t){return t/2})),this._context.drawImage(t.canvas_img,e.x-n.iconAnchor[0],e.y-n.iconAnchor[1],n.iconSize[0],n.iconSize[1])}}},{key:"_drawText",value:function(e,n){this._context.save();var i=e.options.icon.options,o=e.options.font;this._context.font=o.font||"400 12px sans-serif",this._context.fillStyle=o.color||"rgba(51, 51, 51, 0.8)",this._context.textAlign="center",this._context.textBaseline="middle",o.shadowColor&&(this._context.shadowColor=o.shadowColor,void 0===o.shadowOffsetX&&(o.shadowOffsetX=0),void 0===o.shadowOffsetY&&(o.shadowOffsetY=0),void 0===o.shadowBlur&&(o.shadowBlur=0),this._context.shadowOffsetX=o.shadowOffsetX,this._context.shadowOffsetY=o.shadowOffsetY,this._context.shadowBlur=o.shadowBlur);var r=this._context.measureText(i.html),a=r.width+n.x+10,s=r.width/i.html.length+n.y+10,l=t.bounds(t.point(n.x,n.y),t.point(a,s));if(l.in,this.options.collision)for(var u=0;u<this._textList.length;u++){var h=this._textList[u];if(h.intersects(l))return void this._context.restore()}this._textList.push(l),o.strokeColor&&(this._context.strokeStyle=o.strokeColor,void 0===o.strokeWidth&&(o.strokeWidth=1),this._context.lineWidth=o.strokeWidth,this._context.strokeText(i.html,n.x,n.y)),this._context.fillText(i.html,n.x,n.y),this._context.restore()}},{key:"_clean",value:function(){this._textList=[],this._context.clearRect(0,0,this._container.width,this._container.height),this._markers.clear(),this._layers={}}},{key:"_reset",value:function(){var e=this._map.containerPointToLayerPoint([0,0]);t.DomUtil.setPosition(this._container,e),this._resetCanvasSize(),this._redraw()}},{key:"_resetCanvasSize",value:function(){var e=this._map.getSize(),n=t.Browser.retina?2:1;if(n>1){var i=e.multiplyBy(n);this._container.width=i.x,this._container.height=i.y,this._context.scale(n,n),this._container.style.width=e.x+"px",this._container.style.height=e.y+"px"}else this._container.width=e.x,this._container.height=e.y}},{key:"_redraw",value:function(t){var e=this;if(this._textList=[],t&&this._context.clearRect(0,0,this._container.width,this._container.height),this._map&&this._latlngMarkers){var n=[];e._latlngMarkers.dirty/e._latlngMarkers.total>=.1&&(e._latlngMarkers.all().forEach(function(t){n.push(t)}),e._latlngMarkers.clear(),e._latlngMarkers.load(n),e._latlngMarkers.dirty=0,n=[]);var i=e._map.getBounds(),o={minX:i.getWest(),minY:i.getSouth(),maxX:i.getEast(),maxY:i.getNorth()};e._latlngMarkers.search(o).forEach(function(t){var i=e._map.latLngToContainerPoint(t.data.getLatLng()),o=t.data.options.icon.options.iconSize,r=o[0]/2,a=o[1]/2,s={minX:i.x-r,minY:i.y-a,maxX:i.x+r,maxY:i.y+a,data:t.data};n.push(s),e._drawMarker(t.data,i)}),this._markers.clear(),this._markers.load(n)}}},{key:"_initCanvas",value:function(){this._container=t.DomUtil.create("canvas","leaflet-canvas-icon-layer leaflet-layer");var e=t.DomUtil.testProp(["transformOrigin","WebkitTransformOrigin","msTransformOrigin"]);this._container.style[e]="50% 50%",this._context=this._container.getContext("2d"),this._resetCanvasSize();var n=this._map.options.zoomAnimation&&t.Browser.any3d;t.DomUtil.addClass(this._container,"leaflet-zoom-"+(n?"animated":"hide")),t.DomEvent.on(this._container,"mousemove",t.Util.throttle(this._onMouseMove,32,this),this).on(this._container,"click dblclick mousedown mouseup contextmenu",this._onClick,this).on(this._container,"mouseout",this._handleMouseOut,this)}},{key:"_onClick",value:function(e){if(this._markers){var n,i=this._map.mouseEventToContainerPoint(e),o=this._markers.search({minX:i.x,minY:i.y,maxX:i.x,maxY:i.y});o&&o.length&&(n=o[0].data)&&(t.DomEvent._fakeStop(e),this._fireEvent([n],e))}}},{key:"_onMouseMove",value:function(t){if(this._markers&&this._map&&!this._map.dragging.moving()&&!this._map._animatingZoom){var e=this._map.mouseEventToContainerPoint(t);this._handleMouseHover(t,e)}}},{key:"_handleMouseOut",value:function(e){if(this._markers){var n=this._hoveredLayer;n&&(t.DomUtil.removeClass(this._container,"leaflet-interactive"),this._fireEvent([n],e,"mouseout"),this._hoveredLayer=null)}}},{key:"_handleMouseHover",value:function(e,n){if(this._markers){var i,o=this._markers.search({minX:n.x,minY:n.y,maxX:n.x,maxY:n.y});o&&o.length&&(i=o[0].data,i!==this._hoveredLayer&&(this._handleMouseOut(e),i&&(t.DomUtil.addClass(this._container,"leaflet-interactive"),this._fireEvent([i],e,"mouseover"),this._hoveredLayer=i)),this._hoveredLayer&&this._fireEvent([this._hoveredLayer],e))}}},{key:"_fireEvent",value:function(t,e,n){this._map._fireDOMEvent(e,n||e.type,t)}},{key:"_animateZoom",value:function(e){var n=this._map.getZoomScale(e.zoom),i=this._map._getCenterOffset(e.center)._multiplyBy(-n).subtract(this._map._getMapPanePos());t.DomUtil.setTransform(this._container,i,n)}},{key:"_delegateMethods",value:function(t){for(var e=["setIcon","setLatLng"],n=0;n<e.length;n++){var i=e[n];t["_$"+i]||this._delegateMethod(t,i)}}},{key:"_delegateMethod",value:function(t,e){var n=this,i="_$"+e;t[i]=t[e],t[e]=function(){var t=arguments;return function(t,e){n.removeOverlay(e.marker),e.marker[e.oldMethod].apply(e.marker,t),n.addOverlay(e.marker)}(t,this)}.bind({marker:t,oldMethod:i,method:e})}}]),n}(t.Layer?t.Layer:t.Class),h.default.CanvasVectorLayer.type="CanvasVectorLayer"}).call(e,n(1))},function(t,e,n){"use strict";(function(t){function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=function t(e,n,i){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,n);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,n,i)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(i)},s=n(0),l=function(t){return t&&t.__esModule?t:{default:t}}(s);l.default.VectorLayer=function(n){function s(n,o){arguments.length>2&&void 0!==arguments[2]&&arguments[2];e(this,s);var r=i(this,(s.__proto__||Object.getPrototypeOf(s)).call(this,[]));return t.setOptions(r,o||{}),r.id=n,r.type=l.default.VectorLayer.type,r._prefix=t.stamp(r)+"-",r}return o(s,n),r(s,[{key:"getOverlay",value:function(t){return a(s.prototype.__proto__||Object.getPrototypeOf(s.prototype),"getLayer",this).call(this,t)}},{key:"getOverlayId",value:function(t){return this.getLayerId(t)}},{key:"addOverlay",value:function(t){return t._layer=this,a(s.prototype.__proto__||Object.getPrototypeOf(s.prototype),"addLayer",this).call(this,t)}},{key:"removeOverlay",value:function(t){var e=a(s.prototype.__proto__||Object.getPrototypeOf(s.prototype),"removeLayer",this).call(this,t);return t._layer=null,e}},{key:"hasOverlay",value:function(t){return this.hasLayer(t)}},{key:"eachOverlay",value:function(t,e){return a(s.prototype.__proto__||Object.getPrototypeOf(s.prototype),"eachLayer",this).call(this,t,e)}},{key:"getOverlays",value:function(){return a(s.prototype.__proto__||Object.getPrototypeOf(s.prototype),"getLayers",this).call(this)}},{key:"addOverlays",value:function(t){if(!t)return this;for(var e=0,n=t.length;e<n;e++)this.addOverlay(t[e]);return this}},{key:"removeOverlays",value:function(t){if(!t)return this;for(var e=0,n=t.length;e<n;e++)this.removeOverlay(t[e]);return this}},{key:"clear",value:function(){return a(s.prototype.__proto__||Object.getPrototypeOf(s.prototype),"clearLayers",this).call(this),this}},{key:"clearHighlight",value:function(){return this.eachOverlay(function(t){t.clearHighlight()}),this}},{key:"getBounds",value:function(){var t=new l.default.Envelope;for(var e in this._layers){var n=this._layers[e];t.extend(n.getBounds?n.getBounds():n.getLngLat())}return t}},{key:"normal",value:function(){return this._state="normal",this}},{key:"cluster",value:function(t){return this._state="cluster",this}},{key:"hide",value:function(){return this.invoke("hide")}},{key:"show",value:function(){return this.invoke("show")}},{key:"visible",value:function(t){return this.invoke("visible",t)}},{key:"setZIndex",value:function(t){return this.invoke("setZIndex",t)}},{key:"setStyle",value:function(t){return this.invoke("setStyle",t)}},{key:"bringToFront",value:function(){return this.invoke("bringToFront")}},{key:"bringToBack",value:function(){return this.invoke("bringToBack")}},{key:"getLayerId",value:function(e){return e.id||t.stamp(e)}},{key:"hasLayer",value:function(t){return!!t&&(t in this._layers||this.getLayerId(t)in this._layers)}},{key:"state",get:function(){return this._state||"normal"}}]),s}(t.FeatureGroup),l.default.VectorLayer.type="VectorLayer"}).call(e,n(1))},function(t,e,n){"use strict";(function(t){function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();n(130),n(165),GL.WindLayer=function(t){function n(t){return e(this,n),i(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,t))}return o(n,t),r(n,[{key:"setData",value:function(t){this.options.data=t,this._windy&&(this._windy.setOptions(this.options),this._windy.setData(t),this._clearAndRestart()),this.fire("load")}}]),n}(t.VelocityLayer)}).call(e,n(1))},function(t,e,n){"use strict";(function(t){t.DomUtil.setTransform||(t.DomUtil.setTransform=function(e,n,i){var o=n||new t.Point(0,0);e.style[t.DomUtil.TRANSFORM]=(t.Browser.ie3d?"translate("+o.x+"px,"+o.y+"px)":"translate3d("+o.x+"px,"+o.y+"px,0)")+(i?" scale("+i+")":"")}),t.CanvasLayer=(t.Layer?t.Layer:t.Class).extend({initialize:function(e){this._map=null,this._canvas=null,this._frame=null,this._delegate=null,t.setOptions(this,e)},delegate:function(t){return this._delegate=t,this},needRedraw:function(){return this._frame||(this._frame=t.Util.requestAnimFrame(this.drawLayer,this)),this},_onLayerDidResize:function(t){this._canvas.width=t.newSize.x,this._canvas.height=t.newSize.y},_onLayerDidMove:function(){var e=this._map.containerPointToLayerPoint([0,0]);t.DomUtil.setPosition(this._canvas,e),this.drawLayer()},getEvents:function(){var e={resize:this._onLayerDidResize,moveend:this._onLayerDidMove};return this._map.options.zoomAnimation&&t.Browser.any3d&&(e.zoomanim=this._animateZoom),e},onAdd:function(e){this._map=e,this._canvas=t.DomUtil.create("canvas","leaflet-layer"),this.tiles={};var n=this._map.getSize();this._canvas.width=n.x,this._canvas.height=n.y;var i=this._map.options.zoomAnimation&&t.Browser.any3d;t.DomUtil.addClass(this._canvas,"leaflet-zoom-"+(i?"animated":"hide")),this.options.pane.appendChild(this._canvas),e.on(this.getEvents(),this);var o=this._delegate||this;o.onLayerDidMount&&o.onLayerDidMount(),this.needRedraw();var r=this;setTimeout(function(){r._onLayerDidMove()},0)},onRemove:function(t){var e=this._delegate||this;e.onLayerWillUnmount&&e.onLayerWillUnmount(),this.options.pane.removeChild(this._canvas),t.off(this.getEvents(),this),this._canvas=null},addTo:function(t){return t.addLayer(this),this},LatLonToMercator:function(t){return{x:6378137*t.lng*Math.PI/180,y:6378137*Math.log(Math.tan((90+t.lat)*Math.PI/360))}},drawLayer:function(){var t=this._map.getSize(),e=this._map.getBounds(),n=this._map.getZoom(),i=this.LatLonToMercator(this._map.getCenter()),o=this.LatLonToMercator(this._map.containerPointToLatLng(this._map.getSize())),r=this._delegate||this;r.onDrawLayer&&r.onDrawLayer({layer:this,canvas:this._canvas,bounds:e,size:t,zoom:n,center:i,corner:o}),this._frame=null},_setTransform:function(e,n,i){var o=n||new t.Point(0,0);e.style[t.DomUtil.TRANSFORM]=(t.Browser.ie3d?"translate("+o.x+"px,"+o.y+"px)":"translate3d("+o.x+"px,"+o.y+"px,0)")+(i?" scale("+i+")":"")},_animateZoom:function(e){var n=this._map.getZoomScale(e.zoom),i=t.Layer?this._map._latLngToNewLayerPoint(this._map.getBounds().getNorthWest(),e.zoom,e.center):this._map._getCenterOffset(e.center)._multiplyBy(-n).subtract(this._map._getMapPanePos());t.DomUtil.setTransform(this._canvas,i,n)}}),t.canvasLayer=function(e){return new t.CanvasLayer(e)}}).call(e,n(1))},function(t,e,n){"use strict";(function(t){n(129);var e=n(131),i=function(t){return t&&t.__esModule?t:{default:t}}(e);t.VelocityLayer=(t.Layer?t.Layer:t.Class).extend({options:{displayValues:!0,maxVelocity:10,colorScale:null,data:null},_map:null,_canvasLayer:null,_windy:null,_context:null,_timer:0,initialize:function(e){t.setOptions(this,e)},onAdd:function(e){this._paneName=this.options.paneName||"overlayPane";var n=e._panes.overlayPane;e.getPane&&((n=e.getPane(this._paneName))||(n=e.createPane(this._paneName))),this._canvasLayer=t.canvasLayer({pane:n}).delegate(this),this._canvasLayer.addTo(e),this._map=e},onRemove:function(t){this._destroyWind()},setData:function(t){this.options.data=t,this._windy&&(this._windy.setData(t),this._clearAndRestart()),this.fire("load")},setOptions:function(t){this.options=Object.assign(this.options,t),t.hasOwnProperty("data")&&(this.options.data=t.data),this._windy&&(this._windy.setOptions(t),t.hasOwnProperty("data")&&this._windy.setData(t.data),this._clearAndRestart()),this.fire("load")},onDrawLayer:function(t,e){var n=this;if(!this._windy)return void this._initWindy(this);this.options.data&&(this._timer&&clearTimeout(n._timer),this._timer=setTimeout(function(){n._startWindy()},750))},_startWindy:function(){var t=this._map.getBounds(),e=this._map.getSize();this._windy.start([[0,0],[e.x,e.y]],e.x,e.y,[[t._southWest.lng,t._southWest.lat],[t._northEast.lng,t._northEast.lat]])},_initWindy:function(t){var e=Object.assign({canvas:t._canvasLayer._canvas},t.options);this._windy=new i.default(e),this._context=this._canvasLayer._canvas.getContext("2d"),this._canvasLayer._canvas.classList.add("velocity-overlay"),this.onDrawLayer(),this._map.on("dragstart",t._windy.stop),this._map.on("dragend",t._clearAndRestart),this._map.on("zoomstart",t._windy.stop),this._map.on("zoomend",t._clearAndRestart),this._map.on("resize",t._clearWind)},_clearAndRestart:function(){this._context&&this._context.clearRect(0,0,3e3,3e3),this._windy&&this._startWindy()},_clearWind:function(){this._windy&&this._windy.stop(),this._context&&this._context.clearRect(0,0,3e3,3e3)},_destroyWind:function(){this._timer&&clearTimeout(this._timer),this._windy&&this._windy.stop(),this._context&&this._context.clearRect(0,0,3e3,3e3),this._windy=null,this._map.removeLayer(this._canvasLayer)}}),t.velocityLayer=function(e){return new t.VelocityLayer(e)}}).call(e,n(1))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){var e,n,i,o,r,a,s,l,u,h,c=t.minVelocity||0,f=t.maxVelocity||10,p=(t.velocityScale||.005)*(Math.pow(window.devicePixelRatio,1/3)||1),d=t.particleAge||90,_=t.lineWidth||1,y=t.particleMultiplier||1/300,g=Math.pow(window.devicePixelRatio,1/3)||1.6,m=t.frameRate||15,v=1e3/m,b=["rgb(36,104, 180)","rgb(60,157, 194)","rgb(128,205,193 )","rgb(151,218,168 )","rgb(198,231,181)","rgb(238,247,217)","rgb(255,238,159)","rgb(252,217,125)","rgb(255,182,100)","rgb(252,150,75)","rgb(250,112,52)","rgb(245,64,32)","rgb(237,45,28)","rgb(220,24,32)","rgb(180,0,35)"],L=t.colorScale||b,w=[NaN,NaN,null],k=t.data,x=function(t){k=t},M=function(t){t.hasOwnProperty("minVelocity")&&(c=t.minVelocity),t.hasOwnProperty("maxVelocity")&&(f=t.maxVelocity),t.hasOwnProperty("velocityScale")&&(p=(t.velocityScale||.005)*(Math.pow(window.devicePixelRatio,1/3)||1)),t.hasOwnProperty("particleAge")&&(d=t.particleAge),t.hasOwnProperty("lineWidth")&&(_=t.lineWidth),t.hasOwnProperty("particleMultiplier")&&(y=t.particleMultiplier),t.hasOwnProperty("frameRate")&&(m=t.frameRate),v=1e3/m},P=function(t,e,n,i,o,r){var a=1-t,s=1-e,l=a*s,u=t*s,h=a*e,c=t*e,f=n[0]*l+i[0]*u+o[0]*h+r[0]*c,p=n[1]*l+i[1]*u+o[1]*h+r[1]*c;return[f,p,Math.sqrt(f*f+p*p)]},O=function(t,e){var n=t.data,i=e.data;return{header:t.header,data:function(t){return[n[t],i[t]]},interpolate:P}},C=function(t){var e=null,n=null,i=null;return t.forEach(function(t){switch(t.header.parameterCategory+","+t.header.parameterNumber){case"1,2":case"2,2":e=t;break;case"1,3":case"2,3":n=t;break;default:i=t}}),O(e,n)},T=function(t,h){e=C(t);var c=e.header;o=c.lo1,r=c.la1,a=c.dx,s=c.dy,l=c.nx,u=c.ny,i=new Date(c.refTime),i.setHours(i.getHours()+c.forecastTime),n=[];for(var f=0,p=Math.floor(l*a)>=360,d=0;d<u;d++){for(var _=[],y=0;y<l;y++,f++)_[y]=e.data(f);p&&_.push(_[0]),n[d]=_}h({date:i,interpolate:S})},S=function(t,i){if(!n)return null;var l,u=D(t-o,360)/a,h=(r-i)/s,c=Math.floor(u),f=c+1,p=Math.floor(h),d=p+1;if(l=n[p]){var _=l[c],y=l[f];if(E(_)&&E(y)&&(l=n[d])){var g=l[c],m=l[f];if(E(g)&&E(m))return e.interpolate(u-c,h-p,_,y,g,m)}}return null},E=function(t){return null!==t&&void 0!==t},D=function(t,e){return t-e*Math.floor(t/e)},j=function(){return/android|blackberry|iemobile|ipad|iphone|ipod|opera mini|webos/i.test(navigator.userAgent)},z=function(t,e,n,i,o,r,a,s){var l=a[0]*r,u=a[1]*r,h=B(t,e,n,i,o,s);return a[0]=h[0]*l+h[2]*u,a[1]=h[1]*l+h[3]*u,a},B=function(t,e,n,i,o,r){var a=2*Math.PI,s=e<0?5:-5,l=n<0?5:-5,u=F(n,e+s,r),h=F(n+l,e,r),c=Math.cos(n/360*a);return[(u[0]-i)/s/c,(u[1]-o)/s/c,(h[0]-i)/l,(h[1]-o)/l]},I=function(t,e,n){function i(e,n){var i=t[Math.round(e)];return i&&i[Math.round(n)]||w}i.release=function(){t=[]},i.randomize=function(t){var n,o,r=0;do{n=Math.round(Math.floor(Math.random()*e.width)+e.x),o=Math.round(Math.floor(Math.random()*e.height)+e.y)}while(null===i(n,o)[2]&&r++<30);return t.x=n,t.y=o,t},n(e,i)},A=function(t,e,n){var i=t[0],o=t[1],r=Math.round(i[0]),a=Math.max(Math.floor(i[1],0),0);Math.min(Math.ceil(o[0],e),e-1);return{x:r,y:a,xMax:e,yMax:Math.min(Math.ceil(o[1],n),n-1),width:e,height:n}},U=function(t){return t/180*Math.PI},N=function(t){return t/(Math.PI/180)},G=function(t,e,n){var i=n.east-n.west,o=n.south-n.north,r=N(n.north)+e/n.height*N(o);return[N(n.west)+t/n.width*N(i),r]},R=function(t){return Math.log(Math.tan(t/2+Math.PI/4))},F=function(t,e,n){var i=R(n.south),o=R(n.north),r=n.width/(n.east-n.west),a=n.height/(o-i),s=R(U(t)),l=(U(e)-n.west)*r,s=(o-s)*a;return[l,s]},Z=function(t,e,n,i){function o(i){for(var o=[],a=e.y;a<=e.yMax;a+=2){var u=G(i,a,n);if(u){var h=u[0],c=u[1];if(isFinite(h)){var f=t.interpolate(h,c);f&&(f=z(r,h,c,i,a,s,f,n),o[a+1]=o[a]=f)}}}l[i+1]=l[i]=o}var r={},a=(n.south-n.north)*(n.west-n.east),s=p*Math.pow(a,.4),l=[],u=e.x;!function t(){for(var n=Date.now();u<e.width;)if(o(u),u+=2,Date.now()-n>1e3)return void setTimeout(t,25);I(l,e,i)}()},H=function(e,n){function i(){a.forEach(function(t){t.length=0}),l.forEach(function(t){t.age>d&&(n.randomize(t).age=0);var e=t.x,i=t.y,o=n(e,i),s=o[2];if(null===s)t.age=d;else{var l=e+o[0],u=i+o[1];null!==n(l,u)[2]?(t.xt=l,t.yt=u,a[r.indexFor(s)].push(t)):(t.x=l,t.y=u)}t.age+=1})}function o(){p.globalCompositeOperation="destination-in",p.fillRect(e.x,e.y,e.width,e.height),p.globalCompositeOperation="lighter",p.globalAlpha=.9,a.forEach(function(t,e){t.length>0&&(p.beginPath(),p.strokeStyle=r[e],t.forEach(function(t){p.moveTo(t.x,t.y),p.lineTo(t.xt,t.yt),t.x=t.xt,t.y=t.yt}),p.stroke())})}var r=function(t,e){return L.indexFor=function(n){return Math.max(0,Math.min(L.length-1,Math.round((n-t)/(e-t)*(L.length-1))))},L}(c,f),a=r.map(function(){return[]}),s=Math.round(e.width*e.height*y);j()&&(s*=g);for(var l=[],u=0;u<s;u++)l.push(n.randomize({age:Math.floor(Math.random()*d)+0}));var p=t.canvas.getContext("2d");p.lineWidth=_,p.fillStyle="rgba(0, 0, 0, 0.97)",p.globalAlpha=.6;var m=Date.now();!function t(){h=requestAnimationFrame(t);var e=Date.now(),n=e-m;n>v&&(m=e-n%v,i(),o())}()},q=function(t,e,n,i){var o={south:U(i[0][1]),north:U(i[1][1]),east:U(i[1][0]),west:U(i[0][0]),width:e,height:n};W(),T(k,function(i){Z(i,A(t,e,n),o,function(t,e){V.field=e,H(t,e)})})},W=function(){V.field&&V.field.release(),h&&cancelAnimationFrame(h)},V={params:t,start:q,stop:W,createField:I,interpolatePoint:S,setData:x,setOptions:M};return V};e.default=i,window.cancelAnimationFrame||(window.cancelAnimationFrame=function(t){clearTimeout(t)})},function(t,e,n){"use strict";n(139),n(141),n(140),n(137),n(133),n(136),n(135)},function(t,e,n){"use strict";(function(t){function e(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=n(0),l=e(s),u=n(134),h=e(u);l.default.Overlay.Circle=function(e){function n(t,e,r){i(this,n);var a=o(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,t,e,r));return a._mRadius=a.options.radius,a.type=l.default.Overlay.Circle.type,a}return r(n,e),a(n,[{key:"clone",value:function(){return new l.default.Overlay.Circle(this.getCenter(),this.getRadius(),this.getStyle())}},{key:"setRadius",value:function(t){return this._mRadius=t,this.redraw()}},{key:"getRadius",value:function(){return this._mRadius}},{key:"contains",value:function(t){return t.distanceTo(this._latlng)<=this._mRadius+this._clickTolerance()}},{key:"getBounds",value:function(){var t=[this._radius,this._radiusY||this._radius];return new l.default.Envelope(this._map.layerPointToLatLng(this._point.subtract(t)),this._map.layerPointToLatLng(this._point.add(t)))}},{key:"setStyle",value:function(e){return e?(this._style=e,this._style.options=this._style.options||{},this._style.options.renderer=this._renderer,t.Path.prototype.setStyle.call(this,this._style.options)):this}},{key:"_project",value:function(){var e=this._latlng.lng,n=this._latlng.lat,i=this._map,o=i.options.crs;if(o.distance===t.CRS.Earth.distance){var r=Math.PI/180,a=this._mRadius/t.CRS.Earth.R/r,s=i.project([e,n+a]),l=i.project([e,n-a]),u=s.add(l).divideBy(2),h=i.unproject(u).lat,c=Math.acos((Math.cos(a*r)-Math.sin(n*r)*Math.sin(h*r))/(Math.cos(n*r)*Math.cos(h*r)))/r;(isNaN(c)||0===c)&&(c=a/Math.cos(Math.PI/180*n)),this._point=u.subtract(i.getPixelOrigin()),this._radius=isNaN(c)?0:Math.max(Math.round(u.x-i.project([e-c,h]).x),1),this._radiusY=Math.max(Math.round(u.y-s.y),1)}else{var f=o.unproject(o.project(this._latlng).subtract([this._mRadius,0]));this._point=i.latLngToLayerPoint(this._latlng),this._radius=this._point.x-i.latLngToLayerPoint(f).x}this._updateBounds()}},{key:"serialize",value:function(){return{id:this.id,attr:this.attr,type:this.type,geo:this.getLngLat().toString(),radius:this.getRadius(),style:this._style.toJSON()}}}],[{key:"deserialize",value:function(t){if(GL.H.isEmpty(t))return null;var e=t;GL.H.isString(t)&&(e=JSON.parse(t));var n=e.id,i=e.geo,o=e.attr,r=e.radius,a=e.style;if(!i)return null;var s=new l.default.Overlay.Circle(i,r,new l.default.Style.Fill(a,!!a&&a.isDash));return s.id=n,s.attr=o,s}}]),n}(h.default),l.default.Overlay.Circle.type="Circle"}).call(e,n(1))},function(t,e,n){"use strict";(function(t){function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=function t(e,n,i){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,n);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,n,i)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(i)},l=n(0),u=function(t){return t&&t.__esModule?t:{default:t}}(l),h=function(e){function n(e,r,a){i(this,n),a=a||new u.default.Style.Fill(a),e=new u.default.LngLat(e);var s=t.extend({},a.options,{radius:r}),l=o(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e,s));return l.id=t.stamp(l),l.attr={},l._style=a,l.type=n.type,l}return r(n,e),a(n,[{key:"clone",value:function(){return new n(this.getCenter(),this.getRadius(),this.getStyle())}},{key:"setLngLat",value:function(t){return this.setLatLng(t)}},{key:"getLngLat",value:function(){return this.getLatLng()}},{key:"setCenter",value:function(t){return this.setLngLat(t)}},{key:"getCenter",value:function(){return this.getLngLat()}},{key:"contains",value:function(t){return this._containsPoint(t)}},{key:"getStyle",value:function(){return this._style}},{key:"highlight",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"#0088dd";return this._highlight?this:(this._highlight=!0,this._renderer.highlight(this,t),this)}},{key:"clearHighlight",value:function(){return this._highlight?(this._highlight=!1,this._renderer.clearHighlight(this),this):this}},{key:"serialize",value:function(){return{id:this.id,attr:this.attr,type:this.type,geo:this.getLngLat().toString(),radius:this.getRadius(),style:this._style.toJSON()}}},{key:"toString",value:function(){return JSON.stringify(this.serialize())}},{key:"hide",value:function(){return this.visible(!1)}},{key:"show",value:function(){return this.visible(!0)}},{key:"visible",value:function(t){return t?(this.openLabel(),this._renderer.show(this)):(this.closeLabel(),this._renderer.hide(this),this.closePopup(),this.closeTooltip()),this}},{key:"addTo",value:function(t){return t._defaultLayer.addOverlay(this),this._renderer._update(),this}},{key:"remove",value:function(){return(this._map||this._mapToAdd)._defaultLayer.removeOverlay(this),this}},{key:"setLatLng",value:function(t){return this._latlng=new u.default.LngLat(t),this.redraw(),this.fire("move",{latlng:this._latlng,lnglat:this._latlng})}},{key:"setRadius",value:function(t){s(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"setRadius",this).call(this,t)}},{key:"getRadius",value:function(){return s(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"getRadius",this).call(this)}},{key:"setStyle",value:function(t){return t?(this._style=t,this._style.options=this._style.options||{},this._style.options.renderer=this._renderer,s(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"setStyle",this).call(this,t.options)):this}},{key:"getElement",value:function(){return s(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"getElement",this).call(this)||this._renderer._container}},{key:"getBounds",value:function(){return s(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"getBounds",this).call(this)}},{key:"_updateBounds",value:function(){var t=this._radius,e=this._radiusY||t,n=this._clickTolerance(),i=[t+n,e+n];this._pxBounds=new u.default.Size(this._point.subtract(i),this._point.add(i))}}],[{key:"deserialize",value:function(t){if(GL.H.isEmpty(t))return null;var e=t;GL.H.isString(t)&&(e=JSON.parse(t));var i=e.id,o=e.geo,r=e.attr,a=e.radius,s=e.style;if(!o)return null;var l=new n(o,a,new u.default.Style.Fill(s,!!s&&s.isDash));return l.id=i,l.attr=r,l}}]),n}(t.CircleMarker);h.type="Circle.Pixel",e.default=h}).call(e,n(1))},function(t,e,n){"use strict";(function(t){function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=function t(e,n,i){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,n);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,n,i)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(i)},s=n(0),l=function(t){return t&&t.__esModule?t:{default:t}}(s);l.default.DivOverlay=function(t){function n(t,o){return e(this,n),i(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,t,o))}return o(n,t),r(n,[{key:"setLngLat",value:function(t){return this.setLatLng(t)}},{key:"getLngLat",value:function(){return a(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"getLatLng",this).call(this)}},{key:"setLatLng",value:function(t){return this._latlng=new l.default.LngLat(t),this._map&&(this._updatePosition(),this._adjustPan()),this}},{key:"getEvents",value:function(){return a(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"getEvents",this).call(this)}},{key:"getContent",value:function(){return a(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"getContent",this).call(this)}},{key:"setContent",value:function(t){return a(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"setContent",this).call(this,t)}},{key:"getElement",value:function(){return a(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"getElement",this).call(this)}},{key:"isOpen",value:function(){return a(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"isOpen",this).call(this)}},{key:"bringToFront",value:function(){return a(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"bringToFront",this).call(this)}},{key:"bringToBack",value:function(){return a(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"bringToBack",this).call(this)}}]),n}(t.DivOverlay)}).call(e,n(1))},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=n(0),l=function(t){return t&&t.__esModule?t:{default:t}}(s);l.default.Overlay.Rectangle=function(t){function e(t,n){i(this,e),t=new l.default.Envelope(t);var r=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t.toLngLats(),n));return r.type=l.default.Overlay.Rectangle.type,r}return r(e,t),a(e,[{key:"clone",value:function(){return new l.default.Overlay.Rectangle(this.getBounds().clone(),this.getStyle())}},{key:"setBounds",value:function(t){return this.setLngLats(this._boundsToLatLngs(t))}},{key:"_boundsToLatLngs",value:function(t){return t=new l.default.Envelope(t),t.toLngLats()}},{key:"getMin",value:function(){return this.getBounds().getMin()}},{key:"getMax",value:function(){return this.getBounds().getMax()}},{key:"serialize",value:function(){return{id:this.id,attr:this.attr,type:this.type,geo:l.default.LngLat.parse([this.getMin(),this.getMax()]),style:this._style.toJSON()}}}],[{key:"deserialize",value:function(t){if(GL.H.isEmpty(t))return null;var e=t;GL.H.isString(t)&&(e=JSON.parse(t));var n=e.id,i=e.geo,o=e.attr,r=e.style;if(!i)return null;var a=new l.default.Overlay.Rectangle(new l.default.Envelope(i),new l.default.Style.Fill(r,!!r&&r.isDash));return a.id=n,a.attr=o,a}}]),e}(l.default.Overlay.Polygon),l.default.Overlay.Rectangle.type="Rectangle"},function(t,e,n){"use strict";(function(t){function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=function t(e,n,i){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,n);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,n,i)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(i)},s=n(0),l=function(t){return t&&t.__esModule?t:{default:t}}(s);l.default.Overlay.Text=function(n){function s(t,n){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};e(this,s);var r=n;r instanceof l.default.Icon.Div||(r=new l.default.Icon.Div(n,"gaea-text-overlay"));var a=i(this,(s.__proto__||Object.getPrototypeOf(s)).call(this,t,r,o));return a.type=l.default.Overlay.Text.type,a}return o(s,n),r(s,[{key:"clone",value:function(){return new l.default.Overlay.Text(this.getLngLat(),this.getHtml(),this.options)}},{key:"setHtml",value:function(t){var e=t;return e instanceof l.default.Icon.Div||(e=this.options.icon.clone(),e.options.html=t),a(s.prototype.__proto__||Object.getPrototypeOf(s.prototype),"setIcon",this).call(this,e)}},{key:"setClassName",value:function(t){var e=this.options.icon.clone();return e.options.className=t,a(s.prototype.__proto__||Object.getPrototypeOf(s.prototype),"setIcon",this).call(this,e)}},{key:"setPosition",value:function(t){var e=this.options.icon.clone();return e.options.bgPos=t,a(s.prototype.__proto__||Object.getPrototypeOf(s.prototype),"setIcon",this).call(this,e)}},{key:"getHtml",value:function(){return this.options.icon.html}},{key:"highlight",value:function(){return this._highlight?this:(this._highlight=!0,3===this._icon.firstChild.nodeType&&(this._icon.innerHTML="<span>"+this._icon.firstChild.textContent+"</span>"),t.DomUtil.addClass(this._icon.firstChild,"gaea-text-anim"),this)}},{key:"clearHighlight",value:function(){return this._highlight?(this._highlight=!1,t.DomUtil.removeClass(this._icon.firstChild,"gaea-text-anim"),this):this}},{key:"getElement",value:function(){return this._icon}},{key:"serialize",value:function(){return{id:this.id,attr:this.attr,type:this.type,geo:this.getLngLat().toString(),icon:this.getIcon().toJSON()}}},{key:"_fixIconPosition",value:function(){this._icon.style.cssText+=";left:"+-this._icon.offsetWidth/2+"px;top:"+-this._icon.offsetHeight/2+"px"}},{key:"_fixShadowPosition",value:function(){this._shadow.style.cssText+=";left:"+-this._shadow.offsetWidth/2+"px;top:"+-this._shadow.offsetHeight/2+"px"}},{key:"_initIcon",value:function(){var e=this.options,n="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),i=e.icon.createIcon(this._icon),o=!1;if(i!==this._icon&&(this._icon&&this._removeIcon(),o=!0,e.title&&(i.title=e.title),e.alt&&(i.alt=e.alt)),t.DomUtil.addClass(i,n),e.keyboard&&(i.tabIndex="0"),this._icon=i,e.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),o&&(this.getPane().appendChild(this._icon),this._fixIconPosition()),e.opacity<1&&this._updateOpacity(),this._initInteraction(),this._shadow){var r=e.icon.createShadow(this._shadow),a=!1;r!==this._shadow&&(this._removeShadow(),a=!0),r&&(t.DomUtil.addClass(r,n),r.alt=""),this._shadow=r,r&&a&&(this.getPane("shadowPane").appendChild(this._shadow),this._fixShadowPosition())}}},{key:"_removeIcon",value:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),t.DomUtil.remove(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null}},{key:"_setPos",value:function(e){t.DomUtil.setPosition(this._icon,e),this._shadow&&t.DomUtil.setPosition(this._shadow,e),this._zIndex=e.y+this.options.zIndexOffset,this._resetZIndex()}},{key:"_updateZIndex",value:function(t){this._icon.style.zIndex=this._zIndex+t}},{key:"_updateOpacity",value:function(){var e=this.options.opacity;t.DomUtil.setOpacity(this._icon,e),this._shadow&&t.DomUtil.setOpacity(this._shadow,e)}}],[{key:"deserialize",value:function(t){if(GL.H.isEmpty(t))return null;var e=t;GL.H.isString(t)&&(e=JSON.parse(t));var n=e.id,i=e.geo,o=e.attr,r=e.icon;if(!i)return null;r&&(r=new l.default.Icon.Div(r.html,r.className,r.position,r));var a=new l.default.Overlay.Text(i,r);return a.id=n,a.attr=o,a}}]),s}(l.default.Overlay.Point),l.default.Overlay.Text.type="Text"}).call(e,n(1))},function(t,e,n){"use strict";(function(t){function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=n(0),l=(function(t){t&&t.__esModule}(s),function(e){function n(t){return i(this,n),o(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,t))}return r(n,e),a(n,[{key:"highlight",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"#ff0000";t.options.color=e,this._update()}},{key:"clearHighlight",value:function(t){t.options.color=t.options._originColor,this._update()}},{key:"show",value:function(t){t._hide=!1,t.options.opacity=t.options._originOpacity,t.options.fillOpacity=t.options._originFillOpacity,this._update()}},{key:"hide",value:function(t){t._hide=!0,t.options.opacity=0,t.options.fillOpacity=0,this._update()}},{key:"_updateDashArray",value:function(t){if(t.options.dashArray){var e,n=t.options.dashArray.split(","),i=[];for(e=0;e<n.length;e++)i.push(Number(n[e]));t.options._dashArray=i}else delete t.options._dashArray}},{key:"_fillStroke",value:function(t,e){var n=e.options;t.save(),n.fill&&(t.globalAlpha=n.fillOpacity,t.fillStyle=n.fillColor||n.color,t.fill(n.fillRule||"evenodd")),n.shadow&&(t.shadowBlur=n.shadowBlur||0,t.shadowOffsetX=n.shadowOffsetX||0,t.shadowOffsetY=n.shadowOffsetY||0,t.shadowColor=n.shadowColor||"rgba(0,0,0,0.3)"),n.stroke&&0!==n.weight&&(t.setLineDash&&t.setLineDash(n._dashArray||[]),t.globalAlpha=n.opacity,t.lineWidth=n.weight,t.strokeStyle=n.color,t.lineCap=n.lineCap,t.lineJoin=n.lineJoin,t.stroke()),t.restore()}},{key:"_handleMouseHover",value:function(e,n){for(var i=void 0,o=void 0,r=this._drawFirst;r;r=r.next)i=r.layer,i.options.interactive&&i._containsPoint(n)&&(o=i);o&&o._hide||(o!==this._hoveredLayer&&(this._handleMouseOut(e),o&&(t.DomUtil.addClass(this._container,"leaflet-interactive"),this._fireEvent([o],e,"mouseover"),this._hoveredLayer=o)),this._hoveredLayer&&this._fireEvent([this._hoveredLayer],e))}},{key:"_fireEvent",value:function(t,e,n){t=t.filter(function(t){return!t._hide}),this._map._fireDOMEvent(e,n||e.type,t)}}]),n}(t.Canvas));e.default=l}).call(e,n(1))},function(t,e,n){"use strict";(function(t){function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=function t(e,n,i){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,n);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,n,i)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(i)},s=n(0),l=function(t){return t&&t.__esModule?t:{default:t}}(s),u={riseOnHover:!0,keyboard:!1};l.default.Overlay.Point=function(n){function s(n,o){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};e(this,s),n=new l.default.LngLat(n),r=t.extend({},u,r),r.icon=o||GL.Proxy.getIcon();var a=i(this,(s.__proto__||Object.getPrototypeOf(s)).call(this,n,r));return a.id=t.stamp(a),a.attr={},a.isOverlay=!0,a.type=l.default.Overlay.Point.type,a}return o(s,n),r(s,[{key:"getLngLat",value:function(){return a(s.prototype.__proto__||Object.getPrototypeOf(s.prototype),"getLatLng",this).call(this)}},{key:"getCenter",value:function(){return this.getLngLat()}},{key:"getIcon",value:function(){return this.options.icon}},{key:"getIconImg",value:function(){return a(s.prototype.__proto__||Object.getPrototypeOf(s.prototype),"getElement",this).call(this)}},{key:"getIconHandler",value:function(){return this._iconWrapHandler}},{key:"getIconWrap",value:function(){return this._iconWrap}},{key:"getOpacity",value:function(){return this.options.opacity}},{key:"setLngLat",value:function(t){return this.setLatLng(t)}},{key:"setIcon",value:function(t){return a(s.prototype.__proto__||Object.getPrototypeOf(s.prototype),"setIcon",this).call(this,t)}},{key:"setZIndex",value:function(t){return a(s.prototype.__proto__||Object.getPrototypeOf(s.prototype),"setZIndexOffset",this).call(this,t)}},{key:"setOpacity",value:function(t){return a(s.prototype.__proto__||Object.getPrototypeOf(s.prototype),"setOpacity",this).call(this,t)}},{key:"update",value:function(){return a(s.prototype.__proto__||Object.getPrototypeOf(s.prototype),"update",this).call(this)}},{key:"highlight",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"#0088dd",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:60;if(this._highlight||!this._iconWrapHandler)return this;if(this._highlight=!0,this._layer&&this._layer.type!==GL.VectorLayer.type){var i=this.isPopupOpen(),o=this._layer._vector;this._layer.hasLayer(this)&&(this._layer.removeLayer(this),o.addOverlay(this),i&&!this.isPopupOpen()&&this.openPopup())}var r=this.options.icon.options.iconSize,a=void 0,s=void 0;return!r||2!==r.length||0===r[0]&&0===r[1]?(a=Number(this._iconWrap.style.width.replace("px","")),s=Number(this._iconWrap.style.height.replace("px",""))):(a=r[0],s=r[1]),this._iconWrapHandler.style.cssText=";background-color:"+e+";width:"+n+"px;height:"+n+"px;margin-left:"+-(n-a)/2+"px;margin-top:"+-(n-s)/2+"px;",t.DomUtil.addClass(this._iconWrapHandler,"gaea-point-anim"),this}},{key:"clearHighlight",value:function(){if(!this._highlight||!this._iconWrapHandler)return this;if(this._highlight=!1,this._iconWrapHandler.style.cssText="",t.DomUtil.removeClass(this._iconWrapHandler,"gaea-point-anim"),this._layer&&"cluster"===this._layer.state){var e=this._layer._cluster;e.hasLayer(this)||(this._layer.removeOverlay(this),e.addLayer(this))}return this}},{key:"hide",value:function(){return this.visible(!1)}},{key:"show",value:function(){return this.visible(!0)}},{key:"visible",value:function(e){e||(this.closePopup(),this.closeTooltip());var n=this.getElement();return n?(e?(this.openLabel(),t.DomUtil.removeClass(n,"hide"),t.DomUtil.addClass(n,"show")):(this.closeLabel(),t.DomUtil.removeClass(n,"show"),t.DomUtil.addClass(n,"hide")),this):this}},{key:"bringToFront",value:function(){return this.getLabel()&&this.getLabel().bringToFront(),a(s.prototype.__proto__||Object.getPrototypeOf(s.prototype),"_bringToFront",this).call(this)}},{key:"bringToBack",value:function(){return this.getLabel()&&this.getLabel().bringToBack(),a(s.prototype.__proto__||Object.getPrototypeOf(s.prototype),"_resetZIndex",this).call(this)}},{key:"serialize",value:function(){return{id:this.id,attr:this.attr,type:this.type,geo:this.getLngLat().toString(),icon:this.getIcon().toJSON()}}},{key:"toString",value:function(){return JSON.stringify(this.serialize())}},{key:"toGeoJSON",value:function(){return l.default.GeoJSON.getFeature(this,{type:"Point",coordinates:l.default.GeoJSON.latLngToCoords(this.getLatLng())})}},{key:"clone",value:function(){return new l.default.Overlay.Point(this._latlng,this.options.icon,this.options)}},{key:"rotate",value:function(e){if(e!==+e)return!1;this._degree=e;var n=this.getElement();if(n){var i=t.DomUtil.getStyle(n,t.DomUtil.TRANSFORM),o=i.indexOf(" rotate"),r=i.lastIndexOf("deg)");return o>-1&&(i=i.substring(0,o)),r>-1&&(i+=i.substring(r+5)),0!==e&&(i+=" rotate("+e+"deg)"),n.style[t.DomUtil.TRANSFORM]=i,this}}},{key:"addTo",value:function(t){return t._defaultLayer.addOverlay(this),this}},{key:"remove",value:function(){return(this._map||this._mapToAdd)._defaultLayer.removeOverlay(this),this}},{key:"setLatLng",value:function(t){var e=this._latlng;return this._latlng=new l.default.LngLat(t),this.update(),this.fire("move",{oldLngLat:e,lnglat:this._latlng,oldLatLng:e,latlng:this._latlng})}},{key:"getElement",value:function(){return this._iconWrap}},{key:"_initIcon",value:function(){var e=this.options,n="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),i=e.icon.createIcon(this._icon);this._icon&&this._removeIcon(),e.title&&(i.title=e.title),e.alt&&(i.alt=e.alt),t.DomUtil.addClass(i,n),e.keyboard&&(i.tabIndex="0"),this._icon=i,this._iconWrapHandler=t.DomUtil.create("div","gaea-icon-handler"),this._iconWrap=t.DomUtil.create("div","gaea-icon-wrap"),this._iconWrap.appendChild(this._iconWrapHandler),this._iconWrap.appendChild(this._icon),this._fixIconStyle(),e.riseOnHover&&this.on({mouseover:this.bringToFront,mouseout:this.bringToBack});var o=e.icon.createShadow(this._shadow),r=!1;o!==this._shadow&&(this._removeShadow(),r=!0),o&&(t.DomUtil.addClass(o,n),o.alt=""),this._shadow=o,e.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._iconWrap),this._initInteraction(),o&&r&&this.getPane("shadowPane").appendChild(this._shadow)}},{key:"_fixIconStyle",value:function(){var t=this._icon.style.width,e=this._icon.style.height,n=this._icon.style.marginLeft,i=this._icon.style.marginTop;this._iconWrap.style.marginLeft=n,this._iconWrap.style.marginTop=i,this._iconWrap.style.width=t,this._iconWrap.style.height=e,this._icon.style.marginLeft="",this._icon.style.marginTop="","IMG"===this._icon.tagName?(this._icon.style.width=t||"100%",this._icon.style.height=e||"100%"):(this._icon.style.width=t,this._icon.style.height=e),this._iconWrap.className+=" "+this._icon.className,this._icon.className=""}},{key:"_removeIcon",value:function(){this.options.riseOnHover&&this.off({mouseover:this.bringToFront,mouseout:this.bringToBack}),this._iconWrap&&t.DomUtil.remove(this._iconWrap),this._icon&&this.removeInteractiveTarget(this._icon),this._icon=null,this._iconWrapHandler=null,this._iconWrap=null}},{key:"_setPos",value:function(t){GL.H.setPosition(this._iconWrap,t,0,this._degree),this._shadow&&GL.H.setPosition(this._shadow,t,0,this._degree),this._zIndex=t.y+this.options.zIndexOffset,this.bringToBack()}},{key:"_initInteraction",value:function(){if(this.options.interactive&&(t.DomUtil.addClass(this._iconWrap||this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._iconWrap||this._icon),t.Handler.MarkerDrag)){var e=this.options.draggable;this.dragging&&(e=this.dragging.enabled(),this.dragging.disable()),this.dragging=new l.default.Handler.PointDrag(this),e&&this.dragging.enable()}}},{key:"_updateOpacity",value:function(){var e=this.options.opacity;t.DomUtil.setOpacity(this._iconWrap,e),this._shadow&&t.DomUtil.setOpacity(this._shadow,e)}},{key:"_updateZIndex",value:function(t){this._iconWrap.style.zIndex=this._zIndex+t}}],[{key:"deserialize",value:function(t){if(GL.H.isEmpty(t))return null;var e=t;GL.H.isString(t)&&(e=JSON.parse(t));var n=e.id,i=e.geo,o=e.attr,r=e.icon;if(!i)return null;r&&(r="html"in r?new l.default.Icon.Div(r.html,r.className,r.position,r):new l.default.Icon.Smart(r.iconUrl,r.iconSize));var a=new l.default.Overlay.Point(i,r);return a.id=n,a.attr=o,a}}]),s}(t.Marker),l.default.Overlay.Point.type="Point"}).call(e,n(1))},function(t,e,n){"use strict";(function(t){function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=function t(e,n,i){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,n);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,n,i)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(i)},s=n(0),l=function(t){return t&&t.__esModule?t:{default:t}}(s);l.default.Overlay.Polygon=function(n){function s(t,n){e(this,s),n=n||new l.default.Style.Fill(n);var o=i(this,(s.__proto__||Object.getPrototypeOf(s)).call(this,t,n));return o.type=l.default.Overlay.Polygon.type,o}return o(s,n),r(s,[{key:"clone",value:function(){return new l.default.Overlay.Polygon(this.getLngLats(),this.getStyle())}},{key:"isEmpty",value:function(){return!this._latlngs.length||!this._latlngs[0].length}},{key:"getRing",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.isMulti?this.getLngLats()[t][0]:this.getLngLats()[0]}},{key:"getCenter",value:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");var t=void 0,e=void 0,n=void 0,i=void 0,o=void 0,r=void 0,l=void 0,u=void 0,h=void 0,c=this._rings[0],f=c.length;if(!f)return null;for(r=l=u=0,t=0,e=f-1;t<f;e=t++)n=c[t],i=c[e],o=n.y*i.x-i.y*n.x,l+=(n.x+i.x)*o,u+=(n.y+i.y)*o,r+=3*o;h=0===r?c[0]:[l/r,u/r];var p=this._map.layerPointToLatLng(h);return this.contains(p)||(p=a(s.prototype.__proto__||Object.getPrototypeOf(s.prototype),"getCenter",this).call(this)),p}},{key:"contains",value:function(t){if(!this.getBounds().contains(t))return!1;var e=this.getLngLats()[0],n=0,i=void 0,o=void 0;i=e[0];for(var r=1,a=e.length;r<=a;++r){if(t.lng===i.lng&&t.lat===i.lat)return!0;if(o=e[r%a],t.lat<Math.min(i.lat,o.lat)||t.lat>Math.max(i.lat,o.lat))i=o;else{if(t.lat>Math.min(i.lat,o.lat)&&t.lat<Math.max(i.lat,o.lat)){if(t.lng<=Math.max(i.lng,o.lng)){if(i.lat===o.lat&&t.lng>=Math.min(i.lng,o.lng))return!0;if(i.lng===o.lng){if(i.lng===t.lng)return!0;++n}else{var s=(t.lat-i.lat)*(o.lng-i.lng)/(o.lat-i.lat)+i.lng;if(Math.abs(t.lng-s)<2e-10)return!0;t.lng<s&&++n}}}else if(t.lat===o.lat&&t.lng<=o.lng){var l=e[(r+1)%a];t.lat>=Math.min(i.lat,l.lat)&&t.lat<=Math.max(i.lat,l.lat)?++n:n+=2}i=o}}return n%2!=0}},{key:"serialize",value:function(){return{id:this.id,attr:this.attr,type:this.type,geo:l.default.LngLat.parse(this),style:this._style.toJSON()}}},{key:"toGeoJSON",value:function(){var e=!t.Polyline._flat(this._latlngs),n=e&&!t.Polyline._flat(this._latlngs[0]),i=l.default.GeoJSON.latLngsToCoords(this._latlngs,n?2:e?1:0,!0);return e||(i=[i]),l.default.GeoJSON.getFeature(this,{type:(n?"Multi":"")+"Polygon",coordinates:i})}},{key:"_containsPoint",value:function(t){var e=!1,n=void 0,i=void 0,o=void 0,r=void 0,l=void 0,u=void 0,h=void 0,c=void 0;if(!this._pxBounds.contains(t))return!1;for(r=0,h=this._parts.length;r<h;r++)for(n=this._parts[r],l=0,c=n.length,u=c-1;l<c;u=l++)i=n[l],o=n[u],i.y>t.y!=o.y>t.y&&t.x<(o.x-i.x)*(t.y-i.y)/(o.y-i.y)+i.x&&(e=!e);return e||a(s.prototype.__proto__||Object.getPrototypeOf(s.prototype),"_containsPoint",this).call(this,t,!0)}},{key:"_convertLatLngs",value:function(t){var e=a(s.prototype.__proto__||Object.getPrototypeOf(s.prototype),"_convertLatLngs",this).call(this,t),n=e.length;return n>=2&&e[0]instanceof l.default.LngLat&&e[0].equals(e[n-1])&&e.pop(),e}},{key:"_setLatLngs",value:function(e){a(s.prototype.__proto__||Object.getPrototypeOf(s.prototype),"_setLatLngs",this).call(this,e),t.Polyline._flat(this._latlngs)&&(this._latlngs=[this._latlngs])}},{key:"_defaultShape",value:function(){return t.Polyline._flat(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]}},{key:"_clipPoints",value:function(){var e=this._renderer._bounds,n=this.options.weight,i=new l.default.Pixel(n,n);if(e=new l.default.Size(e.min.subtract(i),e.max.add(i)),this._parts=[],this._pxBounds&&this._pxBounds.intersects(e)){if(this.options.noClip)return void(this._parts=this._rings);for(var o,r=0,a=this._rings.length;r<a;r++)o=t.PolyUtil.clipPolygon(this._rings[r],e,!0),o.length&&this._parts.push(o)}}},{key:"_updatePath",value:function(){this._renderer._updatePoly(this,!0)}},{key:"intersects",value:function(){var t=this._getProjectedPoints(),e=void 0,n=void 0,i=void 0,o=void 0;return!this._tooFewPointsForIntersection()&&(!!a(s.prototype.__proto__||Object.getPrototypeOf(s.prototype),"intersects",this).call(this)||(e=t.length,n=t[0],i=t[e-1],o=e-2,this._lineSegmentsIntersectsRange(i,n,o,1)))}},{key:"newLatLngIntersects",value:function(t,e,n){return a(s.prototype.__proto__||Object.getPrototypeOf(s.prototype),"newLatLngIntersects",this).call(this,t,e,n)}},{key:"newPointIntersects",value:function(t,e,n){return a(s.prototype.__proto__||Object.getPrototypeOf(s.prototype),"newPointIntersects",this).call(this,t,e,n)}},{key:"isMulti",get:function(){return!t.Polyline._flat(this._latlngs)&&!t.Polyline._flat(this._latlngs[0])}}],[{key:"deserialize",value:function(t){if(GL.H.isEmpty(t))return null;var e=t;GL.H.isString(t)&&(e=JSON.parse(t));var n=e.id,i=e.geo,o=e.attr,r=e.style;if(!i)return null;var a=new l.default.Overlay.Polygon(i,new l.default.Style.Fill(r,!!r&&r.isDash));return a.id=n,a.attr=o,a}}]),s}(l.default.Overlay.Polyline),l.default.Overlay.Polygon.type="Polygon"}).call(e,n(1))},function(t,e,n){"use strict";(function(t){function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=function t(e,n,i){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,n);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,n,i)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(i)},s=n(0),l=function(t){return t&&t.__esModule?t:{default:t}}(s);l.default.Overlay.Polyline=function(n){function s(n,o){e(this,s),n=l.default.LngLat.format(n),o=o||new l.default.Style(o);var r=i(this,(s.__proto__||Object.getPrototypeOf(s)).call(this,n,o.options));return r.id=t.stamp(r),r.attr={},r._style=o,r.type=l.default.Overlay.Polyline.type,r.isOverlay=!0,r}return o(s,n),r(s,[{key:"clone",value:function(){return new l.default.Overlay.Polyline(this.getLngLats(),this.getStyle())}},{key:"isEmpty",value:function(){return a(s.prototype.__proto__||Object.getPrototypeOf(s.prototype),"isEmpty",this).call(this)}},{key:"getStyle",value:function(){return this._style}},{key:"getCenter",value:function(){return a(s.prototype.__proto__||Object.getPrototypeOf(s.prototype),"getCenter",this).call(this)}},{key:"getBounds",value:function(){return a(s.prototype.__proto__||Object.getPrototypeOf(s.prototype),"getBounds",this).call(this)}},{key:"getLngLats",value:function(){return a(s.prototype.__proto__||Object.getPrototypeOf(s.prototype),"getLatLngs",this).call(this)}},{key:"getRing",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.isMulti?this.getLngLats()[t]:this.getLngLats()}},{key:"setStyle",value:function(t){return t?(this._style=t,this._style.options=this._style.options||{},this._style.options.renderer=this._renderer,a(s.prototype.__proto__||Object.getPrototypeOf(s.prototype),"setStyle",this).call(this,this._style.options)):this}},{key:"setLngLats",value:function(t){return this.setLatLngs(t)}},{key:"push",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t=new l.default.LngLat(t),this.getRing(e).push(t),this._bounds.extend(t),this.redraw()}},{key:"addLngLat",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;t=new l.default.LngLat(t);var i=this.getRing(n);return e=isNaN(e)?i.length:e,i.splice(e,0,t),this._bounds.extend(t),this.redraw()}},{key:"removeLngLat",value:function(t,e){var n=this.getRing(e);return t=isNaN(t)?n.length-1:t,n.splice(t,1),this.setLngLats(this.getLngLats())}},{key:"contains",value:function(t){if(!this.getBounds().contains(t))return!1;for(var e=this.getLngLats(),n=0;n<e.length-1;n++){var i=e[n],o=e[n+1];if(t.lng>=Math.min(i.lng,o.lng)&&t.lng<=Math.max(i.lng,o.lng)&&t.lat>=Math.min(i.lat,o.lat)&&t.lat<=Math.max(i.lat,o.lat)){var r=(i.lng-t.lng)*(o.lat-t.lat)-(o.lng-t.lng)*(i.lat-t.lat);if(r<2e-10&&r>-2e-10)return!0}}return!1}},{key:"highlight",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"#ff0000";return this._highlight?this:(this._highlight=!0,this._renderer.highlight(this,t),this)}},{key:"clearHighlight",value:function(){return this._highlight?(this._highlight=!1,this._renderer.clearHighlight(this),this):this}},{key:"serialize",value:function(){return{id:this.id,attr:this.attr,type:this.type,geo:l.default.LngLat.parse(this),style:this._style.toJSON()}}},{key:"toString",value:function(){return JSON.stringify(this.serialize())}},{key:"toGeoJSON",value:function(){var e=!t.Polyline._flat(this._latlngs),n=l.default.GeoJSON.latLngsToCoords(this._latlngs,e?1:0);return l.default.GeoJSON.getFeature(this,{type:(e?"Multi":"")+"LineString",coordinates:n})}},{key:"setLatLngs",value:function(t){return t=l.default.LngLat.format(t),a(s.prototype.__proto__||Object.getPrototypeOf(s.prototype),"setLatLngs",this).call(this,t)}},{key:"addLatLng",value:function(t,e){return e=e||this._defaultShape(),t=new l.default.LngLat(t),e.push(t),this._bounds.extend(t),this.redraw()}},{key:"closestLayerPoint",value:function(t){return new l.default.Pixel(a(s.prototype.__proto__||Object.getPrototypeOf(s.prototype),"closestLayerPoint",this).call(this,t))}},{key:"_setLatLngs",value:function(t){this._bounds=new l.default.Envelope,this._latlngs=this._convertLatLngs(t)}},{key:"_convertLatLngs",value:function(e){for(var n=[],i=t.Polyline._flat(e),o=0,r=e.length;o<r;o++)i?(n[o]=new l.default.LngLat(e[o]),this._bounds.extend(n[o])):n[o]=this._convertLatLngs(e[o]);return n}},{key:"_project",value:function(){var t=new l.default.Size;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,t);var e=this._clickTolerance(),n=new l.default.Pixel(e,e);this._bounds.isValid()&&t.isValid()&&(t.min._subtract(n),t.max._add(n),this._pxBounds=t)}},{key:"addTo",value:function(t){return t._defaultLayer.addOverlay(this),this._renderer._update(),this}},{key:"remove",value:function(){return(this._map||this._mapToAdd)._defaultLayer.removeOverlay(this),this}},{key:"getElement",value:function(){return a(s.prototype.__proto__||Object.getPrototypeOf(s.prototype),"getElement",this).call(this)||this._renderer._container}},{key:"hide",value:function(){return this.visible(!1)}},{key:"show",value:function(){return this.visible(!0)}},{key:"visible",value:function(t){return t?(this.openLabel(),this._renderer.show(this)):(this.closeLabel(),this._renderer.hide(this),this.closePopup(),this.closeTooltip()),this}},{key:"bringToFront",value:function(){return a(s.prototype.__proto__||Object.getPrototypeOf(s.prototype),"bringToFront",this).call(this)}},{key:"bringToBack",value:function(){return a(s.prototype.__proto__||Object.getPrototypeOf(s.prototype),"bringToBack",this).call(this)}},{key:"intersects",value:function(){var t=this._getProjectedPoints(),e=t?t.length:0,n=void 0,i=void 0,o=void 0;if(this._tooFewPointsForIntersection())return!1;for(n=e-1;n>=3;n--)if(i=t[n-1],o=t[n],this._lineSegmentsIntersectsRange(i,o,n-2))return!0;return!1}},{key:"newLatLngIntersects",value:function(t,e,n){return!!this._map&&this.newPointIntersects(this._map.latLngToLayerPoint(t),e,n)}},{key:"newPointIntersects",value:function(t,e,n){var i=this._getProjectedPoints(),o=i?i.length:0,r=i?i[o-1]:null,a=o-2;return n&&(r=i?i[o-2]:null,a=o-3),!this._tooFewPointsForIntersection(1)&&this._lineSegmentsIntersectsRange(r,t,a,e?1:0)}},{key:"_tooFewPointsForIntersection",value:function(t){var e=this._getProjectedPoints(),n=e?e.length:0;return n+=t||0,!e||n<=3}},{key:"_lineSegmentsIntersectsRange",value:function(t,e,n,i){var o=this._getProjectedPoints(),r=void 0,a=void 0;i=i||0;for(var s=n;s>i;s--)if(r=o[s-1],a=o[s],l.default.Help.Geometry.isIntersect(t.x,t.y,e.x,e.y,r.x,r.y,a.x,a.y))return!0;return!1}},{key:"_getProjectedPoints",value:function(){if(!this._defaultShape)return this._originalPoints;for(var t=[],e=this._defaultShape(),n=0;n<e.length;n++){var i=this._map.latLngToLayerPoint(e[n]);if(n>0){var o=t[n-1];if(i.x===o.x&&i.y===o.y)continue}t.push(i)}return t}},{key:"isMulti",get:function(){return!t.Polyline._flat(this.getLngLats())}}],[{key:"deserialize",value:function(t){if(GL.H.isEmpty(t))return null;var e=t;GL.H.isString(t)&&(e=JSON.parse(t));var n=e.id,i=e.geo,o=e.attr,r=e.style;if(!i)return null;var a=new l.default.Overlay.Polyline(i,new l.default.Style(r,!!r&&r.isDash));return a.id=n,a.attr=o,a}}]),s}(t.Polyline),l.default.Overlay.Polyline.type="Polyline"}).call(e,n(1))},function(t,e,n){"use strict";(function(t){function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=function t(e,n,i){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,n);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,n,i)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(i)},s=n(0),l=function(t){return t&&t.__esModule?t:{default:t}}(s),u={iconSize:null,html:"",bgPos:[0,0],className:"gaea-div-icon"};l.default.Icon.Div=function(n){function s(n,o,r,a){return e(this,s),a=a||{},n instanceof l.default.Icon.Div?a=n.options:n instanceof Object?(a=n,a=t.extend({},u,a)):(a=t.extend({},u,a),a.html=n,a.className=o||a.className,a.iconSize=r||a.iconSize),i(this,(s.__proto__||Object.getPrototypeOf(s)).call(this,a))}return o(s,n),r(s,[{key:"createIcon",value:function(e){var n=document.createElement("div"),i=this.options;if(n.innerHTML=!1!==i.html?i.html:"",i.bgPos){var o=t.point(i.bgPos);n.style.backgroundPosition=-o.x+"px "+-o.y+"px"}return this._setIconStyles(n,"icon"),n}},{key:"_setIconStyles",value:function(e,n){var i=this.options,o=i[n+"Size"];"number"==typeof o&&(o=[o,o]);var r=t.point(o),a=t.point("shadow"===n&&i.shadowAnchor||i.iconAnchor||r&&r.divideBy(2,!0));e.className="leaflet-marker-"+n+" "+(i.className||""),a&&(e.style.marginLeft=-a.x+"px",e.style.marginTop=-a.y+"px"),r&&(e.style.width=r.x+"px",e.style.height=r.y+"px")}},{key:"createShadow",value:function(t){return null}},{key:"clone",value:function(){return new l.default.Icon.Div(this.options)}},{key:"toJSON",value:function(){var e=a(s.prototype.__proto__||Object.getPrototypeOf(s.prototype),"toJSON",this).call(this);return t.extend(e,{html:this.options.html,position:this.options.bgPos,className:this.options.className}),e}}]),s}(l.default.Icon)}).call(e,n(1))},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=n(0),l=function(t){return t&&t.__esModule?t:{default:t}}(s);l.default.Icon.Smart=function(t){function e(t,n){i(this,e);var r={iconUrl:t};return n&&(r.iconSize=n),o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,r))}return r(e,t),a(e,[{key:"clone",value:function(){return new l.default.Icon.Smart(this.options.iconUrl,this.options.iconSize)}},{key:"toJSON",value:function(){return{iconSize:this.options.iconSize,iconUrl:this.options.iconUrl}}}]),e}(l.default.Icon)},function(t,e,n){"use strict";(function(t){function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function r(t,e){var n=document.createElementNS(p,t);for(var i in e){var o=i in d?d[i]:i,r=e[i];i in _?n.setAttributeNS(_[i],o,r):n.setAttribute(o,r)}return n}var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=function t(e,n,i){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,n);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,n,i)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(i)},l=n(0),u=function(t){return t&&t.__esModule?t:{default:t}}(l),h="gaea-statistics-icon-",c={iconSize:null,html:"",bgPos:[0,0],className:"gaea-div-icon"},f={1:{className:h+"1",iconSize:[87,87]},2:{className:h+"2",iconSize:[205,52]}};u.default.Icon.Stat=function(n){function l(n,o,r,a,s){e(this,l),s=s||{},s=t.extend({},c,s),r||s.className||(r="1"),s.className=f[r]&&f[r].className||s.className,s.descClassName=s.descClassName||"",s.iconSize=a||f[r]&&f[r].iconSize||s.iconSize;var u=i(this,(l.__proto__||Object.getPrototypeOf(l)).call(this,s));return u.count=n,u.data=o,u.options.style=r,u}return o(l,n),a(l,[{key:"createIcon",value:function(e){var n=document.createElement("div"),i=this.options;n.style.position="relative";var o="function"==typeof this.count?this.count(this):this.count;this._content=t.DomUtil.create("div","gaea-statistics-icon-content "+this.options.className+"-content",n),t.DomUtil.create("div","gaea-statistics-icon-content-bg "+this.options.className+"-content-bg",this._content);var r=t.DomUtil.create("p","gaea-statistics-icon-content-p",this._content);if("number"==typeof o)r.innerHTML=o.toLocaleString();else if("string"==typeof o)r.innerHTML=o;else{for(;r.hasChildNodes();)r.removeChild(r.firstChild);r.appendChild(o)}if(this.data&&(t.DomEvent.on(n,"mouseover",this._onIconMouseover,this),t.DomEvent.on(n,"mouseout",this._onIconMouseout,this)),i.bgPos){var a=t.point(i.bgPos);n.style.backgroundPosition=-a.x+"px "+-a.y+"px"}return this._setIconStyles(n,"icon"),this._div=n,n}},{key:"_onIconMouseover",value:function(e){if(this._removeTimer&&(clearTimeout(this._removeTimer),this._removeTimer=null),!this._descDiv){t.DomUtil.hasClass(this._content,"hover")||t.DomUtil.addClass(this._content,"hover");var n=t.DomUtil.create("div",h+"desc "+this.options.className+"-desc "+this.options.descClassName,this._div);this._descDiv=n;var i="function"==typeof this.data?this.data(this):this.data;if(Array.isArray(i))i.forEach(function(e){var i=t.DomUtil.create("p",h+"desc-item",n);if(e.icon)if(e.iconHtml){var o=t.DomUtil.create("span",h+"desc-item-icon-font",i);o.innerHTML=e.icon}else{var o=t.DomUtil.create("img",h+"desc-item-icon",i);o.src=e.icon}t.DomUtil.create("span",h+"desc-item-text",i).innerText=e.text,t.DomUtil.create("span",h+"desc-item-value",i).innerText=e.count});else if("string"==typeof i)n.innerHTML=i;else{for(;n.hasChildNodes();)n.removeChild(n.firstChild);n.appendChild(i)}"1"===this.options.style&&this._createGuideLine()}}},{key:"_createGuideLine",value:function(){var t=this._div.offsetWidth,e=this._div.offsetHeight,n=this._descDiv.offsetWidth,i=this._descDiv.offsetLeft,o=r("svg",{style:"position: absolute; top: -40px; pointer-events: none;"});this._guideLine=o;var a=r("polyline",{points:t+","+(e/3+40)+" "+(n/2+i)+",40 "+(n+i+10)+",40 "+(n+i+10)+",0"});o.appendChild(a),this._div.appendChild(o);var s=a.getTotalLength();a.setAttribute("style","fill: none; stroke: rgba(52, 133, 255, 0.8); stroke-width: 2px;\n    stroke-dasharray: 0, "+s+"; stroke-dashoffset: 0; animation: iconStat2Dash 0.5s linear forwards;");var l="\n    @keyframes iconStat2Dash{\n      to {\n        stroke-dasharray: "+s+";\n      }\n    }";this._style=document.createElement("style"),this._style.type="text/css",this._style.innerHTML=l,document.getElementsByTagName("head")[0].appendChild(this._style)}},{key:"_removeDesc",value:function(){t.DomUtil.removeClass(this._content,"hover"),this._descDiv&&t.DomUtil.remove(this._descDiv),this._guideLine&&t.DomUtil.remove(this._guideLine),this._style&&t.DomUtil.remove(this._style),this._descDiv=null,this._guideLine=null,this._style=null}},{key:"_onIconMouseout",value:function(t){var e=this;this._removeTimer&&(clearTimeout(this._removeTimer),this._removeTimer=null),this._removeTimer=setTimeout(function(){e._removeDesc()},100)}},{key:"_setIconStyles",value:function(e,n){var i=this.options,o=i[n+"Size"];"number"==typeof o&&(o=[o,o]);var r=t.point(o),a=t.point("shadow"===n&&i.shadowAnchor||i.iconAnchor||r&&r.divideBy(2,!0));e.className="leaflet-marker-"+n+" "+(i.className||""),a&&(e.style.marginLeft=-a.x+"px",e.style.marginTop=-a.y+"px"),r&&(e.style.width=r.x+"px",e.style.height=r.y+"px")}},{key:"createShadow",value:function(t){return null}},{key:"clone",value:function(){return new u.default.Icon.Div(this.options)}},{key:"toJSON",value:function(){var e=s(l.prototype.__proto__||Object.getPrototypeOf(l.prototype),"toJSON",this).call(this);return t.extend(e,{html:this.options.html,position:this.options.bgPos,className:this.options.className}),e}}]),l}(u.default.Icon);var p="http://www.w3.org/2000/svg",d={className:"class",svgHref:"href"},_={svgHref:"http://www.w3.org/1999/xlink"}}).call(e,n(1))},function(t,e,n){"use strict";(function(t){function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=n(0),s=function(t){return t&&t.__esModule?t:{default:t}}(a),l={iconSize:[20,20]};s.default.Icon=function(n){function a(n){return e(this,a),n=n||{},n instanceof s.default.Icon&&(n=n.options),n=t.extend({},l,n),i(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,n))}return o(a,n),r(a,[{key:"clone",value:function(){return new s.default.Icon(this.options)}},{key:"toJSON",value:function(){return{iconSize:this.options.iconSize,iconUrl:this.options.iconUrl}}}]),a}(t.Icon)}).call(e,n(1))},function(t,e,n){"use strict";(function(t){function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=function t(e,n,i){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,n);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,n,i)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(i)},s=n(0),l=function(t){return t&&t.__esModule?t:{default:t}}(s),u={fill:!0,fillOpacity:.5};l.default.Style.Fill=function(n){function s(n){var o=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e(this,s),n=n||{},n instanceof l.default.Style.Fill&&(o=n.isDash||!1,n=n.options),n=t.extend({},u,n),n._originFillOpacity=n.fillOpacity,i(this,(s.__proto__||Object.getPrototypeOf(s)).call(this,n,o))}return o(s,n),r(s,[{key:"clone",value:function(){return new l.default.Style.Fill(this.options,this.isDash)}},{key:"toJSON",value:function(){var e=a(s.prototype.__proto__||Object.getPrototypeOf(s.prototype),"toJSON",this).call(this);return t.extend(e,{fill:this.options.fill,fillOpacity:this.options.fillOpacity,fillColor:this.options.fillColor}),e}}]),s}(l.default.Style)}).call(e,n(1))},function(t,e,n){"use strict";(function(t){function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=n(0),r=function(t){return t&&t.__esModule?t:{default:t}}(o),a={noClip:!0,weight:3,color:"#0088DD",opacity:.8};r.default.Style=function(){function n(i){var o=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e(this,n),i=i||{},i instanceof r.default.Style&&(o=i.isDash||!1,i=i.options),this.options=t.extend({},a,i),this.isDash=o,this.options.dashArray=o?"10,10,1,10":"",this.options._originOpacity=this.options.opacity,this.options._originColor=this.options.color}return i(n,[{key:"clone",value:function(){return new r.default.Style(this.options,this.isDash)}},{key:"toJSON",value:function(){return{weight:this.options.weight,color:this.options.color,opacity:this.options.opacity,isDash:this.isDash}}}]),n}()}).call(e,n(1))},function(t,e,n){"use strict";n(145),n(142),n(143),n(144),n(147),n(146)},function(t,e,n){"use strict";(function(t){function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=function t(e,n,i){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,n);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,n,i)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(i)},s=n(0),l=function(t){return t&&t.__esModule?t:{default:t}}(s),u={pane:"labelPane",offset:[0,0],direction:"center",interactive:!1,opacity:1,className:""};l.default.Label=function(n){function s(n,o){return e(this,s),n=t.extend({},u,n),i(this,(s.__proto__||Object.getPrototypeOf(s)).call(this,n,o))}return o(s,n),r(s,[{key:"setLngLat",value:function(t){return a(s.prototype.__proto__||Object.getPrototypeOf(s.prototype),"setLngLat",this).call(this,t)}},{key:"getLngLat",value:function(){return a(s.prototype.__proto__||Object.getPrototypeOf(s.prototype),"getLngLat",this).call(this)}},{key:"getContent",value:function(){return a(s.prototype.__proto__||Object.getPrototypeOf(s.prototype),"getContent",this).call(this)}},{key:"setContent",value:function(t){return a(s.prototype.__proto__||Object.getPrototypeOf(s.prototype),"setContent",this).call(this,t)}},{key:"getElement",value:function(){return a(s.prototype.__proto__||Object.getPrototypeOf(s.prototype),"getElement",this).call(this)}},{key:"isOpen",value:function(){return a(s.prototype.__proto__||Object.getPrototypeOf(s.prototype),"isOpen",this).call(this)}},{key:"bringToFront",value:function(){return a(s.prototype.__proto__||Object.getPrototypeOf(s.prototype),"bringToFront",this).call(this)}},{key:"bringToBack",value:function(){return a(s.prototype.__proto__||Object.getPrototypeOf(s.prototype),"bringToBack",this).call(this)}},{key:"onAdd",value:function(t){a(s.prototype.__proto__||Object.getPrototypeOf(s.prototype),"onAdd",this).call(this,t),this.setOpacity(this.options.opacity)}},{key:"onRemove",value:function(t){a(s.prototype.__proto__||Object.getPrototypeOf(s.prototype),"onRemove",this).call(this,t)}},{key:"getEvents",value:function(){return a(s.prototype.__proto__||Object.getPrototypeOf(s.prototype),"getEvents",this).call(this,this)}},{key:"_initLayout",value:function(){var e="gaea-label "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=t.DomUtil.create("div",e)}},{key:"_updateLayout",value:function(){}},{key:"_adjustPan",value:function(){}},{key:"_setPosition",value:function(e){var n=this._map,i=this._container,o=n.latLngToContainerPoint(n.getCenter()),r=n.layerPointToContainerPoint(e),a=this.options.direction,s=i.offsetWidth,u=i.offsetHeight,h=new l.default.Pixel(this.options.offset),c=this._getAnchor(),f=0;if(this._source.type===l.default.Overlay.Point.type){var p=this._source.getIcon();p&&p.options.iconSize&&p.options.iconSize.length>0&&(f=p.options.iconSize[1])}"top"===a?e=e.add(new l.default.Pixel(-s/2+h.x,-u-f/2+h.y+c.y)):"bottom"===a?e=e.subtract(new l.default.Pixel(s/2-h.x,-h.y)):"center"===a?e=e.subtract(new l.default.Pixel(s/2+h.x,u+f/2+2-c.y+h.y)):"right"===a||"auto"===a&&r.x<o.x?(a="right",e=e.add([h.x+c.x,c.y-u/2+h.y])):(a="left",e=e.subtract(new l.default.Pixel(s+c.x-h.x,u/2-c.y-h.y))),t.DomUtil.removeClass(i,"gaea-label-right"),t.DomUtil.removeClass(i,"gaea-label-left"),t.DomUtil.removeClass(i,"gaea-label-top"),t.DomUtil.removeClass(i,"gaea-label-bottom"),t.DomUtil.addClass(i,"gaea-label-"+a),t.DomUtil.setPosition(i,e)}},{key:"_updatePosition",value:function(t,e){if(this._map){e&&(this._latlng=e);var n=this._map.latLngToLayerPoint(this._latlng);this._setPosition(n)}}},{key:"setOpacity",value:function(e){this.options.opacity=e,this._container&&t.DomUtil.setOpacity(this._container,e)}},{key:"_animateZoom",value:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center);this._setPosition(e)}},{key:"_getAnchor",value:function(){return new l.default.Pixel(this._source&&this._source._getLabelAnchor?this._source._getLabelAnchor():[0,0])}}]),s}(l.default.DivOverlay),t.Layer.include({bindLabel:function(e,n){return this instanceof l.default.Overlay.Text?this:(e instanceof l.default.Label?(t.setOptions(e,n),this._label=e,e._source=this):(this._label&&!n||(this._label=new l.default.Label(n,this)),this._label.setContent(e)),this._initLabelInteractions(),this._addLabel(),this)},unbindLabel:function(){return this._label&&(this._initLabelInteractions(!0),this._removeLabel(),this._label=null),this},_initLabelInteractions:function(t){if(t||!this._labelHandlersAdded){var e=t?"off":"on",n={add:this._addLabel,remove:this._removeLabel,move:this._moveLabel,editstart:this.closeLabel,editend:this.openLabel};this[e](n),this._labelHandlersAdded=!t}},openLabel:function(){return this._addLabel()},closeLabel:function(){return this._removeLabel()},toggleLabel:function(){return this._label&&(this._label._map?this.closeLabel():this.openLabel()),this},getLabel:function(){return this._label},getLabelContent:function(){return this._label?this._label.getContent():""},setLabelContent:function(t){return this._label&&this._label.setContent(t),this},isLabelOpen:function(){return!!this._label&&this._label.isOpen()},_addLabel:function(e){var n=e?e.layer||e.target:this;if(this._label&&this._map){var i=n.getCenter?n.getCenter():n.getLatLng();return this._label._source=n,this._label.update(),this._map.addLabel(this._label,i),this._label.options.interactive&&this._label._container&&(t.DomUtil.addClass(this._label._container,"leaflet-clickable"),this.addInteractiveTarget(this._label._container)),this}},_removeLabel:function(){return this._label&&this._map&&(this._map.removeLabel(this._label),this._label.options.interactive&&this._label._container&&(t.DomUtil.removeClass(this._label._container,"leaflet-clickable"),this.removeInteractiveTarget(this._label._container))),this},_moveLabel:function(t){var e=t?t.layer||t.target:this,n=e.getCenter?e.getCenter():e.getLatLng();this._label.setLatLng(n)}}),t.Map.include({addLabel:function(t,e,n){return t instanceof l.default.Label||(t=new l.default.Label(n).setContent(t)),e&&t.setLngLat(e),this.hasLayer(t)?this:this.addLayer(t)},removeLabel:function(t){return t&&this.removeLayer(t),this},openLabels:function(){return this.getPane("labelPane").style.display="block",this},closeLabels:function(){return this.getPane("labelPane").style.display="none",this}})}).call(e,n(1))},function(t,e,n){"use strict";(function(t){function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=function t(e,n,i){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,n);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,n,i)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(i)},s=n(0),l=function(t){return t&&t.__esModule?t:{default:t}}(s),u={maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,className:"",attachmentPlacement:"right",attachmentCloseButton:!0,attachmentClassName:""};l.default.Popup=function(n){function s(n,o){return e(this,s),n=t.extend({},u,n),i(this,(s.__proto__||Object.getPrototypeOf(s)).call(this,n,o))}return o(s,n),r(s,[{key:"setAttachmentContent",value:function(t){return this._attachmentContent=t,this._updateAttachmentContent(),this}},{key:"getAttachmentContent",value:function(){return this._attachmentContent}},{key:"setAttachmentOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.options.attachmentPlacement=e.attachmentPlacement||this.options.attachmentPlacement||"right",this.options.attachmentCloseButton=void 0===e.attachmentCloseButton?this.options.attachmentCloseButton:e.attachmentCloseButton,this._attachmentContainer&&this.options.attachmentClassName&&t.DomUtil.removeClass(this._attachmentContainer,this.options.attachmentClassName),this.options.attachmentClassName=void 0===e.attachmentClassName?this.options.attachmentClassName:e.attachmentClassName,this._updateAttachmentLayout(),this._attachmentContainer&&this.options.attachmentClassName&&t.DomUtil.addClass(this._attachmentContainer,this.options.attachmentClassName),this}},{key:"openAttachment",value:function(){return this._attachmentContainer&&(this._attachmentContainer.style.display="block"),this}},{key:"closeAttachment",value:function(){return this._attachmentContainer&&(this._attachmentContainer.style.display="none"),this}},{key:"isAttachmentOpen",value:function(){return!!this._attachmentContainer&&"none"!==this._attachmentContainer.style.display}},{key:"_updateAttachmentLayout",value:function(){this._attachmentContainer&&(t.DomUtil.removeClass(this._attachmentContainer,"gaea-popup-attachment-left"),t.DomUtil.removeClass(this._attachmentContainer,"gaea-popup-attachment-right"),t.DomUtil.removeClass(this._attachmentContainer,"gaea-popup-attachment-top"),t.DomUtil.addClass(this._attachmentContainer,"gaea-popup-attachment-"+this.options.attachmentPlacement||"right"))}},{key:"_updateAttachmentContent",value:function(){if(this._attachmentContent&&this._attachmentContentNode){var t=this._attachmentContentNode,e="function"==typeof this._attachmentContent?this._attachmentContent(this._source||this):this._attachmentContent;if("string"==typeof e)t.innerHTML=e;else{for(;t.hasChildNodes();)t.removeChild(t.firstChild);t.appendChild(e)}this.fire("attachmentcontentupdate")}}},{key:"_onAttachmentCloseButtonClick",value:function(e){this.closeAttachment(),t.DomEvent.stop(e)}},{key:"update",value:function(){a(s.prototype.__proto__||Object.getPrototypeOf(s.prototype),"update",this).call(this),this._updateAttachmentContent(),this._updateAttachmentLayout()}},{key:"setLngLat",value:function(t){return a(s.prototype.__proto__||Object.getPrototypeOf(s.prototype),"setLngLat",this).call(this,t)}},{key:"getLngLat",value:function(){return a(s.prototype.__proto__||Object.getPrototypeOf(s.prototype),"getLngLat",this).call(this)}},{key:"getContent",value:function(){return a(s.prototype.__proto__||Object.getPrototypeOf(s.prototype),"getContent",this).call(this)}},{key:"setContent",value:function(t){return a(s.prototype.__proto__||Object.getPrototypeOf(s.prototype),"setContent",this).call(this,t)}},{key:"getElement",value:function(){return a(s.prototype.__proto__||Object.getPrototypeOf(s.prototype),"getElement",this).call(this)}},{key:"isOpen",value:function(){return a(s.prototype.__proto__||Object.getPrototypeOf(s.prototype),"isOpen",this).call(this)}},{key:"bringToFront",value:function(){return a(s.prototype.__proto__||Object.getPrototypeOf(s.prototype),"bringToFront",this).call(this)}},{key:"bringToBack",value:function(){return a(s.prototype.__proto__||Object.getPrototypeOf(s.prototype),"bringToBack",this).call(this)}},{key:"openOn",value:function(t){return t.openPopup(this),this}},{key:"onAdd",value:function(e){a(s.prototype.__proto__||Object.getPrototypeOf(s.prototype),"onAdd",this).call(this,e),e.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof t.Path||this._source.on("preclick",t.DomEvent.stopPropagation))}},{key:"onRemove",value:function(e){a(s.prototype.__proto__||Object.getPrototypeOf(s.prototype),"onRemove",this).call(this,e),e.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof t.Path||this._source.off("preclick",t.DomEvent.stopPropagation))}},{key:"getEvents",value:function(){var t=a(s.prototype.__proto__||Object.getPrototypeOf(s.prototype),"getEvents",this).call(this);return("closeOnClick"in this.options?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(t.preclick=this._close),this.options.keepInView&&(t.moveend=this._adjustPan),t}},{key:"_close",value:function(){this.closeAttachment(),this._map&&this._map.closePopup(this)}},{key:"_initLayout",value:function(){var e="gaea-popup",n=this._container=t.DomUtil.create("div",e+" "+(this.options.className||"")+" leaflet-zoom-animated");if(this.options.closeButton){var i=this._closeButton=t.DomUtil.create("a",e+"-close-button",n);i.href="#close",i.innerHTML="&#215;",t.DomEvent.on(i,"click",this._onCloseButtonClick,this)}var o=this._wrapper=t.DomUtil.create("div",e+"-content-wrapper",n);this._contentNode=t.DomUtil.create("div",e+"-content",o),t.DomEvent.disableClickPropagation(o).disableScrollPropagation(this._contentNode).on(o,"contextmenu",t.DomEvent.stopPropagation),this._tipContainer=t.DomUtil.create("div",e+"-tip-container",n),this._tip=t.DomUtil.create("div",e+"-tip",this._tipContainer);var r=e+"-attachment";if(this._attachmentContainer=t.DomUtil.create("div",r+" leaflet-zoom-animated "+(this.options.attachmentClassName||""),n),this.closeAttachment(),this.options.attachmentCloseButton){var a=this._closeButton=t.DomUtil.create("a",e+"-close-button",this._attachmentContainer);a.href="#closesub",a.innerHTML="&#215;",t.DomEvent.on(a,"click",this._onAttachmentCloseButtonClick,this)}var s=this._wrapper=t.DomUtil.create("div",r+"-content-wrapper",this._attachmentContainer);this._attachmentContentNode=t.DomUtil.create("div",r+"-content",s),t.DomEvent.disableClickPropagation(s).disableScrollPropagation(this._attachmentContentNode).on(s,"contextmenu",t.DomEvent.stopPropagation)}},{key:"_updateLayout",value:function(){var e=this._contentNode,n=e.style;n.width="",n.whiteSpace="nowrap";var i=e.offsetWidth;i=Math.min(i,this.options.maxWidth),i=Math.max(i,this.options.minWidth),n.width=i+1+"px",n.whiteSpace="",n.height="";var o=e.offsetHeight,r=this.options.maxHeight;r&&o>r?(n.height=r+"px",t.DomUtil.addClass(e,"gaea-popup-scrolled")):t.DomUtil.removeClass(e,"gaea-popup-scrolled"),this._containerWidth=this._container.offsetWidth}},{key:"_animateZoom",value:function(e){var n=this._map._latLngToNewLayerPoint(this._latlng,e.zoom,e.center),i=this._getAnchor();t.DomUtil.setPosition(this._container,n.add(i))}},{key:"_adjustPan",value:function(){if(!(!this.options.autoPan||this._map._panAnim&&this._map._panAnim._inProgress)){var e=this._map,n=parseInt(t.DomUtil.getStyle(this._container,"marginBottom"),10)||0,i=this._container.offsetHeight+n,o=this._containerWidth,r=new l.default.Pixel(this._containerLeft,-i-this._containerBottom);r._add(t.DomUtil.getPosition(this._container));var a=e.layerPointToContainerPoint(r),s=new l.default.Pixel(this.options.autoPanPadding),u=new l.default.Pixel(this.options.autoPanPaddingTopLeft||s),h=new l.default.Pixel(this.options.autoPanPaddingBottomRight||s),c=e.getSize(),f=0,p=0;a.x+o+h.x>c.x&&(f=a.x+o-c.x+h.x),a.x-f-u.x<0&&(f=a.x-u.x),a.y+i+h.y>c.y&&(p=a.y+i-c.y+h.y),a.y-p-u.y<0&&(p=a.y-u.y),(f||p)&&e.fire("autopanstart").panBy([f,p])}}},{key:"_onCloseButtonClick",value:function(e){this._close(),t.DomEvent.stop(e)}},{key:"_getAnchor",value:function(){return new l.default.Pixel(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}]),s}(l.default.DivOverlay),t.Map.mergeOptions({closePopupOnClick:!0}),t.Map.include({openPopup:function(t,e,n){return t instanceof l.default.Popup||(t=new l.default.Popup(n).setContent(t)),e&&t.setLatLng(e),this.hasLayer(t)?this:(this._popup&&this._popup.options.autoClose&&this.closePopup(),this._popup=t,this.addLayer(t))},closePopup:function(t){return t&&t!==this._popup||(t=this._popup,this._popup=null),t&&this.removeLayer(t),this}}),t.Layer.include({bindPopup:function(e,n){return e instanceof l.default.Popup?(t.setOptions(e,n),this._popup=e,e._source=this):(this._popup&&!n||(this._popup=new l.default.Popup(n,this)),this._popup.setContent(e)),this._popupHandlersAdded||(this.on({click:this._openPopup,remove:this.closePopup,move:this._movePopup,editstart:this.closePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,remove:this.closePopup,move:this._movePopup,editstart:this.closePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(e,n){if(e instanceof t.Layer||(n=e,e=this),e instanceof t.FeatureGroup)for(var i in this._layers){e=this._layers[i];break}return n||(n=e.getCenter?e.getCenter():e.getLatLng()),this._popup&&this._map&&(this._popup._source=e,this._popup.update(),this._map.openPopup(this._popup,n)),this},closePopup:function(){return this._popup&&this._popup._close(),this},togglePopup:function(t){return this._popup&&(this._popup._map?this.closePopup():this.openPopup(t)),this},isPopupOpen:function(){return!!this._popup&&this._popup.isOpen()},setPopupContent:function(t){return this._popup&&this._popup.setContent(t),this},getPopup:function(){return this._popup},_openPopup:function(e){var n=e.layer||e.target;if(this._popup&&this._map){if(t.DomEvent.stop(e),n instanceof t.Path)return void this.openPopup(e.layer||e.target,e.latlng);this._map.hasLayer(this._popup)&&this._popup._source===n?this.closePopup():this.openPopup(n,e.latlng)}},_movePopup:function(t){this._popup.setLatLng(t.latlng)}})}).call(e,n(1))},function(t,e,n){"use strict";(function(t){function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=function t(e,n,i){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,n);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,n,i)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(i)},s=n(0),l=function(t){return t&&t.__esModule?t:{default:t}}(s),u={pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!0,interactive:!1,opacity:.9};l.default.Tooltip=function(n){function s(n,o){return e(this,s),n=t.extend({},u,n),i(this,(s.__proto__||Object.getPrototypeOf(s)).call(this,n,o))}return o(s,n),r(s,[{key:"setLngLat",value:function(t){return a(s.prototype.__proto__||Object.getPrototypeOf(s.prototype),"setLngLat",this).call(this,t)}},{key:"getLngLat",value:function(){return a(s.prototype.__proto__||Object.getPrototypeOf(s.prototype),"getLngLat",this).call(this)}},{key:"getContent",value:function(){return a(s.prototype.__proto__||Object.getPrototypeOf(s.prototype),"getContent",this).call(this)}},{key:"setContent",value:function(t){return a(s.prototype.__proto__||Object.getPrototypeOf(s.prototype),"setContent",this).call(this,t)}},{key:"getElement",value:function(){return a(s.prototype.__proto__||Object.getPrototypeOf(s.prototype),"getElement",this).call(this)}},{key:"isOpen",value:function(){return a(s.prototype.__proto__||Object.getPrototypeOf(s.prototype),"isOpen",this).call(this)}},{key:"bringToFront",value:function(){return a(s.prototype.__proto__||Object.getPrototypeOf(s.prototype),"bringToFront",this).call(this)}},{key:"bringToBack",value:function(){return a(s.prototype.__proto__||Object.getPrototypeOf(s.prototype),"bringToBack",this).call(this)}},{key:"onAdd",value:function(t){a(s.prototype.__proto__||Object.getPrototypeOf(s.prototype),"onAdd",this).call(this,t),this.setOpacity(this.options.opacity),t.fire("tooltipopen",{tooltip:this}),this._source&&this._source.fire("tooltipopen",{tooltip:this},!0)}},{key:"onRemove",value:function(t){a(s.prototype.__proto__||Object.getPrototypeOf(s.prototype),"onRemove",this).call(this,t),t.fire("tooltipclose",{tooltip:this}),this._source&&this._source.fire("tooltipclose",{tooltip:this},!0)}},{key:"getEvents",value:function(){var e=t.DivOverlay.prototype.getEvents.call(this);return t.Browser.touch&&!this.options.permanent&&(e.preclick=this._close),e}},{key:"_close",value:function(){this._map&&this._map.closeTooltip(this)}},{key:"_initLayout",value:function(){var e="gaea-tooltip "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=t.DomUtil.create("div",e)}},{key:"_updateLayout",value:function(){}},{key:"_adjustPan",value:function(){}},{key:"_setPosition",value:function(e){var n=this._map,i=this._container,o=n.latLngToContainerPoint(n.getCenter()),r=n.layerPointToContainerPoint(e),a=this.options.direction,s=i.offsetWidth,u=i.offsetHeight,h=new l.default.Pixel(this.options.offset),c=this._getAnchor();"top"===a?e=e.add(new l.default.Pixel(-s/2+h.x,-u+h.y+c.y,!0)):"bottom"===a?e=e.subtract(new l.default.Pixel(s/2-h.x,-h.y,!0)):"center"===a?e=e.subtract(new l.default.Pixel(s/2+h.x,u/2-c.y+h.y,!0)):"right"===a||"auto"===a&&r.x<o.x?(a="right",e=e.add(new l.default.Pixel(h.x+c.x,c.y-u/2+h.y,!0))):(a="left",e=e.subtract(new l.default.Pixel(s+c.x-h.x,u/2-c.y-h.y,!0))),t.DomUtil.removeClass(i,"gaea-tooltip-right"),t.DomUtil.removeClass(i,"gaea-tooltip-left"),t.DomUtil.removeClass(i,"gaea-tooltip-top"),t.DomUtil.removeClass(i,"gaea-tooltip-bottom"),t.DomUtil.addClass(i,"gaea-tooltip-"+a),t.DomUtil.setPosition(i,e)}},{key:"_updatePosition",value:function(){var t=this._map.latLngToLayerPoint(this._latlng);this._setPosition(t)}},{key:"setOpacity",value:function(e){this.options.opacity=e,this._container&&t.DomUtil.setOpacity(this._container,e)}},{key:"_animateZoom",value:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center);this._setPosition(e)}},{key:"_getAnchor",value:function(){return new l.default.Pixel(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}]),s}(l.default.DivOverlay),t.Map.include({openTooltip:function(t,e,n){return t instanceof l.default.Tooltip||(t=new l.default.Tooltip(n).setContent(t)),e&&t.setLngLat(e),this.hasLayer(t)?this:this.addLayer(t)},closeTooltip:function(t){return t&&this.removeLayer(t),this}}),t.Layer.include({bindTooltip:function(e,n){return e instanceof l.default.Tooltip?(t.setOptions(e,n),this._tooltip=e,e._source=this):(this._tooltip&&!n||(this._tooltip=new l.default.Tooltip(n,this)),this._tooltip.setContent(e)),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(e){if(e||!this._tooltipHandlersAdded){var n=e?"off":"on",i={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?i.add=this._openTooltip:(i.mouseover=this._openTooltip,i.mouseout=this.closeTooltip,this._tooltip.options.sticky&&(i.mousemove=this._moveTooltip),t.Browser.touch&&(i.click=this._openTooltip)),this[n](i),this._tooltipHandlersAdded=!e}},openTooltip:function(e,n){if(e instanceof t.Layer||(n=e,e=this),e instanceof t.FeatureGroup)for(var i in this._layers){e=this._layers[i];break}return n||(n=e.getCenter?e.getCenter():e.getLatLng()),this._tooltip&&this._map&&(this._tooltip._source=e,this._tooltip.update(),this._map.openTooltip(this._tooltip,n),this._tooltip.options.interactive&&this._tooltip._container&&(t.DomUtil.addClass(this._tooltip._container,"leaflet-clickable"),this.addInteractiveTarget(this._tooltip._container))),this},closeTooltip:function(){return this._tooltip&&(this._tooltip._close(),this._tooltip.options.interactive&&this._tooltip._container&&(t.DomUtil.removeClass(this._tooltip._container,"leaflet-clickable"),this.removeInteractiveTarget(this._tooltip._container))),this},toggleTooltip:function(t){return this._tooltip&&(this._tooltip._map?this.closeTooltip():this.openTooltip(t)),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(t){return this._tooltip&&this._tooltip.setContent(t),this},getTooltip:function(){return this._tooltip},_openTooltip:function(t){var e=t.layer||t.target;this._tooltip&&this._map&&this.openTooltip(e,this._tooltip.options.sticky?t.latlng:void 0)},_moveTooltip:function(t){var e=t.latlng,n=void 0,i=void 0;this._tooltip.options.sticky&&t.originalEvent&&(n=this._map.mouseEventToContainerPoint(t.originalEvent),i=this._map.containerPointToLayerPoint(n),e=this._map.layerPointToLatLng(i)),this._tooltip.setLatLng(e)}})}).call(e,n(1))},function(t,e,n){"use strict";n(149),n(151),n(150)},function(t,e,n){"use strict";(function(t){function e(){var t="default";if(GL.Env.Cache.check(t))return GL.Env.Cache.icon[t];var e=n("gaea-default-icon");return GL.Env.Cache.icon[t]=new GL.Icon({iconUrl:e,iconSize:[16,16]}),GL.Env.Cache.icon[t]}function n(e){var n=t.DomUtil.create("div",e,document.body),i=t.DomUtil.getStyle(n,"background-image")||t.DomUtil.getStyle(n,"backgroundImage");return document.body.removeChild(n),0===i.indexOf("url")?i.replace(/^url\([\"\']?/,"").replace(/[\"\']?\)$/,""):""}GL.Env.Cache={img:{},icon:{},map:{},config:null,pathFix:"",init:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if(GL.Env.Cache.config=t,GL.Env.Cache.pathFix=n,!t.resource||!t.resource.assets)return void e(!0);var i=n+t.resource.assets;GL.Http.get(i).then(function(t){GL.Env.Cache.img=t.data.symbol||{};for(var i in GL.Env.Cache.img)GL.Env.Cache.img[i].url=n+GL.Env.Cache.img[i].url;e(!0)}).catch(function(t){if(t.config&&t.config.url===i)return void e(!1);throw t})},getMap:function(t){if(!t){var e=Object.keys(GL.Env.Cache.map);if(0===e.length)return null;t=e[0]}return GL.Env.Cache.map[t]},addMap:function(t){var e=t.id;GL.Env.Cache.map[e]=t},removeMap:function(t){var e=t.id;delete GL.Env.Cache.map[e]},getConfig:function(){return GL.Env.Cache.config},getIcon:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default";if("default"===t)return e();if(this.check(t))return GL.Env.Cache.icon[t];var n=this.getImgInfo(t);if(!n)return null;var i=new GL.Icon.Smart(n.url,n.size);return GL.Env.Cache.icon[t]=i,i},getImgInfo:function(t){return GL.Env.Cache.img[t]},check:function(t){return!!GL.Env.Cache.icon[t]}},GL.Cache=GL.Env.Cache}).call(e,n(1))},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e,n){this._events=this._events||{};var i=this._events[t];i||(i=[],this._events[t]=i),n===this&&(n=void 0);for(var o={fn:e,ctx:n},r=i,a=0,s=r.length;a<s;a++)if(r[a].fn===e&&r[a].ctx===n)return;r.push(o)}function r(t,e,n){var i=void 0,o=void 0,r=void 0;if(this._events&&(i=this._events[t])){if(!e){for(o=0,r=i.length;o<r;o++)i[o].fn=GL.H.falseFn;return void delete this._events[t]}if(n===this&&(n=void 0),i)for(o=0,r=i.length;o<r;o++){var a=i[o];if(a.ctx===n&&a.fn===e)return a.fn=GL.H.falseFn,this._firingCount&&(this._events[t]=i=i.slice()),void i.splice(o,1)}}}var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();GL.Env.Hub=new(function(){function t(){i(this,t)}return s(t,[{key:"on",value:function(t,e,n){if("object"===(void 0===t?"undefined":a(t)))for(var i in t)o.call(this,i,t[i],e);else{t=GL.H.splitWords(t);for(var r=0,s=t.length;r<s;r++)o.call(this,t[r],e,n)}return this}},{key:"off",value:function(t,e,n){if(t)if("object"===(void 0===t?"undefined":a(t)))for(var i in t)r.call(this,i,t[i],e);else{t=GL.H.splitWords(t);for(var o=0,s=t.length;o<s;o++)r.call(this,t[o],e,n)}else delete this._events;return this}},{key:"fire",value:function(t){if(!this.listens(t))return this;for(var e=arguments.length,n=Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];var o=n;if(1===n.length&&(o=n[0]),this._events){var r=this._events[t];if(r){this._firingCount=this._firingCount+1||1;for(var a=0,s=r.length;a<s;a++){var l=r[a];l.fn.call(l.ctx||this,o)}this._firingCount--}}return this}},{key:"emit",value:function(t){for(var e=arguments.length,n=Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];n=Array.from(n),this.fire.apply(this,[t].concat(n))}},{key:"once",value:function(t,e,n){if("object"===(void 0===t?"undefined":a(t))){for(var i in t)this.once(i,t[i],e);return this}var o=GL.H.bind(function(){this.off(t,e,n).off(t,o,n)},this);return this.on(t,e,n).on(t,o,n)}},{key:"listens",value:function(t){var e=this._events&&this._events[t];return!(!e||!e.length)}}]),t}()),GL.Hub=GL.Env.Hub},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();GL.Proxy=function(){function t(){i(this,t)}return o(t,null,[{key:"getIcon",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default",e=GL.Cache.getIcon(t);return"function"==typeof e.toDelegate?e.toDelegate():e}},{key:"getImgInfo",value:function(t){return GL.Cache.getImgInfo(t)}},{key:"getConfig",value:function(){return GL.Cache.getConfig()}},{key:"getPathFix",value:function(){return GL.Cache.pathFix}},{key:"addMap",value:function(t){GL.Cache.addMap(t)}},{key:"removeMap",value:function(t){GL.Cache.removeMap(t)}},{key:"getMap",value:function(t){var e=GL.Cache.getMap(t);return e&&e._api||e}}]),t}()},function(t,e,n){"use strict";n(154),n(153),n(155)},function(t,e,n){"use strict";(function(t){function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var n=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),i="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split("");GL.H=function(){function o(){e(this,o)}return n(o,null,[{key:"stamp",value:function(t){return t._uuid=t._uuid||GL.H.uuid(),t._uuid}},{key:"uuid",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"ID",e=new Array(36),n=0,o=void 0,r=0;r<36;r++)8===r||13===r||18===r||23===r?e[r]="-":14===r?e[r]="4":(n<=2&&(n=33554432+16777216*Math.random()|0),o=15&n,n>>=4,e[r]=i[19===r?3&o|8:o]);return t+"-"+e.join("")}},{key:"getLevOfArr",value:function(t){function e(e){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}(function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return GL.H.isArray(t)?getLevOfArr(t[0],e++):e})},{key:"trim",value:function(t){return GL.H.isString(t)?t.trim?t.trim():t.replace(/^\s+|\s+$/g,""):t}},{key:"isObjBlank",value:function(t){var e=void 0;for(e in t)return!1;return!0}},{key:"isString",value:function(t){return"string"==typeof t}},{key:"isNumber",value:function(t){return t===+t}},{key:"isArray",value:function(t){return Array.isArray(t)}},{key:"formatNum",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6;if(GL.H.isNumber(t))return t;e=e||GL.H.precision;var n=Math.pow(10,e);return Math.round(t*n)/n}},{key:"isNotEmpty",value:function(t){return!GL.H.isEmpty(t)}},{key:"isEmpty",value:function(t){return!!t&&t.length>0}},{key:"isEquals",value:function(t,e){return t===e}},{key:"isEqualsIgnoreCase",value:function(t,e){return t.toUpperCase()===e.toUpperCase()}},{key:"isChinese",value:function(t){return!/^([u4E00-u9FA5]|[uFE30-uFFA0])*$/.test(t)}},{key:"extend",value:function(t){for(var e=void 0,n=void 0,i=void 0,o=void 0,r=arguments.length,a=Array(r>1?r-1:0),s=1;s<r;s++)a[s-1]=arguments[s];for(n=0,i=a.length;n<i;n++){o=a[n];for(e in o)t[e]=o[e]}return t}},{key:"splitWords",value:function(t){return GL.H.trim(t).split(/\s+/)}},{key:"startWith",value:function(t,e){return!(!t||!e)&&new RegExp("^"+e).test(t)}},{key:"endWith",value:function(t,e){return!(!t||!e)&&new RegExp(e+"$").test(t)}},{key:"falseFn",value:function(){return!1}},{key:"setOptions",value:function(t,e){t.hasOwnProperty("options")||(t.options=t.options?Object.create(t.options):{});for(var n in e)t.options[n]=e[n];return t.options}},{key:"bind",value:function(t,e){var n=Array.prototype.slice;if(t.bind)return t.bind.apply(t,n.call(arguments,1));var i=n.call(arguments,2);return function(){return t.apply(e,i.length?i.concat(n.call(arguments)):arguments)}}},{key:"getRestUrl",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=GL.Proxy.getConfig();if(e&&e.server.web)return e.server.web+t;var n=window.document.location.href,i=window.document.location.pathname,o=n.indexOf(i);return""+n.substring(0,o)+i.substring(0,i.substr(1).indexOf("/")+1)+"/"+t}},{key:"setPosition",value:function(e,n,i,o){e._leaflet_pos=n,t.Browser.any3d?GL.H.setTransform(e,n,i,o):(e.style.left=n.x+"px",e.style.top=n.y+"px")}},{key:"setTransform",value:function(e,n,i,o){var r=n||new t.Point(0,0);e.style[t.DomUtil.TRANSFORM]=(t.Browser.ie3d?"translate("+r.x+"px,"+r.y+"px)":"translate3d("+r.x+"px,"+r.y+"px,0)")+(i?" scale("+i+")":"")+(o?" rotate("+o+"deg)":"")}},{key:"fillRoundRect",value:function(t,e,n,i,o,r,a){if(2*r>i||2*r>o)return!1;t.save(),t.translate(e,n),GL.H.drawRoundRectPath(t,i,o,r),t.fillStyle=a||"#000",t.fill(),t.restore()}},{key:"strokeRoundRect",value:function(t,e,n,i,o,r,a,s){if(2*r>i||2*r>o)return!1;t.save(),t.translate(e,n),GL.H.drawRoundRectPath(t,i,o,r),t.lineWidth=a||2,t.strokeStyle=s||"#000",t.stroke(),t.restore()}},{key:"drawRoundRectPath",value:function(t,e,n,i){t.beginPath(),t.arc(e-i,n-i,i,0,Math.PI/2),t.lineTo(i,n),t.arc(i,n-i,i,Math.PI/2,Math.PI),t.lineTo(0,i),t.arc(i,i,i,Math.PI,3*Math.PI/2),t.lineTo(e-i,0),t.arc(e-i,i,i,3*Math.PI/2,2*Math.PI),t.lineTo(e,n-i),t.closePath()}},{key:"precision",get:function(){return 6}}]),o}(),function(){function e(t){return window["webkit"+t]||window["moz"+t]||window["ms"+t]}function n(t){var e=+new Date,n=Math.max(0,16-(e-i));return i=e+n,window.setTimeout(t,n)}var i=0,o=window.requestAnimationFrame||e("RequestAnimationFrame")||n,r=window.cancelAnimationFrame||e("CancelAnimationFrame")||e("CancelRequestAnimationFrame")||function(t){window.clearTimeout(t)};GL.H.requestAnimFrame=function(e,i,r){if(!r||o!==n)return o.call(window,t.bind(e,i));e.call(i)},GL.H.cancelAnimFrame=function(t){t&&r.call(window,t)}}()}).call(e,n(1))},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){e.read=function(t,e,n,i,o){var r,a,s=8*o-i-1,l=(1<<s)-1,u=l>>1,h=-7,c=n?o-1:0,f=n?-1:1,p=t[e+c];for(c+=f,r=p&(1<<-h)-1,p>>=-h,h+=s;h>0;r=256*r+t[e+c],c+=f,h-=8);for(a=r&(1<<-h)-1,r>>=-h,h+=i;h>0;a=256*a+t[e+c],c+=f,h-=8);if(0===r)r=1-u;else{if(r===l)return a?NaN:1/0*(p?-1:1);a+=Math.pow(2,i),r-=u}return(p?-1:1)*a*Math.pow(2,r-i)},e.write=function(t,e,n,i,o,r){var a,s,l,u=8*r-o-1,h=(1<<u)-1,c=h>>1,f=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,p=i?0:r-1,d=i?1:-1,_=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=h):(a=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-a))<1&&(a--,l*=2),e+=a+c>=1?f/l:f*Math.pow(2,1-c),e*l>=2&&(a++,l/=2),a+c>=h?(s=0,a=h):a+c>=1?(s=(e*l-1)*Math.pow(2,o),a+=c):(s=e*Math.pow(2,c-1)*Math.pow(2,o),a=0));o>=8;t[n+p]=255&s,p+=d,s/=256,o-=8);for(a=a<<o|s,u+=o;u>0;t[n+p]=255&a,p+=d,a/=256,u-=8);t[n+p-d]|=128*_}},function(t,e){"function"==typeof Object.create?t.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}},function(t,e,n){"use strict";function i(t){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(t)?t:new Uint8Array(t||0),this.pos=0,this.type=0,this.length=this.buf.length}function o(t,e,n){var i,o,r=n.buf;if(o=r[n.pos++],i=(112&o)>>4,o<128)return a(t,i,e);if(o=r[n.pos++],i|=(127&o)<<3,o<128)return a(t,i,e);if(o=r[n.pos++],i|=(127&o)<<10,o<128)return a(t,i,e);if(o=r[n.pos++],i|=(127&o)<<17,o<128)return a(t,i,e);if(o=r[n.pos++],i|=(127&o)<<24,o<128)return a(t,i,e);if(o=r[n.pos++],i|=(1&o)<<31,o<128)return a(t,i,e);throw new Error("Expected varint not more than 10 bytes")}function r(t){return t.type===i.Bytes?t.readVarint()+t.pos:t.pos+1}function a(t,e,n){return n?4294967296*e+(t>>>0):4294967296*(e>>>0)+(t>>>0)}function s(t,e){var n,i;if(t>=0?(n=t%4294967296|0,i=t/4294967296|0):(n=~(-t%4294967296),i=~(-t/4294967296),4294967295^n?n=n+1|0:(n=0,i=i+1|0)),t>=0x10000000000000000||t<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");e.realloc(10),l(n,i,e),u(i,e)}function l(t,e,n){n.buf[n.pos++]=127&t|128,t>>>=7,n.buf[n.pos++]=127&t|128,t>>>=7,n.buf[n.pos++]=127&t|128,t>>>=7,n.buf[n.pos++]=127&t|128,t>>>=7,n.buf[n.pos]=127&t}function u(t,e){var n=(7&t)<<4;e.buf[e.pos++]|=n|((t>>>=3)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t)))))}function h(t,e,n){var i=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.ceil(Math.log(e)/(7*Math.LN2));n.realloc(i);for(var o=n.pos-1;o>=t;o--)n.buf[o+i]=n.buf[o]}function c(t,e){for(var n=0;n<t.length;n++)e.writeVarint(t[n])}function f(t,e){for(var n=0;n<t.length;n++)e.writeSVarint(t[n])}function p(t,e){for(var n=0;n<t.length;n++)e.writeFloat(t[n])}function d(t,e){for(var n=0;n<t.length;n++)e.writeDouble(t[n])}function _(t,e){for(var n=0;n<t.length;n++)e.writeBoolean(t[n])}function y(t,e){for(var n=0;n<t.length;n++)e.writeFixed32(t[n])}function g(t,e){for(var n=0;n<t.length;n++)e.writeSFixed32(t[n])}function m(t,e){for(var n=0;n<t.length;n++)e.writeFixed64(t[n])}function v(t,e){for(var n=0;n<t.length;n++)e.writeSFixed64(t[n])}function b(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+16777216*t[e+3]}function L(t,e,n){t[n]=e,t[n+1]=e>>>8,t[n+2]=e>>>16,t[n+3]=e>>>24}function w(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+(t[e+3]<<24)}function k(t,e,n){for(var i="",o=e;o<n;){var r=t[o],a=null,s=r>239?4:r>223?3:r>191?2:1;if(o+s>n)break;var l,u,h;1===s?r<128&&(a=r):2===s?128==(192&(l=t[o+1]))&&(a=(31&r)<<6|63&l)<=127&&(a=null):3===s?(l=t[o+1],u=t[o+2],128==(192&l)&&128==(192&u)&&((a=(15&r)<<12|(63&l)<<6|63&u)<=2047||a>=55296&&a<=57343)&&(a=null)):4===s&&(l=t[o+1],u=t[o+2],h=t[o+3],128==(192&l)&&128==(192&u)&&128==(192&h)&&((a=(15&r)<<18|(63&l)<<12|(63&u)<<6|63&h)<=65535||a>=1114112)&&(a=null)),null===a?(a=65533,s=1):a>65535&&(a-=65536,i+=String.fromCharCode(a>>>10&1023|55296),a=56320|1023&a),i+=String.fromCharCode(a),o+=s}return i}function x(t,e,n){for(var i,o,r=0;r<e.length;r++){if((i=e.charCodeAt(r))>55295&&i<57344){if(!o){i>56319||r+1===e.length?(t[n++]=239,t[n++]=191,t[n++]=189):o=i;continue}if(i<56320){t[n++]=239,t[n++]=191,t[n++]=189,o=i;continue}i=o-55296<<10|i-56320|65536,o=null}else o&&(t[n++]=239,t[n++]=191,t[n++]=189,o=null);i<128?t[n++]=i:(i<2048?t[n++]=i>>6|192:(i<65536?t[n++]=i>>12|224:(t[n++]=i>>18|240,t[n++]=i>>12&63|128),t[n++]=i>>6&63|128),t[n++]=63&i|128)}return n}t.exports=i;var M=n(169);i.Varint=0,i.Fixed64=1,i.Bytes=2,i.Fixed32=5;i.prototype={destroy:function(){this.buf=null},readFields:function(t,e,n){for(n=n||this.length;this.pos<n;){var i=this.readVarint(),o=i>>3,r=this.pos;this.type=7&i,t(o,e,this),this.pos===r&&this.skip(i)}return e},readMessage:function(t,e){return this.readFields(t,e,this.readVarint()+this.pos)},readFixed32:function(){var t=b(this.buf,this.pos);return this.pos+=4,t},readSFixed32:function(){var t=w(this.buf,this.pos);return this.pos+=4,t},readFixed64:function(){var t=b(this.buf,this.pos)+4294967296*b(this.buf,this.pos+4);return this.pos+=8,t},readSFixed64:function(){var t=b(this.buf,this.pos)+4294967296*w(this.buf,this.pos+4);return this.pos+=8,t},readFloat:function(){var t=M.read(this.buf,this.pos,!0,23,4);return this.pos+=4,t},readDouble:function(){var t=M.read(this.buf,this.pos,!0,52,8);return this.pos+=8,t},readVarint:function(t){var e,n,i=this.buf;return n=i[this.pos++],e=127&n,n<128?e:(n=i[this.pos++],e|=(127&n)<<7,n<128?e:(n=i[this.pos++],e|=(127&n)<<14,n<128?e:(n=i[this.pos++],e|=(127&n)<<21,n<128?e:(n=i[this.pos],e|=(15&n)<<28,o(e,t,this)))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var t=this.readVarint();return t%2==1?(t+1)/-2:t/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var t=this.readVarint()+this.pos,e=k(this.buf,this.pos,t);return this.pos=t,e},readBytes:function(){var t=this.readVarint()+this.pos,e=this.buf.subarray(this.pos,t);return this.pos=t,e},readPackedVarint:function(t,e){var n=r(this);for(t=t||[];this.pos<n;)t.push(this.readVarint(e));return t},readPackedSVarint:function(t){var e=r(this);for(t=t||[];this.pos<e;)t.push(this.readSVarint());return t},readPackedBoolean:function(t){var e=r(this);for(t=t||[];this.pos<e;)t.push(this.readBoolean());return t},readPackedFloat:function(t){var e=r(this);for(t=t||[];this.pos<e;)t.push(this.readFloat());return t},readPackedDouble:function(t){var e=r(this);for(t=t||[];this.pos<e;)t.push(this.readDouble());return t},readPackedFixed32:function(t){var e=r(this);for(t=t||[];this.pos<e;)t.push(this.readFixed32());return t},readPackedSFixed32:function(t){var e=r(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed32());return t},readPackedFixed64:function(t){var e=r(this);for(t=t||[];this.pos<e;)t.push(this.readFixed64());return t},readPackedSFixed64:function(t){var e=r(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed64());return t},skip:function(t){var e=7&t;if(e===i.Varint)for(;this.buf[this.pos++]>127;);else if(e===i.Bytes)this.pos=this.readVarint()+this.pos;else if(e===i.Fixed32)this.pos+=4;else{if(e!==i.Fixed64)throw new Error("Unimplemented type: "+e);this.pos+=8}},writeTag:function(t,e){this.writeVarint(t<<3|e)},realloc:function(t){for(var e=this.length||16;e<this.pos+t;)e*=2;if(e!==this.length){var n=new Uint8Array(e);n.set(this.buf),this.buf=n,this.length=e}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(t){this.realloc(4),L(this.buf,t,this.pos),this.pos+=4},writeSFixed32:function(t){this.realloc(4),L(this.buf,t,this.pos),this.pos+=4},writeFixed64:function(t){this.realloc(8),L(this.buf,-1&t,this.pos),L(this.buf,Math.floor(t*(1/4294967296)),this.pos+4),this.pos+=8},writeSFixed64:function(t){this.realloc(8),L(this.buf,-1&t,this.pos),L(this.buf,Math.floor(t*(1/4294967296)),this.pos+4),this.pos+=8},writeVarint:function(t){if((t=+t||0)>268435455||t<0)return void s(t,this);this.realloc(4),this.buf[this.pos++]=127&t|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=t>>>7&127)))},writeSVarint:function(t){this.writeVarint(t<0?2*-t-1:2*t)},writeBoolean:function(t){this.writeVarint(Boolean(t))},writeString:function(t){t=String(t),this.realloc(4*t.length),this.pos++;var e=this.pos;this.pos=x(this.buf,t,this.pos);var n=this.pos-e;n>=128&&h(e,n,this),this.pos=e-1,this.writeVarint(n),this.pos+=n},writeFloat:function(t){this.realloc(4),M.write(this.buf,t,this.pos,!0,23,4),this.pos+=4},writeDouble:function(t){this.realloc(8),M.write(this.buf,t,this.pos,!0,52,8),this.pos+=8},writeBytes:function(t){var e=t.length;this.writeVarint(e),this.realloc(e);for(var n=0;n<e;n++)this.buf[this.pos++]=t[n]},writeRawMessage:function(t,e){this.pos++;var n=this.pos;t(e,this);var i=this.pos-n;i>=128&&h(n,i,this),this.pos=n-1,this.writeVarint(i),this.pos+=i},writeMessage:function(t,e,n){this.writeTag(t,i.Bytes),this.writeRawMessage(e,n)},writePackedVarint:function(t,e){this.writeMessage(t,c,e)},writePackedSVarint:function(t,e){this.writeMessage(t,f,e)},writePackedBoolean:function(t,e){this.writeMessage(t,_,e)},writePackedFloat:function(t,e){this.writeMessage(t,p,e)},writePackedDouble:function(t,e){this.writeMessage(t,d,e)},writePackedFixed32:function(t,e){this.writeMessage(t,y,e)},writePackedSFixed32:function(t,e){this.writeMessage(t,g,e)},writePackedFixed64:function(t,e){this.writeMessage(t,m,e)},writePackedSFixed64:function(t,e){this.writeMessage(t,v,e)},writeBytesField:function(t,e){this.writeTag(t,i.Bytes),this.writeBytes(e)},writeFixed32Field:function(t,e){this.writeTag(t,i.Fixed32),this.writeFixed32(e)},writeSFixed32Field:function(t,e){this.writeTag(t,i.Fixed32),this.writeSFixed32(e)},writeFixed64Field:function(t,e){this.writeTag(t,i.Fixed64),this.writeFixed64(e)},writeSFixed64Field:function(t,e){this.writeTag(t,i.Fixed64),this.writeSFixed64(e)},writeVarintField:function(t,e){this.writeTag(t,i.Varint),this.writeVarint(e)},writeSVarintField:function(t,e){this.writeTag(t,i.Varint),this.writeSVarint(e)},writeStringField:function(t,e){this.writeTag(t,i.Bytes),this.writeString(e)},writeFloatField:function(t,e){this.writeTag(t,i.Fixed32),this.writeFloat(e)},writeDoubleField:function(t,e){this.writeTag(t,i.Fixed64),this.writeDouble(e)},writeBooleanField:function(t,e){this.writeVarintField(t,Boolean(e))}}},function(t,e,n){"use strict";function i(t,e){this.x=t,this.y=e}t.exports=i,i.prototype={clone:function(){return new i(this.x,this.y)},add:function(t){return this.clone()._add(t)},sub:function(t){return this.clone()._sub(t)},mult:function(t){return this.clone()._mult(t)},div:function(t){return this.clone()._div(t)},rotate:function(t){return this.clone()._rotate(t)},matMult:function(t){return this.clone()._matMult(t)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(t){return this.x===t.x&&this.y===t.y},dist:function(t){return Math.sqrt(this.distSqr(t))},distSqr:function(t){var e=t.x-this.x,n=t.y-this.y;return e*e+n*n},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(t){return Math.atan2(this.y-t.y,this.x-t.x)},angleWith:function(t){return this.angleWithSep(t.x,t.y)},angleWithSep:function(t,e){return Math.atan2(this.x*e-this.y*t,this.x*t+this.y*e)},_matMult:function(t){var e=t[0]*this.x+t[1]*this.y,n=t[2]*this.x+t[3]*this.y;return this.x=e,this.y=n,this},_add:function(t){return this.x+=t.x,this.y+=t.y,this},_sub:function(t){return this.x-=t.x,this.y-=t.y,this},_mult:function(t){return this.x*=t,this.y*=t,this},_div:function(t){return this.x/=t,this.y/=t,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var t=this.y;return this.y=this.x,this.x=-t,this},_rotate:function(t){var e=Math.cos(t),n=Math.sin(t),i=e*this.x-n*this.y,o=n*this.x+e*this.y;return this.x=i,this.y=o,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},i.convert=function(t){return t instanceof i?t:Array.isArray(t)?new i(t[0],t[1]):t}},function(t,e,n){!function(e,n){t.exports=n()}(0,function(){"use strict";function t(t,n,o,r,a){e(t,n,o||0,r||t.length-1,a||i)}function e(t,i,o,r,a){for(;r>o;){if(r-o>600){var s=r-o+1,l=i-o+1,u=Math.log(s),h=.5*Math.exp(2*u/3),c=.5*Math.sqrt(u*h*(s-h)/s)*(l-s/2<0?-1:1);e(t,i,Math.max(o,Math.floor(i-l*h/s+c)),Math.min(r,Math.floor(i+(s-l)*h/s+c)),a)}var f=t[i],p=o,d=r;for(n(t,o,i),a(t[r],f)>0&&n(t,o,r);p<d;){for(n(t,p,d),p++,d--;a(t[p],f)<0;)p++;for(;a(t[d],f)>0;)d--}0===a(t[o],f)?n(t,o,d):(d++,n(t,d,r)),d<=i&&(o=d+1),i<=d&&(r=d-1)}}function n(t,e,n){var i=t[e];t[e]=t[n],t[n]=i}function i(t,e){return t<e?-1:t>e?1:0}return t})},function(t,e,n){"use strict";function i(t,e){if(!(this instanceof i))return new i(t,e);this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),e&&this._initFormat(e),this.clear()}function o(t,e,n){if(!n)return e.indexOf(t);for(var i=0;i<e.length;i++)if(n(t,e[i]))return i;return-1}function r(t,e){a(t,0,t.children.length,e,t)}function a(t,e,n,i,o){o||(o=y(null)),o.minX=1/0,o.minY=1/0,o.maxX=-1/0,o.maxY=-1/0;for(var r,a=e;a<n;a++)r=t.children[a],s(o,t.leaf?i(r):r);return o}function s(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function l(t,e){return t.minX-e.minX}function u(t,e){return t.minY-e.minY}function h(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function c(t){return t.maxX-t.minX+(t.maxY-t.minY)}function f(t,e){return(Math.max(e.maxX,t.maxX)-Math.min(e.minX,t.minX))*(Math.max(e.maxY,t.maxY)-Math.min(e.minY,t.minY))}function p(t,e){var n=Math.max(t.minX,e.minX),i=Math.max(t.minY,e.minY),o=Math.min(t.maxX,e.maxX),r=Math.min(t.maxY,e.maxY);return Math.max(0,o-n)*Math.max(0,r-i)}function d(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function _(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function y(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function g(t,e,n,i,o){for(var r,a=[e,n];a.length;)n=a.pop(),e=a.pop(),n-e<=i||(r=e+Math.ceil((n-e)/i/2)*i,m(t,r,e,n,o),a.push(e,r,r,n))}t.exports=i,t.exports.default=i;var m=n(173);i.prototype={all:function(){return this._all(this.data,[])},search:function(t){var e=this.data,n=[],i=this.toBBox;if(!_(t,e))return n;for(var o,r,a,s,l=[];e;){for(o=0,r=e.children.length;o<r;o++)a=e.children[o],s=e.leaf?i(a):a,_(t,s)&&(e.leaf?n.push(a):d(t,s)?this._all(a,n):l.push(a));e=l.pop()}return n},collides:function(t){var e=this.data,n=this.toBBox;if(!_(t,e))return!1;for(var i,o,r,a,s=[];e;){for(i=0,o=e.children.length;i<o;i++)if(r=e.children[i],a=e.leaf?n(r):r,_(t,a)){if(e.leaf||d(t,a))return!0;s.push(r)}e=s.pop()}return!1},load:function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0,n=t.length;e<n;e++)this.insert(t[e]);return this}var i=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===i.height)this._splitRoot(this.data,i);else{if(this.data.height<i.height){var o=this.data;this.data=i,i=o}this._insert(i,this.data.height-i.height-1,!0)}else this.data=i;return this},insert:function(t){return t&&this._insert(t,this.data.height-1),this},clear:function(){return this.data=y([]),this},remove:function(t,e){if(!t)return this;for(var n,i,r,a,s=this.data,l=this.toBBox(t),u=[],h=[];s||u.length;){if(s||(s=u.pop(),i=u[u.length-1],n=h.pop(),a=!0),s.leaf&&-1!==(r=o(t,s.children,e)))return s.children.splice(r,1),u.push(s),this._condense(u),this;a||s.leaf||!d(s,l)?i?(n++,s=i.children[n],a=!1):s=null:(u.push(s),h.push(n),n=0,i=s,s=s.children[0])}return this},toBBox:function(t){return t},compareMinX:l,compareMinY:u,toJSON:function(){return this.data},fromJSON:function(t){return this.data=t,this},_all:function(t,e){for(var n=[];t;)t.leaf?e.push.apply(e,t.children):n.push.apply(n,t.children),t=n.pop();return e},_build:function(t,e,n,i){var o,a=n-e+1,s=this._maxEntries;if(a<=s)return o=y(t.slice(e,n+1)),r(o,this.toBBox),o;i||(i=Math.ceil(Math.log(a)/Math.log(s)),s=Math.ceil(a/Math.pow(s,i-1))),o=y([]),o.leaf=!1,o.height=i;var l,u,h,c,f=Math.ceil(a/s),p=f*Math.ceil(Math.sqrt(s));for(g(t,e,n,p,this.compareMinX),l=e;l<=n;l+=p)for(h=Math.min(l+p-1,n),g(t,l,h,f,this.compareMinY),u=l;u<=h;u+=f)c=Math.min(u+f-1,h),o.children.push(this._build(t,u,c,i-1));return r(o,this.toBBox),o},_chooseSubtree:function(t,e,n,i){for(var o,r,a,s,l,u,c,p;;){if(i.push(e),e.leaf||i.length-1===n)break;for(c=p=1/0,o=0,r=e.children.length;o<r;o++)a=e.children[o],l=h(a),u=f(t,a)-l,u<p?(p=u,c=l<c?l:c,s=a):u===p&&l<c&&(c=l,s=a);e=s||e.children[0]}return e},_insert:function(t,e,n){var i=this.toBBox,o=n?t:i(t),r=[],a=this._chooseSubtree(o,this.data,e,r);for(a.children.push(t),s(a,o);e>=0&&r[e].children.length>this._maxEntries;)this._split(r,e),e--;this._adjustParentBBoxes(o,r,e)},_split:function(t,e){var n=t[e],i=n.children.length,o=this._minEntries;this._chooseSplitAxis(n,o,i);var a=this._chooseSplitIndex(n,o,i),s=y(n.children.splice(a,n.children.length-a));s.height=n.height,s.leaf=n.leaf,r(n,this.toBBox),r(s,this.toBBox),e?t[e-1].children.push(s):this._splitRoot(n,s)},_splitRoot:function(t,e){this.data=y([t,e]),this.data.height=t.height+1,this.data.leaf=!1,r(this.data,this.toBBox)},_chooseSplitIndex:function(t,e,n){var i,o,r,s,l,u,c,f;for(u=c=1/0,i=e;i<=n-e;i++)o=a(t,0,i,this.toBBox),r=a(t,i,n,this.toBBox),s=p(o,r),l=h(o)+h(r),s<u?(u=s,f=i,c=l<c?l:c):s===u&&l<c&&(c=l,f=i);return f},_chooseSplitAxis:function(t,e,n){var i=t.leaf?this.compareMinX:l,o=t.leaf?this.compareMinY:u;this._allDistMargin(t,e,n,i)<this._allDistMargin(t,e,n,o)&&t.children.sort(i)},_allDistMargin:function(t,e,n,i){t.children.sort(i);var o,r,l=this.toBBox,u=a(t,0,e,l),h=a(t,n-e,n,l),f=c(u)+c(h);for(o=e;o<n-e;o++)r=t.children[o],s(u,t.leaf?l(r):r),f+=c(u);for(o=n-e-1;o>=e;o--)r=t.children[o],s(h,t.leaf?l(r):r),f+=c(h);return f},_adjustParentBBoxes:function(t,e,n){for(var i=n;i>=0;i--)s(e[i],t)},_condense:function(t){for(var e,n=t.length-1;n>=0;n--)0===t[n].children.length?n>0?(e=t[n-1].children,e.splice(e.indexOf(t[n]),1)):this.clear():r(t[n],this.toBBox)},_initFormat:function(t){var e=["return a"," - b",";"];this.compareMinX=new Function("a","b",e.join(t[0])),this.compareMinY=new Function("a","b",e.join(t[1])),this.toBBox=new Function("a","return {minX: a"+t[0]+", minY: a"+t[1]+", maxX: a"+t[2]+", maxY: a"+t[3]+"};")}}},function(t,e){t.exports=function(t){return t&&"object"==typeof t&&"function"==typeof t.copy&&"function"==typeof t.fill&&"function"==typeof t.readUInt8}},function(t,e,n){(function(t,i){function o(t,n){var i={seen:[],stylize:a};return arguments.length>=3&&(i.depth=arguments[2]),arguments.length>=4&&(i.colors=arguments[3]),_(n)?i.showHidden=n:n&&e._extend(i,n),L(i.showHidden)&&(i.showHidden=!1),L(i.depth)&&(i.depth=2),L(i.colors)&&(i.colors=!1),L(i.customInspect)&&(i.customInspect=!0),i.colors&&(i.stylize=r),l(i,t,i.depth)}function r(t,e){var n=o.styles[e];return n?"["+o.colors[n][0]+"m"+t+"["+o.colors[n][1]+"m":t}function a(t,e){return t}function s(t){var e={};return t.forEach(function(t,n){e[t]=!0}),e}function l(t,n,i){if(t.customInspect&&n&&P(n.inspect)&&n.inspect!==e.inspect&&(!n.constructor||n.constructor.prototype!==n)){var o=n.inspect(i,t);return v(o)||(o=l(t,o,i)),o}var r=u(t,n);if(r)return r;var a=Object.keys(n),_=s(a);if(t.showHidden&&(a=Object.getOwnPropertyNames(n)),M(n)&&(a.indexOf("message")>=0||a.indexOf("description")>=0))return h(n);if(0===a.length){if(P(n)){var y=n.name?": "+n.name:"";return t.stylize("[Function"+y+"]","special")}if(w(n))return t.stylize(RegExp.prototype.toString.call(n),"regexp");if(x(n))return t.stylize(Date.prototype.toString.call(n),"date");if(M(n))return h(n)}var g="",m=!1,b=["{","}"];if(d(n)&&(m=!0,b=["[","]"]),P(n)){g=" [Function"+(n.name?": "+n.name:"")+"]"}if(w(n)&&(g=" "+RegExp.prototype.toString.call(n)),x(n)&&(g=" "+Date.prototype.toUTCString.call(n)),M(n)&&(g=" "+h(n)),0===a.length&&(!m||0==n.length))return b[0]+g+b[1];if(i<0)return w(n)?t.stylize(RegExp.prototype.toString.call(n),"regexp"):t.stylize("[Object]","special");t.seen.push(n);var L;return L=m?c(t,n,i,_,a):a.map(function(e){return f(t,n,i,_,e,m)}),t.seen.pop(),p(L,g,b)}function u(t,e){if(L(e))return t.stylize("undefined","undefined");if(v(e)){var n="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(n,"string")}return m(e)?t.stylize(""+e,"number"):_(e)?t.stylize(""+e,"boolean"):y(e)?t.stylize("null","null"):void 0}function h(t){return"["+Error.prototype.toString.call(t)+"]"}function c(t,e,n,i,o){for(var r=[],a=0,s=e.length;a<s;++a)T(e,String(a))?r.push(f(t,e,n,i,String(a),!0)):r.push("");return o.forEach(function(o){o.match(/^\d+$/)||r.push(f(t,e,n,i,o,!0))}),r}function f(t,e,n,i,o,r){var a,s,u;if(u=Object.getOwnPropertyDescriptor(e,o)||{value:e[o]},u.get?s=u.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):u.set&&(s=t.stylize("[Setter]","special")),T(i,o)||(a="["+o+"]"),s||(t.seen.indexOf(u.value)<0?(s=y(n)?l(t,u.value,null):l(t,u.value,n-1),s.indexOf("\n")>-1&&(s=r?s.split("\n").map(function(t){return"  "+t}).join("\n").substr(2):"\n"+s.split("\n").map(function(t){return"   "+t}).join("\n"))):s=t.stylize("[Circular]","special")),L(a)){if(r&&o.match(/^\d+$/))return s;a=JSON.stringify(""+o),a.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=t.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=t.stylize(a,"string"))}return a+": "+s}function p(t,e,n){var i=0;return t.reduce(function(t,e){return i++,e.indexOf("\n")>=0&&i++,t+e.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?n[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+n[1]:n[0]+e+" "+t.join(", ")+" "+n[1]}function d(t){return Array.isArray(t)}function _(t){return"boolean"==typeof t}function y(t){return null===t}function g(t){return null==t}function m(t){return"number"==typeof t}function v(t){return"string"==typeof t}function b(t){return"symbol"==typeof t}function L(t){return void 0===t}function w(t){return k(t)&&"[object RegExp]"===C(t)}function k(t){return"object"==typeof t&&null!==t}function x(t){return k(t)&&"[object Date]"===C(t)}function M(t){return k(t)&&("[object Error]"===C(t)||t instanceof Error)}function P(t){return"function"==typeof t}function O(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t}function C(t){return Object.prototype.toString.call(t)}function T(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var S=/%[sdj%]/g;e.format=function(t){if(!v(t)){for(var e=[],n=0;n<arguments.length;n++)e.push(o(arguments[n]));return e.join(" ")}for(var n=1,i=arguments,r=i.length,a=String(t).replace(S,function(t){if("%%"===t)return"%";if(n>=r)return t;switch(t){case"%s":return String(i[n++]);case"%d":return Number(i[n++]);case"%j":try{return JSON.stringify(i[n++])}catch(t){return"[Circular]"}default:return t}}),s=i[n];n<r;s=i[++n])y(s)||!k(s)?a+=" "+s:a+=" "+o(s);return a},e.deprecate=function(n,o){function r(){if(!a){if(i.throwDeprecation)throw new Error(o);i.traceDeprecation,a=!0}return n.apply(this,arguments)}if(L(t.process))return function(){return e.deprecate(n,o).apply(this,arguments)};if(!0===i.noDeprecation)return n;var a=!1;return r};var E,D={};e.debuglog=function(t){if(L(E)&&(E=i.env.NODE_DEBUG||""),t=t.toUpperCase(),!D[t])if(new RegExp("\\b"+t+"\\b","i").test(E)){i.pid;D[t]=function(){e.format.apply(e,arguments)}}else D[t]=function(){};return D[t]},e.inspect=o,o.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},o.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},e.isArray=d,e.isBoolean=_,e.isNull=y,e.isNullOrUndefined=g,e.isNumber=m,e.isString=v,e.isSymbol=b,e.isUndefined=L,e.isRegExp=w,e.isObject=k,e.isDate=x,e.isError=M,e.isFunction=P,e.isPrimitive=O,e.isBuffer=n(175);e.log=function(){},e.inherits=n(170),e._extend=function(t,e){if(!e||!k(e))return t;for(var n=Object.keys(e),i=n.length;i--;)t[n[i]]=e[n[i]];return t}}).call(e,n(16),n(13))},function(t,e,n){t.exports.VectorTile=n(178),t.exports.VectorTileFeature=n(14),t.exports.VectorTileLayer=n(15)},function(t,e,n){"use strict";function i(t,e){this.layers=t.readFields(o,{},e)}function o(t,e,n){if(3===t){var i=new r(n,n.readVarint()+n.pos);i.length&&(e[i.name]=i)}}var r=n(15);t.exports=i},function(t,e){t.exports={id:"core",version:"1.4.5-GA",date:"2020.6.4",skin:"default",authorization:{enable:!1,server:"internet",servers:{internet:"http://122.112.175.30:18082/gaea-license/",localhost:"http://192.168.3.97:8080/gaea-license/",security:"http://50.73.66.24:18185/gaea-license/",video:"http://32.90.8.157:18185/gaea-license/",government:"http://2.46.3.209:18185/gaea-license/"}}}},function(t,e,n){n(17),t.exports=n(18)}]);